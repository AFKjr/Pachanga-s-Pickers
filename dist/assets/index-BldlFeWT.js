const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/combine_docs_chain-BjqMKSDB.js","assets/llm_chain-ecYQnJlX.js","assets/vector_db_qa-FtbhRH4j.js","assets/api_chain-Cwj0qsBz.js"])))=>i.map(i=>d[i]);
var U4=Object.defineProperty;var M4=(n,e,t)=>e in n?U4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ta=(n,e,t)=>M4(n,typeof e!="symbol"?e+"":e,t);function F4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function B4(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var FN={exports:{}},H0={},BN={exports:{}},Ag={exports:{}};Ag.exports;(function(n,e){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t="18.3.1",r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),T=Symbol.iterator,R="@@iterator";function A(x){if(x===null||typeof x!="object")return null;var $=T&&x[T]||x[R];return typeof $=="function"?$:null}var O={current:null},P={transition:null},j={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},q={current:null},G={},ie=null;function de(x){ie=x}G.setExtraStackFrame=function(x){ie=x},G.getCurrentStack=null,G.getStackAddendum=function(){var x="";ie&&(x+=ie);var $=G.getCurrentStack;return $&&(x+=$()||""),x};var Ae=!1,ke=!1,st=!1,Ue=!1,ae=!1,Q={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:q};Q.ReactDebugCurrentFrame=G,Q.ReactCurrentActQueue=j;function ye(x){{for(var $=arguments.length,V=new Array($>1?$-1:0),W=1;W<$;W++)V[W-1]=arguments[W];Se("warn",x,V)}}function te(x){{for(var $=arguments.length,V=new Array($>1?$-1:0),W=1;W<$;W++)V[W-1]=arguments[W];Se("error",x,V)}}function Se(x,$,V){{var W=Q.ReactDebugCurrentFrame,ue=W.getStackAddendum();ue!==""&&($+="%s",V=V.concat([ue]));var We=V.map(function(Oe){return String(Oe)});We.unshift("Warning: "+$),Function.prototype.apply.call(console[x],console,We)}}var _e={};function Pe(x,$){{var V=x.constructor,W=V&&(V.displayName||V.name)||"ReactClass",ue=W+"."+$;if(_e[ue])return;te("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",$,W),_e[ue]=!0}}var Ze={isMounted:function(x){return!1},enqueueForceUpdate:function(x,$,V){Pe(x,"forceUpdate")},enqueueReplaceState:function(x,$,V,W){Pe(x,"replaceState")},enqueueSetState:function(x,$,V,W){Pe(x,"setState")}},$e=Object.assign,ht={};Object.freeze(ht);function Rt(x,$,V){this.props=x,this.context=$,this.refs=ht,this.updater=V||Ze}Rt.prototype.isReactComponent={},Rt.prototype.setState=function(x,$){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,$,"setState")},Rt.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};{var ut={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},ir=function(x,$){Object.defineProperty(Rt.prototype,x,{get:function(){ye("%s(...) is deprecated in plain JavaScript React classes. %s",$[0],$[1])}})};for(var Wt in ut)ut.hasOwnProperty(Wt)&&ir(Wt,ut[Wt])}function Tr(){}Tr.prototype=Rt.prototype;function cr(x,$,V){this.props=x,this.context=$,this.refs=ht,this.updater=V||Ze}var Ht=cr.prototype=new Tr;Ht.constructor=cr,$e(Ht,Rt.prototype),Ht.isPureReactComponent=!0;function Jt(){var x={current:null};return Object.seal(x),x}var Cr=Array.isArray;function sr(x){return Cr(x)}function Rr(x){{var $=typeof Symbol=="function"&&Symbol.toStringTag,V=$&&x[Symbol.toStringTag]||x.constructor.name||"Object";return V}}function dr(x){try{return fr(x),!1}catch{return!0}}function fr(x){return""+x}function Nn(x){if(dr(x))return te("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Rr(x)),fr(x)}function Jn(x,$,V){var W=x.displayName;if(W)return W;var ue=$.displayName||$.name||"";return ue!==""?V+"("+ue+")":V}function ua(x){return x.displayName||"Context"}function ce(x){if(x==null)return null;if(typeof x.tag=="number"&&te("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case o:return"Fragment";case i:return"Portal";case c:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case b:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case p:var $=x;return ua($)+".Consumer";case f:var V=x;return ua(V._context)+".Provider";case m:return Jn(x,x.render,"ForwardRef");case _:var W=x.displayName||null;return W!==null?W:ce(x.type)||"Memo";case S:{var ue=x,We=ue._payload,Oe=ue._init;try{return ce(Oe(We))}catch{return null}}}return null}var Er=Object.prototype.hasOwnProperty,Re={key:!0,ref:!0,__self:!0,__source:!0},Ee,Me,le;le={};function se(x){if(Er.call(x,"ref")){var $=Object.getOwnPropertyDescriptor(x,"ref").get;if($&&$.isReactWarning)return!1}return x.ref!==void 0}function Ie(x){if(Er.call(x,"key")){var $=Object.getOwnPropertyDescriptor(x,"key").get;if($&&$.isReactWarning)return!1}return x.key!==void 0}function Fe(x,$){var V=function(){Ee||(Ee=!0,te("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",$))};V.isReactWarning=!0,Object.defineProperty(x,"key",{get:V,configurable:!0})}function or(x,$){var V=function(){Me||(Me=!0,te("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",$))};V.isReactWarning=!0,Object.defineProperty(x,"ref",{get:V,configurable:!0})}function fe(x){if(typeof x.ref=="string"&&q.current&&x.__self&&q.current.stateNode!==x.__self){var $=ce(q.current.type);le[$]||(te('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',$,x.ref),le[$]=!0)}}var De=function(x,$,V,W,ue,We,Oe){var rt={$$typeof:r,type:x,key:$,ref:V,props:Oe,_owner:We};return rt._store={},Object.defineProperty(rt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(rt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:W}),Object.defineProperty(rt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ue}),Object.freeze&&(Object.freeze(rt.props),Object.freeze(rt)),rt};function pt(x,$,V){var W,ue={},We=null,Oe=null,rt=null,wt=null;if($!=null){se($)&&(Oe=$.ref,fe($)),Ie($)&&(Nn($.key),We=""+$.key),rt=$.__self===void 0?null:$.__self,wt=$.__source===void 0?null:$.__source;for(W in $)Er.call($,W)&&!Re.hasOwnProperty(W)&&(ue[W]=$[W])}var Mt=arguments.length-2;if(Mt===1)ue.children=V;else if(Mt>1){for(var Yt=Array(Mt),Xt=0;Xt<Mt;Xt++)Yt[Xt]=arguments[Xt+2];Object.freeze&&Object.freeze(Yt),ue.children=Yt}if(x&&x.defaultProps){var yt=x.defaultProps;for(W in yt)ue[W]===void 0&&(ue[W]=yt[W])}if(We||Oe){var lr=typeof x=="function"?x.displayName||x.name||"Unknown":x;We&&Fe(ue,lr),Oe&&or(ue,lr)}return De(x,We,Oe,rt,wt,q.current,ue)}function Ut(x,$){var V=De(x.type,$,x.ref,x._self,x._source,x._owner,x.props);return V}function tr(x,$,V){if(x==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var W,ue=$e({},x.props),We=x.key,Oe=x.ref,rt=x._self,wt=x._source,Mt=x._owner;if($!=null){se($)&&(Oe=$.ref,Mt=q.current),Ie($)&&(Nn($.key),We=""+$.key);var Yt;x.type&&x.type.defaultProps&&(Yt=x.type.defaultProps);for(W in $)Er.call($,W)&&!Re.hasOwnProperty(W)&&($[W]===void 0&&Yt!==void 0?ue[W]=Yt[W]:ue[W]=$[W])}var Xt=arguments.length-2;if(Xt===1)ue.children=V;else if(Xt>1){for(var yt=Array(Xt),lr=0;lr<Xt;lr++)yt[lr]=arguments[lr+2];ue.children=yt}return De(x.type,We,Oe,rt,wt,Mt,ue)}function hr(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}var pr=".",Sn=":";function vr(x){var $=/[=:]/g,V={"=":"=0",":":"=2"},W=x.replace($,function(ue){return V[ue]});return"$"+W}var Kt=!1,br=/\/+/g;function Va(x){return x.replace(br,"$&/")}function Ha(x,$){return typeof x=="object"&&x!==null&&x.key!=null?(Nn(x.key),vr(""+x.key)):$.toString(36)}function Ra(x,$,V,W,ue){var We=typeof x;(We==="undefined"||We==="boolean")&&(x=null);var Oe=!1;if(x===null)Oe=!0;else switch(We){case"string":case"number":Oe=!0;break;case"object":switch(x.$$typeof){case r:case i:Oe=!0}}if(Oe){var rt=x,wt=ue(rt),Mt=W===""?pr+Ha(rt,0):W;if(sr(wt)){var Yt="";Mt!=null&&(Yt=Va(Mt)+"/"),Ra(wt,$,Yt,"",function(Gy){return Gy})}else wt!=null&&(hr(wt)&&(wt.key&&(!rt||rt.key!==wt.key)&&Nn(wt.key),wt=Ut(wt,V+(wt.key&&(!rt||rt.key!==wt.key)?Va(""+wt.key)+"/":"")+Mt)),$.push(wt));return 1}var Xt,yt,lr=0,Or=W===""?pr:W+Sn;if(sr(x))for(var qo=0;qo<x.length;qo++)Xt=x[qo],yt=Or+Ha(Xt,qo),lr+=Ra(Xt,$,V,yt,ue);else{var Kc=A(x);if(typeof Kc=="function"){var ns=x;Kc===ns.entries&&(Kt||ye("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Kt=!0);for(var Zc=Kc.call(ns),Yc,qy=0;!(Yc=Zc.next()).done;)Xt=Yc.value,yt=Or+Ha(Xt,qy++),lr+=Ra(Xt,$,V,yt,ue)}else if(We==="object"){var Gh=String(x);throw new Error("Objects are not valid as a React child (found: "+(Gh==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":Gh)+"). If you meant to render a collection of children, use an array instead.")}}return lr}function es(x,$,V){if(x==null)return x;var W=[],ue=0;return Ra(x,W,"","",function(We){return $.call(V,We,ue++)}),W}function Ic(x){var $=0;return es(x,function(){$++}),$}function jo(x,$,V){es(x,function(){$.apply(this,arguments)},V)}function Mu(x){return es(x,function($){return $})||[]}function Fu(x){if(!hr(x))throw new Error("React.Children.only expected to receive a single React element child.");return x}function Do(x){var $={$$typeof:p,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};$.Provider={$$typeof:f,_context:$};var V=!1,W=!1,ue=!1;{var We={$$typeof:p,_context:$};Object.defineProperties(We,{Provider:{get:function(){return W||(W=!0,te("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),$.Provider},set:function(Oe){$.Provider=Oe}},_currentValue:{get:function(){return $._currentValue},set:function(Oe){$._currentValue=Oe}},_currentValue2:{get:function(){return $._currentValue2},set:function(Oe){$._currentValue2=Oe}},_threadCount:{get:function(){return $._threadCount},set:function(Oe){$._threadCount=Oe}},Consumer:{get:function(){return V||(V=!0,te("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),$.Consumer}},displayName:{get:function(){return $.displayName},set:function(Oe){ue||(ye("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Oe),ue=!0)}}}),$.Consumer=We}return $._currentRenderer=null,$._currentRenderer2=null,$}var qa=-1,Oa=0,la=1,Ei=2;function Lo(x){if(x._status===qa){var $=x._result,V=$();if(V.then(function(We){if(x._status===Oa||x._status===qa){var Oe=x;Oe._status=la,Oe._result=We}},function(We){if(x._status===Oa||x._status===qa){var Oe=x;Oe._status=Ei,Oe._result=We}}),x._status===qa){var W=x;W._status=Oa,W._result=V}}if(x._status===la){var ue=x._result;return ue===void 0&&te(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,ue),"default"in ue||te(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,ue),ue.default}else throw x._result}function I(x){var $={_status:qa,_result:x},V={$$typeof:S,_payload:$,_init:Lo};{var W,ue;Object.defineProperties(V,{defaultProps:{configurable:!0,get:function(){return W},set:function(We){te("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),W=We,Object.defineProperty(V,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return ue},set:function(We){te("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),ue=We,Object.defineProperty(V,"propTypes",{enumerable:!0})}}})}return V}function re(x){x!=null&&x.$$typeof===_?te("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof x!="function"?te("forwardRef requires a render function but was given %s.",x===null?"null":typeof x):x.length!==0&&x.length!==2&&te("forwardRef render functions accept exactly two parameters: props and ref. %s",x.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),x!=null&&(x.defaultProps!=null||x.propTypes!=null)&&te("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var $={$$typeof:m,render:x};{var V;Object.defineProperty($,"displayName",{enumerable:!1,configurable:!0,get:function(){return V},set:function(W){V=W,!x.name&&!x.displayName&&(x.displayName=W)}})}return $}var me;me=Symbol.for("react.module.reference");function Be(x){return!!(typeof x=="string"||typeof x=="function"||x===o||x===c||ae||x===u||x===y||x===b||Ue||x===C||Ae||ke||st||typeof x=="object"&&x!==null&&(x.$$typeof===S||x.$$typeof===_||x.$$typeof===f||x.$$typeof===p||x.$$typeof===m||x.$$typeof===me||x.getModuleId!==void 0))}function bt(x,$){Be(x)||te("memo: The first argument must be a component. Instead received: %s",x===null?"null":typeof x);var V={$$typeof:_,type:x,compare:$===void 0?null:$};{var W;Object.defineProperty(V,"displayName",{enumerable:!1,configurable:!0,get:function(){return W},set:function(ue){W=ue,!x.name&&!x.displayName&&(x.displayName=ue)}})}return V}function Xe(){var x=O.current;return x===null&&te(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),x}function ct(x){var $=Xe();if(x._context!==void 0){var V=x._context;V.Consumer===x?te("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):V.Provider===x&&te("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return $.useContext(x)}function He(x){var $=Xe();return $.useState(x)}function jr(x,$,V){var W=Xe();return W.useReducer(x,$,V)}function rr(x){var $=Xe();return $.useRef(x)}function nr(x,$){var V=Xe();return V.useEffect(x,$)}function En(x,$){var V=Xe();return V.useInsertionEffect(x,$)}function xi(x,$){var V=Xe();return V.useLayoutEffect(x,$)}function Ga(x,$){var V=Xe();return V.useCallback(x,$)}function Dr(x,$){var V=Xe();return V.useMemo(x,$)}function Uo(x,$,V){var W=Xe();return W.useImperativeHandle(x,$,V)}function Wa(x,$){{var V=Xe();return V.useDebugValue(x,$)}}function mt(){var x=Xe();return x.useTransition()}function Mo(x){var $=Xe();return $.useDeferredValue(x)}function jh(){var x=Xe();return x.useId()}function Dh(x,$,V){var W=Xe();return W.useSyncExternalStore(x,$,V)}var $s=0,jc,Dc,Lc,Uc,Mc,Lh,Uh;function Bu(){}Bu.__reactDisabledLog=!0;function Fc(){{if($s===0){jc=console.log,Dc=console.info,Lc=console.warn,Uc=console.error,Mc=console.group,Lh=console.groupCollapsed,Uh=console.groupEnd;var x={configurable:!0,enumerable:!0,value:Bu,writable:!0};Object.defineProperties(console,{info:x,log:x,warn:x,error:x,group:x,groupCollapsed:x,groupEnd:x})}$s++}}function Ti(){{if($s--,$s===0){var x={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:$e({},x,{value:jc}),info:$e({},x,{value:Dc}),warn:$e({},x,{value:Lc}),error:$e({},x,{value:Uc}),group:$e({},x,{value:Mc}),groupCollapsed:$e({},x,{value:Lh}),groupEnd:$e({},x,{value:Uh})})}$s<0&&te("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Fo=Q.ReactCurrentDispatcher,Is;function zu(x,$,V){{if(Is===void 0)try{throw Error()}catch(ue){var W=ue.stack.trim().match(/\n( *(at )?)/);Is=W&&W[1]||""}return`
`+Is+x}}var Bo=!1,Vu;{var Bc=typeof WeakMap=="function"?WeakMap:Map;Vu=new Bc}function Mh(x,$){if(!x||Bo)return"";{var V=Vu.get(x);if(V!==void 0)return V}var W;Bo=!0;var ue=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var We;We=Fo.current,Fo.current=null,Fc();try{if($){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(Or){W=Or}Reflect.construct(x,[],Oe)}else{try{Oe.call()}catch(Or){W=Or}x.call(Oe.prototype)}}else{try{throw Error()}catch(Or){W=Or}x()}}catch(Or){if(Or&&W&&typeof Or.stack=="string"){for(var rt=Or.stack.split(`
`),wt=W.stack.split(`
`),Mt=rt.length-1,Yt=wt.length-1;Mt>=1&&Yt>=0&&rt[Mt]!==wt[Yt];)Yt--;for(;Mt>=1&&Yt>=0;Mt--,Yt--)if(rt[Mt]!==wt[Yt]){if(Mt!==1||Yt!==1)do if(Mt--,Yt--,Yt<0||rt[Mt]!==wt[Yt]){var Xt=`
`+rt[Mt].replace(" at new "," at ");return x.displayName&&Xt.includes("<anonymous>")&&(Xt=Xt.replace("<anonymous>",x.displayName)),typeof x=="function"&&Vu.set(x,Xt),Xt}while(Mt>=1&&Yt>=0);break}}}finally{Bo=!1,Fo.current=We,Ti(),Error.prepareStackTrace=ue}var yt=x?x.displayName||x.name:"",lr=yt?zu(yt):"";return typeof x=="function"&&Vu.set(x,lr),lr}function zc(x,$,V){return Mh(x,!1)}function Fy(x){var $=x.prototype;return!!($&&$.isReactComponent)}function zo(x,$,V){if(x==null)return"";if(typeof x=="function")return Mh(x,Fy(x));if(typeof x=="string")return zu(x);switch(x){case y:return zu("Suspense");case b:return zu("SuspenseList")}if(typeof x=="object")switch(x.$$typeof){case m:return zc(x.render);case _:return zo(x.type,$,V);case S:{var W=x,ue=W._payload,We=W._init;try{return zo(We(ue),$,V)}catch{}}}return""}var Fh={},Vc=Q.ReactDebugCurrentFrame;function kt(x){if(x){var $=x._owner,V=zo(x.type,x._source,$?$.type:null);Vc.setExtraStackFrame(V)}else Vc.setExtraStackFrame(null)}function By(x,$,V,W,ue){{var We=Function.call.bind(Er);for(var Oe in x)if(We(x,Oe)){var rt=void 0;try{if(typeof x[Oe]!="function"){var wt=Error((W||"React class")+": "+V+" type `"+Oe+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof x[Oe]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw wt.name="Invariant Violation",wt}rt=x[Oe]($,Oe,W,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Mt){rt=Mt}rt&&!(rt instanceof Error)&&(kt(ue),te("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",W||"React class",V,Oe,typeof rt),kt(null)),rt instanceof Error&&!(rt.message in Fh)&&(Fh[rt.message]=!0,kt(ue),te("Failed %s type: %s",V,rt.message),kt(null))}}}function ts(x){if(x){var $=x._owner,V=zo(x.type,x._source,$?$.type:null);de(V)}else de(null)}var it;it=!1;function Hc(){if(q.current){var x=ce(q.current.type);if(x)return`

Check the render method of \``+x+"`."}return""}function Pn(x){if(x!==void 0){var $=x.fileName.replace(/^.*[\\\/]/,""),V=x.lineNumber;return`

Check your code at `+$+":"+V+"."}return""}function Vo(x){return x!=null?Pn(x.__source):""}var js={};function zy(x){var $=Hc();if(!$){var V=typeof x=="string"?x:x.displayName||x.name;V&&($=`

Check the top-level render call using <`+V+">.")}return $}function Qr(x,$){if(!(!x._store||x._store.validated||x.key!=null)){x._store.validated=!0;var V=zy($);if(!js[V]){js[V]=!0;var W="";x&&x._owner&&x._owner!==q.current&&(W=" It was passed a child from "+ce(x._owner.type)+"."),ts(x),te('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',V,W),ts(null)}}}function ur(x,$){if(typeof x=="object"){if(sr(x))for(var V=0;V<x.length;V++){var W=x[V];hr(W)&&Qr(W,$)}else if(hr(x))x._store&&(x._store.validated=!0);else if(x){var ue=A(x);if(typeof ue=="function"&&ue!==x.entries)for(var We=ue.call(x),Oe;!(Oe=We.next()).done;)hr(Oe.value)&&Qr(Oe.value,$)}}}function Bh(x){{var $=x.type;if($==null||typeof $=="string")return;var V;if(typeof $=="function")V=$.propTypes;else if(typeof $=="object"&&($.$$typeof===m||$.$$typeof===_))V=$.propTypes;else return;if(V){var W=ce($);By(V,x.props,"prop",W,x)}else if($.PropTypes!==void 0&&!it){it=!0;var ue=ce($);te("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ue||"Unknown")}typeof $.getDefaultProps=="function"&&!$.getDefaultProps.isReactClassApproved&&te("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Aa(x){{for(var $=Object.keys(x.props),V=0;V<$.length;V++){var W=$[V];if(W!=="children"&&W!=="key"){ts(x),te("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",W),ts(null);break}}x.ref!==null&&(ts(x),te("Invalid attribute `ref` supplied to `React.Fragment`."),ts(null))}}function $n(x,$,V){var W=Be(x);if(!W){var ue="";(x===void 0||typeof x=="object"&&x!==null&&Object.keys(x).length===0)&&(ue+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var We=Vo($);We?ue+=We:ue+=Hc();var Oe;x===null?Oe="null":sr(x)?Oe="array":x!==void 0&&x.$$typeof===r?(Oe="<"+(ce(x.type)||"Unknown")+" />",ue=" Did you accidentally export a JSX literal instead of a component?"):Oe=typeof x,te("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Oe,ue)}var rt=pt.apply(this,arguments);if(rt==null)return rt;if(W)for(var wt=2;wt<arguments.length;wt++)ur(arguments[wt],x);return x===o?Aa(rt):Bh(rt),rt}var Ja=!1;function Vy(x){var $=$n.bind(null,x);return $.type=x,Ja||(Ja=!0,ye("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty($,"type",{enumerable:!1,get:function(){return ye("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:x}),x}}),$}function qc(x,$,V){for(var W=tr.apply(this,arguments),ue=2;ue<arguments.length;ue++)ur(arguments[ue],W.type);return Bh(W),W}function zh(x,$){var V=P.transition;P.transition={};var W=P.transition;P.transition._updatedFibers=new Set;try{x()}finally{if(P.transition=V,V===null&&W._updatedFibers){var ue=W._updatedFibers.size;ue>10&&ye("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),W._updatedFibers.clear()}}}var Gc=!1,Hu=null;function Hy(x){if(Hu===null)try{var $=("require"+Math.random()).slice(0,7),V=n&&n[$];Hu=V.call(n,"timers").setImmediate}catch{Hu=function(ue){Gc===!1&&(Gc=!0,typeof MessageChannel>"u"&&te("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var We=new MessageChannel;We.port1.onmessage=ue,We.port2.postMessage(void 0)}}return Hu(x)}var Ds=0,Ho=!1;function Wc(x){{var $=Ds;Ds++,j.current===null&&(j.current=[]);var V=j.isBatchingLegacy,W;try{if(j.isBatchingLegacy=!0,W=x(),!V&&j.didScheduleLegacyUpdate){var ue=j.current;ue!==null&&(j.didScheduleLegacyUpdate=!1,Wu(ue))}}catch(yt){throw rs($),yt}finally{j.isBatchingLegacy=V}if(W!==null&&typeof W=="object"&&typeof W.then=="function"){var We=W,Oe=!1,rt={then:function(yt,lr){Oe=!0,We.then(function(Or){rs($),Ds===0?qu(Or,yt,lr):yt(Or)},function(Or){rs($),lr(Or)})}};return!Ho&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Oe||(Ho=!0,te("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),rt}else{var wt=W;if(rs($),Ds===0){var Mt=j.current;Mt!==null&&(Wu(Mt),j.current=null);var Yt={then:function(yt,lr){j.current===null?(j.current=[],qu(wt,yt,lr)):yt(wt)}};return Yt}else{var Xt={then:function(yt,lr){yt(wt)}};return Xt}}}}function rs(x){x!==Ds-1&&te("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Ds=x}function qu(x,$,V){{var W=j.current;if(W!==null)try{Wu(W),Hy(function(){W.length===0?(j.current=null,$(x)):qu(x,$,V)})}catch(ue){V(ue)}else $(x)}}var Gu=!1;function Wu(x){if(!Gu){Gu=!0;var $=0;try{for(;$<x.length;$++){var V=x[$];do V=V(!0);while(V!==null)}x.length=0}catch(W){throw x=x.slice($+1),W}finally{Gu=!1}}}var Vh=$n,Hh=qc,Jc=Vy,qh={map:es,forEach:jo,count:Ic,toArray:Mu,only:Fu};e.Children=qh,e.Component=Rt,e.Fragment=o,e.Profiler=c,e.PureComponent=cr,e.StrictMode=u,e.Suspense=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,e.act=Wc,e.cloneElement=Hh,e.createContext=Do,e.createElement=Vh,e.createFactory=Jc,e.createRef=Jt,e.forwardRef=re,e.isValidElement=hr,e.lazy=I,e.memo=bt,e.startTransition=zh,e.unstable_act=Wc,e.useCallback=Ga,e.useContext=ct,e.useDebugValue=Wa,e.useDeferredValue=Mo,e.useEffect=nr,e.useId=jh,e.useImperativeHandle=Uo,e.useInsertionEffect=En,e.useLayoutEffect=xi,e.useMemo=Dr,e.useReducer=jr,e.useRef=rr,e.useState=He,e.useSyncExternalStore=Dh,e.useTransition=mt,e.version=t,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(Ag,Ag.exports);var z4=Ag.exports;BN.exports=z4;var X=BN.exports;const zN=iy(X),V4=F4({__proto__:null,default:zN},[X]);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var n=X,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),S=Symbol.iterator,C="@@iterator";function T(I){if(I===null||typeof I!="object")return null;var re=S&&I[S]||I[C];return typeof re=="function"?re:null}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function A(I){{for(var re=arguments.length,me=new Array(re>1?re-1:0),Be=1;Be<re;Be++)me[Be-1]=arguments[Be];O("error",I,me)}}function O(I,re,me){{var Be=R.ReactDebugCurrentFrame,bt=Be.getStackAddendum();bt!==""&&(re+="%s",me=me.concat([bt]));var Xe=me.map(function(ct){return String(ct)});Xe.unshift("Warning: "+re),Function.prototype.apply.call(console[I],console,Xe)}}var P=!1,j=!1,q=!1,G=!1,ie=!1,de;de=Symbol.for("react.module.reference");function Ae(I){return!!(typeof I=="string"||typeof I=="function"||I===r||I===o||ie||I===i||I===p||I===m||G||I===_||P||j||q||typeof I=="object"&&I!==null&&(I.$$typeof===b||I.$$typeof===y||I.$$typeof===u||I.$$typeof===c||I.$$typeof===f||I.$$typeof===de||I.getModuleId!==void 0))}function ke(I,re,me){var Be=I.displayName;if(Be)return Be;var bt=re.displayName||re.name||"";return bt!==""?me+"("+bt+")":me}function st(I){return I.displayName||"Context"}function Ue(I){if(I==null)return null;if(typeof I.tag=="number"&&A("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof I=="function")return I.displayName||I.name||null;if(typeof I=="string")return I;switch(I){case r:return"Fragment";case t:return"Portal";case o:return"Profiler";case i:return"StrictMode";case p:return"Suspense";case m:return"SuspenseList"}if(typeof I=="object")switch(I.$$typeof){case c:var re=I;return st(re)+".Consumer";case u:var me=I;return st(me._context)+".Provider";case f:return ke(I,I.render,"ForwardRef");case y:var Be=I.displayName||null;return Be!==null?Be:Ue(I.type)||"Memo";case b:{var bt=I,Xe=bt._payload,ct=bt._init;try{return Ue(ct(Xe))}catch{return null}}}return null}var ae=Object.assign,Q=0,ye,te,Se,_e,Pe,Ze,$e;function ht(){}ht.__reactDisabledLog=!0;function Rt(){{if(Q===0){ye=console.log,te=console.info,Se=console.warn,_e=console.error,Pe=console.group,Ze=console.groupCollapsed,$e=console.groupEnd;var I={configurable:!0,enumerable:!0,value:ht,writable:!0};Object.defineProperties(console,{info:I,log:I,warn:I,error:I,group:I,groupCollapsed:I,groupEnd:I})}Q++}}function ut(){{if(Q--,Q===0){var I={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ae({},I,{value:ye}),info:ae({},I,{value:te}),warn:ae({},I,{value:Se}),error:ae({},I,{value:_e}),group:ae({},I,{value:Pe}),groupCollapsed:ae({},I,{value:Ze}),groupEnd:ae({},I,{value:$e})})}Q<0&&A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ir=R.ReactCurrentDispatcher,Wt;function Tr(I,re,me){{if(Wt===void 0)try{throw Error()}catch(bt){var Be=bt.stack.trim().match(/\n( *(at )?)/);Wt=Be&&Be[1]||""}return`
`+Wt+I}}var cr=!1,Ht;{var Jt=typeof WeakMap=="function"?WeakMap:Map;Ht=new Jt}function Cr(I,re){if(!I||cr)return"";{var me=Ht.get(I);if(me!==void 0)return me}var Be;cr=!0;var bt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Xe;Xe=ir.current,ir.current=null,Rt();try{if(re){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Dr){Be=Dr}Reflect.construct(I,[],ct)}else{try{ct.call()}catch(Dr){Be=Dr}I.call(ct.prototype)}}else{try{throw Error()}catch(Dr){Be=Dr}I()}}catch(Dr){if(Dr&&Be&&typeof Dr.stack=="string"){for(var He=Dr.stack.split(`
`),jr=Be.stack.split(`
`),rr=He.length-1,nr=jr.length-1;rr>=1&&nr>=0&&He[rr]!==jr[nr];)nr--;for(;rr>=1&&nr>=0;rr--,nr--)if(He[rr]!==jr[nr]){if(rr!==1||nr!==1)do if(rr--,nr--,nr<0||He[rr]!==jr[nr]){var En=`
`+He[rr].replace(" at new "," at ");return I.displayName&&En.includes("<anonymous>")&&(En=En.replace("<anonymous>",I.displayName)),typeof I=="function"&&Ht.set(I,En),En}while(rr>=1&&nr>=0);break}}}finally{cr=!1,ir.current=Xe,ut(),Error.prepareStackTrace=bt}var xi=I?I.displayName||I.name:"",Ga=xi?Tr(xi):"";return typeof I=="function"&&Ht.set(I,Ga),Ga}function sr(I,re,me){return Cr(I,!1)}function Rr(I){var re=I.prototype;return!!(re&&re.isReactComponent)}function dr(I,re,me){if(I==null)return"";if(typeof I=="function")return Cr(I,Rr(I));if(typeof I=="string")return Tr(I);switch(I){case p:return Tr("Suspense");case m:return Tr("SuspenseList")}if(typeof I=="object")switch(I.$$typeof){case f:return sr(I.render);case y:return dr(I.type,re,me);case b:{var Be=I,bt=Be._payload,Xe=Be._init;try{return dr(Xe(bt),re,me)}catch{}}}return""}var fr=Object.prototype.hasOwnProperty,Nn={},Jn=R.ReactDebugCurrentFrame;function ua(I){if(I){var re=I._owner,me=dr(I.type,I._source,re?re.type:null);Jn.setExtraStackFrame(me)}else Jn.setExtraStackFrame(null)}function ce(I,re,me,Be,bt){{var Xe=Function.call.bind(fr);for(var ct in I)if(Xe(I,ct)){var He=void 0;try{if(typeof I[ct]!="function"){var jr=Error((Be||"React class")+": "+me+" type `"+ct+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof I[ct]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw jr.name="Invariant Violation",jr}He=I[ct](re,ct,Be,me,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(rr){He=rr}He&&!(He instanceof Error)&&(ua(bt),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Be||"React class",me,ct,typeof He),ua(null)),He instanceof Error&&!(He.message in Nn)&&(Nn[He.message]=!0,ua(bt),A("Failed %s type: %s",me,He.message),ua(null))}}}var Er=Array.isArray;function Re(I){return Er(I)}function Ee(I){{var re=typeof Symbol=="function"&&Symbol.toStringTag,me=re&&I[Symbol.toStringTag]||I.constructor.name||"Object";return me}}function Me(I){try{return le(I),!1}catch{return!0}}function le(I){return""+I}function se(I){if(Me(I))return A("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ee(I)),le(I)}var Ie=R.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0},or,fe,De;De={};function pt(I){if(fr.call(I,"ref")){var re=Object.getOwnPropertyDescriptor(I,"ref").get;if(re&&re.isReactWarning)return!1}return I.ref!==void 0}function Ut(I){if(fr.call(I,"key")){var re=Object.getOwnPropertyDescriptor(I,"key").get;if(re&&re.isReactWarning)return!1}return I.key!==void 0}function tr(I,re){if(typeof I.ref=="string"&&Ie.current&&re&&Ie.current.stateNode!==re){var me=Ue(Ie.current.type);De[me]||(A('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',Ue(Ie.current.type),I.ref),De[me]=!0)}}function hr(I,re){{var me=function(){or||(or=!0,A("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",re))};me.isReactWarning=!0,Object.defineProperty(I,"key",{get:me,configurable:!0})}}function pr(I,re){{var me=function(){fe||(fe=!0,A("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",re))};me.isReactWarning=!0,Object.defineProperty(I,"ref",{get:me,configurable:!0})}}var Sn=function(I,re,me,Be,bt,Xe,ct){var He={$$typeof:e,type:I,key:re,ref:me,props:ct,_owner:Xe};return He._store={},Object.defineProperty(He._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(He,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Be}),Object.defineProperty(He,"_source",{configurable:!1,enumerable:!1,writable:!1,value:bt}),Object.freeze&&(Object.freeze(He.props),Object.freeze(He)),He};function vr(I,re,me,Be,bt){{var Xe,ct={},He=null,jr=null;me!==void 0&&(se(me),He=""+me),Ut(re)&&(se(re.key),He=""+re.key),pt(re)&&(jr=re.ref,tr(re,bt));for(Xe in re)fr.call(re,Xe)&&!Fe.hasOwnProperty(Xe)&&(ct[Xe]=re[Xe]);if(I&&I.defaultProps){var rr=I.defaultProps;for(Xe in rr)ct[Xe]===void 0&&(ct[Xe]=rr[Xe])}if(He||jr){var nr=typeof I=="function"?I.displayName||I.name||"Unknown":I;He&&hr(ct,nr),jr&&pr(ct,nr)}return Sn(I,He,jr,bt,Be,Ie.current,ct)}}var Kt=R.ReactCurrentOwner,br=R.ReactDebugCurrentFrame;function Va(I){if(I){var re=I._owner,me=dr(I.type,I._source,re?re.type:null);br.setExtraStackFrame(me)}else br.setExtraStackFrame(null)}var Ha;Ha=!1;function Ra(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function es(){{if(Kt.current){var I=Ue(Kt.current.type);if(I)return`

Check the render method of \``+I+"`."}return""}}function Ic(I){{if(I!==void 0){var re=I.fileName.replace(/^.*[\\\/]/,""),me=I.lineNumber;return`

Check your code at `+re+":"+me+"."}return""}}var jo={};function Mu(I){{var re=es();if(!re){var me=typeof I=="string"?I:I.displayName||I.name;me&&(re=`

Check the top-level render call using <`+me+">.")}return re}}function Fu(I,re){{if(!I._store||I._store.validated||I.key!=null)return;I._store.validated=!0;var me=Mu(re);if(jo[me])return;jo[me]=!0;var Be="";I&&I._owner&&I._owner!==Kt.current&&(Be=" It was passed a child from "+Ue(I._owner.type)+"."),Va(I),A('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',me,Be),Va(null)}}function Do(I,re){{if(typeof I!="object")return;if(Re(I))for(var me=0;me<I.length;me++){var Be=I[me];Ra(Be)&&Fu(Be,re)}else if(Ra(I))I._store&&(I._store.validated=!0);else if(I){var bt=T(I);if(typeof bt=="function"&&bt!==I.entries)for(var Xe=bt.call(I),ct;!(ct=Xe.next()).done;)Ra(ct.value)&&Fu(ct.value,re)}}}function qa(I){{var re=I.type;if(re==null||typeof re=="string")return;var me;if(typeof re=="function")me=re.propTypes;else if(typeof re=="object"&&(re.$$typeof===f||re.$$typeof===y))me=re.propTypes;else return;if(me){var Be=Ue(re);ce(me,I.props,"prop",Be,I)}else if(re.PropTypes!==void 0&&!Ha){Ha=!0;var bt=Ue(re);A("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",bt||"Unknown")}typeof re.getDefaultProps=="function"&&!re.getDefaultProps.isReactClassApproved&&A("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Oa(I){{for(var re=Object.keys(I.props),me=0;me<re.length;me++){var Be=re[me];if(Be!=="children"&&Be!=="key"){Va(I),A("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Be),Va(null);break}}I.ref!==null&&(Va(I),A("Invalid attribute `ref` supplied to `React.Fragment`."),Va(null))}}var la={};function Ei(I,re,me,Be,bt,Xe){{var ct=Ae(I);if(!ct){var He="";(I===void 0||typeof I=="object"&&I!==null&&Object.keys(I).length===0)&&(He+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var jr=Ic(bt);jr?He+=jr:He+=es();var rr;I===null?rr="null":Re(I)?rr="array":I!==void 0&&I.$$typeof===e?(rr="<"+(Ue(I.type)||"Unknown")+" />",He=" Did you accidentally export a JSX literal instead of a component?"):rr=typeof I,A("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",rr,He)}var nr=vr(I,re,me,bt,Xe);if(nr==null)return nr;if(ct){var En=re.children;if(En!==void 0)if(Be)if(Re(En)){for(var xi=0;xi<En.length;xi++)Do(En[xi],I);Object.freeze&&Object.freeze(En)}else A("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Do(En,I)}if(fr.call(re,"key")){var Ga=Ue(I),Dr=Object.keys(re).filter(function(mt){return mt!=="key"}),Uo=Dr.length>0?"{key: someKey, "+Dr.join(": ..., ")+": ...}":"{key: someKey}";if(!la[Ga+Uo]){var Wa=Dr.length>0?"{"+Dr.join(": ..., ")+": ...}":"{}";A(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Uo,Ga,Wa,Ga),la[Ga+Uo]=!0}}return I===r?Oa(nr):qa(nr),nr}}var Lo=Ei;H0.Fragment=r,H0.jsxDEV=Lo})();FN.exports=H0;var U=FN.exports,q0={},VN={exports:{}},va={},HN={exports:{}},qN={};(function(n){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,t=5;function r(fe,De){var pt=fe.length;fe.push(De),u(fe,De,pt)}function i(fe){return fe.length===0?null:fe[0]}function o(fe){if(fe.length===0)return null;var De=fe[0],pt=fe.pop();return pt!==De&&(fe[0]=pt,c(fe,pt,0)),De}function u(fe,De,pt){for(var Ut=pt;Ut>0;){var tr=Ut-1>>>1,hr=fe[tr];if(f(hr,De)>0)fe[tr]=De,fe[Ut]=hr,Ut=tr;else return}}function c(fe,De,pt){for(var Ut=pt,tr=fe.length,hr=tr>>>1;Ut<hr;){var pr=(Ut+1)*2-1,Sn=fe[pr],vr=pr+1,Kt=fe[vr];if(f(Sn,De)<0)vr<tr&&f(Kt,Sn)<0?(fe[Ut]=Kt,fe[vr]=De,Ut=vr):(fe[Ut]=Sn,fe[pr]=De,Ut=pr);else if(vr<tr&&f(Kt,De)<0)fe[Ut]=Kt,fe[vr]=De,Ut=vr;else return}}function f(fe,De){var pt=fe.sortIndex-De.sortIndex;return pt!==0?pt:fe.id-De.id}var p=1,m=2,y=3,b=4,_=5;function S(fe,De){}var C=typeof performance=="object"&&typeof performance.now=="function";if(C){var T=performance;n.unstable_now=function(){return T.now()}}else{var R=Date,A=R.now();n.unstable_now=function(){return R.now()-A}}var O=1073741823,P=-1,j=250,q=5e3,G=1e4,ie=O,de=[],Ae=[],ke=1,st=null,Ue=y,ae=!1,Q=!1,ye=!1,te=typeof setTimeout=="function"?setTimeout:null,Se=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Pe(fe){for(var De=i(Ae);De!==null;){if(De.callback===null)o(Ae);else if(De.startTime<=fe)o(Ae),De.sortIndex=De.expirationTime,r(de,De);else return;De=i(Ae)}}function Ze(fe){if(ye=!1,Pe(fe),!Q)if(i(de)!==null)Q=!0,le($e);else{var De=i(Ae);De!==null&&se(Ze,De.startTime-fe)}}function $e(fe,De){Q=!1,ye&&(ye=!1,Ie()),ae=!0;var pt=Ue;try{var Ut;if(!e)return ht(fe,De)}finally{st=null,Ue=pt,ae=!1}}function ht(fe,De){var pt=De;for(Pe(pt),st=i(de);st!==null&&!(st.expirationTime>pt&&(!fe||Jn()));){var Ut=st.callback;if(typeof Ut=="function"){st.callback=null,Ue=st.priorityLevel;var tr=st.expirationTime<=pt,hr=Ut(tr);pt=n.unstable_now(),typeof hr=="function"?st.callback=hr:st===i(de)&&o(de),Pe(pt)}else o(de);st=i(de)}if(st!==null)return!0;var pr=i(Ae);return pr!==null&&se(Ze,pr.startTime-pt),!1}function Rt(fe,De){switch(fe){case p:case m:case y:case b:case _:break;default:fe=y}var pt=Ue;Ue=fe;try{return De()}finally{Ue=pt}}function ut(fe){var De;switch(Ue){case p:case m:case y:De=y;break;default:De=Ue;break}var pt=Ue;Ue=De;try{return fe()}finally{Ue=pt}}function ir(fe){var De=Ue;return function(){var pt=Ue;Ue=De;try{return fe.apply(this,arguments)}finally{Ue=pt}}}function Wt(fe,De,pt){var Ut=n.unstable_now(),tr;if(typeof pt=="object"&&pt!==null){var hr=pt.delay;typeof hr=="number"&&hr>0?tr=Ut+hr:tr=Ut}else tr=Ut;var pr;switch(fe){case p:pr=P;break;case m:pr=j;break;case _:pr=ie;break;case b:pr=G;break;case y:default:pr=q;break}var Sn=tr+pr,vr={id:ke++,callback:De,priorityLevel:fe,startTime:tr,expirationTime:Sn,sortIndex:-1};return tr>Ut?(vr.sortIndex=tr,r(Ae,vr),i(de)===null&&vr===i(Ae)&&(ye?Ie():ye=!0,se(Ze,tr-Ut))):(vr.sortIndex=Sn,r(de,vr),!Q&&!ae&&(Q=!0,le($e))),vr}function Tr(){}function cr(){!Q&&!ae&&(Q=!0,le($e))}function Ht(){return i(de)}function Jt(fe){fe.callback=null}function Cr(){return Ue}var sr=!1,Rr=null,dr=-1,fr=t,Nn=-1;function Jn(){var fe=n.unstable_now()-Nn;return!(fe<fr)}function ua(){}function ce(fe){if(fe<0||fe>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}fe>0?fr=Math.floor(1e3/fe):fr=t}var Er=function(){if(Rr!==null){var fe=n.unstable_now();Nn=fe;var De=!0,pt=!0;try{pt=Rr(De,fe)}finally{pt?Re():(sr=!1,Rr=null)}}else sr=!1},Re;if(typeof _e=="function")Re=function(){_e(Er)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Me=Ee.port2;Ee.port1.onmessage=Er,Re=function(){Me.postMessage(null)}}else Re=function(){te(Er,0)};function le(fe){Rr=fe,sr||(sr=!0,Re())}function se(fe,De){dr=te(function(){fe(n.unstable_now())},De)}function Ie(){Se(dr),dr=-1}var Fe=ua,or=null;n.unstable_IdlePriority=_,n.unstable_ImmediatePriority=p,n.unstable_LowPriority=b,n.unstable_NormalPriority=y,n.unstable_Profiling=or,n.unstable_UserBlockingPriority=m,n.unstable_cancelCallback=Jt,n.unstable_continueExecution=cr,n.unstable_forceFrameRate=ce,n.unstable_getCurrentPriorityLevel=Cr,n.unstable_getFirstCallbackNode=Ht,n.unstable_next=ut,n.unstable_pauseExecution=Tr,n.unstable_requestPaint=Fe,n.unstable_runWithPriority=Rt,n.unstable_scheduleCallback=Wt,n.unstable_shouldYield=Jn,n.unstable_wrapCallback=ir,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(qN);HN.exports=qN;var H4=HN.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n=X,e=H4,t=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=!1;function i(a){r=a}function o(a){if(!r){for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];c("warn",a,l)}}function u(a){if(!r){for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];c("error",a,l)}}function c(a,s,l){{var d=t.ReactDebugCurrentFrame,h=d.getStackAddendum();h!==""&&(s+="%s",l=l.concat([h]));var g=l.map(function(v){return String(v)});g.unshift("Warning: "+s),Function.prototype.apply.call(console[a],console,g)}}var f=0,p=1,m=2,y=3,b=4,_=5,S=6,C=7,T=8,R=9,A=10,O=11,P=12,j=13,q=14,G=15,ie=16,de=17,Ae=18,ke=19,st=21,Ue=22,ae=23,Q=24,ye=25,te=!0,Se=!1,_e=!1,Pe=!1,Ze=!1,$e=!0,ht=!0,Rt=!0,ut=!0,ir=new Set,Wt={},Tr={};function cr(a,s){Ht(a,s),Ht(a+"Capture",s)}function Ht(a,s){Wt[a]&&u("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",a),Wt[a]=s;{var l=a.toLowerCase();Tr[l]=a,a==="onDoubleClick"&&(Tr.ondblclick=a)}for(var d=0;d<s.length;d++)ir.add(s[d])}var Jt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cr=Object.prototype.hasOwnProperty;function sr(a){{var s=typeof Symbol=="function"&&Symbol.toStringTag,l=s&&a[Symbol.toStringTag]||a.constructor.name||"Object";return l}}function Rr(a){try{return dr(a),!1}catch{return!0}}function dr(a){return""+a}function fr(a,s){if(Rr(a))return u("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",s,sr(a)),dr(a)}function Nn(a){if(Rr(a))return u("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",sr(a)),dr(a)}function Jn(a,s){if(Rr(a))return u("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",s,sr(a)),dr(a)}function ua(a,s){if(Rr(a))return u("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",s,sr(a)),dr(a)}function ce(a){if(Rr(a))return u("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",sr(a)),dr(a)}function Er(a){if(Rr(a))return u("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",sr(a)),dr(a)}var Re=0,Ee=1,Me=2,le=3,se=4,Ie=5,Fe=6,or=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",fe=or+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",De=new RegExp("^["+or+"]["+fe+"]*$"),pt={},Ut={};function tr(a){return Cr.call(Ut,a)?!0:Cr.call(pt,a)?!1:De.test(a)?(Ut[a]=!0,!0):(pt[a]=!0,u("Invalid attribute name: `%s`",a),!1)}function hr(a,s,l){return s!==null?s.type===Re:l?!1:a.length>2&&(a[0]==="o"||a[0]==="O")&&(a[1]==="n"||a[1]==="N")}function pr(a,s,l,d){if(l!==null&&l.type===Re)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":{if(d)return!1;if(l!==null)return!l.acceptsBooleans;var h=a.toLowerCase().slice(0,5);return h!=="data-"&&h!=="aria-"}default:return!1}}function Sn(a,s,l,d){if(s===null||typeof s>"u"||pr(a,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case le:return!s;case se:return s===!1;case Ie:return isNaN(s);case Fe:return isNaN(s)||s<1}return!1}function vr(a){return br.hasOwnProperty(a)?br[a]:null}function Kt(a,s,l,d,h,g,v){this.acceptsBooleans=s===Me||s===le||s===se,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=l,this.propertyName=a,this.type=s,this.sanitizeURL=g,this.removeEmptyString=v}var br={},Va=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Va.forEach(function(a){br[a]=new Kt(a,Re,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var s=a[0],l=a[1];br[s]=new Kt(s,Ee,!1,l,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){br[a]=new Kt(a,Me,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){br[a]=new Kt(a,Me,!1,a,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(a){br[a]=new Kt(a,le,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){br[a]=new Kt(a,le,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){br[a]=new Kt(a,se,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){br[a]=new Kt(a,Fe,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){br[a]=new Kt(a,Ie,!1,a.toLowerCase(),null,!1,!1)});var Ha=/[\-\:]([a-z])/g,Ra=function(a){return a[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(a){var s=a.replace(Ha,Ra);br[s]=new Kt(s,Ee,!1,a,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(a){var s=a.replace(Ha,Ra);br[s]=new Kt(s,Ee,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var s=a.replace(Ha,Ra);br[s]=new Kt(s,Ee,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){br[a]=new Kt(a,Ee,!1,a.toLowerCase(),null,!1,!1)});var es="xlinkHref";br[es]=new Kt("xlinkHref",Ee,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){br[a]=new Kt(a,Ee,!1,a.toLowerCase(),null,!0,!0)});var Ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,jo=!1;function Mu(a){!jo&&Ic.test(a)&&(jo=!0,u("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(a)))}function Fu(a,s,l,d){if(d.mustUseProperty){var h=d.propertyName;return a[h]}else{fr(l,s),d.sanitizeURL&&Mu(""+l);var g=d.attributeName,v=null;if(d.type===se){if(a.hasAttribute(g)){var w=a.getAttribute(g);return w===""?!0:Sn(s,l,d,!1)?w:w===""+l?l:w}}else if(a.hasAttribute(g)){if(Sn(s,l,d,!1))return a.getAttribute(g);if(d.type===le)return l;v=a.getAttribute(g)}return Sn(s,l,d,!1)?v===null?l:v:v===""+l?l:v}}function Do(a,s,l,d){{if(!tr(s))return;if(!a.hasAttribute(s))return l===void 0?void 0:null;var h=a.getAttribute(s);return fr(l,s),h===""+l?l:h}}function qa(a,s,l,d){var h=vr(s);if(!hr(s,h,d)){if(Sn(s,l,h,d)&&(l=null),d||h===null){if(tr(s)){var g=s;l===null?a.removeAttribute(g):(fr(l,s),a.setAttribute(g,""+l))}return}var v=h.mustUseProperty;if(v){var w=h.propertyName;if(l===null){var E=h.type;a[w]=E===le?!1:""}else a[w]=l;return}var k=h.attributeName,N=h.attributeNamespace;if(l===null)a.removeAttribute(k);else{var L=h.type,D;L===le||L===se&&l===!0?D="":(fr(l,k),D=""+l,h.sanitizeURL&&Mu(D.toString())),N?a.setAttributeNS(N,k,D):a.setAttribute(k,D)}}}var Oa=Symbol.for("react.element"),la=Symbol.for("react.portal"),Ei=Symbol.for("react.fragment"),Lo=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),me=Symbol.for("react.context"),Be=Symbol.for("react.forward_ref"),bt=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),jr=Symbol.for("react.scope"),rr=Symbol.for("react.debug_trace_mode"),nr=Symbol.for("react.offscreen"),En=Symbol.for("react.legacy_hidden"),xi=Symbol.for("react.cache"),Ga=Symbol.for("react.tracing_marker"),Dr=Symbol.iterator,Uo="@@iterator";function Wa(a){if(a===null||typeof a!="object")return null;var s=Dr&&a[Dr]||a[Uo];return typeof s=="function"?s:null}var mt=Object.assign,Mo=0,jh,Dh,$s,jc,Dc,Lc,Uc;function Mc(){}Mc.__reactDisabledLog=!0;function Lh(){{if(Mo===0){jh=console.log,Dh=console.info,$s=console.warn,jc=console.error,Dc=console.group,Lc=console.groupCollapsed,Uc=console.groupEnd;var a={configurable:!0,enumerable:!0,value:Mc,writable:!0};Object.defineProperties(console,{info:a,log:a,warn:a,error:a,group:a,groupCollapsed:a,groupEnd:a})}Mo++}}function Uh(){{if(Mo--,Mo===0){var a={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:mt({},a,{value:jh}),info:mt({},a,{value:Dh}),warn:mt({},a,{value:$s}),error:mt({},a,{value:jc}),group:mt({},a,{value:Dc}),groupCollapsed:mt({},a,{value:Lc}),groupEnd:mt({},a,{value:Uc})})}Mo<0&&u("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Bu=t.ReactCurrentDispatcher,Fc;function Ti(a,s,l){{if(Fc===void 0)try{throw Error()}catch(h){var d=h.stack.trim().match(/\n( *(at )?)/);Fc=d&&d[1]||""}return`
`+Fc+a}}var Fo=!1,Is;{var zu=typeof WeakMap=="function"?WeakMap:Map;Is=new zu}function Bo(a,s){if(!a||Fo)return"";{var l=Is.get(a);if(l!==void 0)return l}var d;Fo=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var g;g=Bu.current,Bu.current=null,Lh();try{if(s){var v=function(){throw Error()};if(Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(H){d=H}Reflect.construct(a,[],v)}else{try{v.call()}catch(H){d=H}a.call(v.prototype)}}else{try{throw Error()}catch(H){d=H}a()}}catch(H){if(H&&d&&typeof H.stack=="string"){for(var w=H.stack.split(`
`),E=d.stack.split(`
`),k=w.length-1,N=E.length-1;k>=1&&N>=0&&w[k]!==E[N];)N--;for(;k>=1&&N>=0;k--,N--)if(w[k]!==E[N]){if(k!==1||N!==1)do if(k--,N--,N<0||w[k]!==E[N]){var L=`
`+w[k].replace(" at new "," at ");return a.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",a.displayName)),typeof a=="function"&&Is.set(a,L),L}while(k>=1&&N>=0);break}}}finally{Fo=!1,Bu.current=g,Uh(),Error.prepareStackTrace=h}var D=a?a.displayName||a.name:"",z=D?Ti(D):"";return typeof a=="function"&&Is.set(a,z),z}function Vu(a,s,l){return Bo(a,!0)}function Bc(a,s,l){return Bo(a,!1)}function Mh(a){var s=a.prototype;return!!(s&&s.isReactComponent)}function zc(a,s,l){if(a==null)return"";if(typeof a=="function")return Bo(a,Mh(a));if(typeof a=="string")return Ti(a);switch(a){case bt:return Ti("Suspense");case Xe:return Ti("SuspenseList")}if(typeof a=="object")switch(a.$$typeof){case Be:return Bc(a.render);case ct:return zc(a.type,s,l);case He:{var d=a,h=d._payload,g=d._init;try{return zc(g(h),s,l)}catch{}}}return""}function Fy(a){switch(a._debugOwner&&a._debugOwner.type,a._debugSource,a.tag){case _:return Ti(a.type);case ie:return Ti("Lazy");case j:return Ti("Suspense");case ke:return Ti("SuspenseList");case f:case m:case G:return Bc(a.type);case O:return Bc(a.type.render);case p:return Vu(a.type);default:return""}}function zo(a){try{var s="",l=a;do s+=Fy(l),l=l.return;while(l);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Fh(a,s,l){var d=a.displayName;if(d)return d;var h=s.displayName||s.name||"";return h!==""?l+"("+h+")":l}function Vc(a){return a.displayName||"Context"}function kt(a){if(a==null)return null;if(typeof a.tag=="number"&&u("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case Ei:return"Fragment";case la:return"Portal";case I:return"Profiler";case Lo:return"StrictMode";case bt:return"Suspense";case Xe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case me:var s=a;return Vc(s)+".Consumer";case re:var l=a;return Vc(l._context)+".Provider";case Be:return Fh(a,a.render,"ForwardRef");case ct:var d=a.displayName||null;return d!==null?d:kt(a.type)||"Memo";case He:{var h=a,g=h._payload,v=h._init;try{return kt(v(g))}catch{return null}}}return null}function By(a,s,l){var d=s.displayName||s.name||"";return a.displayName||(d!==""?l+"("+d+")":l)}function ts(a){return a.displayName||"Context"}function it(a){var s=a.tag,l=a.type;switch(s){case Q:return"Cache";case R:var d=l;return ts(d)+".Consumer";case A:var h=l;return ts(h._context)+".Provider";case Ae:return"DehydratedFragment";case O:return By(l,l.render,"ForwardRef");case C:return"Fragment";case _:return l;case b:return"Portal";case y:return"Root";case S:return"Text";case ie:return kt(l);case T:return l===Lo?"StrictMode":"Mode";case Ue:return"Offscreen";case P:return"Profiler";case st:return"Scope";case j:return"Suspense";case ke:return"SuspenseList";case ye:return"TracingMarker";case p:case f:case de:case m:case q:case G:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;break}return null}var Hc=t.ReactDebugCurrentFrame,Pn=null,Vo=!1;function js(){{if(Pn===null)return null;var a=Pn._debugOwner;if(a!==null&&typeof a<"u")return it(a)}return null}function zy(){return Pn===null?"":zo(Pn)}function Qr(){Hc.getCurrentStack=null,Pn=null,Vo=!1}function ur(a){Hc.getCurrentStack=a===null?null:zy,Pn=a,Vo=!1}function Bh(){return Pn}function Aa(a){Vo=a}function $n(a){return""+a}function Ja(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return Er(a),a;default:return""}}var Vy={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function qc(a,s){Vy[s.type]||s.onChange||s.onInput||s.readOnly||s.disabled||s.value==null||u("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),s.onChange||s.readOnly||s.disabled||s.checked==null||u("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function zh(a){var s=a.type,l=a.nodeName;return l&&l.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gc(a){return a._valueTracker}function Hu(a){a._valueTracker=null}function Hy(a){var s="";return a&&(zh(a)?s=a.checked?"true":"false":s=a.value),s}function Ds(a){var s=zh(a)?"checked":"value",l=Object.getOwnPropertyDescriptor(a.constructor.prototype,s);Er(a[s]);var d=""+a[s];if(!(a.hasOwnProperty(s)||typeof l>"u"||typeof l.get!="function"||typeof l.set!="function")){var h=l.get,g=l.set;Object.defineProperty(a,s,{configurable:!0,get:function(){return h.call(this)},set:function(w){Er(w),d=""+w,g.call(this,w)}}),Object.defineProperty(a,s,{enumerable:l.enumerable});var v={getValue:function(){return d},setValue:function(w){Er(w),d=""+w},stopTracking:function(){Hu(a),delete a[s]}};return v}}function Ho(a){Gc(a)||(a._valueTracker=Ds(a))}function Wc(a){if(!a)return!1;var s=Gc(a);if(!s)return!0;var l=s.getValue(),d=Hy(a);return d!==l?(s.setValue(d),!0):!1}function rs(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var qu=!1,Gu=!1,Wu=!1,Vh=!1;function Hh(a){var s=a.type==="checkbox"||a.type==="radio";return s?a.checked!=null:a.value!=null}function Jc(a,s){var l=a,d=s.checked,h=mt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??l._wrapperState.initialChecked});return h}function qh(a,s){qc("input",s),s.checked!==void 0&&s.defaultChecked!==void 0&&!Gu&&(u("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",js()||"A component",s.type),Gu=!0),s.value!==void 0&&s.defaultValue!==void 0&&!qu&&(u("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",js()||"A component",s.type),qu=!0);var l=a,d=s.defaultValue==null?"":s.defaultValue;l._wrapperState={initialChecked:s.checked!=null?s.checked:s.defaultChecked,initialValue:Ja(s.value!=null?s.value:d),controlled:Hh(s)}}function x(a,s){var l=a,d=s.checked;d!=null&&qa(l,"checked",d,!1)}function $(a,s){var l=a;{var d=Hh(s);!l._wrapperState.controlled&&d&&!Vh&&(u("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Vh=!0),l._wrapperState.controlled&&!d&&!Wu&&(u("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Wu=!0)}x(a,s);var h=Ja(s.value),g=s.type;if(h!=null)g==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=$n(h)):l.value!==$n(h)&&(l.value=$n(h));else if(g==="submit"||g==="reset"){l.removeAttribute("value");return}s.hasOwnProperty("value")?We(l,s.type,h):s.hasOwnProperty("defaultValue")&&We(l,s.type,Ja(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(l.defaultChecked=!!s.defaultChecked)}function V(a,s,l){var d=a;if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type,g=h==="submit"||h==="reset";if(g&&(s.value===void 0||s.value===null))return;var v=$n(d._wrapperState.initialValue);l||v!==d.value&&(d.value=v),d.defaultValue=v}var w=d.name;w!==""&&(d.name=""),d.defaultChecked=!d.defaultChecked,d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function W(a,s){var l=a;$(l,s),ue(l,s)}function ue(a,s){var l=s.name;if(s.type==="radio"&&l!=null){for(var d=a;d.parentNode;)d=d.parentNode;fr(l,"name");for(var h=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),g=0;g<h.length;g++){var v=h[g];if(!(v===a||v.form!==a.form)){var w=Np(v);if(!w)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Wc(v),$(v,w)}}}}function We(a,s,l){(s!=="number"||rs(a.ownerDocument)!==a)&&(l==null?a.defaultValue=$n(a._wrapperState.initialValue):a.defaultValue!==$n(l)&&(a.defaultValue=$n(l)))}var Oe=!1,rt=!1,wt=!1;function Mt(a,s){s.value==null&&(typeof s.children=="object"&&s.children!==null?n.Children.forEach(s.children,function(l){l!=null&&(typeof l=="string"||typeof l=="number"||rt||(rt=!0,u("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):s.dangerouslySetInnerHTML!=null&&(wt||(wt=!0,u("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),s.selected!=null&&!Oe&&(u("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Oe=!0)}function Yt(a,s){s.value!=null&&a.setAttribute("value",$n(Ja(s.value)))}var Xt=Array.isArray;function yt(a){return Xt(a)}var lr;lr=!1;function Or(){var a=js();return a?`

Check the render method of \``+a+"`.":""}var qo=["value","defaultValue"];function Kc(a){{qc("select",a);for(var s=0;s<qo.length;s++){var l=qo[s];if(a[l]!=null){var d=yt(a[l]);a.multiple&&!d?u("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",l,Or()):!a.multiple&&d&&u("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",l,Or())}}}}function ns(a,s,l,d){var h=a.options;if(s){for(var g=l,v={},w=0;w<g.length;w++)v["$"+g[w]]=!0;for(var E=0;E<h.length;E++){var k=v.hasOwnProperty("$"+h[E].value);h[E].selected!==k&&(h[E].selected=k),k&&d&&(h[E].defaultSelected=!0)}}else{for(var N=$n(Ja(l)),L=null,D=0;D<h.length;D++){if(h[D].value===N){h[D].selected=!0,d&&(h[D].defaultSelected=!0);return}L===null&&!h[D].disabled&&(L=h[D])}L!==null&&(L.selected=!0)}}function Zc(a,s){return mt({},s,{value:void 0})}function Yc(a,s){var l=a;Kc(s),l._wrapperState={wasMultiple:!!s.multiple},s.value!==void 0&&s.defaultValue!==void 0&&!lr&&(u("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),lr=!0)}function qy(a,s){var l=a;l.multiple=!!s.multiple;var d=s.value;d!=null?ns(l,!!s.multiple,d,!1):s.defaultValue!=null&&ns(l,!!s.multiple,s.defaultValue,!0)}function Gh(a,s){var l=a,d=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ns(l,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?ns(l,!!s.multiple,s.defaultValue,!0):ns(l,!!s.multiple,s.multiple?[]:"",!1))}function Gy(a,s){var l=a,d=s.value;d!=null&&ns(l,!!s.multiple,d,!1)}var ox=!1;function Wy(a,s){var l=a;if(s.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var d=mt({},s,{value:void 0,defaultValue:void 0,children:$n(l._wrapperState.initialValue)});return d}function ux(a,s){var l=a;qc("textarea",s),s.value!==void 0&&s.defaultValue!==void 0&&!ox&&(u("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",js()||"A component"),ox=!0);var d=s.value;if(d==null){var h=s.children,g=s.defaultValue;if(h!=null){u("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(g!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(yt(h)){if(h.length>1)throw new Error("<textarea> can only have at most one child.");h=h[0]}g=h}}g==null&&(g=""),d=g}l._wrapperState={initialValue:Ja(d)}}function lx(a,s){var l=a,d=Ja(s.value),h=Ja(s.defaultValue);if(d!=null){var g=$n(d);g!==l.value&&(l.value=g),s.defaultValue==null&&l.defaultValue!==g&&(l.defaultValue=g)}h!=null&&(l.defaultValue=$n(h))}function cx(a,s){var l=a,d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function TI(a,s){lx(a,s)}var as="http://www.w3.org/1999/xhtml",CI="http://www.w3.org/1998/Math/MathML",Jy="http://www.w3.org/2000/svg";function Ky(a){switch(a){case"svg":return Jy;case"math":return CI;default:return as}}function Zy(a,s){return a==null||a===as?Ky(s):a===Jy&&s==="foreignObject"?as:a}var RI=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,h){MSApp.execUnsafeLocalFunction(function(){return a(s,l,d,h)})}:a},Wh,dx=RI(function(a,s){if(a.namespaceURI===Jy&&!("innerHTML"in a)){Wh=Wh||document.createElement("div"),Wh.innerHTML="<svg>"+s.valueOf().toString()+"</svg>";for(var l=Wh.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild);return}a.innerHTML=s}),Kn=1,is=3,Ar=8,ss=9,Yy=11,Jh=function(a,s){if(s){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===is){l.nodeValue=s;return}}a.textContent=s},OI={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Xc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function AI(a,s){return a+s.charAt(0).toUpperCase()+s.substring(1)}var kI=["Webkit","ms","Moz","O"];Object.keys(Xc).forEach(function(a){kI.forEach(function(s){Xc[AI(s,a)]=Xc[a]})});function Xy(a,s,l){var d=s==null||typeof s=="boolean"||s==="";return d?"":!l&&typeof s=="number"&&s!==0&&!(Xc.hasOwnProperty(a)&&Xc[a])?s+"px":(ua(s,a),(""+s).trim())}var NI=/([A-Z])/g,PI=/^ms-/;function $I(a){return a.replace(NI,"-$1").toLowerCase().replace(PI,"-ms-")}var fx=function(){};{var II=/^(?:webkit|moz|o)[A-Z]/,jI=/^-ms-/,DI=/-(.)/g,hx=/;\s*$/,Ju={},Qy={},px=!1,mx=!1,LI=function(a){return a.replace(DI,function(s,l){return l.toUpperCase()})},UI=function(a){Ju.hasOwnProperty(a)&&Ju[a]||(Ju[a]=!0,u("Unsupported style property %s. Did you mean %s?",a,LI(a.replace(jI,"ms-"))))},MI=function(a){Ju.hasOwnProperty(a)&&Ju[a]||(Ju[a]=!0,u("Unsupported vendor-prefixed style property %s. Did you mean %s?",a,a.charAt(0).toUpperCase()+a.slice(1)))},FI=function(a,s){Qy.hasOwnProperty(s)&&Qy[s]||(Qy[s]=!0,u(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,a,s.replace(hx,"")))},BI=function(a,s){px||(px=!0,u("`NaN` is an invalid value for the `%s` css style property.",a))},zI=function(a,s){mx||(mx=!0,u("`Infinity` is an invalid value for the `%s` css style property.",a))};fx=function(a,s){a.indexOf("-")>-1?UI(a):II.test(a)?MI(a):hx.test(s)&&FI(a,s),typeof s=="number"&&(isNaN(s)?BI(a,s):isFinite(s)||zI(a,s))}}var VI=fx;function HI(a){{var s="",l="";for(var d in a)if(a.hasOwnProperty(d)){var h=a[d];if(h!=null){var g=d.indexOf("--")===0;s+=l+(g?d:$I(d))+":",s+=Xy(d,h,g),l=";"}}return s||null}}function gx(a,s){var l=a.style;for(var d in s)if(s.hasOwnProperty(d)){var h=d.indexOf("--")===0;h||VI(d,s[d]);var g=Xy(d,s[d],h);d==="float"&&(d="cssFloat"),h?l.setProperty(d,g):l[d]=g}}function qI(a){return a==null||typeof a=="boolean"||a===""}function yx(a){var s={};for(var l in a)for(var d=OI[l]||[l],h=0;h<d.length;h++)s[d[h]]=l;return s}function GI(a,s){{if(!s)return;var l=yx(a),d=yx(s),h={};for(var g in l){var v=l[g],w=d[g];if(w&&v!==w){var E=v+","+w;if(h[E])continue;h[E]=!0,u("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",qI(a[v])?"Removing":"Updating",v,w)}}}}var WI={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},JI=mt({menuitem:!0},WI),KI="__html";function ev(a,s){if(s){if(JI[a]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw new Error(a+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof s.dangerouslySetInnerHTML!="object"||!(KI in s.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!s.suppressContentEditableWarning&&s.contentEditable&&s.children!=null&&u("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),s.style!=null&&typeof s.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Go(a,s){if(a.indexOf("-")===-1)return typeof s.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kh={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},vx={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Ku={},ZI=new RegExp("^(aria)-["+fe+"]*$"),YI=new RegExp("^(aria)[A-Z]["+fe+"]*$");function XI(a,s){{if(Cr.call(Ku,s)&&Ku[s])return!0;if(YI.test(s)){var l="aria-"+s.slice(4).toLowerCase(),d=vx.hasOwnProperty(l)?l:null;if(d==null)return u("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",s),Ku[s]=!0,!0;if(s!==d)return u("Invalid ARIA attribute `%s`. Did you mean `%s`?",s,d),Ku[s]=!0,!0}if(ZI.test(s)){var h=s.toLowerCase(),g=vx.hasOwnProperty(h)?h:null;if(g==null)return Ku[s]=!0,!1;if(s!==g)return u("Unknown ARIA attribute `%s`. Did you mean `%s`?",s,g),Ku[s]=!0,!0}}return!0}function QI(a,s){{var l=[];for(var d in s){var h=XI(a,d);h||l.push(d)}var g=l.map(function(v){return"`"+v+"`"}).join(", ");l.length===1?u("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",g,a):l.length>1&&u("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",g,a)}}function ej(a,s){Go(a,s)||QI(a,s)}var bx=!1;function tj(a,s){{if(a!=="input"&&a!=="textarea"&&a!=="select")return;s!=null&&s.value===null&&!bx&&(bx=!0,a==="select"&&s.multiple?u("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",a):u("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",a))}}var _x=function(){};{var In={},wx=/^on./,rj=/^on[^A-Z]/,nj=new RegExp("^(aria)-["+fe+"]*$"),aj=new RegExp("^(aria)[A-Z]["+fe+"]*$");_x=function(a,s,l,d){if(Cr.call(In,s)&&In[s])return!0;var h=s.toLowerCase();if(h==="onfocusin"||h==="onfocusout")return u("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),In[s]=!0,!0;if(d!=null){var g=d.registrationNameDependencies,v=d.possibleRegistrationNames;if(g.hasOwnProperty(s))return!0;var w=v.hasOwnProperty(h)?v[h]:null;if(w!=null)return u("Invalid event handler property `%s`. Did you mean `%s`?",s,w),In[s]=!0,!0;if(wx.test(s))return u("Unknown event handler property `%s`. It will be ignored.",s),In[s]=!0,!0}else if(wx.test(s))return rj.test(s)&&u("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",s),In[s]=!0,!0;if(nj.test(s)||aj.test(s))return!0;if(h==="innerhtml")return u("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),In[s]=!0,!0;if(h==="aria")return u("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),In[s]=!0,!0;if(h==="is"&&l!==null&&l!==void 0&&typeof l!="string")return u("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof l),In[s]=!0,!0;if(typeof l=="number"&&isNaN(l))return u("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",s),In[s]=!0,!0;var E=vr(s),k=E!==null&&E.type===Re;if(Kh.hasOwnProperty(h)){var N=Kh[h];if(N!==s)return u("Invalid DOM property `%s`. Did you mean `%s`?",s,N),In[s]=!0,!0}else if(!k&&s!==h)return u("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",s,h),In[s]=!0,!0;return typeof l=="boolean"&&pr(s,l,E,!1)?(l?u('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',l,s,s,l,s):u('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',l,s,s,l,s,s,s),In[s]=!0,!0):k?!0:pr(s,l,E,!1)?(In[s]=!0,!1):((l==="false"||l==="true")&&E!==null&&E.type===le&&(u("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",l,s,l==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',s,l),In[s]=!0),!0)}}var ij=function(a,s,l){{var d=[];for(var h in s){var g=_x(a,h,s[h],l);g||d.push(h)}var v=d.map(function(w){return"`"+w+"`"}).join(", ");d.length===1?u("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",v,a):d.length>1&&u("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",v,a)}};function sj(a,s,l){Go(a,s)||ij(a,s,l)}var Sx=1,tv=2,Qc=4,oj=Sx|tv|Qc,ed=null;function uj(a){ed!==null&&u("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),ed=a}function lj(){ed===null&&u("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),ed=null}function cj(a){return a===ed}function rv(a){var s=a.target||a.srcElement||window;return s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===is?s.parentNode:s}var nv=null,Zu=null,Yu=null;function Ex(a){var s=qs(a);if(s){if(typeof nv!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var l=s.stateNode;if(l){var d=Np(l);nv(s.stateNode,s.type,d)}}}function dj(a){nv=a}function xx(a){Zu?Yu?Yu.push(a):Yu=[a]:Zu=a}function fj(){return Zu!==null||Yu!==null}function Tx(){if(Zu){var a=Zu,s=Yu;if(Zu=null,Yu=null,Ex(a),s)for(var l=0;l<s.length;l++)Ex(s[l])}}var Cx=function(a,s){return a(s)},Rx=function(){},av=!1;function hj(){var a=fj();a&&(Rx(),Tx())}function Ox(a,s,l){if(av)return a(s,l);av=!0;try{return Cx(a,s,l)}finally{av=!1,hj()}}function pj(a,s,l){Cx=a,Rx=l}function mj(a){return a==="button"||a==="input"||a==="select"||a==="textarea"}function gj(a,s,l){switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(l.disabled&&mj(s));default:return!1}}function td(a,s){var l=a.stateNode;if(l===null)return null;var d=Np(l);if(d===null)return null;var h=d[s];if(gj(s,a.type,d))return null;if(h&&typeof h!="function")throw new Error("Expected `"+s+"` listener to be a function, instead got a value of `"+typeof h+"` type.");return h}var iv=!1;if(Jt)try{var rd={};Object.defineProperty(rd,"passive",{get:function(){iv=!0}}),window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{iv=!1}function Ax(a,s,l,d,h,g,v,w,E){var k=Array.prototype.slice.call(arguments,3);try{s.apply(l,k)}catch(N){this.onError(N)}}var kx=Ax;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var sv=document.createElement("react");kx=function(s,l,d,h,g,v,w,E,k){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var N=document.createEvent("Event"),L=!1,D=!0,z=window.event,H=Object.getOwnPropertyDescriptor(window,"event");function J(){sv.removeEventListener(K,ze,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=z)}var ge=Array.prototype.slice.call(arguments,3);function ze(){L=!0,J(),l.apply(d,ge),D=!1}var je,xt=!1,vt=!1;function M(F){if(je=F.error,xt=!0,je===null&&F.colno===0&&F.lineno===0&&(vt=!0),F.defaultPrevented&&je!=null&&typeof je=="object")try{je._suppressLogging=!0}catch{}}var K="react-"+(s||"invokeguardedcallback");if(window.addEventListener("error",M),sv.addEventListener(K,ze,!1),N.initEvent(K,!1,!1),sv.dispatchEvent(N),H&&Object.defineProperty(window,"event",H),L&&D&&(xt?vt&&(je=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):je=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(je)),window.removeEventListener("error",M),!L)return J(),Ax.apply(this,arguments)}}var yj=kx,Xu=!1,Zh=null,Yh=!1,ov=null,vj={onError:function(a){Xu=!0,Zh=a}};function uv(a,s,l,d,h,g,v,w,E){Xu=!1,Zh=null,yj.apply(vj,arguments)}function bj(a,s,l,d,h,g,v,w,E){if(uv.apply(this,arguments),Xu){var k=lv();Yh||(Yh=!0,ov=k)}}function _j(){if(Yh){var a=ov;throw Yh=!1,ov=null,a}}function wj(){return Xu}function lv(){if(Xu){var a=Zh;return Xu=!1,Zh=null,a}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Qu(a){return a._reactInternals}function Sj(a){return a._reactInternals!==void 0}function Ej(a,s){a._reactInternals=s}var Je=0,el=1,kr=2,Nt=4,Wo=16,nd=32,Nx=64,Pt=128,os=256,Jo=512,tl=1024,Ls=2048,us=4096,Ko=8192,cv=16384,xj=32767,Xh=32768,jn=65536,dv=131072,Px=1048576,fv=2097152,Zo=4194304,hv=8388608,Us=16777216,pv=33554432,mv=Nt|tl|0,gv=kr|Nt|Wo|nd|Jo|us|Ko,ad=Nt|Nx|Jo|Ko,rl=Ls|Wo,ls=Zo|hv|fv,Tj=t.ReactCurrentOwner;function Yo(a){var s=a,l=a;if(a.alternate)for(;s.return;)s=s.return;else{var d=s;do s=d,(s.flags&(kr|us))!==Je&&(l=s.return),d=s.return;while(d)}return s.tag===y?l:null}function $x(a){if(a.tag===j){var s=a.memoizedState;if(s===null){var l=a.alternate;l!==null&&(s=l.memoizedState)}if(s!==null)return s.dehydrated}return null}function Ix(a){return a.tag===y?a.stateNode.containerInfo:null}function Cj(a){return Yo(a)===a}function Rj(a){{var s=Tj.current;if(s!==null&&s.tag===p){var l=s,d=l.stateNode;d._warnedAboutRefsInRender||u("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",it(l)||"A component"),d._warnedAboutRefsInRender=!0}}var h=Qu(a);return h?Yo(h)===h:!1}function jx(a){if(Yo(a)!==a)throw new Error("Unable to find node on an unmounted component.")}function Dx(a){var s=a.alternate;if(!s){var l=Yo(a);if(l===null)throw new Error("Unable to find node on an unmounted component.");return l!==a?null:a}for(var d=a,h=s;;){var g=d.return;if(g===null)break;var v=g.alternate;if(v===null){var w=g.return;if(w!==null){d=h=w;continue}break}if(g.child===v.child){for(var E=g.child;E;){if(E===d)return jx(g),a;if(E===h)return jx(g),s;E=E.sibling}throw new Error("Unable to find node on an unmounted component.")}if(d.return!==h.return)d=g,h=v;else{for(var k=!1,N=g.child;N;){if(N===d){k=!0,d=g,h=v;break}if(N===h){k=!0,h=g,d=v;break}N=N.sibling}if(!k){for(N=v.child;N;){if(N===d){k=!0,d=v,h=g;break}if(N===h){k=!0,h=v,d=g;break}N=N.sibling}if(!k)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(d.alternate!==h)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(d.tag!==y)throw new Error("Unable to find node on an unmounted component.");return d.stateNode.current===d?a:s}function Lx(a){var s=Dx(a);return s!==null?Ux(s):null}function Ux(a){if(a.tag===_||a.tag===S)return a;for(var s=a.child;s!==null;){var l=Ux(s);if(l!==null)return l;s=s.sibling}return null}function Oj(a){var s=Dx(a);return s!==null?Mx(s):null}function Mx(a){if(a.tag===_||a.tag===S)return a;for(var s=a.child;s!==null;){if(s.tag!==b){var l=Mx(s);if(l!==null)return l}s=s.sibling}return null}var Fx=e.unstable_scheduleCallback,Aj=e.unstable_cancelCallback,kj=e.unstable_shouldYield,Nj=e.unstable_requestPaint,en=e.unstable_now,Pj=e.unstable_getCurrentPriorityLevel,Qh=e.unstable_ImmediatePriority,yv=e.unstable_UserBlockingPriority,Xo=e.unstable_NormalPriority,$j=e.unstable_LowPriority,vv=e.unstable_IdlePriority,Ij=e.unstable_yieldValue,jj=e.unstable_setDisableYieldValue,nl=null,xn=null,be=null,Ci=!1,Ka=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Dj(a){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(s.isDisabled)return!0;if(!s.supportsFiber)return u("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{ht&&(a=mt({},a,{getLaneLabelMap:zj,injectProfilingHooks:Bj})),nl=s.inject(a),xn=s}catch(l){u("React instrumentation encountered an error: %s.",l)}return!!s.checkDCE}function Lj(a,s){if(xn&&typeof xn.onScheduleFiberRoot=="function")try{xn.onScheduleFiberRoot(nl,a,s)}catch(l){Ci||(Ci=!0,u("React instrumentation encountered an error: %s",l))}}function Uj(a,s){if(xn&&typeof xn.onCommitFiberRoot=="function")try{var l=(a.current.flags&Pt)===Pt;if(Rt){var d;switch(s){case fa:d=Qh;break;case ds:d=yv;break;case fs:d=Xo;break;case sp:d=vv;break;default:d=Xo;break}xn.onCommitFiberRoot(nl,a,d,l)}}catch(h){Ci||(Ci=!0,u("React instrumentation encountered an error: %s",h))}}function Mj(a){if(xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(nl,a)}catch(s){Ci||(Ci=!0,u("React instrumentation encountered an error: %s",s))}}function Fj(a){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(nl,a)}catch(s){Ci||(Ci=!0,u("React instrumentation encountered an error: %s",s))}}function tn(a){if(typeof Ij=="function"&&(jj(a),i(a)),xn&&typeof xn.setStrictMode=="function")try{xn.setStrictMode(nl,a)}catch(s){Ci||(Ci=!0,u("React instrumentation encountered an error: %s",s))}}function Bj(a){be=a}function zj(){{for(var a=new Map,s=1,l=0;l<_v;l++){var d=uD(s);a.set(s,d),s*=2}return a}}function Vj(a){be!==null&&typeof be.markCommitStarted=="function"&&be.markCommitStarted(a)}function Bx(){be!==null&&typeof be.markCommitStopped=="function"&&be.markCommitStopped()}function id(a){be!==null&&typeof be.markComponentRenderStarted=="function"&&be.markComponentRenderStarted(a)}function al(){be!==null&&typeof be.markComponentRenderStopped=="function"&&be.markComponentRenderStopped()}function Hj(a){be!==null&&typeof be.markComponentPassiveEffectMountStarted=="function"&&be.markComponentPassiveEffectMountStarted(a)}function qj(){be!==null&&typeof be.markComponentPassiveEffectMountStopped=="function"&&be.markComponentPassiveEffectMountStopped()}function Gj(a){be!==null&&typeof be.markComponentPassiveEffectUnmountStarted=="function"&&be.markComponentPassiveEffectUnmountStarted(a)}function Wj(){be!==null&&typeof be.markComponentPassiveEffectUnmountStopped=="function"&&be.markComponentPassiveEffectUnmountStopped()}function Jj(a){be!==null&&typeof be.markComponentLayoutEffectMountStarted=="function"&&be.markComponentLayoutEffectMountStarted(a)}function Kj(){be!==null&&typeof be.markComponentLayoutEffectMountStopped=="function"&&be.markComponentLayoutEffectMountStopped()}function zx(a){be!==null&&typeof be.markComponentLayoutEffectUnmountStarted=="function"&&be.markComponentLayoutEffectUnmountStarted(a)}function Vx(){be!==null&&typeof be.markComponentLayoutEffectUnmountStopped=="function"&&be.markComponentLayoutEffectUnmountStopped()}function Zj(a,s,l){be!==null&&typeof be.markComponentErrored=="function"&&be.markComponentErrored(a,s,l)}function Yj(a,s,l){be!==null&&typeof be.markComponentSuspended=="function"&&be.markComponentSuspended(a,s,l)}function Xj(a){be!==null&&typeof be.markLayoutEffectsStarted=="function"&&be.markLayoutEffectsStarted(a)}function Qj(){be!==null&&typeof be.markLayoutEffectsStopped=="function"&&be.markLayoutEffectsStopped()}function eD(a){be!==null&&typeof be.markPassiveEffectsStarted=="function"&&be.markPassiveEffectsStarted(a)}function tD(){be!==null&&typeof be.markPassiveEffectsStopped=="function"&&be.markPassiveEffectsStopped()}function Hx(a){be!==null&&typeof be.markRenderStarted=="function"&&be.markRenderStarted(a)}function rD(){be!==null&&typeof be.markRenderYielded=="function"&&be.markRenderYielded()}function qx(){be!==null&&typeof be.markRenderStopped=="function"&&be.markRenderStopped()}function nD(a){be!==null&&typeof be.markRenderScheduled=="function"&&be.markRenderScheduled(a)}function aD(a,s){be!==null&&typeof be.markForceUpdateScheduled=="function"&&be.markForceUpdateScheduled(a,s)}function bv(a,s){be!==null&&typeof be.markStateUpdateScheduled=="function"&&be.markStateUpdateScheduled(a,s)}var qe=0,St=1,Ft=2,_r=8,Ri=16,Gx=Math.clz32?Math.clz32:oD,iD=Math.log,sD=Math.LN2;function oD(a){var s=a>>>0;return s===0?32:31-(iD(s)/sD|0)|0}var _v=31,ee=0,rn=0,Qe=1,il=2,cs=4,Qo=8,Oi=16,sd=32,sl=4194240,od=64,wv=128,Sv=256,Ev=512,xv=1024,Tv=2048,Cv=4096,Rv=8192,Ov=16384,Av=32768,kv=65536,Nv=131072,Pv=262144,$v=524288,Iv=1048576,jv=2097152,ep=130023424,ol=4194304,Dv=8388608,Lv=16777216,Uv=33554432,Mv=67108864,Wx=ol,ud=134217728,Jx=268435455,ld=268435456,eu=536870912,ca=1073741824;function uD(a){{if(a&Qe)return"Sync";if(a&il)return"InputContinuousHydration";if(a&cs)return"InputContinuous";if(a&Qo)return"DefaultHydration";if(a&Oi)return"Default";if(a&sd)return"TransitionHydration";if(a&sl)return"Transition";if(a&ep)return"Retry";if(a&ud)return"SelectiveHydration";if(a&ld)return"IdleHydration";if(a&eu)return"Idle";if(a&ca)return"Offscreen"}}var Qt=-1,tp=od,rp=ol;function cd(a){switch(tu(a)){case Qe:return Qe;case il:return il;case cs:return cs;case Qo:return Qo;case Oi:return Oi;case sd:return sd;case od:case wv:case Sv:case Ev:case xv:case Tv:case Cv:case Rv:case Ov:case Av:case kv:case Nv:case Pv:case $v:case Iv:case jv:return a&sl;case ol:case Dv:case Lv:case Uv:case Mv:return a&ep;case ud:return ud;case ld:return ld;case eu:return eu;case ca:return ca;default:return u("Should have found matching lanes. This is a bug in React."),a}}function np(a,s){var l=a.pendingLanes;if(l===ee)return ee;var d=ee,h=a.suspendedLanes,g=a.pingedLanes,v=l&Jx;if(v!==ee){var w=v&~h;if(w!==ee)d=cd(w);else{var E=v&g;E!==ee&&(d=cd(E))}}else{var k=l&~h;k!==ee?d=cd(k):g!==ee&&(d=cd(g))}if(d===ee)return ee;if(s!==ee&&s!==d&&(s&h)===ee){var N=tu(d),L=tu(s);if(N>=L||N===Oi&&(L&sl)!==ee)return s}(d&cs)!==ee&&(d|=l&Oi);var D=a.entangledLanes;if(D!==ee)for(var z=a.entanglements,H=d&D;H>0;){var J=ru(H),ge=1<<J;d|=z[J],H&=~ge}return d}function lD(a,s){for(var l=a.eventTimes,d=Qt;s>0;){var h=ru(s),g=1<<h,v=l[h];v>d&&(d=v),s&=~g}return d}function cD(a,s){switch(a){case Qe:case il:case cs:return s+250;case Qo:case Oi:case sd:case od:case wv:case Sv:case Ev:case xv:case Tv:case Cv:case Rv:case Ov:case Av:case kv:case Nv:case Pv:case $v:case Iv:case jv:return s+5e3;case ol:case Dv:case Lv:case Uv:case Mv:return Qt;case ud:case ld:case eu:case ca:return Qt;default:return u("Should have found matching lanes. This is a bug in React."),Qt}}function dD(a,s){for(var l=a.pendingLanes,d=a.suspendedLanes,h=a.pingedLanes,g=a.expirationTimes,v=l;v>0;){var w=ru(v),E=1<<w,k=g[w];k===Qt?((E&d)===ee||(E&h)!==ee)&&(g[w]=cD(E,s)):k<=s&&(a.expiredLanes|=E),v&=~E}}function fD(a){return cd(a.pendingLanes)}function Fv(a){var s=a.pendingLanes&~ca;return s!==ee?s:s&ca?ca:ee}function hD(a){return(a&Qe)!==ee}function Bv(a){return(a&Jx)!==ee}function Kx(a){return(a&ep)===a}function pD(a){var s=Qe|cs|Oi;return(a&s)===ee}function mD(a){return(a&sl)===a}function ap(a,s){var l=il|cs|Qo|Oi;return(s&l)!==ee}function gD(a,s){return(s&a.expiredLanes)!==ee}function Zx(a){return(a&sl)!==ee}function Yx(){var a=tp;return tp<<=1,(tp&sl)===ee&&(tp=od),a}function yD(){var a=rp;return rp<<=1,(rp&ep)===ee&&(rp=ol),a}function tu(a){return a&-a}function dd(a){return tu(a)}function ru(a){return 31-Gx(a)}function zv(a){return ru(a)}function da(a,s){return(a&s)!==ee}function ul(a,s){return(a&s)===s}function dt(a,s){return a|s}function ip(a,s){return a&~s}function Xx(a,s){return a&s}function qY(a){return a}function vD(a,s){return a!==rn&&a<s?a:s}function Vv(a){for(var s=[],l=0;l<_v;l++)s.push(a);return s}function fd(a,s,l){a.pendingLanes|=s,s!==eu&&(a.suspendedLanes=ee,a.pingedLanes=ee);var d=a.eventTimes,h=zv(s);d[h]=l}function bD(a,s){a.suspendedLanes|=s,a.pingedLanes&=~s;for(var l=a.expirationTimes,d=s;d>0;){var h=ru(d),g=1<<h;l[h]=Qt,d&=~g}}function Qx(a,s,l){a.pingedLanes|=a.suspendedLanes&s}function _D(a,s){var l=a.pendingLanes&~s;a.pendingLanes=s,a.suspendedLanes=ee,a.pingedLanes=ee,a.expiredLanes&=s,a.mutableReadLanes&=s,a.entangledLanes&=s;for(var d=a.entanglements,h=a.eventTimes,g=a.expirationTimes,v=l;v>0;){var w=ru(v),E=1<<w;d[w]=ee,h[w]=Qt,g[w]=Qt,v&=~E}}function Hv(a,s){for(var l=a.entangledLanes|=s,d=a.entanglements,h=l;h;){var g=ru(h),v=1<<g;v&s|d[g]&s&&(d[g]|=s),h&=~v}}function wD(a,s){var l=tu(s),d;switch(l){case cs:d=il;break;case Oi:d=Qo;break;case od:case wv:case Sv:case Ev:case xv:case Tv:case Cv:case Rv:case Ov:case Av:case kv:case Nv:case Pv:case $v:case Iv:case jv:case ol:case Dv:case Lv:case Uv:case Mv:d=sd;break;case eu:d=ld;break;default:d=rn;break}return(d&(a.suspendedLanes|s))!==rn?rn:d}function eT(a,s,l){if(Ka)for(var d=a.pendingUpdatersLaneMap;l>0;){var h=zv(l),g=1<<h,v=d[h];v.add(s),l&=~g}}function tT(a,s){if(Ka)for(var l=a.pendingUpdatersLaneMap,d=a.memoizedUpdaters;s>0;){var h=zv(s),g=1<<h,v=l[h];v.size>0&&(v.forEach(function(w){var E=w.alternate;(E===null||!d.has(E))&&d.add(w)}),v.clear()),s&=~g}}function rT(a,s){return null}var fa=Qe,ds=cs,fs=Oi,sp=eu,hd=rn;function Za(){return hd}function nn(a){hd=a}function SD(a,s){var l=hd;try{return hd=a,s()}finally{hd=l}}function ED(a,s){return a!==0&&a<s?a:s}function xD(a,s){return a>s?a:s}function qv(a,s){return a!==0&&a<s}function nT(a){var s=tu(a);return qv(fa,s)?qv(ds,s)?Bv(s)?fs:sp:ds:fa}function op(a){var s=a.current.memoizedState;return s.isDehydrated}var aT;function TD(a){aT=a}function CD(a){aT(a)}var Gv;function RD(a){Gv=a}var iT;function OD(a){iT=a}var sT;function AD(a){sT=a}var oT;function kD(a){oT=a}var Wv=!1,up=[],Ms=null,Fs=null,Bs=null,pd=new Map,md=new Map,zs=[],ND=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function PD(a){return ND.indexOf(a)>-1}function $D(a,s,l,d,h){return{blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]}}function uT(a,s){switch(a){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":{var l=s.pointerId;pd.delete(l);break}case"gotpointercapture":case"lostpointercapture":{var d=s.pointerId;md.delete(d);break}}}function gd(a,s,l,d,h,g){if(a===null||a.nativeEvent!==g){var v=$D(s,l,d,h,g);if(s!==null){var w=qs(s);w!==null&&Gv(w)}return v}a.eventSystemFlags|=d;var E=a.targetContainers;return h!==null&&E.indexOf(h)===-1&&E.push(h),a}function ID(a,s,l,d,h){switch(s){case"focusin":{var g=h;return Ms=gd(Ms,a,s,l,d,g),!0}case"dragenter":{var v=h;return Fs=gd(Fs,a,s,l,d,v),!0}case"mouseover":{var w=h;return Bs=gd(Bs,a,s,l,d,w),!0}case"pointerover":{var E=h,k=E.pointerId;return pd.set(k,gd(pd.get(k)||null,a,s,l,d,E)),!0}case"gotpointercapture":{var N=h,L=N.pointerId;return md.set(L,gd(md.get(L)||null,a,s,l,d,N)),!0}}return!1}function lT(a){var s=iu(a.target);if(s!==null){var l=Yo(s);if(l!==null){var d=l.tag;if(d===j){var h=$x(l);if(h!==null){a.blockedOn=h,oT(a.priority,function(){iT(l)});return}}else if(d===y){var g=l.stateNode;if(op(g)){a.blockedOn=Ix(l);return}}}}a.blockedOn=null}function jD(a){for(var s=sT(),l={blockedOn:null,target:a,priority:s},d=0;d<zs.length&&qv(s,zs[d].priority);d++);zs.splice(d,0,l),d===0&&lT(l)}function lp(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;s.length>0;){var l=s[0],d=Zv(a.domEventName,a.eventSystemFlags,l,a.nativeEvent);if(d===null){var h=a.nativeEvent,g=new h.constructor(h.type,h);uj(g),h.target.dispatchEvent(g),lj()}else{var v=qs(d);return v!==null&&Gv(v),a.blockedOn=d,!1}s.shift()}return!0}function cT(a,s,l){lp(a)&&l.delete(s)}function DD(){Wv=!1,Ms!==null&&lp(Ms)&&(Ms=null),Fs!==null&&lp(Fs)&&(Fs=null),Bs!==null&&lp(Bs)&&(Bs=null),pd.forEach(cT),md.forEach(cT)}function yd(a,s){a.blockedOn===s&&(a.blockedOn=null,Wv||(Wv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,DD)))}function vd(a){if(up.length>0){yd(up[0],a);for(var s=1;s<up.length;s++){var l=up[s];l.blockedOn===a&&(l.blockedOn=null)}}Ms!==null&&yd(Ms,a),Fs!==null&&yd(Fs,a),Bs!==null&&yd(Bs,a);var d=function(w){return yd(w,a)};pd.forEach(d),md.forEach(d);for(var h=0;h<zs.length;h++){var g=zs[h];g.blockedOn===a&&(g.blockedOn=null)}for(;zs.length>0;){var v=zs[0];if(v.blockedOn!==null)break;lT(v),v.blockedOn===null&&zs.shift()}}var ll=t.ReactCurrentBatchConfig,Jv=!0;function dT(a){Jv=!!a}function LD(){return Jv}function UD(a,s,l){var d=fT(s),h;switch(d){case fa:h=MD;break;case ds:h=FD;break;case fs:default:h=Kv;break}return h.bind(null,s,l,a)}function MD(a,s,l,d){var h=Za(),g=ll.transition;ll.transition=null;try{nn(fa),Kv(a,s,l,d)}finally{nn(h),ll.transition=g}}function FD(a,s,l,d){var h=Za(),g=ll.transition;ll.transition=null;try{nn(ds),Kv(a,s,l,d)}finally{nn(h),ll.transition=g}}function Kv(a,s,l,d){Jv&&BD(a,s,l,d)}function BD(a,s,l,d){var h=Zv(a,s,l,d);if(h===null){cb(a,s,d,cp,l),uT(a,d);return}if(ID(h,a,s,l,d)){d.stopPropagation();return}if(uT(a,d),s&Qc&&PD(a)){for(;h!==null;){var g=qs(h);g!==null&&CD(g);var v=Zv(a,s,l,d);if(v===null&&cb(a,s,d,cp,l),v===h)break;h=v}h!==null&&d.stopPropagation();return}cb(a,s,d,null,l)}var cp=null;function Zv(a,s,l,d){cp=null;var h=rv(d),g=iu(h);if(g!==null){var v=Yo(g);if(v===null)g=null;else{var w=v.tag;if(w===j){var E=$x(v);if(E!==null)return E;g=null}else if(w===y){var k=v.stateNode;if(op(k))return Ix(v);g=null}else v!==g&&(g=null)}}return cp=g,null}function fT(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return fa;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return ds;case"message":{var s=Pj();switch(s){case Qh:return fa;case yv:return ds;case Xo:case $j:return fs;case vv:return sp;default:return fs}}default:return fs}}function zD(a,s,l){return a.addEventListener(s,l,!1),l}function VD(a,s,l){return a.addEventListener(s,l,!0),l}function HD(a,s,l,d){return a.addEventListener(s,l,{capture:!0,passive:d}),l}function qD(a,s,l,d){return a.addEventListener(s,l,{passive:d}),l}var bd=null,Yv=null,_d=null;function GD(a){return bd=a,Yv=pT(),!0}function WD(){bd=null,Yv=null,_d=null}function hT(){if(_d)return _d;var a,s=Yv,l=s.length,d,h=pT(),g=h.length;for(a=0;a<l&&s[a]===h[a];a++);var v=l-a;for(d=1;d<=v&&s[l-d]===h[g-d];d++);var w=d>1?1-d:void 0;return _d=h.slice(a,w),_d}function pT(){return"value"in bd?bd.value:bd.textContent}function dp(a){var s,l=a.keyCode;return"charCode"in a?(s=a.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),s>=32||s===13?s:0}function fp(){return!0}function mT(){return!1}function ha(a){function s(l,d,h,g,v){this._reactName=l,this._targetInst=h,this.type=d,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var w in a)if(a.hasOwnProperty(w)){var E=a[w];E?this[w]=E(g):this[w]=g[w]}var k=g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1;return k?this.isDefaultPrevented=fp:this.isDefaultPrevented=mT,this.isPropagationStopped=mT,this}return mt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fp)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fp)},persist:function(){},isPersistent:fp}),s}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=ha(cl),wd=mt({},cl,{view:0,detail:0}),JD=ha(wd),Qv,eb,Sd;function KD(a){a!==Sd&&(Sd&&a.type==="mousemove"?(Qv=a.screenX-Sd.screenX,eb=a.screenY-Sd.screenY):(Qv=0,eb=0),Sd=a)}var hp=mt({},wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rb,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(KD(a),Qv)},movementY:function(a){return"movementY"in a?a.movementY:eb}}),gT=ha(hp),ZD=mt({},hp,{dataTransfer:0}),YD=ha(ZD),XD=mt({},wd,{relatedTarget:0}),tb=ha(XD),QD=mt({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),eL=ha(QD),tL=mt({},cl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),rL=ha(tL),nL=mt({},cl,{data:0}),yT=ha(nL),aL=yT,iL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function oL(a){if(a.key){var s=iL[a.key]||a.key;if(s!=="Unidentified")return s}if(a.type==="keypress"){var l=dp(a);return l===13?"Enter":String.fromCharCode(l)}return a.type==="keydown"||a.type==="keyup"?sL[a.keyCode]||"Unidentified":""}var uL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lL(a){var s=this,l=s.nativeEvent;if(l.getModifierState)return l.getModifierState(a);var d=uL[a];return d?!!l[d]:!1}function rb(a){return lL}var cL=mt({},wd,{key:oL,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rb,charCode:function(a){return a.type==="keypress"?dp(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?dp(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),dL=ha(cL),fL=mt({},hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vT=ha(fL),hL=mt({},wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rb}),pL=ha(hL),mL=mt({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gL=ha(mL),yL=mt({},hp,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),vL=ha(yL),bL=[9,13,27,32],bT=229,nb=Jt&&"CompositionEvent"in window,Ed=null;Jt&&"documentMode"in document&&(Ed=document.documentMode);var _L=Jt&&"TextEvent"in window&&!Ed,_T=Jt&&(!nb||Ed&&Ed>8&&Ed<=11),wT=32,ST=String.fromCharCode(wT);function wL(){cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),cr("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),cr("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var ET=!1;function SL(a){return(a.ctrlKey||a.altKey||a.metaKey)&&!(a.ctrlKey&&a.altKey)}function EL(a){switch(a){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function xL(a,s){return a==="keydown"&&s.keyCode===bT}function xT(a,s){switch(a){case"keyup":return bL.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==bT;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TT(a){var s=a.detail;return typeof s=="object"&&"data"in s?s.data:null}function CT(a){return a.locale==="ko"}var dl=!1;function TL(a,s,l,d,h){var g,v;if(nb?g=EL(s):dl?xT(s,d)&&(g="onCompositionEnd"):xL(s,d)&&(g="onCompositionStart"),!g)return null;_T&&!CT(d)&&(!dl&&g==="onCompositionStart"?dl=GD(h):g==="onCompositionEnd"&&dl&&(v=hT()));var w=vp(l,g);if(w.length>0){var E=new yT(g,s,null,d,h);if(a.push({event:E,listeners:w}),v)E.data=v;else{var k=TT(d);k!==null&&(E.data=k)}}}function CL(a,s){switch(a){case"compositionend":return TT(s);case"keypress":var l=s.which;return l!==wT?null:(ET=!0,ST);case"textInput":var d=s.data;return d===ST&&ET?null:d;default:return null}}function RL(a,s){if(dl){if(a==="compositionend"||!nb&&xT(a,s)){var l=hT();return WD(),dl=!1,l}return null}switch(a){case"paste":return null;case"keypress":if(!SL(s)){if(s.char&&s.char.length>1)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _T&&!CT(s)?null:s.data;default:return null}}function OL(a,s,l,d,h){var g;if(_L?g=CL(s,d):g=RL(s,d),!g)return null;var v=vp(l,"onBeforeInput");if(v.length>0){var w=new aL("onBeforeInput","beforeinput",null,d,h);a.push({event:w,listeners:v}),w.data=g}}function AL(a,s,l,d,h,g,v){TL(a,s,l,d,h),OL(a,s,l,d,h)}var kL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RT(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!kL[a.type]:s==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function NL(a){if(!Jt)return!1;var s="on"+a,l=s in document;if(!l){var d=document.createElement("div");d.setAttribute(s,"return;"),l=typeof d[s]=="function"}return l}function PL(){cr("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function OT(a,s,l,d){xx(d);var h=vp(s,"onChange");if(h.length>0){var g=new Xv("onChange","change",null,l,d);a.push({event:g,listeners:h})}}var xd=null,Td=null;function $L(a){var s=a.nodeName&&a.nodeName.toLowerCase();return s==="select"||s==="input"&&a.type==="file"}function IL(a){var s=[];OT(s,Td,a,rv(a)),Ox(jL,s)}function jL(a){GT(a,0)}function pp(a){var s=yl(a);if(Wc(s))return a}function DL(a,s){if(a==="change")return s}var AT=!1;Jt&&(AT=NL("input")&&(!document.documentMode||document.documentMode>9));function LL(a,s){xd=a,Td=s,xd.attachEvent("onpropertychange",NT)}function kT(){xd&&(xd.detachEvent("onpropertychange",NT),xd=null,Td=null)}function NT(a){a.propertyName==="value"&&pp(Td)&&IL(a)}function UL(a,s,l){a==="focusin"?(kT(),LL(s,l)):a==="focusout"&&kT()}function ML(a,s){if(a==="selectionchange"||a==="keyup"||a==="keydown")return pp(Td)}function FL(a){var s=a.nodeName;return s&&s.toLowerCase()==="input"&&(a.type==="checkbox"||a.type==="radio")}function BL(a,s){if(a==="click")return pp(s)}function zL(a,s){if(a==="input"||a==="change")return pp(s)}function VL(a){var s=a._wrapperState;!s||!s.controlled||a.type!=="number"||We(a,"number",a.value)}function HL(a,s,l,d,h,g,v){var w=l?yl(l):window,E,k;if($L(w)?E=DL:RT(w)?AT?E=zL:(E=ML,k=UL):FL(w)&&(E=BL),E){var N=E(s,l);if(N){OT(a,N,d,h);return}}k&&k(s,w,l),s==="focusout"&&VL(w)}function qL(){Ht("onMouseEnter",["mouseout","mouseover"]),Ht("onMouseLeave",["mouseout","mouseover"]),Ht("onPointerEnter",["pointerout","pointerover"]),Ht("onPointerLeave",["pointerout","pointerover"])}function GL(a,s,l,d,h,g,v){var w=s==="mouseover"||s==="pointerover",E=s==="mouseout"||s==="pointerout";if(w&&!cj(d)){var k=d.relatedTarget||d.fromElement;if(k&&(iu(k)||Fd(k)))return}if(!(!E&&!w)){var N;if(h.window===h)N=h;else{var L=h.ownerDocument;L?N=L.defaultView||L.parentWindow:N=window}var D,z;if(E){var H=d.relatedTarget||d.toElement;if(D=l,z=H?iu(H):null,z!==null){var J=Yo(z);(z!==J||z.tag!==_&&z.tag!==S)&&(z=null)}}else D=null,z=l;if(D!==z){var ge=gT,ze="onMouseLeave",je="onMouseEnter",xt="mouse";(s==="pointerout"||s==="pointerover")&&(ge=vT,ze="onPointerLeave",je="onPointerEnter",xt="pointer");var vt=D==null?N:yl(D),M=z==null?N:yl(z),K=new ge(ze,xt+"leave",D,d,h);K.target=vt,K.relatedTarget=M;var F=null,ne=iu(h);if(ne===l){var xe=new ge(je,xt+"enter",z,d,h);xe.target=M,xe.relatedTarget=vt,F=xe}gU(a,K,F,D,z)}}}function WL(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var pa=typeof Object.is=="function"?Object.is:WL;function Cd(a,s){if(pa(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var l=Object.keys(a),d=Object.keys(s);if(l.length!==d.length)return!1;for(var h=0;h<l.length;h++){var g=l[h];if(!Cr.call(s,g)||!pa(a[g],s[g]))return!1}return!0}function PT(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function JL(a){for(;a;){if(a.nextSibling)return a.nextSibling;a=a.parentNode}}function $T(a,s){for(var l=PT(a),d=0,h=0;l;){if(l.nodeType===is){if(h=d+l.textContent.length,d<=s&&h>=s)return{node:l,offset:s-d};d=h}l=PT(JL(l))}}function KL(a){var s=a.ownerDocument,l=s&&s.defaultView||window,d=l.getSelection&&l.getSelection();if(!d||d.rangeCount===0)return null;var h=d.anchorNode,g=d.anchorOffset,v=d.focusNode,w=d.focusOffset;try{h.nodeType,v.nodeType}catch{return null}return ZL(a,h,g,v,w)}function ZL(a,s,l,d,h){var g=0,v=-1,w=-1,E=0,k=0,N=a,L=null;e:for(;;){for(var D=null;N===s&&(l===0||N.nodeType===is)&&(v=g+l),N===d&&(h===0||N.nodeType===is)&&(w=g+h),N.nodeType===is&&(g+=N.nodeValue.length),(D=N.firstChild)!==null;)L=N,N=D;for(;;){if(N===a)break e;if(L===s&&++E===l&&(v=g),L===d&&++k===h&&(w=g),(D=N.nextSibling)!==null)break;N=L,L=N.parentNode}N=D}return v===-1||w===-1?null:{start:v,end:w}}function YL(a,s){var l=a.ownerDocument||document,d=l&&l.defaultView||window;if(d.getSelection){var h=d.getSelection(),g=a.textContent.length,v=Math.min(s.start,g),w=s.end===void 0?v:Math.min(s.end,g);if(!h.extend&&v>w){var E=w;w=v,v=E}var k=$T(a,v),N=$T(a,w);if(k&&N){if(h.rangeCount===1&&h.anchorNode===k.node&&h.anchorOffset===k.offset&&h.focusNode===N.node&&h.focusOffset===N.offset)return;var L=l.createRange();L.setStart(k.node,k.offset),h.removeAllRanges(),v>w?(h.addRange(L),h.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),h.addRange(L))}}}function IT(a){return a&&a.nodeType===is}function jT(a,s){return!a||!s?!1:a===s?!0:IT(a)?!1:IT(s)?jT(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1}function XL(a){return a&&a.ownerDocument&&jT(a.ownerDocument.documentElement,a)}function QL(a){try{return typeof a.contentWindow.location.href=="string"}catch{return!1}}function DT(){for(var a=window,s=rs();s instanceof a.HTMLIFrameElement;){if(QL(s))a=s.contentWindow;else return s;s=rs(a.document)}return s}function ab(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}function eU(){var a=DT();return{focusedElem:a,selectionRange:ab(a)?rU(a):null}}function tU(a){var s=DT(),l=a.focusedElem,d=a.selectionRange;if(s!==l&&XL(l)){d!==null&&ab(l)&&nU(l,d);for(var h=[],g=l;g=g.parentNode;)g.nodeType===Kn&&h.push({element:g,left:g.scrollLeft,top:g.scrollTop});typeof l.focus=="function"&&l.focus();for(var v=0;v<h.length;v++){var w=h[v];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}}function rU(a){var s;return"selectionStart"in a?s={start:a.selectionStart,end:a.selectionEnd}:s=KL(a),s||{start:0,end:0}}function nU(a,s){var l=s.start,d=s.end;d===void 0&&(d=l),"selectionStart"in a?(a.selectionStart=l,a.selectionEnd=Math.min(d,a.value.length)):YL(a,s)}var aU=Jt&&"documentMode"in document&&document.documentMode<=11;function iU(){cr("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var fl=null,ib=null,Rd=null,sb=!1;function sU(a){if("selectionStart"in a&&ab(a))return{start:a.selectionStart,end:a.selectionEnd};var s=a.ownerDocument&&a.ownerDocument.defaultView||window,l=s.getSelection();return{anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}}function oU(a){return a.window===a?a.document:a.nodeType===ss?a:a.ownerDocument}function LT(a,s,l){var d=oU(l);if(!(sb||fl==null||fl!==rs(d))){var h=sU(fl);if(!Rd||!Cd(Rd,h)){Rd=h;var g=vp(ib,"onSelect");if(g.length>0){var v=new Xv("onSelect","select",null,s,l);a.push({event:v,listeners:g}),v.target=fl}}}}function uU(a,s,l,d,h,g,v){var w=l?yl(l):window;switch(s){case"focusin":(RT(w)||w.contentEditable==="true")&&(fl=w,ib=l,Rd=null);break;case"focusout":fl=null,ib=null,Rd=null;break;case"mousedown":sb=!0;break;case"contextmenu":case"mouseup":case"dragend":sb=!1,LT(a,d,h);break;case"selectionchange":if(aU)break;case"keydown":case"keyup":LT(a,d,h)}}function mp(a,s){var l={};return l[a.toLowerCase()]=s.toLowerCase(),l["Webkit"+a]="webkit"+s,l["Moz"+a]="moz"+s,l}var hl={animationend:mp("Animation","AnimationEnd"),animationiteration:mp("Animation","AnimationIteration"),animationstart:mp("Animation","AnimationStart"),transitionend:mp("Transition","TransitionEnd")},ob={},UT={};Jt&&(UT=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function gp(a){if(ob[a])return ob[a];if(!hl[a])return a;var s=hl[a];for(var l in s)if(s.hasOwnProperty(l)&&l in UT)return ob[a]=s[l];return a}var MT=gp("animationend"),FT=gp("animationiteration"),BT=gp("animationstart"),zT=gp("transitionend"),VT=new Map,HT=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Vs(a,s){VT.set(a,s),cr(s,[a])}function lU(){for(var a=0;a<HT.length;a++){var s=HT[a],l=s.toLowerCase(),d=s[0].toUpperCase()+s.slice(1);Vs(l,"on"+d)}Vs(MT,"onAnimationEnd"),Vs(FT,"onAnimationIteration"),Vs(BT,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(zT,"onTransitionEnd")}function cU(a,s,l,d,h,g,v){var w=VT.get(s);if(w!==void 0){var E=Xv,k=s;switch(s){case"keypress":if(dp(d)===0)return;case"keydown":case"keyup":E=dL;break;case"focusin":k="focus",E=tb;break;case"focusout":k="blur",E=tb;break;case"beforeblur":case"afterblur":E=tb;break;case"click":if(d.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=gT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=YD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=pL;break;case MT:case FT:case BT:E=eL;break;case zT:E=gL;break;case"scroll":E=JD;break;case"wheel":E=vL;break;case"copy":case"cut":case"paste":E=rL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=vT;break}var N=(g&Qc)!==0;{var L=!N&&s==="scroll",D=pU(l,w,d.type,N,L);if(D.length>0){var z=new E(w,k,null,d,h);a.push({event:z,listeners:D})}}}}lU(),qL(),PL(),iU(),wL();function dU(a,s,l,d,h,g,v){cU(a,s,l,d,h,g);var w=(g&oj)===0;w&&(GL(a,s,l,d,h),HL(a,s,l,d,h),uU(a,s,l,d,h),AL(a,s,l,d,h))}var Od=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],ub=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(Od));function qT(a,s,l){var d=a.type||"unknown-event";a.currentTarget=l,bj(d,s,void 0,a),a.currentTarget=null}function fU(a,s,l){var d;if(l)for(var h=s.length-1;h>=0;h--){var g=s[h],v=g.instance,w=g.currentTarget,E=g.listener;if(v!==d&&a.isPropagationStopped())return;qT(a,E,w),d=v}else for(var k=0;k<s.length;k++){var N=s[k],L=N.instance,D=N.currentTarget,z=N.listener;if(L!==d&&a.isPropagationStopped())return;qT(a,z,D),d=L}}function GT(a,s){for(var l=(s&Qc)!==0,d=0;d<a.length;d++){var h=a[d],g=h.event,v=h.listeners;fU(g,v,l)}_j()}function hU(a,s,l,d,h){var g=rv(l),v=[];dU(v,a,d,l,g,s),GT(v,s)}function ar(a,s){ub.has(a)||u('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',a);var l=!1,d=VM(s),h=yU(a);d.has(h)||(WT(s,a,tv,l),d.add(h))}function lb(a,s,l){ub.has(a)&&!s&&u('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',a);var d=0;s&&(d|=Qc),WT(l,a,d,s)}var yp="_reactListening"+Math.random().toString(36).slice(2);function Ad(a){if(!a[yp]){a[yp]=!0,ir.forEach(function(l){l!=="selectionchange"&&(ub.has(l)||lb(l,!1,a),lb(l,!0,a))});var s=a.nodeType===ss?a:a.ownerDocument;s!==null&&(s[yp]||(s[yp]=!0,lb("selectionchange",!1,s)))}}function WT(a,s,l,d,h){var g=UD(a,s,l),v=void 0;iv&&(s==="touchstart"||s==="touchmove"||s==="wheel")&&(v=!0),a=a,d?v!==void 0?HD(a,s,g,v):VD(a,s,g):v!==void 0?qD(a,s,g,v):zD(a,s,g)}function JT(a,s){return a===s||a.nodeType===Ar&&a.parentNode===s}function cb(a,s,l,d,h){var g=d;if(!(s&Sx)&&!(s&tv)){var v=h;if(d!==null){var w=d;e:for(;;){if(w===null)return;var E=w.tag;if(E===y||E===b){var k=w.stateNode.containerInfo;if(JT(k,v))break;if(E===b)for(var N=w.return;N!==null;){var L=N.tag;if(L===y||L===b){var D=N.stateNode.containerInfo;if(JT(D,v))return}N=N.return}for(;k!==null;){var z=iu(k);if(z===null)return;var H=z.tag;if(H===_||H===S){w=g=z;continue e}k=k.parentNode}}w=w.return}}}Ox(function(){return hU(a,s,l,g)})}function kd(a,s,l){return{instance:a,listener:s,currentTarget:l}}function pU(a,s,l,d,h,g){for(var v=s!==null?s+"Capture":null,w=d?v:s,E=[],k=a,N=null;k!==null;){var L=k,D=L.stateNode,z=L.tag;if(z===_&&D!==null&&(N=D,w!==null)){var H=td(k,w);H!=null&&E.push(kd(k,H,N))}if(h)break;k=k.return}return E}function vp(a,s){for(var l=s+"Capture",d=[],h=a;h!==null;){var g=h,v=g.stateNode,w=g.tag;if(w===_&&v!==null){var E=v,k=td(h,l);k!=null&&d.unshift(kd(h,k,E));var N=td(h,s);N!=null&&d.push(kd(h,N,E))}h=h.return}return d}function pl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==_);return a||null}function mU(a,s){for(var l=a,d=s,h=0,g=l;g;g=pl(g))h++;for(var v=0,w=d;w;w=pl(w))v++;for(;h-v>0;)l=pl(l),h--;for(;v-h>0;)d=pl(d),v--;for(var E=h;E--;){if(l===d||d!==null&&l===d.alternate)return l;l=pl(l),d=pl(d)}return null}function KT(a,s,l,d,h){for(var g=s._reactName,v=[],w=l;w!==null&&w!==d;){var E=w,k=E.alternate,N=E.stateNode,L=E.tag;if(k!==null&&k===d)break;if(L===_&&N!==null){var D=N;if(h){var z=td(w,g);z!=null&&v.unshift(kd(w,z,D))}else if(!h){var H=td(w,g);H!=null&&v.push(kd(w,H,D))}}w=w.return}v.length!==0&&a.push({event:s,listeners:v})}function gU(a,s,l,d,h){var g=d&&h?mU(d,h):null;d!==null&&KT(a,s,d,g,!1),h!==null&&l!==null&&KT(a,l,h,g,!0)}function yU(a,s){return a+"__bubble"}var Zn=!1,Nd="dangerouslySetInnerHTML",bp="suppressContentEditableWarning",Hs="suppressHydrationWarning",ZT="autoFocus",nu="children",au="style",_p="__html",db,wp,Pd,YT,Sp,XT,QT;db={dialog:!0,webview:!0},wp=function(a,s){ej(a,s),tj(a,s),sj(a,s,{registrationNameDependencies:Wt,possibleRegistrationNames:Tr})},XT=Jt&&!document.documentMode,Pd=function(a,s,l){if(!Zn){var d=Ep(l),h=Ep(s);h!==d&&(Zn=!0,u("Prop `%s` did not match. Server: %s Client: %s",a,JSON.stringify(h),JSON.stringify(d)))}},YT=function(a){if(!Zn){Zn=!0;var s=[];a.forEach(function(l){s.push(l)}),u("Extra attributes from the server: %s",s)}},Sp=function(a,s){s===!1?u("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",a,a,a):u("Expected `%s` listener to be a function, instead got a value of `%s` type.",a,typeof s)},QT=function(a,s){var l=a.namespaceURI===as?a.ownerDocument.createElement(a.tagName):a.ownerDocument.createElementNS(a.namespaceURI,a.tagName);return l.innerHTML=s,l.innerHTML};var vU=/\r\n?/g,bU=/\u0000|\uFFFD/g;function Ep(a){ce(a);var s=typeof a=="string"?a:""+a;return s.replace(vU,`
`).replace(bU,"")}function xp(a,s,l,d){var h=Ep(s),g=Ep(a);if(g!==h&&(d&&(Zn||(Zn=!0,u('Text content did not match. Server: "%s" Client: "%s"',g,h))),l&&te))throw new Error("Text content does not match server-rendered HTML.")}function eC(a){return a.nodeType===ss?a:a.ownerDocument}function _U(){}function Tp(a){a.onclick=_U}function wU(a,s,l,d,h){for(var g in d)if(d.hasOwnProperty(g)){var v=d[g];if(g===au)v&&Object.freeze(v),gx(s,v);else if(g===Nd){var w=v?v[_p]:void 0;w!=null&&dx(s,w)}else if(g===nu)if(typeof v=="string"){var E=a!=="textarea"||v!=="";E&&Jh(s,v)}else typeof v=="number"&&Jh(s,""+v);else g===bp||g===Hs||g===ZT||(Wt.hasOwnProperty(g)?v!=null&&(typeof v!="function"&&Sp(g,v),g==="onScroll"&&ar("scroll",s)):v!=null&&qa(s,g,v,h))}}function SU(a,s,l,d){for(var h=0;h<s.length;h+=2){var g=s[h],v=s[h+1];g===au?gx(a,v):g===Nd?dx(a,v):g===nu?Jh(a,v):qa(a,g,v,d)}}function EU(a,s,l,d){var h,g=eC(l),v,w=d;if(w===as&&(w=Ky(a)),w===as){if(h=Go(a,s),!h&&a!==a.toLowerCase()&&u("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",a),a==="script"){var E=g.createElement("div");E.innerHTML="<script><\/script>";var k=E.firstChild;v=E.removeChild(k)}else if(typeof s.is=="string")v=g.createElement(a,{is:s.is});else if(v=g.createElement(a),a==="select"){var N=v;s.multiple?N.multiple=!0:s.size&&(N.size=s.size)}}else v=g.createElementNS(w,a);return w===as&&!h&&Object.prototype.toString.call(v)==="[object HTMLUnknownElement]"&&!Cr.call(db,a)&&(db[a]=!0,u("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",a)),v}function xU(a,s){return eC(s).createTextNode(a)}function TU(a,s,l,d){var h=Go(s,l);wp(s,l);var g;switch(s){case"dialog":ar("cancel",a),ar("close",a),g=l;break;case"iframe":case"object":case"embed":ar("load",a),g=l;break;case"video":case"audio":for(var v=0;v<Od.length;v++)ar(Od[v],a);g=l;break;case"source":ar("error",a),g=l;break;case"img":case"image":case"link":ar("error",a),ar("load",a),g=l;break;case"details":ar("toggle",a),g=l;break;case"input":qh(a,l),g=Jc(a,l),ar("invalid",a);break;case"option":Mt(a,l),g=l;break;case"select":Yc(a,l),g=Zc(a,l),ar("invalid",a);break;case"textarea":ux(a,l),g=Wy(a,l),ar("invalid",a);break;default:g=l}switch(ev(s,g),wU(s,a,d,g,h),s){case"input":Ho(a),V(a,l,!1);break;case"textarea":Ho(a),cx(a);break;case"option":Yt(a,l);break;case"select":qy(a,l);break;default:typeof g.onClick=="function"&&Tp(a);break}}function CU(a,s,l,d,h){wp(s,d);var g=null,v,w;switch(s){case"input":v=Jc(a,l),w=Jc(a,d),g=[];break;case"select":v=Zc(a,l),w=Zc(a,d),g=[];break;case"textarea":v=Wy(a,l),w=Wy(a,d),g=[];break;default:v=l,w=d,typeof v.onClick!="function"&&typeof w.onClick=="function"&&Tp(a);break}ev(s,w);var E,k,N=null;for(E in v)if(!(w.hasOwnProperty(E)||!v.hasOwnProperty(E)||v[E]==null))if(E===au){var L=v[E];for(k in L)L.hasOwnProperty(k)&&(N||(N={}),N[k]="")}else E===Nd||E===nu||E===bp||E===Hs||E===ZT||(Wt.hasOwnProperty(E)?g||(g=[]):(g=g||[]).push(E,null));for(E in w){var D=w[E],z=v!=null?v[E]:void 0;if(!(!w.hasOwnProperty(E)||D===z||D==null&&z==null))if(E===au)if(D&&Object.freeze(D),z){for(k in z)z.hasOwnProperty(k)&&(!D||!D.hasOwnProperty(k))&&(N||(N={}),N[k]="");for(k in D)D.hasOwnProperty(k)&&z[k]!==D[k]&&(N||(N={}),N[k]=D[k])}else N||(g||(g=[]),g.push(E,N)),N=D;else if(E===Nd){var H=D?D[_p]:void 0,J=z?z[_p]:void 0;H!=null&&J!==H&&(g=g||[]).push(E,H)}else E===nu?(typeof D=="string"||typeof D=="number")&&(g=g||[]).push(E,""+D):E===bp||E===Hs||(Wt.hasOwnProperty(E)?(D!=null&&(typeof D!="function"&&Sp(E,D),E==="onScroll"&&ar("scroll",a)),!g&&z!==D&&(g=[])):(g=g||[]).push(E,D))}return N&&(GI(N,w[au]),(g=g||[]).push(au,N)),g}function RU(a,s,l,d,h){l==="input"&&h.type==="radio"&&h.name!=null&&x(a,h);var g=Go(l,d),v=Go(l,h);switch(SU(a,s,g,v),l){case"input":$(a,h);break;case"textarea":lx(a,h);break;case"select":Gh(a,h);break}}function OU(a){{var s=a.toLowerCase();return Kh.hasOwnProperty(s)&&Kh[s]||null}}function AU(a,s,l,d,h,g,v){var w,E;switch(w=Go(s,l),wp(s,l),s){case"dialog":ar("cancel",a),ar("close",a);break;case"iframe":case"object":case"embed":ar("load",a);break;case"video":case"audio":for(var k=0;k<Od.length;k++)ar(Od[k],a);break;case"source":ar("error",a);break;case"img":case"image":case"link":ar("error",a),ar("load",a);break;case"details":ar("toggle",a);break;case"input":qh(a,l),ar("invalid",a);break;case"option":Mt(a,l);break;case"select":Yc(a,l),ar("invalid",a);break;case"textarea":ux(a,l),ar("invalid",a);break}ev(s,l);{E=new Set;for(var N=a.attributes,L=0;L<N.length;L++){var D=N[L].name.toLowerCase();switch(D){case"value":break;case"checked":break;case"selected":break;default:E.add(N[L].name)}}}var z=null;for(var H in l)if(l.hasOwnProperty(H)){var J=l[H];if(H===nu)typeof J=="string"?a.textContent!==J&&(l[Hs]!==!0&&xp(a.textContent,J,g,v),z=[nu,J]):typeof J=="number"&&a.textContent!==""+J&&(l[Hs]!==!0&&xp(a.textContent,J,g,v),z=[nu,""+J]);else if(Wt.hasOwnProperty(H))J!=null&&(typeof J!="function"&&Sp(H,J),H==="onScroll"&&ar("scroll",a));else if(v&&typeof w=="boolean"){var ge=void 0,ze=vr(H);if(l[Hs]!==!0){if(!(H===bp||H===Hs||H==="value"||H==="checked"||H==="selected")){if(H===Nd){var je=a.innerHTML,xt=J?J[_p]:void 0;if(xt!=null){var vt=QT(a,xt);vt!==je&&Pd(H,je,vt)}}else if(H===au){if(E.delete(H),XT){var M=HI(J);ge=a.getAttribute("style"),M!==ge&&Pd(H,ge,M)}}else if(w&&!Ze)E.delete(H.toLowerCase()),ge=Do(a,H,J),J!==ge&&Pd(H,ge,J);else if(!hr(H,ze,w)&&!Sn(H,J,ze,w)){var K=!1;if(ze!==null)E.delete(ze.attributeName),ge=Fu(a,H,J,ze);else{var F=d;if(F===as&&(F=Ky(s)),F===as)E.delete(H.toLowerCase());else{var ne=OU(H);ne!==null&&ne!==H&&(K=!0,E.delete(ne)),E.delete(H)}ge=Do(a,H,J)}var xe=Ze;!xe&&J!==ge&&!K&&Pd(H,ge,J)}}}}}switch(v&&E.size>0&&l[Hs]!==!0&&YT(E),s){case"input":Ho(a),V(a,l,!0);break;case"textarea":Ho(a),cx(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&Tp(a);break}return z}function kU(a,s,l){var d=a.nodeValue!==s;return d}function fb(a,s){{if(Zn)return;Zn=!0,u("Did not expect server HTML to contain a <%s> in <%s>.",s.nodeName.toLowerCase(),a.nodeName.toLowerCase())}}function hb(a,s){{if(Zn)return;Zn=!0,u('Did not expect server HTML to contain the text node "%s" in <%s>.',s.nodeValue,a.nodeName.toLowerCase())}}function pb(a,s,l){{if(Zn)return;Zn=!0,u("Expected server HTML to contain a matching <%s> in <%s>.",s,a.nodeName.toLowerCase())}}function mb(a,s){{if(s===""||Zn)return;Zn=!0,u('Expected server HTML to contain a matching text node for "%s" in <%s>.',s,a.nodeName.toLowerCase())}}function NU(a,s,l){switch(s){case"input":W(a,l);return;case"textarea":TI(a,l);return;case"select":Gy(a,l);return}}var $d=function(){},Id=function(){};{var PU=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],tC=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],$U=tC.concat(["button"]),IU=["dd","dt","li","option","optgroup","p","rp","rt"],rC={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Id=function(a,s){var l=mt({},a||rC),d={tag:s};return tC.indexOf(s)!==-1&&(l.aTagInScope=null,l.buttonTagInScope=null,l.nobrTagInScope=null),$U.indexOf(s)!==-1&&(l.pTagInButtonScope=null),PU.indexOf(s)!==-1&&s!=="address"&&s!=="div"&&s!=="p"&&(l.listItemTagAutoclosing=null,l.dlItemTagAutoclosing=null),l.current=d,s==="form"&&(l.formTag=d),s==="a"&&(l.aTagInScope=d),s==="button"&&(l.buttonTagInScope=d),s==="nobr"&&(l.nobrTagInScope=d),s==="p"&&(l.pTagInButtonScope=d),s==="li"&&(l.listItemTagAutoclosing=d),(s==="dd"||s==="dt")&&(l.dlItemTagAutoclosing=d),l};var jU=function(a,s){switch(s){case"select":return a==="option"||a==="optgroup"||a==="#text";case"optgroup":return a==="option"||a==="#text";case"option":return a==="#text";case"tr":return a==="th"||a==="td"||a==="style"||a==="script"||a==="template";case"tbody":case"thead":case"tfoot":return a==="tr"||a==="style"||a==="script"||a==="template";case"colgroup":return a==="col"||a==="template";case"table":return a==="caption"||a==="colgroup"||a==="tbody"||a==="tfoot"||a==="thead"||a==="style"||a==="script"||a==="template";case"head":return a==="base"||a==="basefont"||a==="bgsound"||a==="link"||a==="meta"||a==="title"||a==="noscript"||a==="noframes"||a==="style"||a==="script"||a==="template";case"html":return a==="head"||a==="body"||a==="frameset";case"frameset":return a==="frame";case"#document":return a==="html"}switch(a){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return s!=="h1"&&s!=="h2"&&s!=="h3"&&s!=="h4"&&s!=="h5"&&s!=="h6";case"rp":case"rt":return IU.indexOf(s)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return s==null}return!0},DU=function(a,s){switch(a){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return s.pTagInButtonScope;case"form":return s.formTag||s.pTagInButtonScope;case"li":return s.listItemTagAutoclosing;case"dd":case"dt":return s.dlItemTagAutoclosing;case"button":return s.buttonTagInScope;case"a":return s.aTagInScope;case"nobr":return s.nobrTagInScope}return null},nC={};$d=function(a,s,l){l=l||rC;var d=l.current,h=d&&d.tag;s!=null&&(a!=null&&u("validateDOMNesting: when childText is passed, childTag should be null"),a="#text");var g=jU(a,h)?null:d,v=g?null:DU(a,l),w=g||v;if(w){var E=w.tag,k=!!g+"|"+a+"|"+E;if(!nC[k]){nC[k]=!0;var N=a,L="";if(a==="#text"?/\S/.test(s)?N="Text nodes":(N="Whitespace text nodes",L=" Make sure you don't have any extra whitespace between tags on each line of your source code."):N="<"+a+">",g){var D="";E==="table"&&a==="tr"&&(D+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),u("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",N,E,L,D)}else u("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",N,E)}}}}var Cp="suppressHydrationWarning",Rp="$",Op="/$",jd="$?",Dd="$!",LU="style",gb=null,yb=null;function UU(a){var s,l,d=a.nodeType;switch(d){case ss:case Yy:{s=d===ss?"#document":"#fragment";var h=a.documentElement;l=h?h.namespaceURI:Zy(null,"");break}default:{var g=d===Ar?a.parentNode:a,v=g.namespaceURI||null;s=g.tagName,l=Zy(v,s);break}}{var w=s.toLowerCase(),E=Id(null,w);return{namespace:l,ancestorInfo:E}}}function MU(a,s,l){{var d=a,h=Zy(d.namespace,s),g=Id(d.ancestorInfo,s);return{namespace:h,ancestorInfo:g}}}function GY(a){return a}function FU(a){gb=LD(),yb=eU();var s=null;return dT(!1),s}function BU(a){tU(yb),dT(gb),gb=null,yb=null}function zU(a,s,l,d,h){var g;{var v=d;if($d(a,null,v.ancestorInfo),typeof s.children=="string"||typeof s.children=="number"){var w=""+s.children,E=Id(v.ancestorInfo,a);$d(null,w,E)}g=v.namespace}var k=EU(a,s,l,g);return Md(h,k),Tb(k,s),k}function VU(a,s){a.appendChild(s)}function HU(a,s,l,d,h){switch(TU(a,s,l,d),s){case"button":case"input":case"select":case"textarea":return!!l.autoFocus;case"img":return!0;default:return!1}}function qU(a,s,l,d,h,g){{var v=g;if(typeof d.children!=typeof l.children&&(typeof d.children=="string"||typeof d.children=="number")){var w=""+d.children,E=Id(v.ancestorInfo,s);$d(null,w,E)}}return CU(a,s,l,d)}function vb(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}function GU(a,s,l,d){{var h=l;$d(null,a,h.ancestorInfo)}var g=xU(a,s);return Md(d,g),g}function WU(){var a=window.event;return a===void 0?fs:fT(a.type)}var bb=typeof setTimeout=="function"?setTimeout:void 0,JU=typeof clearTimeout=="function"?clearTimeout:void 0,_b=-1,aC=typeof Promise=="function"?Promise:void 0,KU=typeof queueMicrotask=="function"?queueMicrotask:typeof aC<"u"?function(a){return aC.resolve(null).then(a).catch(ZU)}:bb;function ZU(a){setTimeout(function(){throw a})}function YU(a,s,l,d){switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();return;case"img":{l.src&&(a.src=l.src);return}}}function XU(a,s,l,d,h,g){RU(a,s,l,d,h),Tb(a,h)}function iC(a){Jh(a,"")}function QU(a,s,l){a.nodeValue=l}function eM(a,s){a.appendChild(s)}function tM(a,s){var l;a.nodeType===Ar?(l=a.parentNode,l.insertBefore(s,a)):(l=a,l.appendChild(s));var d=a._reactRootContainer;d==null&&l.onclick===null&&Tp(l)}function rM(a,s,l){a.insertBefore(s,l)}function nM(a,s,l){a.nodeType===Ar?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}function aM(a,s){a.removeChild(s)}function iM(a,s){a.nodeType===Ar?a.parentNode.removeChild(s):a.removeChild(s)}function wb(a,s){var l=s,d=0;do{var h=l.nextSibling;if(a.removeChild(l),h&&h.nodeType===Ar){var g=h.data;if(g===Op)if(d===0){a.removeChild(h),vd(s);return}else d--;else(g===Rp||g===jd||g===Dd)&&d++}l=h}while(l);vd(s)}function sM(a,s){a.nodeType===Ar?wb(a.parentNode,s):a.nodeType===Kn&&wb(a,s),vd(a)}function oM(a){a=a;var s=a.style;typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"}function uM(a){a.nodeValue=""}function lM(a,s){a=a;var l=s[LU],d=l!=null&&l.hasOwnProperty("display")?l.display:null;a.style.display=Xy("display",d)}function cM(a,s){a.nodeValue=s}function dM(a){a.nodeType===Kn?a.textContent="":a.nodeType===ss&&a.documentElement&&a.removeChild(a.documentElement)}function fM(a,s,l){return a.nodeType!==Kn||s.toLowerCase()!==a.nodeName.toLowerCase()?null:a}function hM(a,s){return s===""||a.nodeType!==is?null:a}function pM(a){return a.nodeType!==Ar?null:a}function sC(a){return a.data===jd}function Sb(a){return a.data===Dd}function mM(a){var s=a.nextSibling&&a.nextSibling.dataset,l,d,h;return s&&(l=s.dgst,d=s.msg,h=s.stck),{message:d,digest:l,stack:h}}function gM(a,s){a._reactRetry=s}function Ap(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===Kn||s===is)break;if(s===Ar){var l=a.data;if(l===Rp||l===Dd||l===jd)break;if(l===Op)return null}}return a}function Ld(a){return Ap(a.nextSibling)}function yM(a){return Ap(a.firstChild)}function vM(a){return Ap(a.firstChild)}function bM(a){return Ap(a.nextSibling)}function _M(a,s,l,d,h,g,v){Md(g,a),Tb(a,l);var w;{var E=h;w=E.namespace}var k=(g.mode&St)!==qe;return AU(a,s,l,w,d,k,v)}function wM(a,s,l,d){return Md(l,a),l.mode&St,kU(a,s)}function SM(a,s){Md(s,a)}function EM(a){for(var s=a.nextSibling,l=0;s;){if(s.nodeType===Ar){var d=s.data;if(d===Op){if(l===0)return Ld(s);l--}else(d===Rp||d===Dd||d===jd)&&l++}s=s.nextSibling}return null}function oC(a){for(var s=a.previousSibling,l=0;s;){if(s.nodeType===Ar){var d=s.data;if(d===Rp||d===Dd||d===jd){if(l===0)return s;l--}else d===Op&&l++}s=s.previousSibling}return null}function xM(a){vd(a)}function TM(a){vd(a)}function CM(a){return a!=="head"&&a!=="body"}function RM(a,s,l,d){var h=!0;xp(s.nodeValue,l,d,h)}function OM(a,s,l,d,h,g){if(s[Cp]!==!0){var v=!0;xp(d.nodeValue,h,g,v)}}function AM(a,s){s.nodeType===Kn?fb(a,s):s.nodeType===Ar||hb(a,s)}function kM(a,s){{var l=a.parentNode;l!==null&&(s.nodeType===Kn?fb(l,s):s.nodeType===Ar||hb(l,s))}}function NM(a,s,l,d,h){(h||s[Cp]!==!0)&&(d.nodeType===Kn?fb(l,d):d.nodeType===Ar||hb(l,d))}function PM(a,s,l){pb(a,s)}function $M(a,s){mb(a,s)}function IM(a,s,l){{var d=a.parentNode;d!==null&&pb(d,s)}}function jM(a,s){{var l=a.parentNode;l!==null&&mb(l,s)}}function DM(a,s,l,d,h,g){(g||s[Cp]!==!0)&&pb(l,d)}function LM(a,s,l,d,h){(h||s[Cp]!==!0)&&mb(l,d)}function UM(a){u("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",a.nodeName.toLowerCase())}function MM(a){Ad(a)}var ml=Math.random().toString(36).slice(2),gl="__reactFiber$"+ml,Eb="__reactProps$"+ml,Ud="__reactContainer$"+ml,xb="__reactEvents$"+ml,FM="__reactListeners$"+ml,BM="__reactHandles$"+ml;function zM(a){delete a[gl],delete a[Eb],delete a[xb],delete a[FM],delete a[BM]}function Md(a,s){s[gl]=a}function kp(a,s){s[Ud]=a}function uC(a){a[Ud]=null}function Fd(a){return!!a[Ud]}function iu(a){var s=a[gl];if(s)return s;for(var l=a.parentNode;l;){if(s=l[Ud]||l[gl],s){var d=s.alternate;if(s.child!==null||d!==null&&d.child!==null)for(var h=oC(a);h!==null;){var g=h[gl];if(g)return g;h=oC(h)}return s}a=l,l=a.parentNode}return null}function qs(a){var s=a[gl]||a[Ud];return s&&(s.tag===_||s.tag===S||s.tag===j||s.tag===y)?s:null}function yl(a){if(a.tag===_||a.tag===S)return a.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function Np(a){return a[Eb]||null}function Tb(a,s){a[Eb]=s}function VM(a){var s=a[xb];return s===void 0&&(s=a[xb]=new Set),s}var lC={},cC=t.ReactDebugCurrentFrame;function Pp(a){if(a){var s=a._owner,l=zc(a.type,a._source,s?s.type:null);cC.setExtraStackFrame(l)}else cC.setExtraStackFrame(null)}function Ya(a,s,l,d,h){{var g=Function.call.bind(Cr);for(var v in a)if(g(a,v)){var w=void 0;try{if(typeof a[v]!="function"){var E=Error((d||"React class")+": "+l+" type `"+v+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[v]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw E.name="Invariant Violation",E}w=a[v](s,v,d,l,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(k){w=k}w&&!(w instanceof Error)&&(Pp(h),u("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",d||"React class",l,v,typeof w),Pp(null)),w instanceof Error&&!(w.message in lC)&&(lC[w.message]=!0,Pp(h),u("Failed %s type: %s",l,w.message),Pp(null))}}}var Cb=[],$p;$p=[];var hs=-1;function Gs(a){return{current:a}}function Tn(a,s){if(hs<0){u("Unexpected pop.");return}s!==$p[hs]&&u("Unexpected Fiber popped."),a.current=Cb[hs],Cb[hs]=null,$p[hs]=null,hs--}function Cn(a,s,l){hs++,Cb[hs]=a.current,$p[hs]=l,a.current=s}var Rb;Rb={};var ma={};Object.freeze(ma);var ps=Gs(ma),Ai=Gs(!1),Ob=ma;function vl(a,s,l){return l&&ki(s)?Ob:ps.current}function dC(a,s,l){{var d=a.stateNode;d.__reactInternalMemoizedUnmaskedChildContext=s,d.__reactInternalMemoizedMaskedChildContext=l}}function bl(a,s){{var l=a.type,d=l.contextTypes;if(!d)return ma;var h=a.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={};for(var v in d)g[v]=s[v];{var w=it(a)||"Unknown";Ya(d,g,"context",w)}return h&&dC(a,s,g),g}}function Ip(){return Ai.current}function ki(a){{var s=a.childContextTypes;return s!=null}}function jp(a){Tn(Ai,a),Tn(ps,a)}function Ab(a){Tn(Ai,a),Tn(ps,a)}function fC(a,s,l){{if(ps.current!==ma)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Cn(ps,s,a),Cn(Ai,l,a)}}function hC(a,s,l){{var d=a.stateNode,h=s.childContextTypes;if(typeof d.getChildContext!="function"){{var g=it(a)||"Unknown";Rb[g]||(Rb[g]=!0,u("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",g,g))}return l}var v=d.getChildContext();for(var w in v)if(!(w in h))throw new Error((it(a)||"Unknown")+'.getChildContext(): key "'+w+'" is not defined in childContextTypes.');{var E=it(a)||"Unknown";Ya(h,v,"child context",E)}return mt({},l,v)}}function Dp(a){{var s=a.stateNode,l=s&&s.__reactInternalMemoizedMergedChildContext||ma;return Ob=ps.current,Cn(ps,l,a),Cn(Ai,Ai.current,a),!0}}function pC(a,s,l){{var d=a.stateNode;if(!d)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(l){var h=hC(a,s,Ob);d.__reactInternalMemoizedMergedChildContext=h,Tn(Ai,a),Tn(ps,a),Cn(ps,h,a),Cn(Ai,l,a)}else Tn(Ai,a),Cn(Ai,l,a)}}function HM(a){{if(!Cj(a)||a.tag!==p)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var s=a;do{switch(s.tag){case y:return s.stateNode.context;case p:{var l=s.type;if(ki(l))return s.stateNode.__reactInternalMemoizedMergedChildContext;break}}s=s.return}while(s!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Ws=0,Lp=1,ms=null,kb=!1,Nb=!1;function mC(a){ms===null?ms=[a]:ms.push(a)}function qM(a){kb=!0,mC(a)}function gC(){kb&&Js()}function Js(){if(!Nb&&ms!==null){Nb=!0;var a=0,s=Za();try{var l=!0,d=ms;for(nn(fa);a<d.length;a++){var h=d[a];do h=h(l);while(h!==null)}ms=null,kb=!1}catch(g){throw ms!==null&&(ms=ms.slice(a+1)),Fx(Qh,Js),g}finally{nn(s),Nb=!1}}return null}var _l=[],wl=0,Up=null,Mp=0,ka=[],Na=0,su=null,gs=1,ys="";function GM(a){return uu(),(a.flags&Px)!==Je}function WM(a){return uu(),Mp}function JM(){var a=ys,s=gs,l=s&~KM(s);return l.toString(32)+a}function ou(a,s){uu(),_l[wl++]=Mp,_l[wl++]=Up,Up=a,Mp=s}function yC(a,s,l){uu(),ka[Na++]=gs,ka[Na++]=ys,ka[Na++]=su,su=a;var d=gs,h=ys,g=Fp(d)-1,v=d&~(1<<g),w=l+1,E=Fp(s)+g;if(E>30){var k=g-g%5,N=(1<<k)-1,L=(v&N).toString(32),D=v>>k,z=g-k,H=Fp(s)+z,J=w<<z,ge=J|D,ze=L+h;gs=1<<H|ge,ys=ze}else{var je=w<<g,xt=je|v,vt=h;gs=1<<E|xt,ys=vt}}function Pb(a){uu();var s=a.return;if(s!==null){var l=1,d=0;ou(a,l),yC(a,l,d)}}function Fp(a){return 32-Gx(a)}function KM(a){return 1<<Fp(a)-1}function $b(a){for(;a===Up;)Up=_l[--wl],_l[wl]=null,Mp=_l[--wl],_l[wl]=null;for(;a===su;)su=ka[--Na],ka[Na]=null,ys=ka[--Na],ka[Na]=null,gs=ka[--Na],ka[Na]=null}function ZM(){return uu(),su!==null?{id:gs,overflow:ys}:null}function YM(a,s){uu(),ka[Na++]=gs,ka[Na++]=ys,ka[Na++]=su,gs=s.id,ys=s.overflow,su=a}function uu(){ln()||u("Expected to be hydrating. This is a bug in React. Please file an issue.")}var un=null,Pa=null,Xa=!1,lu=!1,Ks=null;function XM(){Xa&&u("We should not be hydrating here. This is a bug in React. Please file a bug.")}function vC(){lu=!0}function QM(){return lu}function eF(a){var s=a.stateNode.containerInfo;return Pa=vM(s),un=a,Xa=!0,Ks=null,lu=!1,!0}function tF(a,s,l){return Pa=bM(s),un=a,Xa=!0,Ks=null,lu=!1,l!==null&&YM(a,l),!0}function bC(a,s){switch(a.tag){case y:{AM(a.stateNode.containerInfo,s);break}case _:{var l=(a.mode&St)!==qe;NM(a.type,a.memoizedProps,a.stateNode,s,l);break}case j:{var d=a.memoizedState;d.dehydrated!==null&&kM(d.dehydrated,s);break}}}function _C(a,s){bC(a,s);var l=i4();l.stateNode=s,l.return=a;var d=a.deletions;d===null?(a.deletions=[l],a.flags|=Wo):d.push(l)}function Ib(a,s){{if(lu)return;switch(a.tag){case y:{var l=a.stateNode.containerInfo;switch(s.tag){case _:var d=s.type;s.pendingProps,PM(l,d);break;case S:var h=s.pendingProps;$M(l,h);break}break}case _:{var g=a.type,v=a.memoizedProps,w=a.stateNode;switch(s.tag){case _:{var E=s.type,k=s.pendingProps,N=(a.mode&St)!==qe;DM(g,v,w,E,k,N);break}case S:{var L=s.pendingProps,D=(a.mode&St)!==qe;LM(g,v,w,L,D);break}}break}case j:{var z=a.memoizedState,H=z.dehydrated;if(H!==null)switch(s.tag){case _:var J=s.type;s.pendingProps,IM(H,J);break;case S:var ge=s.pendingProps;jM(H,ge);break}break}default:return}}}function wC(a,s){s.flags=s.flags&~us|kr,Ib(a,s)}function SC(a,s){switch(a.tag){case _:{var l=a.type;a.pendingProps;var d=fM(s,l);return d!==null?(a.stateNode=d,un=a,Pa=yM(d),!0):!1}case S:{var h=a.pendingProps,g=hM(s,h);return g!==null?(a.stateNode=g,un=a,Pa=null,!0):!1}case j:{var v=pM(s);if(v!==null){var w={dehydrated:v,treeContext:ZM(),retryLane:ca};a.memoizedState=w;var E=s4(v);return E.return=a,a.child=E,un=a,Pa=null,!0}return!1}default:return!1}}function jb(a){return(a.mode&St)!==qe&&(a.flags&Pt)===Je}function Db(a){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function Lb(a){if(Xa){var s=Pa;if(!s){jb(a)&&(Ib(un,a),Db()),wC(un,a),Xa=!1,un=a;return}var l=s;if(!SC(a,s)){jb(a)&&(Ib(un,a),Db()),s=Ld(l);var d=un;if(!s||!SC(a,s)){wC(un,a),Xa=!1,un=a;return}_C(d,l)}}}function rF(a,s,l){var d=a.stateNode,h=!lu,g=_M(d,a.type,a.memoizedProps,s,l,a,h);return a.updateQueue=g,g!==null}function nF(a){var s=a.stateNode,l=a.memoizedProps,d=wM(s,l,a);if(d){var h=un;if(h!==null)switch(h.tag){case y:{var g=h.stateNode.containerInfo,v=(h.mode&St)!==qe;RM(g,s,l,v);break}case _:{var w=h.type,E=h.memoizedProps,k=h.stateNode,N=(h.mode&St)!==qe;OM(w,E,k,s,l,N);break}}}return d}function aF(a){var s=a.memoizedState,l=s!==null?s.dehydrated:null;if(!l)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");SM(l,a)}function iF(a){var s=a.memoizedState,l=s!==null?s.dehydrated:null;if(!l)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return EM(l)}function EC(a){for(var s=a.return;s!==null&&s.tag!==_&&s.tag!==y&&s.tag!==j;)s=s.return;un=s}function Bp(a){if(a!==un)return!1;if(!Xa)return EC(a),Xa=!0,!1;if(a.tag!==y&&(a.tag!==_||CM(a.type)&&!vb(a.type,a.memoizedProps))){var s=Pa;if(s)if(jb(a))xC(a),Db();else for(;s;)_C(a,s),s=Ld(s)}return EC(a),a.tag===j?Pa=iF(a):Pa=un?Ld(a.stateNode):null,!0}function sF(){return Xa&&Pa!==null}function xC(a){for(var s=Pa;s;)bC(a,s),s=Ld(s)}function Sl(){un=null,Pa=null,Xa=!1,lu=!1}function TC(){Ks!==null&&(vO(Ks),Ks=null)}function ln(){return Xa}function Ub(a){Ks===null?Ks=[a]:Ks.push(a)}var oF=t.ReactCurrentBatchConfig,uF=null;function lF(){return oF.transition}var Qa={recordUnsafeLifecycleWarnings:function(a,s){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(a,s){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var cF=function(a){for(var s=null,l=a;l!==null;)l.mode&_r&&(s=l),l=l.return;return s},cu=function(a){var s=[];return a.forEach(function(l){s.push(l)}),s.sort().join(", ")},Bd=[],zd=[],Vd=[],Hd=[],qd=[],Gd=[],du=new Set;Qa.recordUnsafeLifecycleWarnings=function(a,s){du.has(a.type)||(typeof s.componentWillMount=="function"&&s.componentWillMount.__suppressDeprecationWarning!==!0&&Bd.push(a),a.mode&_r&&typeof s.UNSAFE_componentWillMount=="function"&&zd.push(a),typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Vd.push(a),a.mode&_r&&typeof s.UNSAFE_componentWillReceiveProps=="function"&&Hd.push(a),typeof s.componentWillUpdate=="function"&&s.componentWillUpdate.__suppressDeprecationWarning!==!0&&qd.push(a),a.mode&_r&&typeof s.UNSAFE_componentWillUpdate=="function"&&Gd.push(a))},Qa.flushPendingUnsafeLifecycleWarnings=function(){var a=new Set;Bd.length>0&&(Bd.forEach(function(D){a.add(it(D)||"Component"),du.add(D.type)}),Bd=[]);var s=new Set;zd.length>0&&(zd.forEach(function(D){s.add(it(D)||"Component"),du.add(D.type)}),zd=[]);var l=new Set;Vd.length>0&&(Vd.forEach(function(D){l.add(it(D)||"Component"),du.add(D.type)}),Vd=[]);var d=new Set;Hd.length>0&&(Hd.forEach(function(D){d.add(it(D)||"Component"),du.add(D.type)}),Hd=[]);var h=new Set;qd.length>0&&(qd.forEach(function(D){h.add(it(D)||"Component"),du.add(D.type)}),qd=[]);var g=new Set;if(Gd.length>0&&(Gd.forEach(function(D){g.add(it(D)||"Component"),du.add(D.type)}),Gd=[]),s.size>0){var v=cu(s);u(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,v)}if(d.size>0){var w=cu(d);u(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,w)}if(g.size>0){var E=cu(g);u(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,E)}if(a.size>0){var k=cu(a);o(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,k)}if(l.size>0){var N=cu(l);o(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,N)}if(h.size>0){var L=cu(h);o(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,L)}};var zp=new Map,CC=new Set;Qa.recordLegacyContextWarning=function(a,s){var l=cF(a);if(l===null){u("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!CC.has(a.type)){var d=zp.get(l);(a.type.contextTypes!=null||a.type.childContextTypes!=null||s!==null&&typeof s.getChildContext=="function")&&(d===void 0&&(d=[],zp.set(l,d)),d.push(a))}},Qa.flushLegacyContextWarning=function(){zp.forEach(function(a,s){if(a.length!==0){var l=a[0],d=new Set;a.forEach(function(g){d.add(it(g)||"Component"),CC.add(g.type)});var h=cu(d);try{ur(l),u(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,h)}finally{Qr()}}})},Qa.discardPendingWarnings=function(){Bd=[],zd=[],Vd=[],Hd=[],qd=[],Gd=[],zp=new Map}}var Mb,Fb,Bb,zb,Vb,RC=function(a,s){};Mb=!1,Fb=!1,Bb={},zb={},Vb={},RC=function(a,s){if(!(a===null||typeof a!="object")&&!(!a._store||a._store.validated||a.key!=null)){if(typeof a._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");a._store.validated=!0;var l=it(s)||"Component";zb[l]||(zb[l]=!0,u('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function dF(a){return a.prototype&&a.prototype.isReactComponent}function Wd(a,s,l){var d=l.ref;if(d!==null&&typeof d!="function"&&typeof d!="object"){if((a.mode&_r||$e)&&!(l._owner&&l._self&&l._owner.stateNode!==l._self)&&!(l._owner&&l._owner.tag!==p)&&!(typeof l.type=="function"&&!dF(l.type))&&l._owner){var h=it(a)||"Component";Bb[h]||(u('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',h,d),Bb[h]=!0)}if(l._owner){var g=l._owner,v;if(g){var w=g;if(w.tag!==p)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");v=w.stateNode}if(!v)throw new Error("Missing owner for string ref "+d+". This error is likely caused by a bug in React. Please file an issue.");var E=v;Jn(d,"ref");var k=""+d;if(s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===k)return s.ref;var N=function(L){var D=E.refs;L===null?delete D[k]:D[k]=L};return N._stringRef=k,N}else{if(typeof d!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!l._owner)throw new Error("Element ref was specified as a string ("+d+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return d}function Vp(a,s){var l=Object.prototype.toString.call(s);throw new Error("Objects are not valid as a React child (found: "+(l==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":l)+"). If you meant to render a collection of children, use an array instead.")}function Hp(a){{var s=it(a)||"Component";if(Vb[s])return;Vb[s]=!0,u("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function OC(a){var s=a._payload,l=a._init;return l(s)}function AC(a){function s(M,K){if(a){var F=M.deletions;F===null?(M.deletions=[K],M.flags|=Wo):F.push(K)}}function l(M,K){if(!a)return null;for(var F=K;F!==null;)s(M,F),F=F.sibling;return null}function d(M,K){for(var F=new Map,ne=K;ne!==null;)ne.key!==null?F.set(ne.key,ne):F.set(ne.index,ne),ne=ne.sibling;return F}function h(M,K){var F=_u(M,K);return F.index=0,F.sibling=null,F}function g(M,K,F){if(M.index=F,!a)return M.flags|=Px,K;var ne=M.alternate;if(ne!==null){var xe=ne.index;return xe<K?(M.flags|=kr,K):xe}else return M.flags|=kr,K}function v(M){return a&&M.alternate===null&&(M.flags|=kr),M}function w(M,K,F,ne){if(K===null||K.tag!==S){var xe=Uw(F,M.mode,ne);return xe.return=M,xe}else{var ve=h(K,F);return ve.return=M,ve}}function E(M,K,F,ne){var xe=F.type;if(xe===Ei)return N(M,K,F.props.children,ne,F.key);if(K!==null&&(K.elementType===xe||IO(K,F)||typeof xe=="object"&&xe!==null&&xe.$$typeof===He&&OC(xe)===K.type)){var ve=h(K,F.props);return ve.ref=Wd(M,K,F),ve.return=M,ve._debugSource=F._source,ve._debugOwner=F._owner,ve}var Ke=Lw(F,M.mode,ne);return Ke.ref=Wd(M,K,F),Ke.return=M,Ke}function k(M,K,F,ne){if(K===null||K.tag!==b||K.stateNode.containerInfo!==F.containerInfo||K.stateNode.implementation!==F.implementation){var xe=Mw(F,M.mode,ne);return xe.return=M,xe}else{var ve=h(K,F.children||[]);return ve.return=M,ve}}function N(M,K,F,ne,xe){if(K===null||K.tag!==C){var ve=so(F,M.mode,ne,xe);return ve.return=M,ve}else{var Ke=h(K,F);return Ke.return=M,Ke}}function L(M,K,F){if(typeof K=="string"&&K!==""||typeof K=="number"){var ne=Uw(""+K,M.mode,F);return ne.return=M,ne}if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Oa:{var xe=Lw(K,M.mode,F);return xe.ref=Wd(M,null,K),xe.return=M,xe}case la:{var ve=Mw(K,M.mode,F);return ve.return=M,ve}case He:{var Ke=K._payload,nt=K._init;return L(M,nt(Ke),F)}}if(yt(K)||Wa(K)){var zt=so(K,M.mode,F,null);return zt.return=M,zt}Vp(M,K)}return typeof K=="function"&&Hp(M),null}function D(M,K,F,ne){var xe=K!==null?K.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return xe!==null?null:w(M,K,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Oa:return F.key===xe?E(M,K,F,ne):null;case la:return F.key===xe?k(M,K,F,ne):null;case He:{var ve=F._payload,Ke=F._init;return D(M,K,Ke(ve),ne)}}if(yt(F)||Wa(F))return xe!==null?null:N(M,K,F,ne,null);Vp(M,F)}return typeof F=="function"&&Hp(M),null}function z(M,K,F,ne,xe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"){var ve=M.get(F)||null;return w(K,ve,""+ne,xe)}if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Oa:{var Ke=M.get(ne.key===null?F:ne.key)||null;return E(K,Ke,ne,xe)}case la:{var nt=M.get(ne.key===null?F:ne.key)||null;return k(K,nt,ne,xe)}case He:var zt=ne._payload,Ot=ne._init;return z(M,K,F,Ot(zt),xe)}if(yt(ne)||Wa(ne)){var xr=M.get(F)||null;return N(K,xr,ne,xe,null)}Vp(K,ne)}return typeof ne=="function"&&Hp(K),null}function H(M,K,F){{if(typeof M!="object"||M===null)return K;switch(M.$$typeof){case Oa:case la:RC(M,F);var ne=M.key;if(typeof ne!="string")break;if(K===null){K=new Set,K.add(ne);break}if(!K.has(ne)){K.add(ne);break}u("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",ne);break;case He:var xe=M._payload,ve=M._init;H(ve(xe),K,F);break}}return K}function J(M,K,F,ne){for(var xe=null,ve=0;ve<F.length;ve++){var Ke=F[ve];xe=H(Ke,xe,M)}for(var nt=null,zt=null,Ot=K,xr=0,At=0,wr=null;Ot!==null&&At<F.length;At++){Ot.index>At?(wr=Ot,Ot=null):wr=Ot.sibling;var On=D(M,Ot,F[At],ne);if(On===null){Ot===null&&(Ot=wr);break}a&&Ot&&On.alternate===null&&s(M,Ot),xr=g(On,xr,At),zt===null?nt=On:zt.sibling=On,zt=On,Ot=wr}if(At===F.length){if(l(M,Ot),ln()){var gn=At;ou(M,gn)}return nt}if(Ot===null){for(;At<F.length;At++){var ya=L(M,F[At],ne);ya!==null&&(xr=g(ya,xr,At),zt===null?nt=ya:zt.sibling=ya,zt=ya)}if(ln()){var Mn=At;ou(M,Mn)}return nt}for(var Fn=d(M,Ot);At<F.length;At++){var An=z(Fn,M,At,F[At],ne);An!==null&&(a&&An.alternate!==null&&Fn.delete(An.key===null?At:An.key),xr=g(An,xr,At),zt===null?nt=An:zt.sibling=An,zt=An)}if(a&&Fn.forEach(function(Bl){return s(M,Bl)}),ln()){var xs=At;ou(M,xs)}return nt}function ge(M,K,F,ne){var xe=Wa(F);if(typeof xe!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&F[Symbol.toStringTag]==="Generator"&&(Fb||u("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),Fb=!0),F.entries===xe&&(Mb||u("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Mb=!0);var ve=xe.call(F);if(ve)for(var Ke=null,nt=ve.next();!nt.done;nt=ve.next()){var zt=nt.value;Ke=H(zt,Ke,M)}}var Ot=xe.call(F);if(Ot==null)throw new Error("An iterable object provided no iterator.");for(var xr=null,At=null,wr=K,On=0,gn=0,ya=null,Mn=Ot.next();wr!==null&&!Mn.done;gn++,Mn=Ot.next()){wr.index>gn?(ya=wr,wr=null):ya=wr.sibling;var Fn=D(M,wr,Mn.value,ne);if(Fn===null){wr===null&&(wr=ya);break}a&&wr&&Fn.alternate===null&&s(M,wr),On=g(Fn,On,gn),At===null?xr=Fn:At.sibling=Fn,At=Fn,wr=ya}if(Mn.done){if(l(M,wr),ln()){var An=gn;ou(M,An)}return xr}if(wr===null){for(;!Mn.done;gn++,Mn=Ot.next()){var xs=L(M,Mn.value,ne);xs!==null&&(On=g(xs,On,gn),At===null?xr=xs:At.sibling=xs,At=xs)}if(ln()){var Bl=gn;ou(M,Bl)}return xr}for(var Cf=d(M,wr);!Mn.done;gn++,Mn=Ot.next()){var Ui=z(Cf,M,gn,Mn.value,ne);Ui!==null&&(a&&Ui.alternate!==null&&Cf.delete(Ui.key===null?gn:Ui.key),On=g(Ui,On,gn),At===null?xr=Ui:At.sibling=Ui,At=Ui)}if(a&&Cf.forEach(function(L4){return s(M,L4)}),ln()){var D4=gn;ou(M,D4)}return xr}function ze(M,K,F,ne){if(K!==null&&K.tag===S){l(M,K.sibling);var xe=h(K,F);return xe.return=M,xe}l(M,K);var ve=Uw(F,M.mode,ne);return ve.return=M,ve}function je(M,K,F,ne){for(var xe=F.key,ve=K;ve!==null;){if(ve.key===xe){var Ke=F.type;if(Ke===Ei){if(ve.tag===C){l(M,ve.sibling);var nt=h(ve,F.props.children);return nt.return=M,nt._debugSource=F._source,nt._debugOwner=F._owner,nt}}else if(ve.elementType===Ke||IO(ve,F)||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===He&&OC(Ke)===ve.type){l(M,ve.sibling);var zt=h(ve,F.props);return zt.ref=Wd(M,ve,F),zt.return=M,zt._debugSource=F._source,zt._debugOwner=F._owner,zt}l(M,ve);break}else s(M,ve);ve=ve.sibling}if(F.type===Ei){var Ot=so(F.props.children,M.mode,ne,F.key);return Ot.return=M,Ot}else{var xr=Lw(F,M.mode,ne);return xr.ref=Wd(M,K,F),xr.return=M,xr}}function xt(M,K,F,ne){for(var xe=F.key,ve=K;ve!==null;){if(ve.key===xe)if(ve.tag===b&&ve.stateNode.containerInfo===F.containerInfo&&ve.stateNode.implementation===F.implementation){l(M,ve.sibling);var Ke=h(ve,F.children||[]);return Ke.return=M,Ke}else{l(M,ve);break}else s(M,ve);ve=ve.sibling}var nt=Mw(F,M.mode,ne);return nt.return=M,nt}function vt(M,K,F,ne){var xe=typeof F=="object"&&F!==null&&F.type===Ei&&F.key===null;if(xe&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Oa:return v(je(M,K,F,ne));case la:return v(xt(M,K,F,ne));case He:var ve=F._payload,Ke=F._init;return vt(M,K,Ke(ve),ne)}if(yt(F))return J(M,K,F,ne);if(Wa(F))return ge(M,K,F,ne);Vp(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?v(ze(M,K,""+F,ne)):(typeof F=="function"&&Hp(M),l(M,K))}return vt}var El=AC(!0),kC=AC(!1);function fF(a,s){if(a!==null&&s.child!==a.child)throw new Error("Resuming work not yet implemented.");if(s.child!==null){var l=s.child,d=_u(l,l.pendingProps);for(s.child=d,d.return=s;l.sibling!==null;)l=l.sibling,d=d.sibling=_u(l,l.pendingProps),d.return=s;d.sibling=null}}function hF(a,s){for(var l=a.child;l!==null;)e4(l,s),l=l.sibling}var Hb=Gs(null),qb;qb={};var qp=null,xl=null,Gb=null,Gp=!1;function Wp(){qp=null,xl=null,Gb=null,Gp=!1}function NC(){Gp=!0}function PC(){Gp=!1}function $C(a,s,l){Cn(Hb,s._currentValue,a),s._currentValue=l,s._currentRenderer!==void 0&&s._currentRenderer!==null&&s._currentRenderer!==qb&&u("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),s._currentRenderer=qb}function Wb(a,s){var l=Hb.current;Tn(Hb,s),a._currentValue=l}function Jb(a,s,l){for(var d=a;d!==null;){var h=d.alternate;if(ul(d.childLanes,s)?h!==null&&!ul(h.childLanes,s)&&(h.childLanes=dt(h.childLanes,s)):(d.childLanes=dt(d.childLanes,s),h!==null&&(h.childLanes=dt(h.childLanes,s))),d===l)break;d=d.return}d!==l&&u("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function pF(a,s,l){mF(a,s,l)}function mF(a,s,l){var d=a.child;for(d!==null&&(d.return=a);d!==null;){var h=void 0,g=d.dependencies;if(g!==null){h=d.child;for(var v=g.firstContext;v!==null;){if(v.context===s){if(d.tag===p){var w=dd(l),E=vs(Qt,w);E.tag=Kp;var k=d.updateQueue;if(k!==null){var N=k.shared,L=N.pending;L===null?E.next=E:(E.next=L.next,L.next=E),N.pending=E}}d.lanes=dt(d.lanes,l);var D=d.alternate;D!==null&&(D.lanes=dt(D.lanes,l)),Jb(d.return,l,a),g.lanes=dt(g.lanes,l);break}v=v.next}}else if(d.tag===A)h=d.type===a.type?null:d.child;else if(d.tag===Ae){var z=d.return;if(z===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");z.lanes=dt(z.lanes,l);var H=z.alternate;H!==null&&(H.lanes=dt(H.lanes,l)),Jb(z,l,a),h=d.sibling}else h=d.child;if(h!==null)h.return=d;else for(h=d;h!==null;){if(h===a){h=null;break}var J=h.sibling;if(J!==null){J.return=h.return,h=J;break}h=h.return}d=h}}function Tl(a,s){qp=a,xl=null,Gb=null;var l=a.dependencies;if(l!==null){var d=l.firstContext;d!==null&&(da(l.lanes,s)&&lf(),l.firstContext=null)}}function Nr(a){Gp&&u("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var s=a._currentValue;if(Gb!==a){var l={context:a,memoizedValue:s,next:null};if(xl===null){if(qp===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");xl=l,qp.dependencies={lanes:ee,firstContext:l}}else xl=xl.next=l}return s}var fu=null;function Kb(a){fu===null?fu=[a]:fu.push(a)}function gF(){if(fu!==null){for(var a=0;a<fu.length;a++){var s=fu[a],l=s.interleaved;if(l!==null){s.interleaved=null;var d=l.next,h=s.pending;if(h!==null){var g=h.next;h.next=d,l.next=g}s.pending=l}}fu=null}}function IC(a,s,l,d){var h=s.interleaved;return h===null?(l.next=l,Kb(s)):(l.next=h.next,h.next=l),s.interleaved=l,Jp(a,d)}function yF(a,s,l,d){var h=s.interleaved;h===null?(l.next=l,Kb(s)):(l.next=h.next,h.next=l),s.interleaved=l}function vF(a,s,l,d){var h=s.interleaved;return h===null?(l.next=l,Kb(s)):(l.next=h.next,h.next=l),s.interleaved=l,Jp(a,d)}function Yn(a,s){return Jp(a,s)}var bF=Jp;function Jp(a,s){a.lanes=dt(a.lanes,s);var l=a.alternate;l!==null&&(l.lanes=dt(l.lanes,s)),l===null&&(a.flags&(kr|us))!==Je&&kO(a);for(var d=a,h=a.return;h!==null;)h.childLanes=dt(h.childLanes,s),l=h.alternate,l!==null?l.childLanes=dt(l.childLanes,s):(h.flags&(kr|us))!==Je&&kO(a),d=h,h=h.return;if(d.tag===y){var g=d.stateNode;return g}else return null}var jC=0,DC=1,Kp=2,Zb=3,Zp=!1,Yb,Yp;Yb=!1,Yp=null;function Xb(a){var s={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:ee},effects:null};a.updateQueue=s}function LC(a,s){var l=s.updateQueue,d=a.updateQueue;if(l===d){var h={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects};s.updateQueue=h}}function vs(a,s){var l={eventTime:a,lane:s,tag:jC,payload:null,callback:null,next:null};return l}function Zs(a,s,l){var d=a.updateQueue;if(d===null)return null;var h=d.shared;if(Yp===h&&!Yb&&(u("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),Yb=!0),yz()){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,bF(a,l)}else return vF(a,h,s,l)}function Xp(a,s,l){var d=s.updateQueue;if(d!==null){var h=d.shared;if(Zx(l)){var g=h.lanes;g=Xx(g,a.pendingLanes);var v=dt(g,l);h.lanes=v,Hv(a,v)}}}function Qb(a,s){var l=a.updateQueue,d=a.alternate;if(d!==null){var h=d.updateQueue;if(l===h){var g=null,v=null,w=l.firstBaseUpdate;if(w!==null){var E=w;do{var k={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};v===null?g=v=k:(v.next=k,v=k),E=E.next}while(E!==null);v===null?g=v=s:(v.next=s,v=s)}else g=v=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,effects:h.effects},a.updateQueue=l;return}}var N=l.lastBaseUpdate;N===null?l.firstBaseUpdate=s:N.next=s,l.lastBaseUpdate=s}function _F(a,s,l,d,h,g){switch(l.tag){case DC:{var v=l.payload;if(typeof v=="function"){NC();var w=v.call(g,d,h);{if(a.mode&_r){tn(!0);try{v.call(g,d,h)}finally{tn(!1)}}PC()}return w}return v}case Zb:a.flags=a.flags&~jn|Pt;case jC:{var E=l.payload,k;if(typeof E=="function"){NC(),k=E.call(g,d,h);{if(a.mode&_r){tn(!0);try{E.call(g,d,h)}finally{tn(!1)}}PC()}}else k=E;return k==null?d:mt({},d,k)}case Kp:return Zp=!0,d}return d}function Qp(a,s,l,d){var h=a.updateQueue;Zp=!1,Yp=h.shared;var g=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var E=w,k=E.next;E.next=null,v===null?g=k:v.next=k,v=E;var N=a.alternate;if(N!==null){var L=N.updateQueue,D=L.lastBaseUpdate;D!==v&&(D===null?L.firstBaseUpdate=k:D.next=k,L.lastBaseUpdate=E)}}if(g!==null){var z=h.baseState,H=ee,J=null,ge=null,ze=null,je=g;do{var xt=je.lane,vt=je.eventTime;if(ul(d,xt)){if(ze!==null){var K={eventTime:vt,lane:rn,tag:je.tag,payload:je.payload,callback:je.callback,next:null};ze=ze.next=K}z=_F(a,h,je,z,s,l);var F=je.callback;if(F!==null&&je.lane!==rn){a.flags|=Nx;var ne=h.effects;ne===null?h.effects=[je]:ne.push(je)}}else{var M={eventTime:vt,lane:xt,tag:je.tag,payload:je.payload,callback:je.callback,next:null};ze===null?(ge=ze=M,J=z):ze=ze.next=M,H=dt(H,xt)}if(je=je.next,je===null){if(w=h.shared.pending,w===null)break;var xe=w,ve=xe.next;xe.next=null,je=ve,h.lastBaseUpdate=xe,h.shared.pending=null}}while(!0);ze===null&&(J=z),h.baseState=J,h.firstBaseUpdate=ge,h.lastBaseUpdate=ze;var Ke=h.shared.interleaved;if(Ke!==null){var nt=Ke;do H=dt(H,nt.lane),nt=nt.next;while(nt!==Ke)}else g===null&&(h.shared.lanes=ee);wf(H),a.lanes=H,a.memoizedState=z}Yp=null}function wF(a,s){if(typeof a!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+a));a.call(s)}function UC(){Zp=!1}function em(){return Zp}function MC(a,s,l){var d=s.effects;if(s.effects=null,d!==null)for(var h=0;h<d.length;h++){var g=d[h],v=g.callback;v!==null&&(g.callback=null,wF(v,l))}}var Jd={},Ys=Gs(Jd),Kd=Gs(Jd),tm=Gs(Jd);function rm(a){if(a===Jd)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return a}function FC(){var a=rm(tm.current);return a}function e_(a,s){Cn(tm,s,a),Cn(Kd,a,a),Cn(Ys,Jd,a);var l=UU(s);Tn(Ys,a),Cn(Ys,l,a)}function Cl(a){Tn(Ys,a),Tn(Kd,a),Tn(tm,a)}function t_(){var a=rm(Ys.current);return a}function BC(a){rm(tm.current);var s=rm(Ys.current),l=MU(s,a.type);s!==l&&(Cn(Kd,a,a),Cn(Ys,l,a))}function r_(a){Kd.current===a&&(Tn(Ys,a),Tn(Kd,a))}var SF=0,zC=1,VC=1,Zd=2,ei=Gs(SF);function n_(a,s){return(a&s)!==0}function Rl(a){return a&zC}function a_(a,s){return a&zC|s}function EF(a,s){return a|s}function Xs(a,s){Cn(ei,s,a)}function Ol(a){Tn(ei,a)}function xF(a,s){var l=a.memoizedState;return l!==null?l.dehydrated!==null:(a.memoizedProps,!0)}function nm(a){for(var s=a;s!==null;){if(s.tag===j){var l=s.memoizedState;if(l!==null){var d=l.dehydrated;if(d===null||sC(d)||Sb(d))return s}}else if(s.tag===ke&&s.memoizedProps.revealOrder!==void 0){var h=(s.flags&Pt)!==Je;if(h)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)return null;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xn=0,Lr=1,Ni=2,Ur=4,cn=8,i_=[];function s_(){for(var a=0;a<i_.length;a++){var s=i_[a];s._workInProgressVersionPrimary=null}i_.length=0}function TF(a,s){var l=s._getVersion,d=l(s._source);a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[s,d]:a.mutableSourceEagerHydrationData.push(s,d)}var we=t.ReactCurrentDispatcher,Yd=t.ReactCurrentBatchConfig,o_,Al;o_=new Set;var hu=ee,Bt=null,Mr=null,Fr=null,am=!1,Xd=!1,Qd=0,CF=0,RF=25,Y=null,$a=null,Qs=-1,u_=!1;function It(){{var a=Y;$a===null?$a=[a]:$a.push(a)}}function he(){{var a=Y;$a!==null&&(Qs++,$a[Qs]!==a&&OF(a))}}function kl(a){a!=null&&!yt(a)&&u("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Y,typeof a)}function OF(a){{var s=it(Bt);if(!o_.has(s)&&(o_.add(s),$a!==null)){for(var l="",d=30,h=0;h<=Qs;h++){for(var g=$a[h],v=h===Qs?a:g,w=h+1+". "+g;w.length<d;)w+=" ";w+=v+`
`,l+=w}u(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,s,l)}}}function Rn(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function l_(a,s){if(u_)return!1;if(s===null)return u("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Y),!1;a.length!==s.length&&u(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,Y,"["+s.join(", ")+"]","["+a.join(", ")+"]");for(var l=0;l<s.length&&l<a.length;l++)if(!pa(a[l],s[l]))return!1;return!0}function Nl(a,s,l,d,h,g){hu=g,Bt=s,$a=a!==null?a._debugHookTypes:null,Qs=-1,u_=a!==null&&a.type!==s.type,s.memoizedState=null,s.updateQueue=null,s.lanes=ee,a!==null&&a.memoizedState!==null?we.current=dR:$a!==null?we.current=cR:we.current=lR;var v=l(d,h);if(Xd){var w=0;do{if(Xd=!1,Qd=0,w>=RF)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");w+=1,u_=!1,Mr=null,Fr=null,s.updateQueue=null,Qs=-1,we.current=fR,v=l(d,h)}while(Xd)}we.current=ym,s._debugHookTypes=$a;var E=Mr!==null&&Mr.next!==null;if(hu=ee,Bt=null,Mr=null,Fr=null,Y=null,$a=null,Qs=-1,a!==null&&(a.flags&ls)!==(s.flags&ls)&&(a.mode&St)!==qe&&u("Internal React error: Expected static flag was missing. Please notify the React team."),am=!1,E)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return v}function Pl(){var a=Qd!==0;return Qd=0,a}function HC(a,s,l){s.updateQueue=a.updateQueue,(s.mode&Ri)!==qe?s.flags&=-50333701:s.flags&=-2053,a.lanes=ip(a.lanes,l)}function qC(){if(we.current=ym,am){for(var a=Bt.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}am=!1}hu=ee,Bt=null,Mr=null,Fr=null,$a=null,Qs=-1,Y=null,aR=!1,Xd=!1,Qd=0}function Pi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Bt.memoizedState=Fr=a:Fr=Fr.next=a,Fr}function Ia(){var a;if(Mr===null){var s=Bt.alternate;s!==null?a=s.memoizedState:a=null}else a=Mr.next;var l;if(Fr===null?l=Bt.memoizedState:l=Fr.next,l!==null)Fr=l,l=Fr.next,Mr=a;else{if(a===null)throw new Error("Rendered more hooks than during the previous render.");Mr=a;var d={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null};Fr===null?Bt.memoizedState=Fr=d:Fr=Fr.next=d}return Fr}function GC(){return{lastEffect:null,stores:null}}function c_(a,s){return typeof s=="function"?s(a):s}function d_(a,s,l){var d=Pi(),h;l!==void 0?h=l(s):h=s,d.memoizedState=d.baseState=h;var g={pending:null,interleaved:null,lanes:ee,dispatch:null,lastRenderedReducer:a,lastRenderedState:h};d.queue=g;var v=g.dispatch=PF.bind(null,Bt,g);return[d.memoizedState,v]}function f_(a,s,l){var d=Ia(),h=d.queue;if(h===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");h.lastRenderedReducer=a;var g=Mr,v=g.baseQueue,w=h.pending;if(w!==null){if(v!==null){var E=v.next,k=w.next;v.next=k,w.next=E}g.baseQueue!==v&&u("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),g.baseQueue=v=w,h.pending=null}if(v!==null){var N=v.next,L=g.baseState,D=null,z=null,H=null,J=N;do{var ge=J.lane;if(ul(hu,ge)){if(H!==null){var je={lane:rn,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};H=H.next=je}if(J.hasEagerState)L=J.eagerState;else{var xt=J.action;L=a(L,xt)}}else{var ze={lane:ge,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};H===null?(z=H=ze,D=L):H=H.next=ze,Bt.lanes=dt(Bt.lanes,ge),wf(ge)}J=J.next}while(J!==null&&J!==N);H===null?D=L:H.next=z,pa(L,d.memoizedState)||lf(),d.memoizedState=L,d.baseState=D,d.baseQueue=H,h.lastRenderedState=L}var vt=h.interleaved;if(vt!==null){var M=vt;do{var K=M.lane;Bt.lanes=dt(Bt.lanes,K),wf(K),M=M.next}while(M!==vt)}else v===null&&(h.lanes=ee);var F=h.dispatch;return[d.memoizedState,F]}function h_(a,s,l){var d=Ia(),h=d.queue;if(h===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");h.lastRenderedReducer=a;var g=h.dispatch,v=h.pending,w=d.memoizedState;if(v!==null){h.pending=null;var E=v.next,k=E;do{var N=k.action;w=a(w,N),k=k.next}while(k!==E);pa(w,d.memoizedState)||lf(),d.memoizedState=w,d.baseQueue===null&&(d.baseState=w),h.lastRenderedState=w}return[w,g]}function WY(a,s,l){}function JY(a,s,l){}function p_(a,s,l){var d=Bt,h=Pi(),g,v=ln();if(v){if(l===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");g=l(),Al||g!==l()&&(u("The result of getServerSnapshot should be cached to avoid an infinite loop"),Al=!0)}else{if(g=s(),!Al){var w=s();pa(g,w)||(u("The result of getSnapshot should be cached to avoid an infinite loop"),Al=!0)}var E=Dm();if(E===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");ap(E,hu)||WC(d,s,g)}h.memoizedState=g;var k={value:g,getSnapshot:s};return h.queue=k,lm(KC.bind(null,d,k,a),[a]),d.flags|=Ls,ef(Lr|cn,JC.bind(null,d,k,g,s),void 0,null),g}function im(a,s,l){var d=Bt,h=Ia(),g=s();if(!Al){var v=s();pa(g,v)||(u("The result of getSnapshot should be cached to avoid an infinite loop"),Al=!0)}var w=h.memoizedState,E=!pa(w,g);E&&(h.memoizedState=g,lf());var k=h.queue;if(rf(KC.bind(null,d,k,a),[a]),k.getSnapshot!==s||E||Fr!==null&&Fr.memoizedState.tag&Lr){d.flags|=Ls,ef(Lr|cn,JC.bind(null,d,k,g,s),void 0,null);var N=Dm();if(N===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");ap(N,hu)||WC(d,s,g)}return g}function WC(a,s,l){a.flags|=cv;var d={getSnapshot:s,value:l},h=Bt.updateQueue;if(h===null)h=GC(),Bt.updateQueue=h,h.stores=[d];else{var g=h.stores;g===null?h.stores=[d]:g.push(d)}}function JC(a,s,l,d){s.value=l,s.getSnapshot=d,ZC(s)&&YC(a)}function KC(a,s,l){var d=function(){ZC(s)&&YC(a)};return l(d)}function ZC(a){var s=a.getSnapshot,l=a.value;try{var d=s();return!pa(l,d)}catch{return!0}}function YC(a){var s=Yn(a,Qe);s!==null&&Hr(s,a,Qe,Qt)}function sm(a){var s=Pi();typeof a=="function"&&(a=a()),s.memoizedState=s.baseState=a;var l={pending:null,interleaved:null,lanes:ee,dispatch:null,lastRenderedReducer:c_,lastRenderedState:a};s.queue=l;var d=l.dispatch=$F.bind(null,Bt,l);return[s.memoizedState,d]}function m_(a){return f_(c_)}function g_(a){return h_(c_)}function ef(a,s,l,d){var h={tag:a,create:s,destroy:l,deps:d,next:null},g=Bt.updateQueue;if(g===null)g=GC(),Bt.updateQueue=g,g.lastEffect=h.next=h;else{var v=g.lastEffect;if(v===null)g.lastEffect=h.next=h;else{var w=v.next;v.next=h,h.next=w,g.lastEffect=h}}return h}function y_(a){var s=Pi();{var l={current:a};return s.memoizedState=l,l}}function om(a){var s=Ia();return s.memoizedState}function tf(a,s,l,d){var h=Pi(),g=d===void 0?null:d;Bt.flags|=a,h.memoizedState=ef(Lr|s,l,void 0,g)}function um(a,s,l,d){var h=Ia(),g=d===void 0?null:d,v=void 0;if(Mr!==null){var w=Mr.memoizedState;if(v=w.destroy,g!==null){var E=w.deps;if(l_(g,E)){h.memoizedState=ef(s,l,v,g);return}}}Bt.flags|=a,h.memoizedState=ef(Lr|s,l,v,g)}function lm(a,s){return(Bt.mode&Ri)!==qe?tf(pv|Ls|hv,cn,a,s):tf(Ls|hv,cn,a,s)}function rf(a,s){return um(Ls,cn,a,s)}function v_(a,s){return tf(Nt,Ni,a,s)}function cm(a,s){return um(Nt,Ni,a,s)}function b_(a,s){var l=Nt;return l|=Zo,(Bt.mode&Ri)!==qe&&(l|=Us),tf(l,Ur,a,s)}function dm(a,s){return um(Nt,Ur,a,s)}function XC(a,s){if(typeof s=="function"){var l=s,d=a();return l(d),function(){l(null)}}else if(s!=null){var h=s;h.hasOwnProperty("current")||u("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(h).join(", ")+"}");var g=a();return h.current=g,function(){h.current=null}}}function __(a,s,l){typeof s!="function"&&u("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",s!==null?typeof s:"null");var d=l!=null?l.concat([a]):null,h=Nt;return h|=Zo,(Bt.mode&Ri)!==qe&&(h|=Us),tf(h,Ur,XC.bind(null,s,a),d)}function fm(a,s,l){typeof s!="function"&&u("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",s!==null?typeof s:"null");var d=l!=null?l.concat([a]):null;return um(Nt,Ur,XC.bind(null,s,a),d)}function AF(a,s){}var hm=AF;function w_(a,s){var l=Pi(),d=s===void 0?null:s;return l.memoizedState=[a,d],a}function pm(a,s){var l=Ia(),d=s===void 0?null:s,h=l.memoizedState;if(h!==null&&d!==null){var g=h[1];if(l_(d,g))return h[0]}return l.memoizedState=[a,d],a}function S_(a,s){var l=Pi(),d=s===void 0?null:s,h=a();return l.memoizedState=[h,d],h}function mm(a,s){var l=Ia(),d=s===void 0?null:s,h=l.memoizedState;if(h!==null&&d!==null){var g=h[1];if(l_(d,g))return h[0]}var v=a();return l.memoizedState=[v,d],v}function E_(a){var s=Pi();return s.memoizedState=a,a}function QC(a){var s=Ia(),l=Mr,d=l.memoizedState;return tR(s,d,a)}function eR(a){var s=Ia();if(Mr===null)return s.memoizedState=a,a;var l=Mr.memoizedState;return tR(s,l,a)}function tR(a,s,l){var d=!pD(hu);if(d){if(!pa(l,s)){var h=Yx();Bt.lanes=dt(Bt.lanes,h),wf(h),a.baseState=!0}return s}else return a.baseState&&(a.baseState=!1,lf()),a.memoizedState=l,l}function kF(a,s,l){var d=Za();nn(ED(d,ds)),a(!0);var h=Yd.transition;Yd.transition={};var g=Yd.transition;Yd.transition._updatedFibers=new Set;try{a(!1),s()}finally{if(nn(d),Yd.transition=h,h===null&&g._updatedFibers){var v=g._updatedFibers.size;v>10&&o("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),g._updatedFibers.clear()}}}function x_(){var a=sm(!1),s=a[0],l=a[1],d=kF.bind(null,l),h=Pi();return h.memoizedState=d,[s,d]}function rR(){var a=m_(),s=a[0],l=Ia(),d=l.memoizedState;return[s,d]}function nR(){var a=g_(),s=a[0],l=Ia(),d=l.memoizedState;return[s,d]}var aR=!1;function NF(){return aR}function T_(){var a=Pi(),s=Dm(),l=s.identifierPrefix,d;if(ln()){var h=JM();d=":"+l+"R"+h;var g=Qd++;g>0&&(d+="H"+g.toString(32)),d+=":"}else{var v=CF++;d=":"+l+"r"+v.toString(32)+":"}return a.memoizedState=d,d}function gm(){var a=Ia(),s=a.memoizedState;return s}function PF(a,s,l){typeof arguments[3]=="function"&&u("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var d=ao(a),h={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(iR(a))sR(s,h);else{var g=IC(a,s,h,d);if(g!==null){var v=Un();Hr(g,a,d,v),oR(g,s,d)}}uR(a,d)}function $F(a,s,l){typeof arguments[3]=="function"&&u("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var d=ao(a),h={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(iR(a))sR(s,h);else{var g=a.alternate;if(a.lanes===ee&&(g===null||g.lanes===ee)){var v=s.lastRenderedReducer;if(v!==null){var w;w=we.current,we.current=ti;try{var E=s.lastRenderedState,k=v(E,l);if(h.hasEagerState=!0,h.eagerState=k,pa(k,E)){yF(a,s,h,d);return}}catch{}finally{we.current=w}}}var N=IC(a,s,h,d);if(N!==null){var L=Un();Hr(N,a,d,L),oR(N,s,d)}}uR(a,d)}function iR(a){var s=a.alternate;return a===Bt||s!==null&&s===Bt}function sR(a,s){Xd=am=!0;var l=a.pending;l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s}function oR(a,s,l){if(Zx(l)){var d=s.lanes;d=Xx(d,a.pendingLanes);var h=dt(d,l);s.lanes=h,Hv(a,h)}}function uR(a,s,l){bv(a,s)}var ym={readContext:Nr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:Se},lR=null,cR=null,dR=null,fR=null,$i=null,ti=null,vm=null;{var C_=function(){u("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},et=function(){u("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};lR={readContext:function(a){return Nr(a)},useCallback:function(a,s){return Y="useCallback",It(),kl(s),w_(a,s)},useContext:function(a){return Y="useContext",It(),Nr(a)},useEffect:function(a,s){return Y="useEffect",It(),kl(s),lm(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",It(),kl(l),__(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",It(),kl(s),v_(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",It(),kl(s),b_(a,s)},useMemo:function(a,s){Y="useMemo",It(),kl(s);var l=we.current;we.current=$i;try{return S_(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",It();var d=we.current;we.current=$i;try{return d_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",It(),y_(a)},useState:function(a){Y="useState",It();var s=we.current;we.current=$i;try{return sm(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",It(),void 0},useDeferredValue:function(a){return Y="useDeferredValue",It(),E_(a)},useTransition:function(){return Y="useTransition",It(),x_()},useMutableSource:function(a,s,l){return Y="useMutableSource",It(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",It(),p_(a,s,l)},useId:function(){return Y="useId",It(),T_()},unstable_isNewReconciler:Se},cR={readContext:function(a){return Nr(a)},useCallback:function(a,s){return Y="useCallback",he(),w_(a,s)},useContext:function(a){return Y="useContext",he(),Nr(a)},useEffect:function(a,s){return Y="useEffect",he(),lm(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",he(),__(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",he(),v_(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",he(),b_(a,s)},useMemo:function(a,s){Y="useMemo",he();var l=we.current;we.current=$i;try{return S_(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",he();var d=we.current;we.current=$i;try{return d_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",he(),y_(a)},useState:function(a){Y="useState",he();var s=we.current;we.current=$i;try{return sm(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",he(),void 0},useDeferredValue:function(a){return Y="useDeferredValue",he(),E_(a)},useTransition:function(){return Y="useTransition",he(),x_()},useMutableSource:function(a,s,l){return Y="useMutableSource",he(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",he(),p_(a,s,l)},useId:function(){return Y="useId",he(),T_()},unstable_isNewReconciler:Se},dR={readContext:function(a){return Nr(a)},useCallback:function(a,s){return Y="useCallback",he(),pm(a,s)},useContext:function(a){return Y="useContext",he(),Nr(a)},useEffect:function(a,s){return Y="useEffect",he(),rf(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",he(),fm(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",he(),cm(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",he(),dm(a,s)},useMemo:function(a,s){Y="useMemo",he();var l=we.current;we.current=ti;try{return mm(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",he();var d=we.current;we.current=ti;try{return f_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",he(),om()},useState:function(a){Y="useState",he();var s=we.current;we.current=ti;try{return m_(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",he(),hm()},useDeferredValue:function(a){return Y="useDeferredValue",he(),QC(a)},useTransition:function(){return Y="useTransition",he(),rR()},useMutableSource:function(a,s,l){return Y="useMutableSource",he(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",he(),im(a,s)},useId:function(){return Y="useId",he(),gm()},unstable_isNewReconciler:Se},fR={readContext:function(a){return Nr(a)},useCallback:function(a,s){return Y="useCallback",he(),pm(a,s)},useContext:function(a){return Y="useContext",he(),Nr(a)},useEffect:function(a,s){return Y="useEffect",he(),rf(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",he(),fm(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",he(),cm(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",he(),dm(a,s)},useMemo:function(a,s){Y="useMemo",he();var l=we.current;we.current=vm;try{return mm(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",he();var d=we.current;we.current=vm;try{return h_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",he(),om()},useState:function(a){Y="useState",he();var s=we.current;we.current=vm;try{return g_(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",he(),hm()},useDeferredValue:function(a){return Y="useDeferredValue",he(),eR(a)},useTransition:function(){return Y="useTransition",he(),nR()},useMutableSource:function(a,s,l){return Y="useMutableSource",he(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",he(),im(a,s)},useId:function(){return Y="useId",he(),gm()},unstable_isNewReconciler:Se},$i={readContext:function(a){return C_(),Nr(a)},useCallback:function(a,s){return Y="useCallback",et(),It(),w_(a,s)},useContext:function(a){return Y="useContext",et(),It(),Nr(a)},useEffect:function(a,s){return Y="useEffect",et(),It(),lm(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",et(),It(),__(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",et(),It(),v_(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",et(),It(),b_(a,s)},useMemo:function(a,s){Y="useMemo",et(),It();var l=we.current;we.current=$i;try{return S_(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",et(),It();var d=we.current;we.current=$i;try{return d_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",et(),It(),y_(a)},useState:function(a){Y="useState",et(),It();var s=we.current;we.current=$i;try{return sm(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",et(),It(),void 0},useDeferredValue:function(a){return Y="useDeferredValue",et(),It(),E_(a)},useTransition:function(){return Y="useTransition",et(),It(),x_()},useMutableSource:function(a,s,l){return Y="useMutableSource",et(),It(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",et(),It(),p_(a,s,l)},useId:function(){return Y="useId",et(),It(),T_()},unstable_isNewReconciler:Se},ti={readContext:function(a){return C_(),Nr(a)},useCallback:function(a,s){return Y="useCallback",et(),he(),pm(a,s)},useContext:function(a){return Y="useContext",et(),he(),Nr(a)},useEffect:function(a,s){return Y="useEffect",et(),he(),rf(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",et(),he(),fm(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",et(),he(),cm(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",et(),he(),dm(a,s)},useMemo:function(a,s){Y="useMemo",et(),he();var l=we.current;we.current=ti;try{return mm(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",et(),he();var d=we.current;we.current=ti;try{return f_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",et(),he(),om()},useState:function(a){Y="useState",et(),he();var s=we.current;we.current=ti;try{return m_(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",et(),he(),hm()},useDeferredValue:function(a){return Y="useDeferredValue",et(),he(),QC(a)},useTransition:function(){return Y="useTransition",et(),he(),rR()},useMutableSource:function(a,s,l){return Y="useMutableSource",et(),he(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",et(),he(),im(a,s)},useId:function(){return Y="useId",et(),he(),gm()},unstable_isNewReconciler:Se},vm={readContext:function(a){return C_(),Nr(a)},useCallback:function(a,s){return Y="useCallback",et(),he(),pm(a,s)},useContext:function(a){return Y="useContext",et(),he(),Nr(a)},useEffect:function(a,s){return Y="useEffect",et(),he(),rf(a,s)},useImperativeHandle:function(a,s,l){return Y="useImperativeHandle",et(),he(),fm(a,s,l)},useInsertionEffect:function(a,s){return Y="useInsertionEffect",et(),he(),cm(a,s)},useLayoutEffect:function(a,s){return Y="useLayoutEffect",et(),he(),dm(a,s)},useMemo:function(a,s){Y="useMemo",et(),he();var l=we.current;we.current=ti;try{return mm(a,s)}finally{we.current=l}},useReducer:function(a,s,l){Y="useReducer",et(),he();var d=we.current;we.current=ti;try{return h_(a,s,l)}finally{we.current=d}},useRef:function(a){return Y="useRef",et(),he(),om()},useState:function(a){Y="useState",et(),he();var s=we.current;we.current=ti;try{return g_(a)}finally{we.current=s}},useDebugValue:function(a,s){return Y="useDebugValue",et(),he(),hm()},useDeferredValue:function(a){return Y="useDeferredValue",et(),he(),eR(a)},useTransition:function(){return Y="useTransition",et(),he(),nR()},useMutableSource:function(a,s,l){return Y="useMutableSource",et(),he(),void 0},useSyncExternalStore:function(a,s,l){return Y="useSyncExternalStore",et(),he(),im(a,s)},useId:function(){return Y="useId",et(),he(),gm()},unstable_isNewReconciler:Se}}var eo=e.unstable_now,hR=0,bm=-1,nf=-1,_m=-1,R_=!1,wm=!1;function pR(){return R_}function IF(){wm=!0}function jF(){R_=!1,wm=!1}function DF(){R_=wm,wm=!1}function mR(){return hR}function gR(){hR=eo()}function O_(a){nf=eo(),a.actualStartTime<0&&(a.actualStartTime=eo())}function yR(a){nf=-1}function Sm(a,s){if(nf>=0){var l=eo()-nf;a.actualDuration+=l,s&&(a.selfBaseDuration=l),nf=-1}}function Ii(a){if(bm>=0){var s=eo()-bm;bm=-1;for(var l=a.return;l!==null;){switch(l.tag){case y:var d=l.stateNode;d.effectDuration+=s;return;case P:var h=l.stateNode;h.effectDuration+=s;return}l=l.return}}}function A_(a){if(_m>=0){var s=eo()-_m;_m=-1;for(var l=a.return;l!==null;){switch(l.tag){case y:var d=l.stateNode;d!==null&&(d.passiveEffectDuration+=s);return;case P:var h=l.stateNode;h!==null&&(h.passiveEffectDuration+=s);return}l=l.return}}}function ji(){bm=eo()}function k_(){_m=eo()}function N_(a){for(var s=a.child;s;)a.actualDuration+=s.actualDuration,s=s.sibling}function ri(a,s){if(a&&a.defaultProps){var l=mt({},s),d=a.defaultProps;for(var h in d)l[h]===void 0&&(l[h]=d[h]);return l}return s}var P_={},$_,I_,j_,D_,L_,vR,Em,U_,M_,F_,af;{$_=new Set,I_=new Set,j_=new Set,D_=new Set,U_=new Set,L_=new Set,M_=new Set,F_=new Set,af=new Set;var bR=new Set;Em=function(a,s){if(!(a===null||typeof a=="function")){var l=s+"_"+a;bR.has(l)||(bR.add(l),u("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",s,a))}},vR=function(a,s){if(s===void 0){var l=kt(a)||"Component";L_.has(l)||(L_.add(l),u("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",l))}},Object.defineProperty(P_,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(P_)}function B_(a,s,l,d){var h=a.memoizedState,g=l(d,h);{if(a.mode&_r){tn(!0);try{g=l(d,h)}finally{tn(!1)}}vR(s,g)}var v=g==null?h:mt({},h,g);if(a.memoizedState=v,a.lanes===ee){var w=a.updateQueue;w.baseState=v}}var z_={isMounted:Rj,enqueueSetState:function(a,s,l){var d=Qu(a),h=Un(),g=ao(d),v=vs(h,g);v.payload=s,l!=null&&(Em(l,"setState"),v.callback=l);var w=Zs(d,v,g);w!==null&&(Hr(w,d,g,h),Xp(w,d,g)),bv(d,g)},enqueueReplaceState:function(a,s,l){var d=Qu(a),h=Un(),g=ao(d),v=vs(h,g);v.tag=DC,v.payload=s,l!=null&&(Em(l,"replaceState"),v.callback=l);var w=Zs(d,v,g);w!==null&&(Hr(w,d,g,h),Xp(w,d,g)),bv(d,g)},enqueueForceUpdate:function(a,s){var l=Qu(a),d=Un(),h=ao(l),g=vs(d,h);g.tag=Kp,s!=null&&(Em(s,"forceUpdate"),g.callback=s);var v=Zs(l,g,h);v!==null&&(Hr(v,l,h,d),Xp(v,l,h)),aD(l,h)}};function _R(a,s,l,d,h,g,v){var w=a.stateNode;if(typeof w.shouldComponentUpdate=="function"){var E=w.shouldComponentUpdate(d,g,v);{if(a.mode&_r){tn(!0);try{E=w.shouldComponentUpdate(d,g,v)}finally{tn(!1)}}E===void 0&&u("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",kt(s)||"Component")}return E}return s.prototype&&s.prototype.isPureReactComponent?!Cd(l,d)||!Cd(h,g):!0}function LF(a,s,l){var d=a.stateNode;{var h=kt(s)||"Component",g=d.render;g||(s.prototype&&typeof s.prototype.render=="function"?u("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",h):u("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",h)),d.getInitialState&&!d.getInitialState.isReactClassApproved&&!d.state&&u("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",h),d.getDefaultProps&&!d.getDefaultProps.isReactClassApproved&&u("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",h),d.propTypes&&u("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",h),d.contextType&&u("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",h),s.childContextTypes&&!af.has(s)&&(a.mode&_r)===qe&&(af.add(s),u(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,h)),s.contextTypes&&!af.has(s)&&(a.mode&_r)===qe&&(af.add(s),u(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,h)),d.contextTypes&&u("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",h),s.contextType&&s.contextTypes&&!M_.has(s)&&(M_.add(s),u("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",h)),typeof d.componentShouldUpdate=="function"&&u("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",h),s.prototype&&s.prototype.isPureReactComponent&&typeof d.shouldComponentUpdate<"u"&&u("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",kt(s)||"A pure component"),typeof d.componentDidUnmount=="function"&&u("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",h),typeof d.componentDidReceiveProps=="function"&&u("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",h),typeof d.componentWillRecieveProps=="function"&&u("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",h),typeof d.UNSAFE_componentWillRecieveProps=="function"&&u("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",h);var v=d.props!==l;d.props!==void 0&&v&&u("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",h,h),d.defaultProps&&u("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",h,h),typeof d.getSnapshotBeforeUpdate=="function"&&typeof d.componentDidUpdate!="function"&&!j_.has(s)&&(j_.add(s),u("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",kt(s))),typeof d.getDerivedStateFromProps=="function"&&u("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",h),typeof d.getDerivedStateFromError=="function"&&u("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",h),typeof s.getSnapshotBeforeUpdate=="function"&&u("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",h);var w=d.state;w&&(typeof w!="object"||yt(w))&&u("%s.state: must be set to an object or null",h),typeof d.getChildContext=="function"&&typeof s.childContextTypes!="object"&&u("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",h)}}function wR(a,s){s.updater=z_,a.stateNode=s,Ej(s,a),s._reactInternalInstance=P_}function SR(a,s,l){var d=!1,h=ma,g=ma,v=s.contextType;if("contextType"in s){var w=v===null||v!==void 0&&v.$$typeof===me&&v._context===void 0;if(!w&&!F_.has(s)){F_.add(s);var E="";v===void 0?E=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof v!="object"?E=" However, it is set to a "+typeof v+".":v.$$typeof===re?E=" Did you accidentally pass the Context.Provider instead?":v._context!==void 0?E=" Did you accidentally pass the Context.Consumer instead?":E=" However, it is set to an object with keys {"+Object.keys(v).join(", ")+"}.",u("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",kt(s)||"Component",E)}}if(typeof v=="object"&&v!==null)g=Nr(v);else{h=vl(a,s,!0);var k=s.contextTypes;d=k!=null,g=d?bl(a,h):ma}var N=new s(l,g);if(a.mode&_r){tn(!0);try{N=new s(l,g)}finally{tn(!1)}}var L=a.memoizedState=N.state!==null&&N.state!==void 0?N.state:null;wR(a,N);{if(typeof s.getDerivedStateFromProps=="function"&&L===null){var D=kt(s)||"Component";I_.has(D)||(I_.add(D),u("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",D,N.state===null?"null":"undefined",D))}if(typeof s.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"){var z=null,H=null,J=null;if(typeof N.componentWillMount=="function"&&N.componentWillMount.__suppressDeprecationWarning!==!0?z="componentWillMount":typeof N.UNSAFE_componentWillMount=="function"&&(z="UNSAFE_componentWillMount"),typeof N.componentWillReceiveProps=="function"&&N.componentWillReceiveProps.__suppressDeprecationWarning!==!0?H="componentWillReceiveProps":typeof N.UNSAFE_componentWillReceiveProps=="function"&&(H="UNSAFE_componentWillReceiveProps"),typeof N.componentWillUpdate=="function"&&N.componentWillUpdate.__suppressDeprecationWarning!==!0?J="componentWillUpdate":typeof N.UNSAFE_componentWillUpdate=="function"&&(J="UNSAFE_componentWillUpdate"),z!==null||H!==null||J!==null){var ge=kt(s)||"Component",ze=typeof s.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";D_.has(ge)||(D_.add(ge),u(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,ge,ze,z!==null?`
  `+z:"",H!==null?`
  `+H:"",J!==null?`
  `+J:""))}}}return d&&dC(a,h,g),N}function UF(a,s){var l=s.state;typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),l!==s.state&&(u("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",it(a)||"Component"),z_.enqueueReplaceState(s,s.state,null))}function ER(a,s,l,d){var h=s.state;if(typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==h){{var g=it(a)||"Component";$_.has(g)||($_.add(g),u("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",g))}z_.enqueueReplaceState(s,s.state,null)}}function V_(a,s,l,d){LF(a,s,l);var h=a.stateNode;h.props=l,h.state=a.memoizedState,h.refs={},Xb(a);var g=s.contextType;if(typeof g=="object"&&g!==null)h.context=Nr(g);else{var v=vl(a,s,!0);h.context=bl(a,v)}{if(h.state===l){var w=kt(s)||"Component";U_.has(w)||(U_.add(w),u("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",w))}a.mode&_r&&Qa.recordLegacyContextWarning(a,h),Qa.recordUnsafeLifecycleWarnings(a,h)}h.state=a.memoizedState;var E=s.getDerivedStateFromProps;if(typeof E=="function"&&(B_(a,s,E,l),h.state=a.memoizedState),typeof s.getDerivedStateFromProps!="function"&&typeof h.getSnapshotBeforeUpdate!="function"&&(typeof h.UNSAFE_componentWillMount=="function"||typeof h.componentWillMount=="function")&&(UF(a,h),Qp(a,l,h,d),h.state=a.memoizedState),typeof h.componentDidMount=="function"){var k=Nt;k|=Zo,(a.mode&Ri)!==qe&&(k|=Us),a.flags|=k}}function MF(a,s,l,d){var h=a.stateNode,g=a.memoizedProps;h.props=g;var v=h.context,w=s.contextType,E=ma;if(typeof w=="object"&&w!==null)E=Nr(w);else{var k=vl(a,s,!0);E=bl(a,k)}var N=s.getDerivedStateFromProps,L=typeof N=="function"||typeof h.getSnapshotBeforeUpdate=="function";!L&&(typeof h.UNSAFE_componentWillReceiveProps=="function"||typeof h.componentWillReceiveProps=="function")&&(g!==l||v!==E)&&ER(a,h,l,E),UC();var D=a.memoizedState,z=h.state=D;if(Qp(a,l,h,d),z=a.memoizedState,g===l&&D===z&&!Ip()&&!em()){if(typeof h.componentDidMount=="function"){var H=Nt;H|=Zo,(a.mode&Ri)!==qe&&(H|=Us),a.flags|=H}return!1}typeof N=="function"&&(B_(a,s,N,l),z=a.memoizedState);var J=em()||_R(a,s,g,l,D,z,E);if(J){if(!L&&(typeof h.UNSAFE_componentWillMount=="function"||typeof h.componentWillMount=="function")&&(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"){var ge=Nt;ge|=Zo,(a.mode&Ri)!==qe&&(ge|=Us),a.flags|=ge}}else{if(typeof h.componentDidMount=="function"){var ze=Nt;ze|=Zo,(a.mode&Ri)!==qe&&(ze|=Us),a.flags|=ze}a.memoizedProps=l,a.memoizedState=z}return h.props=l,h.state=z,h.context=E,J}function FF(a,s,l,d,h){var g=s.stateNode;LC(a,s);var v=s.memoizedProps,w=s.type===s.elementType?v:ri(s.type,v);g.props=w;var E=s.pendingProps,k=g.context,N=l.contextType,L=ma;if(typeof N=="object"&&N!==null)L=Nr(N);else{var D=vl(s,l,!0);L=bl(s,D)}var z=l.getDerivedStateFromProps,H=typeof z=="function"||typeof g.getSnapshotBeforeUpdate=="function";!H&&(typeof g.UNSAFE_componentWillReceiveProps=="function"||typeof g.componentWillReceiveProps=="function")&&(v!==E||k!==L)&&ER(s,g,d,L),UC();var J=s.memoizedState,ge=g.state=J;if(Qp(s,d,g,h),ge=s.memoizedState,v===E&&J===ge&&!Ip()&&!em()&&!_e)return typeof g.componentDidUpdate=="function"&&(v!==a.memoizedProps||J!==a.memoizedState)&&(s.flags|=Nt),typeof g.getSnapshotBeforeUpdate=="function"&&(v!==a.memoizedProps||J!==a.memoizedState)&&(s.flags|=tl),!1;typeof z=="function"&&(B_(s,l,z,d),ge=s.memoizedState);var ze=em()||_R(s,l,w,d,J,ge,L)||_e;return ze?(!H&&(typeof g.UNSAFE_componentWillUpdate=="function"||typeof g.componentWillUpdate=="function")&&(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,ge,L),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,ge,L)),typeof g.componentDidUpdate=="function"&&(s.flags|=Nt),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=tl)):(typeof g.componentDidUpdate=="function"&&(v!==a.memoizedProps||J!==a.memoizedState)&&(s.flags|=Nt),typeof g.getSnapshotBeforeUpdate=="function"&&(v!==a.memoizedProps||J!==a.memoizedState)&&(s.flags|=tl),s.memoizedProps=d,s.memoizedState=ge),g.props=d,g.state=ge,g.context=L,ze}function pu(a,s){return{value:a,source:s,stack:zo(s),digest:null}}function H_(a,s,l){return{value:a,source:null,stack:l??null,digest:s??null}}function BF(a,s){return!0}function q_(a,s){try{var l=BF(a,s);if(l===!1)return;var d=s.value,h=s.source,g=s.stack,v=g!==null?g:"";if(d!=null&&d._suppressLogging){if(a.tag===p)return;console.error(d)}var w=h?it(h):null,E=w?"The above error occurred in the <"+w+"> component:":"The above error occurred in one of your React components:",k;if(a.tag===y)k=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var N=it(a)||"Anonymous";k="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+N+".")}var L=E+`
`+v+`

`+(""+k);console.error(L)}catch(D){setTimeout(function(){throw D})}}var zF=typeof WeakMap=="function"?WeakMap:Map;function xR(a,s,l){var d=vs(Qt,l);d.tag=Zb,d.payload={element:null};var h=s.value;return d.callback=function(){Iz(h),q_(a,s)},d}function G_(a,s,l){var d=vs(Qt,l);d.tag=Zb;var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;d.payload=function(){return h(g)},d.callback=function(){jO(a),q_(a,s)}}var v=a.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(d.callback=function(){jO(a),q_(a,s),typeof h!="function"&&Pz(this);var E=s.value,k=s.stack;this.componentDidCatch(E,{componentStack:k!==null?k:""}),typeof h!="function"&&(da(a.lanes,Qe)||u("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",it(a)||"Unknown"))}),d}function TR(a,s,l){var d=a.pingCache,h;if(d===null?(d=a.pingCache=new zF,h=new Set,d.set(s,h)):(h=d.get(s),h===void 0&&(h=new Set,d.set(s,h))),!h.has(l)){h.add(l);var g=jz.bind(null,a,s,l);Ka&&Sf(a,l),s.then(g,g)}}function VF(a,s,l,d){var h=a.updateQueue;if(h===null){var g=new Set;g.add(l),a.updateQueue=g}else h.add(l)}function HF(a,s){var l=a.tag;if((a.mode&St)===qe&&(l===f||l===O||l===G)){var d=a.alternate;d?(a.updateQueue=d.updateQueue,a.memoizedState=d.memoizedState,a.lanes=d.lanes):(a.updateQueue=null,a.memoizedState=null)}}function CR(a){var s=a;do{if(s.tag===j&&xF(s))return s;s=s.return}while(s!==null);return null}function RR(a,s,l,d,h){if((a.mode&St)===qe){if(a===s)a.flags|=jn;else{if(a.flags|=Pt,l.flags|=dv,l.flags&=-52805,l.tag===p){var g=l.alternate;if(g===null)l.tag=de;else{var v=vs(Qt,Qe);v.tag=Kp,Zs(l,v,Qe)}}l.lanes=dt(l.lanes,Qe)}return a}return a.flags|=jn,a.lanes=h,a}function qF(a,s,l,d,h){if(l.flags|=Xh,Ka&&Sf(a,h),d!==null&&typeof d=="object"&&typeof d.then=="function"){var g=d;HF(l),ln()&&l.mode&St&&vC();var v=CR(s);if(v!==null){v.flags&=~os,RR(v,s,l,a,h),v.mode&St&&TR(a,g,h),VF(v,a,g);return}else{if(!hD(h)){TR(a,g,h),Tw();return}var w=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");d=w}}else if(ln()&&l.mode&St){vC();var E=CR(s);if(E!==null){(E.flags&jn)===Je&&(E.flags|=os),RR(E,s,l,a,h),Ub(pu(d,l));return}}d=pu(d,l),xz(d);var k=s;do{switch(k.tag){case y:{var N=d;k.flags|=jn;var L=dd(h);k.lanes=dt(k.lanes,L);var D=xR(k,N,L);Qb(k,D);return}case p:var z=d,H=k.type,J=k.stateNode;if((k.flags&Pt)===Je&&(typeof H.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&!CO(J))){k.flags|=jn;var ge=dd(h);k.lanes=dt(k.lanes,ge);var ze=G_(k,z,ge);Qb(k,ze);return}break}k=k.return}while(k!==null)}function GF(){return null}var sf=t.ReactCurrentOwner,ni=!1,W_,of,J_,K_,Z_,mu,Y_,xm,uf;W_={},of={},J_={},K_={},Z_={},mu=!1,Y_={},xm={},uf={};function Dn(a,s,l,d){a===null?s.child=kC(s,null,l,d):s.child=El(s,a.child,l,d)}function WF(a,s,l,d){s.child=El(s,a.child,null,d),s.child=El(s,null,l,d)}function OR(a,s,l,d,h){if(s.type!==s.elementType){var g=l.propTypes;g&&Ya(g,d,"prop",kt(l))}var v=l.render,w=s.ref,E,k;Tl(s,h),id(s);{if(sf.current=s,Aa(!0),E=Nl(a,s,v,d,w,h),k=Pl(),s.mode&_r){tn(!0);try{E=Nl(a,s,v,d,w,h),k=Pl()}finally{tn(!1)}}Aa(!1)}return al(),a!==null&&!ni?(HC(a,s,h),bs(a,s,h)):(ln()&&k&&Pb(s),s.flags|=el,Dn(a,s,E,h),s.child)}function AR(a,s,l,d,h){if(a===null){var g=l.type;if(Xz(g)&&l.compare===null&&l.defaultProps===void 0){var v=g;return v=Fl(g),s.tag=G,s.type=v,ew(s,g),kR(a,s,v,d,h)}{var w=g.propTypes;if(w&&Ya(w,d,"prop",kt(g)),l.defaultProps!==void 0){var E=kt(g)||"Unknown";uf[E]||(u("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",E),uf[E]=!0)}}var k=Dw(l.type,null,d,s,s.mode,h);return k.ref=s.ref,k.return=s,s.child=k,k}{var N=l.type,L=N.propTypes;L&&Ya(L,d,"prop",kt(N))}var D=a.child,z=sw(a,h);if(!z){var H=D.memoizedProps,J=l.compare;if(J=J!==null?J:Cd,J(H,d)&&a.ref===s.ref)return bs(a,s,h)}s.flags|=el;var ge=_u(D,d);return ge.ref=s.ref,ge.return=s,s.child=ge,ge}function kR(a,s,l,d,h){if(s.type!==s.elementType){var g=s.elementType;if(g.$$typeof===He){var v=g,w=v._payload,E=v._init;try{g=E(w)}catch{g=null}var k=g&&g.propTypes;k&&Ya(k,d,"prop",kt(g))}}if(a!==null){var N=a.memoizedProps;if(Cd(N,d)&&a.ref===s.ref&&s.type===a.type)if(ni=!1,s.pendingProps=d=N,sw(a,h))(a.flags&dv)!==Je&&(ni=!0);else return s.lanes=a.lanes,bs(a,s,h)}return X_(a,s,l,d,h)}function NR(a,s,l){var d=s.pendingProps,h=d.children,g=a!==null?a.memoizedState:null;if(d.mode==="hidden"||Pe)if((s.mode&St)===qe){var v={baseLanes:ee,cachePool:null,transitions:null};s.memoizedState=v,Lm(s,l)}else if(da(l,ca)){var L={baseLanes:ee,cachePool:null,transitions:null};s.memoizedState=L;var D=g!==null?g.baseLanes:l;Lm(s,D)}else{var w=null,E;if(g!==null){var k=g.baseLanes;E=dt(k,l)}else E=l;s.lanes=s.childLanes=ca;var N={baseLanes:E,cachePool:w,transitions:null};return s.memoizedState=N,s.updateQueue=null,Lm(s,E),null}else{var z;g!==null?(z=dt(g.baseLanes,l),s.memoizedState=null):z=l,Lm(s,z)}return Dn(a,s,h,l),s.child}function JF(a,s,l){var d=s.pendingProps;return Dn(a,s,d,l),s.child}function KF(a,s,l){var d=s.pendingProps.children;return Dn(a,s,d,l),s.child}function ZF(a,s,l){{s.flags|=Nt;{var d=s.stateNode;d.effectDuration=0,d.passiveEffectDuration=0}}var h=s.pendingProps,g=h.children;return Dn(a,s,g,l),s.child}function PR(a,s){var l=s.ref;(a===null&&l!==null||a!==null&&a.ref!==l)&&(s.flags|=Jo,s.flags|=fv)}function X_(a,s,l,d,h){if(s.type!==s.elementType){var g=l.propTypes;g&&Ya(g,d,"prop",kt(l))}var v;{var w=vl(s,l,!0);v=bl(s,w)}var E,k;Tl(s,h),id(s);{if(sf.current=s,Aa(!0),E=Nl(a,s,l,d,v,h),k=Pl(),s.mode&_r){tn(!0);try{E=Nl(a,s,l,d,v,h),k=Pl()}finally{tn(!1)}}Aa(!1)}return al(),a!==null&&!ni?(HC(a,s,h),bs(a,s,h)):(ln()&&k&&Pb(s),s.flags|=el,Dn(a,s,E,h),s.child)}function $R(a,s,l,d,h){{switch(h4(s)){case!1:{var g=s.stateNode,v=s.type,w=new v(s.memoizedProps,g.context),E=w.state;g.updater.enqueueSetState(g,E,null);break}case!0:{s.flags|=Pt,s.flags|=jn;var k=new Error("Simulated error coming from DevTools"),N=dd(h);s.lanes=dt(s.lanes,N);var L=G_(s,pu(k,s),N);Qb(s,L);break}}if(s.type!==s.elementType){var D=l.propTypes;D&&Ya(D,d,"prop",kt(l))}}var z;ki(l)?(z=!0,Dp(s)):z=!1,Tl(s,h);var H=s.stateNode,J;H===null?(Cm(a,s),SR(s,l,d),V_(s,l,d,h),J=!0):a===null?J=MF(s,l,d,h):J=FF(a,s,l,d,h);var ge=Q_(a,s,l,J,z,h);{var ze=s.stateNode;J&&ze.props!==d&&(mu||u("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",it(s)||"a component"),mu=!0)}return ge}function Q_(a,s,l,d,h,g){PR(a,s);var v=(s.flags&Pt)!==Je;if(!d&&!v)return h&&pC(s,l,!1),bs(a,s,g);var w=s.stateNode;sf.current=s;var E;if(v&&typeof l.getDerivedStateFromError!="function")E=null,yR();else{id(s);{if(Aa(!0),E=w.render(),s.mode&_r){tn(!0);try{w.render()}finally{tn(!1)}}Aa(!1)}al()}return s.flags|=el,a!==null&&v?WF(a,s,E,g):Dn(a,s,E,g),s.memoizedState=w.state,h&&pC(s,l,!0),s.child}function IR(a){var s=a.stateNode;s.pendingContext?fC(a,s.pendingContext,s.pendingContext!==s.context):s.context&&fC(a,s.context,!1),e_(a,s.containerInfo)}function YF(a,s,l){if(IR(s),a===null)throw new Error("Should have a current fiber. This is a bug in React.");var d=s.pendingProps,h=s.memoizedState,g=h.element;LC(a,s),Qp(s,d,null,l);var v=s.memoizedState;s.stateNode;var w=v.element;if(h.isDehydrated){var E={element:w,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},k=s.updateQueue;if(k.baseState=E,s.memoizedState=E,s.flags&os){var N=pu(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),s);return jR(a,s,w,l,N)}else if(w!==g){var L=pu(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),s);return jR(a,s,w,l,L)}else{eF(s);var D=kC(s,null,w,l);s.child=D;for(var z=D;z;)z.flags=z.flags&~kr|us,z=z.sibling}}else{if(Sl(),w===g)return bs(a,s,l);Dn(a,s,w,l)}return s.child}function jR(a,s,l,d,h){return Sl(),Ub(h),s.flags|=os,Dn(a,s,l,d),s.child}function XF(a,s,l){BC(s),a===null&&Lb(s);var d=s.type,h=s.pendingProps,g=a!==null?a.memoizedProps:null,v=h.children,w=vb(d,h);return w?v=null:g!==null&&vb(d,g)&&(s.flags|=nd),PR(a,s),Dn(a,s,v,l),s.child}function QF(a,s){return a===null&&Lb(s),null}function eB(a,s,l,d){Cm(a,s);var h=s.pendingProps,g=l,v=g._payload,w=g._init,E=w(v);s.type=E;var k=s.tag=Qz(E),N=ri(E,h),L;switch(k){case f:return ew(s,E),s.type=E=Fl(E),L=X_(null,s,E,N,d),L;case p:return s.type=E=kw(E),L=$R(null,s,E,N,d),L;case O:return s.type=E=Nw(E),L=OR(null,s,E,N,d),L;case q:{if(s.type!==s.elementType){var D=E.propTypes;D&&Ya(D,N,"prop",kt(E))}return L=AR(null,s,E,ri(E.type,N),d),L}}var z="";throw E!==null&&typeof E=="object"&&E.$$typeof===He&&(z=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+E+". "+("Lazy element type must resolve to a class or function."+z))}function tB(a,s,l,d,h){Cm(a,s),s.tag=p;var g;return ki(l)?(g=!0,Dp(s)):g=!1,Tl(s,h),SR(s,l,d),V_(s,l,d,h),Q_(null,s,l,!0,g,h)}function rB(a,s,l,d){Cm(a,s);var h=s.pendingProps,g;{var v=vl(s,l,!1);g=bl(s,v)}Tl(s,d);var w,E;id(s);{if(l.prototype&&typeof l.prototype.render=="function"){var k=kt(l)||"Unknown";W_[k]||(u("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",k,k),W_[k]=!0)}s.mode&_r&&Qa.recordLegacyContextWarning(s,null),Aa(!0),sf.current=s,w=Nl(null,s,l,h,g,d),E=Pl(),Aa(!1)}if(al(),s.flags|=el,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0){var N=kt(l)||"Unknown";of[N]||(u("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",N,N,N),of[N]=!0)}if(typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0){{var L=kt(l)||"Unknown";of[L]||(u("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",L,L,L),of[L]=!0)}s.tag=p,s.memoizedState=null,s.updateQueue=null;var D=!1;return ki(l)?(D=!0,Dp(s)):D=!1,s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Xb(s),wR(s,w),V_(s,l,h,d),Q_(null,s,l,!0,D,d)}else{if(s.tag=f,s.mode&_r){tn(!0);try{w=Nl(null,s,l,h,g,d),E=Pl()}finally{tn(!1)}}return ln()&&E&&Pb(s),Dn(null,s,w,d),ew(s,l),s.child}}function ew(a,s){{if(s&&s.childContextTypes&&u("%s(...): childContextTypes cannot be defined on a function component.",s.displayName||s.name||"Component"),a.ref!==null){var l="",d=js();d&&(l+=`

Check the render method of \``+d+"`.");var h=d||"",g=a._debugSource;g&&(h=g.fileName+":"+g.lineNumber),Z_[h]||(Z_[h]=!0,u("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",l))}if(s.defaultProps!==void 0){var v=kt(s)||"Unknown";uf[v]||(u("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",v),uf[v]=!0)}if(typeof s.getDerivedStateFromProps=="function"){var w=kt(s)||"Unknown";K_[w]||(u("%s: Function components do not support getDerivedStateFromProps.",w),K_[w]=!0)}if(typeof s.contextType=="object"&&s.contextType!==null){var E=kt(s)||"Unknown";J_[E]||(u("%s: Function components do not support contextType.",E),J_[E]=!0)}}}var tw={dehydrated:null,treeContext:null,retryLane:rn};function rw(a){return{baseLanes:a,cachePool:GF(),transitions:null}}function nB(a,s){var l=null;return{baseLanes:dt(a.baseLanes,s),cachePool:l,transitions:a.transitions}}function aB(a,s,l,d){if(s!==null){var h=s.memoizedState;if(h===null)return!1}return n_(a,Zd)}function iB(a,s){return ip(a.childLanes,s)}function DR(a,s,l){var d=s.pendingProps;p4(s)&&(s.flags|=Pt);var h=ei.current,g=!1,v=(s.flags&Pt)!==Je;if(v||aB(h,a)?(g=!0,s.flags&=~Pt):(a===null||a.memoizedState!==null)&&(h=EF(h,VC)),h=Rl(h),Xs(s,h),a===null){Lb(s);var w=s.memoizedState;if(w!==null){var E=w.dehydrated;if(E!==null)return cB(s,E)}var k=d.children,N=d.fallback;if(g){var L=sB(s,k,N,l),D=s.child;return D.memoizedState=rw(l),s.memoizedState=tw,L}else return nw(s,k)}else{var z=a.memoizedState;if(z!==null){var H=z.dehydrated;if(H!==null)return dB(a,s,v,d,H,z,l)}if(g){var J=d.fallback,ge=d.children,ze=uB(a,s,ge,J,l),je=s.child,xt=a.child.memoizedState;return je.memoizedState=xt===null?rw(l):nB(xt,l),je.childLanes=iB(a,l),s.memoizedState=tw,ze}else{var vt=d.children,M=oB(a,s,vt,l);return s.memoizedState=null,M}}}function nw(a,s,l){var d=a.mode,h={mode:"visible",children:s},g=aw(h,d);return g.return=a,a.child=g,g}function sB(a,s,l,d){var h=a.mode,g=a.child,v={mode:"hidden",children:s},w,E;return(h&St)===qe&&g!==null?(w=g,w.childLanes=ee,w.pendingProps=v,a.mode&Ft&&(w.actualDuration=0,w.actualStartTime=-1,w.selfBaseDuration=0,w.treeBaseDuration=0),E=so(l,h,d,null)):(w=aw(v,h),E=so(l,h,d,null)),w.return=a,E.return=a,w.sibling=E,a.child=w,E}function aw(a,s,l){return LO(a,s,ee,null)}function LR(a,s){return _u(a,s)}function oB(a,s,l,d){var h=a.child,g=h.sibling,v=LR(h,{mode:"visible",children:l});if((s.mode&St)===qe&&(v.lanes=d),v.return=s,v.sibling=null,g!==null){var w=s.deletions;w===null?(s.deletions=[g],s.flags|=Wo):w.push(g)}return s.child=v,v}function uB(a,s,l,d,h){var g=s.mode,v=a.child,w=v.sibling,E={mode:"hidden",children:l},k;if((g&St)===qe&&s.child!==v){var N=s.child;k=N,k.childLanes=ee,k.pendingProps=E,s.mode&Ft&&(k.actualDuration=0,k.actualStartTime=-1,k.selfBaseDuration=v.selfBaseDuration,k.treeBaseDuration=v.treeBaseDuration),s.deletions=null}else k=LR(v,E),k.subtreeFlags=v.subtreeFlags&ls;var L;return w!==null?L=_u(w,d):(L=so(d,g,h,null),L.flags|=kr),L.return=s,k.return=s,k.sibling=L,s.child=k,L}function Tm(a,s,l,d){d!==null&&Ub(d),El(s,a.child,null,l);var h=s.pendingProps,g=h.children,v=nw(s,g);return v.flags|=kr,s.memoizedState=null,v}function lB(a,s,l,d,h){var g=s.mode,v={mode:"visible",children:l},w=aw(v,g),E=so(d,g,h,null);return E.flags|=kr,w.return=s,E.return=s,w.sibling=E,s.child=w,(s.mode&St)!==qe&&El(s,a.child,null,h),E}function cB(a,s,l){return(a.mode&St)===qe?(u("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),a.lanes=Qe):Sb(s)?a.lanes=Qo:a.lanes=ca,null}function dB(a,s,l,d,h,g,v){if(l)if(s.flags&os){s.flags&=~os;var M=H_(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return Tm(a,s,v,M)}else{if(s.memoizedState!==null)return s.child=a.child,s.flags|=Pt,null;var K=d.children,F=d.fallback,ne=lB(a,s,K,F,v),xe=s.child;return xe.memoizedState=rw(v),s.memoizedState=tw,ne}else{if(XM(),(s.mode&St)===qe)return Tm(a,s,v,null);if(Sb(h)){var w,E,k;{var N=mM(h);w=N.digest,E=N.message,k=N.stack}var L;E?L=new Error(E):L=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var D=H_(L,w,k);return Tm(a,s,v,D)}var z=da(v,a.childLanes);if(ni||z){var H=Dm();if(H!==null){var J=wD(H,v);if(J!==rn&&J!==g.retryLane){g.retryLane=J;var ge=Qt;Yn(a,J),Hr(H,a,J,ge)}}Tw();var ze=H_(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return Tm(a,s,v,ze)}else if(sC(h)){s.flags|=Pt,s.child=a.child;var je=Dz.bind(null,a);return gM(h,je),null}else{tF(s,h,g.treeContext);var xt=d.children,vt=nw(s,xt);return vt.flags|=us,vt}}}function UR(a,s,l){a.lanes=dt(a.lanes,s);var d=a.alternate;d!==null&&(d.lanes=dt(d.lanes,s)),Jb(a.return,s,l)}function fB(a,s,l){for(var d=s;d!==null;){if(d.tag===j){var h=d.memoizedState;h!==null&&UR(d,l,a)}else if(d.tag===ke)UR(d,l,a);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)return;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}}function hB(a){for(var s=a,l=null;s!==null;){var d=s.alternate;d!==null&&nm(d)===null&&(l=s),s=s.sibling}return l}function pB(a){if(a!==void 0&&a!=="forwards"&&a!=="backwards"&&a!=="together"&&!Y_[a])if(Y_[a]=!0,typeof a=="string")switch(a.toLowerCase()){case"together":case"forwards":case"backwards":{u('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',a,a.toLowerCase());break}case"forward":case"backward":{u('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',a,a.toLowerCase());break}default:u('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',a);break}else u('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',a)}function mB(a,s){a!==void 0&&!xm[a]&&(a!=="collapsed"&&a!=="hidden"?(xm[a]=!0,u('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',a)):s!=="forwards"&&s!=="backwards"&&(xm[a]=!0,u('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',a)))}function MR(a,s){{var l=yt(a),d=!l&&typeof Wa(a)=="function";if(l||d){var h=l?"array":"iterable";return u("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",h,s,h),!1}}return!0}function gB(a,s){if((s==="forwards"||s==="backwards")&&a!==void 0&&a!==null&&a!==!1)if(yt(a)){for(var l=0;l<a.length;l++)if(!MR(a[l],l))return}else{var d=Wa(a);if(typeof d=="function"){var h=d.call(a);if(h)for(var g=h.next(),v=0;!g.done;g=h.next()){if(!MR(g.value,v))return;v++}}else u('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',s)}}function iw(a,s,l,d,h){var g=a.memoizedState;g===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:h}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=l,g.tailMode=h)}function FR(a,s,l){var d=s.pendingProps,h=d.revealOrder,g=d.tail,v=d.children;pB(h),mB(g,h),gB(v,h),Dn(a,s,v,l);var w=ei.current,E=n_(w,Zd);if(E)w=a_(w,Zd),s.flags|=Pt;else{var k=a!==null&&(a.flags&Pt)!==Je;k&&fB(s,s.child,l),w=Rl(w)}if(Xs(s,w),(s.mode&St)===qe)s.memoizedState=null;else switch(h){case"forwards":{var N=hB(s.child),L;N===null?(L=s.child,s.child=null):(L=N.sibling,N.sibling=null),iw(s,!1,L,N,g);break}case"backwards":{var D=null,z=s.child;for(s.child=null;z!==null;){var H=z.alternate;if(H!==null&&nm(H)===null){s.child=z;break}var J=z.sibling;z.sibling=D,D=z,z=J}iw(s,!0,D,null,g);break}case"together":{iw(s,!1,null,null,void 0);break}default:s.memoizedState=null}return s.child}function yB(a,s,l){e_(s,s.stateNode.containerInfo);var d=s.pendingProps;return a===null?s.child=El(s,null,d,l):Dn(a,s,d,l),s.child}var BR=!1;function vB(a,s,l){var d=s.type,h=d._context,g=s.pendingProps,v=s.memoizedProps,w=g.value;{"value"in g||BR||(BR=!0,u("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var E=s.type.propTypes;E&&Ya(E,g,"prop","Context.Provider")}if($C(s,h,w),v!==null){var k=v.value;if(pa(k,w)){if(v.children===g.children&&!Ip())return bs(a,s,l)}else pF(s,h,l)}var N=g.children;return Dn(a,s,N,l),s.child}var zR=!1;function bB(a,s,l){var d=s.type;d._context===void 0?d!==d.Consumer&&(zR||(zR=!0,u("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):d=d._context;var h=s.pendingProps,g=h.children;typeof g!="function"&&u("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Tl(s,l);var v=Nr(d);id(s);var w;return sf.current=s,Aa(!0),w=g(v),Aa(!1),al(),s.flags|=el,Dn(a,s,w,l),s.child}function lf(){ni=!0}function Cm(a,s){(s.mode&St)===qe&&a!==null&&(a.alternate=null,s.alternate=null,s.flags|=kr)}function bs(a,s,l){return a!==null&&(s.dependencies=a.dependencies),yR(),wf(s.lanes),da(l,s.childLanes)?(fF(a,s),s.child):null}function _B(a,s,l){{var d=s.return;if(d===null)throw new Error("Cannot swap the root fiber.");if(a.alternate=null,s.alternate=null,l.index=s.index,l.sibling=s.sibling,l.return=s.return,l.ref=s.ref,s===d.child)d.child=l;else{var h=d.child;if(h===null)throw new Error("Expected parent to have a child.");for(;h.sibling!==s;)if(h=h.sibling,h===null)throw new Error("Expected to find the previous sibling.");h.sibling=l}var g=d.deletions;return g===null?(d.deletions=[a],d.flags|=Wo):g.push(a),l.flags|=kr,l}}function sw(a,s){var l=a.lanes;return!!da(l,s)}function wB(a,s,l){switch(s.tag){case y:IR(s),s.stateNode,Sl();break;case _:BC(s);break;case p:{var d=s.type;ki(d)&&Dp(s);break}case b:e_(s,s.stateNode.containerInfo);break;case A:{var h=s.memoizedProps.value,g=s.type._context;$C(s,g,h);break}case P:{var v=da(l,s.childLanes);v&&(s.flags|=Nt);{var w=s.stateNode;w.effectDuration=0,w.passiveEffectDuration=0}}break;case j:{var E=s.memoizedState;if(E!==null){if(E.dehydrated!==null)return Xs(s,Rl(ei.current)),s.flags|=Pt,null;var k=s.child,N=k.childLanes;if(da(l,N))return DR(a,s,l);Xs(s,Rl(ei.current));var L=bs(a,s,l);return L!==null?L.sibling:null}else Xs(s,Rl(ei.current));break}case ke:{var D=(a.flags&Pt)!==Je,z=da(l,s.childLanes);if(D){if(z)return FR(a,s,l);s.flags|=Pt}var H=s.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Xs(s,ei.current),z)break;return null}case Ue:case ae:return s.lanes=ee,NR(a,s,l)}return bs(a,s,l)}function VR(a,s,l){if(s._debugNeedsRemount&&a!==null)return _B(a,s,Dw(s.type,s.key,s.pendingProps,s._debugOwner||null,s.mode,s.lanes));if(a!==null){var d=a.memoizedProps,h=s.pendingProps;if(d!==h||Ip()||s.type!==a.type)ni=!0;else{var g=sw(a,l);if(!g&&(s.flags&Pt)===Je)return ni=!1,wB(a,s,l);(a.flags&dv)!==Je?ni=!0:ni=!1}}else if(ni=!1,ln()&&GM(s)){var v=s.index,w=WM();yC(s,w,v)}switch(s.lanes=ee,s.tag){case m:return rB(a,s,s.type,l);case ie:{var E=s.elementType;return eB(a,s,E,l)}case f:{var k=s.type,N=s.pendingProps,L=s.elementType===k?N:ri(k,N);return X_(a,s,k,L,l)}case p:{var D=s.type,z=s.pendingProps,H=s.elementType===D?z:ri(D,z);return $R(a,s,D,H,l)}case y:return YF(a,s,l);case _:return XF(a,s,l);case S:return QF(a,s);case j:return DR(a,s,l);case b:return yB(a,s,l);case O:{var J=s.type,ge=s.pendingProps,ze=s.elementType===J?ge:ri(J,ge);return OR(a,s,J,ze,l)}case C:return JF(a,s,l);case T:return KF(a,s,l);case P:return ZF(a,s,l);case A:return vB(a,s,l);case R:return bB(a,s,l);case q:{var je=s.type,xt=s.pendingProps,vt=ri(je,xt);if(s.type!==s.elementType){var M=je.propTypes;M&&Ya(M,vt,"prop",kt(je))}return vt=ri(je.type,vt),AR(a,s,je,vt,l)}case G:return kR(a,s,s.type,s.pendingProps,l);case de:{var K=s.type,F=s.pendingProps,ne=s.elementType===K?F:ri(K,F);return tB(a,s,K,ne,l)}case ke:return FR(a,s,l);case st:break;case Ue:return NR(a,s,l)}throw new Error("Unknown unit of work tag ("+s.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function $l(a){a.flags|=Nt}function HR(a){a.flags|=Jo,a.flags|=fv}var qR,ow,GR,WR;qR=function(a,s,l,d){for(var h=s.child;h!==null;){if(h.tag===_||h.tag===S)VU(a,h.stateNode);else if(h.tag!==b){if(h.child!==null){h.child.return=h,h=h.child;continue}}if(h===s)return;for(;h.sibling===null;){if(h.return===null||h.return===s)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},ow=function(a,s){},GR=function(a,s,l,d,h){var g=a.memoizedProps;if(g!==d){var v=s.stateNode,w=t_(),E=qU(v,l,g,d,h,w);s.updateQueue=E,E&&$l(s)}},WR=function(a,s,l,d){l!==d&&$l(s)};function cf(a,s){if(!ln())switch(a.tailMode){case"hidden":{for(var l=a.tail,d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break}case"collapsed":{for(var h=a.tail,g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?!s&&a.tail!==null?a.tail.sibling=null:a.tail=null:g.sibling=null;break}}}function dn(a){var s=a.alternate!==null&&a.alternate.child===a.child,l=ee,d=Je;if(s){if((a.mode&Ft)!==qe){for(var E=a.selfBaseDuration,k=a.child;k!==null;)l=dt(l,dt(k.lanes,k.childLanes)),d|=k.subtreeFlags&ls,d|=k.flags&ls,E+=k.treeBaseDuration,k=k.sibling;a.treeBaseDuration=E}else for(var N=a.child;N!==null;)l=dt(l,dt(N.lanes,N.childLanes)),d|=N.subtreeFlags&ls,d|=N.flags&ls,N.return=a,N=N.sibling;a.subtreeFlags|=d}else{if((a.mode&Ft)!==qe){for(var h=a.actualDuration,g=a.selfBaseDuration,v=a.child;v!==null;)l=dt(l,dt(v.lanes,v.childLanes)),d|=v.subtreeFlags,d|=v.flags,h+=v.actualDuration,g+=v.treeBaseDuration,v=v.sibling;a.actualDuration=h,a.treeBaseDuration=g}else for(var w=a.child;w!==null;)l=dt(l,dt(w.lanes,w.childLanes)),d|=w.subtreeFlags,d|=w.flags,w.return=a,w=w.sibling;a.subtreeFlags|=d}return a.childLanes=l,s}function SB(a,s,l){if(sF()&&(s.mode&St)!==qe&&(s.flags&Pt)===Je)return xC(s),Sl(),s.flags|=os|Xh|jn,!1;var d=Bp(s);if(l!==null&&l.dehydrated!==null)if(a===null){if(!d)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(aF(s),dn(s),(s.mode&Ft)!==qe){var h=l!==null;if(h){var g=s.child;g!==null&&(s.treeBaseDuration-=g.treeBaseDuration)}}return!1}else{if(Sl(),(s.flags&Pt)===Je&&(s.memoizedState=null),s.flags|=Nt,dn(s),(s.mode&Ft)!==qe){var v=l!==null;if(v){var w=s.child;w!==null&&(s.treeBaseDuration-=w.treeBaseDuration)}}return!1}else return TC(),!0}function JR(a,s,l){var d=s.pendingProps;switch($b(s),s.tag){case m:case ie:case G:case f:case O:case C:case T:case P:case R:case q:return dn(s),null;case p:{var h=s.type;return ki(h)&&jp(s),dn(s),null}case y:{var g=s.stateNode;if(Cl(s),Ab(s),s_(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),a===null||a.child===null){var v=Bp(s);if(v)$l(s);else if(a!==null){var w=a.memoizedState;(!w.isDehydrated||(s.flags&os)!==Je)&&(s.flags|=tl,TC())}}return ow(a,s),dn(s),null}case _:{r_(s);var E=FC(),k=s.type;if(a!==null&&s.stateNode!=null)GR(a,s,k,d,E),a.ref!==s.ref&&HR(s);else{if(!d){if(s.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return dn(s),null}var N=t_(),L=Bp(s);if(L)rF(s,E,N)&&$l(s);else{var D=zU(k,d,E,N,s);qR(D,s,!1,!1),s.stateNode=D,HU(D,k,d,E)&&$l(s)}s.ref!==null&&HR(s)}return dn(s),null}case S:{var z=d;if(a&&s.stateNode!=null){var H=a.memoizedProps;WR(a,s,H,z)}else{if(typeof z!="string"&&s.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var J=FC(),ge=t_(),ze=Bp(s);ze?nF(s)&&$l(s):s.stateNode=GU(z,J,ge,s)}return dn(s),null}case j:{Ol(s);var je=s.memoizedState;if(a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){var xt=SB(a,s,je);if(!xt)return s.flags&jn?s:null}if((s.flags&Pt)!==Je)return s.lanes=l,(s.mode&Ft)!==qe&&N_(s),s;var vt=je!==null,M=a!==null&&a.memoizedState!==null;if(vt!==M&&vt){var K=s.child;if(K.flags|=Ko,(s.mode&St)!==qe){var F=a===null&&(s.memoizedProps.unstable_avoidThisFallback!==!0||!0);F||n_(ei.current,VC)?Ez():Tw()}}var ne=s.updateQueue;if(ne!==null&&(s.flags|=Nt),dn(s),(s.mode&Ft)!==qe&&vt){var xe=s.child;xe!==null&&(s.treeBaseDuration-=xe.treeBaseDuration)}return null}case b:return Cl(s),ow(a,s),a===null&&MM(s.stateNode.containerInfo),dn(s),null;case A:var ve=s.type._context;return Wb(ve,s),dn(s),null;case de:{var Ke=s.type;return ki(Ke)&&jp(s),dn(s),null}case ke:{Ol(s);var nt=s.memoizedState;if(nt===null)return dn(s),null;var zt=(s.flags&Pt)!==Je,Ot=nt.rendering;if(Ot===null)if(zt)cf(nt,!1);else{var xr=Tz()&&(a===null||(a.flags&Pt)===Je);if(!xr)for(var At=s.child;At!==null;){var wr=nm(At);if(wr!==null){zt=!0,s.flags|=Pt,cf(nt,!1);var On=wr.updateQueue;return On!==null&&(s.updateQueue=On,s.flags|=Nt),s.subtreeFlags=Je,hF(s,l),Xs(s,a_(ei.current,Zd)),s.child}At=At.sibling}nt.tail!==null&&en()>mO()&&(s.flags|=Pt,zt=!0,cf(nt,!1),s.lanes=Wx)}else{if(!zt){var gn=nm(Ot);if(gn!==null){s.flags|=Pt,zt=!0;var ya=gn.updateQueue;if(ya!==null&&(s.updateQueue=ya,s.flags|=Nt),cf(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!Ot.alternate&&!ln())return dn(s),null}else en()*2-nt.renderingStartTime>mO()&&l!==ca&&(s.flags|=Pt,zt=!0,cf(nt,!1),s.lanes=Wx)}if(nt.isBackwards)Ot.sibling=s.child,s.child=Ot;else{var Mn=nt.last;Mn!==null?Mn.sibling=Ot:s.child=Ot,nt.last=Ot}}if(nt.tail!==null){var Fn=nt.tail;nt.rendering=Fn,nt.tail=Fn.sibling,nt.renderingStartTime=en(),Fn.sibling=null;var An=ei.current;return zt?An=a_(An,Zd):An=Rl(An),Xs(s,An),Fn}return dn(s),null}case st:break;case Ue:case ae:{xw(s);var xs=s.memoizedState,Bl=xs!==null;if(a!==null){var Cf=a.memoizedState,Ui=Cf!==null;Ui!==Bl&&!Pe&&(s.flags|=Ko)}return!Bl||(s.mode&St)===qe?dn(s):da(Li,ca)&&(dn(s),s.subtreeFlags&(kr|Nt)&&(s.flags|=Ko)),null}case Q:return null;case ye:return null}throw new Error("Unknown unit of work tag ("+s.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function EB(a,s,l){switch($b(s),s.tag){case p:{var d=s.type;ki(d)&&jp(s);var h=s.flags;return h&jn?(s.flags=h&~jn|Pt,(s.mode&Ft)!==qe&&N_(s),s):null}case y:{s.stateNode,Cl(s),Ab(s),s_();var g=s.flags;return(g&jn)!==Je&&(g&Pt)===Je?(s.flags=g&~jn|Pt,s):null}case _:return r_(s),null;case j:{Ol(s);var v=s.memoizedState;if(v!==null&&v.dehydrated!==null){if(s.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Sl()}var w=s.flags;return w&jn?(s.flags=w&~jn|Pt,(s.mode&Ft)!==qe&&N_(s),s):null}case ke:return Ol(s),null;case b:return Cl(s),null;case A:var E=s.type._context;return Wb(E,s),null;case Ue:case ae:return xw(s),null;case Q:return null;default:return null}}function KR(a,s,l){switch($b(s),s.tag){case p:{var d=s.type.childContextTypes;d!=null&&jp(s);break}case y:{s.stateNode,Cl(s),Ab(s),s_();break}case _:{r_(s);break}case b:Cl(s);break;case j:Ol(s);break;case ke:Ol(s);break;case A:var h=s.type._context;Wb(h,s);break;case Ue:case ae:xw(s);break}}var ZR=null;ZR=new Set;var Rm=!1,fn=!1,xB=typeof WeakSet=="function"?WeakSet:Set,Ce=null,Il=null,jl=null;function TB(a){uv(null,function(){throw a}),lv()}var CB=function(a,s){if(s.props=a.memoizedProps,s.state=a.memoizedState,a.mode&Ft)try{ji(),s.componentWillUnmount()}finally{Ii(a)}else s.componentWillUnmount()};function YR(a,s){try{to(Ur,a)}catch(l){Zt(a,s,l)}}function uw(a,s,l){try{CB(a,l)}catch(d){Zt(a,s,d)}}function RB(a,s,l){try{l.componentDidMount()}catch(d){Zt(a,s,d)}}function XR(a,s){try{eO(a)}catch(l){Zt(a,s,l)}}function Dl(a,s){var l=a.ref;if(l!==null)if(typeof l=="function"){var d;try{if(Rt&&ut&&a.mode&Ft)try{ji(),d=l(null)}finally{Ii(a)}else d=l(null)}catch(h){Zt(a,s,h)}typeof d=="function"&&u("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",it(a))}else l.current=null}function Om(a,s,l){try{l()}catch(d){Zt(a,s,d)}}var QR=!1;function OB(a,s){FU(a.containerInfo),Ce=s,AB();var l=QR;return QR=!1,l}function AB(){for(;Ce!==null;){var a=Ce,s=a.child;(a.subtreeFlags&mv)!==Je&&s!==null?(s.return=a,Ce=s):kB()}}function kB(){for(;Ce!==null;){var a=Ce;ur(a);try{NB(a)}catch(l){Zt(a,a.return,l)}Qr();var s=a.sibling;if(s!==null){s.return=a.return,Ce=s;return}Ce=a.return}}function NB(a){var s=a.alternate,l=a.flags;if((l&tl)!==Je){switch(ur(a),a.tag){case f:case O:case G:break;case p:{if(s!==null){var d=s.memoizedProps,h=s.memoizedState,g=a.stateNode;a.type===a.elementType&&!mu&&(g.props!==a.memoizedProps&&u("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",it(a)||"instance"),g.state!==a.memoizedState&&u("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",it(a)||"instance"));var v=g.getSnapshotBeforeUpdate(a.elementType===a.type?d:ri(a.type,d),h);{var w=ZR;v===void 0&&!w.has(a.type)&&(w.add(a.type),u("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",it(a)))}g.__reactInternalSnapshotBeforeUpdate=v}break}case y:{{var E=a.stateNode;dM(E.containerInfo)}break}case _:case S:case b:case de:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Qr()}}function ai(a,s,l){var d=s.updateQueue,h=d!==null?d.lastEffect:null;if(h!==null){var g=h.next,v=g;do{if((v.tag&a)===a){var w=v.destroy;v.destroy=void 0,w!==void 0&&((a&cn)!==Xn?Gj(s):(a&Ur)!==Xn&&zx(s),(a&Ni)!==Xn&&Ef(!0),Om(s,l,w),(a&Ni)!==Xn&&Ef(!1),(a&cn)!==Xn?Wj():(a&Ur)!==Xn&&Vx())}v=v.next}while(v!==g)}}function to(a,s){var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next,g=h;do{if((g.tag&a)===a){(a&cn)!==Xn?Hj(s):(a&Ur)!==Xn&&Jj(s);var v=g.create;(a&Ni)!==Xn&&Ef(!0),g.destroy=v(),(a&Ni)!==Xn&&Ef(!1),(a&cn)!==Xn?qj():(a&Ur)!==Xn&&Kj();{var w=g.destroy;if(w!==void 0&&typeof w!="function"){var E=void 0;(g.tag&Ur)!==Je?E="useLayoutEffect":(g.tag&Ni)!==Je?E="useInsertionEffect":E="useEffect";var k=void 0;w===null?k=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof w.then=="function"?k=`

It looks like you wrote `+E+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+E+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:k=" You returned: "+w,u("%s must not return anything besides a function, which is used for clean-up.%s",E,k)}}}g=g.next}while(g!==h)}}function PB(a,s){if((s.flags&Nt)!==Je)switch(s.tag){case P:{var l=s.stateNode.passiveEffectDuration,d=s.memoizedProps,h=d.id,g=d.onPostCommit,v=mR(),w=s.alternate===null?"mount":"update";pR()&&(w="nested-update"),typeof g=="function"&&g(h,w,l,v);var E=s.return;e:for(;E!==null;){switch(E.tag){case y:var k=E.stateNode;k.passiveEffectDuration+=l;break e;case P:var N=E.stateNode;N.passiveEffectDuration+=l;break e}E=E.return}break}}}function $B(a,s,l,d){if((l.flags&ad)!==Je)switch(l.tag){case f:case O:case G:{if(!fn)if(l.mode&Ft)try{ji(),to(Ur|Lr,l)}finally{Ii(l)}else to(Ur|Lr,l);break}case p:{var h=l.stateNode;if(l.flags&Nt&&!fn)if(s===null)if(l.type===l.elementType&&!mu&&(h.props!==l.memoizedProps&&u("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",it(l)||"instance"),h.state!==l.memoizedState&&u("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",it(l)||"instance")),l.mode&Ft)try{ji(),h.componentDidMount()}finally{Ii(l)}else h.componentDidMount();else{var g=l.elementType===l.type?s.memoizedProps:ri(l.type,s.memoizedProps),v=s.memoizedState;if(l.type===l.elementType&&!mu&&(h.props!==l.memoizedProps&&u("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",it(l)||"instance"),h.state!==l.memoizedState&&u("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",it(l)||"instance")),l.mode&Ft)try{ji(),h.componentDidUpdate(g,v,h.__reactInternalSnapshotBeforeUpdate)}finally{Ii(l)}else h.componentDidUpdate(g,v,h.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&(l.type===l.elementType&&!mu&&(h.props!==l.memoizedProps&&u("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",it(l)||"instance"),h.state!==l.memoizedState&&u("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",it(l)||"instance")),MC(l,w,h));break}case y:{var E=l.updateQueue;if(E!==null){var k=null;if(l.child!==null)switch(l.child.tag){case _:k=l.child.stateNode;break;case p:k=l.child.stateNode;break}MC(l,E,k)}break}case _:{var N=l.stateNode;if(s===null&&l.flags&Nt){var L=l.type,D=l.memoizedProps;YU(N,L,D)}break}case S:break;case b:break;case P:{{var z=l.memoizedProps,H=z.onCommit,J=z.onRender,ge=l.stateNode.effectDuration,ze=mR(),je=s===null?"mount":"update";pR()&&(je="nested-update"),typeof J=="function"&&J(l.memoizedProps.id,je,l.actualDuration,l.treeBaseDuration,l.actualStartTime,ze);{typeof H=="function"&&H(l.memoizedProps.id,je,ge,ze),kz(l);var xt=l.return;e:for(;xt!==null;){switch(xt.tag){case y:var vt=xt.stateNode;vt.effectDuration+=ge;break e;case P:var M=xt.stateNode;M.effectDuration+=ge;break e}xt=xt.return}}}break}case j:{BB(a,l);break}case ke:case de:case st:case Ue:case ae:case ye:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}fn||l.flags&Jo&&eO(l)}function IB(a){switch(a.tag){case f:case O:case G:{if(a.mode&Ft)try{ji(),YR(a,a.return)}finally{Ii(a)}else YR(a,a.return);break}case p:{var s=a.stateNode;typeof s.componentDidMount=="function"&&RB(a,a.return,s),XR(a,a.return);break}case _:{XR(a,a.return);break}}}function jB(a,s){for(var l=null,d=a;;){if(d.tag===_){if(l===null){l=d;try{var h=d.stateNode;s?oM(h):lM(d.stateNode,d.memoizedProps)}catch(v){Zt(a,a.return,v)}}}else if(d.tag===S){if(l===null)try{var g=d.stateNode;s?uM(g):cM(g,d.memoizedProps)}catch(v){Zt(a,a.return,v)}}else if(!((d.tag===Ue||d.tag===ae)&&d.memoizedState!==null&&d!==a)){if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===a)return;for(;d.sibling===null;){if(d.return===null||d.return===a)return;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}}function eO(a){var s=a.ref;if(s!==null){var l=a.stateNode,d;switch(a.tag){case _:d=l;break;default:d=l}if(typeof s=="function"){var h;if(a.mode&Ft)try{ji(),h=s(d)}finally{Ii(a)}else h=s(d);typeof h=="function"&&u("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",it(a))}else s.hasOwnProperty("current")||u("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",it(a)),s.current=d}}function DB(a){var s=a.alternate;s!==null&&(s.return=null),a.return=null}function tO(a){var s=a.alternate;s!==null&&(a.alternate=null,tO(s));{if(a.child=null,a.deletions=null,a.sibling=null,a.tag===_){var l=a.stateNode;l!==null&&zM(l)}a.stateNode=null,a._debugOwner=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}}function LB(a){for(var s=a.return;s!==null;){if(rO(s))return s;s=s.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function rO(a){return a.tag===_||a.tag===y||a.tag===b}function nO(a){var s=a;e:for(;;){for(;s.sibling===null;){if(s.return===null||rO(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==_&&s.tag!==S&&s.tag!==Ae;){if(s.flags&kr||s.child===null||s.tag===b)continue e;s.child.return=s,s=s.child}if(!(s.flags&kr))return s.stateNode}}function UB(a){var s=LB(a);switch(s.tag){case _:{var l=s.stateNode;s.flags&nd&&(iC(l),s.flags&=~nd);var d=nO(a);cw(a,d,l);break}case y:case b:{var h=s.stateNode.containerInfo,g=nO(a);lw(a,g,h);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function lw(a,s,l){var d=a.tag,h=d===_||d===S;if(h){var g=a.stateNode;s?nM(l,g,s):tM(l,g)}else if(d!==b){var v=a.child;if(v!==null){lw(v,s,l);for(var w=v.sibling;w!==null;)lw(w,s,l),w=w.sibling}}}function cw(a,s,l){var d=a.tag,h=d===_||d===S;if(h){var g=a.stateNode;s?rM(l,g,s):eM(l,g)}else if(d!==b){var v=a.child;if(v!==null){cw(v,s,l);for(var w=v.sibling;w!==null;)cw(w,s,l),w=w.sibling}}}var hn=null,ii=!1;function MB(a,s,l){{var d=s;e:for(;d!==null;){switch(d.tag){case _:{hn=d.stateNode,ii=!1;break e}case y:{hn=d.stateNode.containerInfo,ii=!0;break e}case b:{hn=d.stateNode.containerInfo,ii=!0;break e}}d=d.return}if(hn===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");aO(a,s,l),hn=null,ii=!1}DB(l)}function ro(a,s,l){for(var d=l.child;d!==null;)aO(a,s,d),d=d.sibling}function aO(a,s,l){switch(Fj(l),l.tag){case _:fn||Dl(l,s);case S:{{var d=hn,h=ii;hn=null,ro(a,s,l),hn=d,ii=h,hn!==null&&(ii?iM(hn,l.stateNode):aM(hn,l.stateNode))}return}case Ae:{hn!==null&&(ii?sM(hn,l.stateNode):wb(hn,l.stateNode));return}case b:{{var g=hn,v=ii;hn=l.stateNode.containerInfo,ii=!0,ro(a,s,l),hn=g,ii=v}return}case f:case O:case q:case G:{if(!fn){var w=l.updateQueue;if(w!==null){var E=w.lastEffect;if(E!==null){var k=E.next,N=k;do{var L=N,D=L.destroy,z=L.tag;D!==void 0&&((z&Ni)!==Xn?Om(l,s,D):(z&Ur)!==Xn&&(zx(l),l.mode&Ft?(ji(),Om(l,s,D),Ii(l)):Om(l,s,D),Vx())),N=N.next}while(N!==k)}}}ro(a,s,l);return}case p:{if(!fn){Dl(l,s);var H=l.stateNode;typeof H.componentWillUnmount=="function"&&uw(l,s,H)}ro(a,s,l);return}case st:{ro(a,s,l);return}case Ue:{if(l.mode&St){var J=fn;fn=J||l.memoizedState!==null,ro(a,s,l),fn=J}else ro(a,s,l);break}default:{ro(a,s,l);return}}}function FB(a){a.memoizedState}function BB(a,s){var l=s.memoizedState;if(l===null){var d=s.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&TM(g)}}}}function iO(a){var s=a.updateQueue;if(s!==null){a.updateQueue=null;var l=a.stateNode;l===null&&(l=a.stateNode=new xB),s.forEach(function(d){var h=Lz.bind(null,a,d);if(!l.has(d)){if(l.add(d),Ka)if(Il!==null&&jl!==null)Sf(jl,Il);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");d.then(h,h)}})}}function zB(a,s,l){Il=l,jl=a,ur(s),sO(s,a),ur(s),Il=null,jl=null}function si(a,s,l){var d=s.deletions;if(d!==null)for(var h=0;h<d.length;h++){var g=d[h];try{MB(a,s,g)}catch(E){Zt(g,s,E)}}var v=Bh();if(s.subtreeFlags&gv)for(var w=s.child;w!==null;)ur(w),sO(w,a),w=w.sibling;ur(v)}function sO(a,s,l){var d=a.alternate,h=a.flags;switch(a.tag){case f:case O:case q:case G:{if(si(s,a),Di(a),h&Nt){try{ai(Ni|Lr,a,a.return),to(Ni|Lr,a)}catch(Ke){Zt(a,a.return,Ke)}if(a.mode&Ft){try{ji(),ai(Ur|Lr,a,a.return)}catch(Ke){Zt(a,a.return,Ke)}Ii(a)}else try{ai(Ur|Lr,a,a.return)}catch(Ke){Zt(a,a.return,Ke)}}return}case p:{si(s,a),Di(a),h&Jo&&d!==null&&Dl(d,d.return);return}case _:{si(s,a),Di(a),h&Jo&&d!==null&&Dl(d,d.return);{if(a.flags&nd){var g=a.stateNode;try{iC(g)}catch(Ke){Zt(a,a.return,Ke)}}if(h&Nt){var v=a.stateNode;if(v!=null){var w=a.memoizedProps,E=d!==null?d.memoizedProps:w,k=a.type,N=a.updateQueue;if(a.updateQueue=null,N!==null)try{XU(v,N,k,E,w,a)}catch(Ke){Zt(a,a.return,Ke)}}}}return}case S:{if(si(s,a),Di(a),h&Nt){if(a.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var L=a.stateNode,D=a.memoizedProps,z=d!==null?d.memoizedProps:D;try{QU(L,z,D)}catch(Ke){Zt(a,a.return,Ke)}}return}case y:{if(si(s,a),Di(a),h&Nt&&d!==null){var H=d.memoizedState;if(H.isDehydrated)try{xM(s.containerInfo)}catch(Ke){Zt(a,a.return,Ke)}}return}case b:{si(s,a),Di(a);return}case j:{si(s,a),Di(a);var J=a.child;if(J.flags&Ko){var ge=J.stateNode,ze=J.memoizedState,je=ze!==null;if(ge.isHidden=je,je){var xt=J.alternate!==null&&J.alternate.memoizedState!==null;xt||Sz()}}if(h&Nt){try{FB(a)}catch(Ke){Zt(a,a.return,Ke)}iO(a)}return}case Ue:{var vt=d!==null&&d.memoizedState!==null;if(a.mode&St){var M=fn;fn=M||vt,si(s,a),fn=M}else si(s,a);if(Di(a),h&Ko){var K=a.stateNode,F=a.memoizedState,ne=F!==null,xe=a;if(K.isHidden=ne,ne&&!vt&&(xe.mode&St)!==qe){Ce=xe;for(var ve=xe.child;ve!==null;)Ce=ve,HB(ve),ve=ve.sibling}jB(xe,ne)}return}case ke:{si(s,a),Di(a),h&Nt&&iO(a);return}case st:return;default:{si(s,a),Di(a);return}}}function Di(a){var s=a.flags;if(s&kr){try{UB(a)}catch(l){Zt(a,a.return,l)}a.flags&=~kr}s&us&&(a.flags&=~us)}function VB(a,s,l){Il=l,jl=s,Ce=a,oO(a,s,l),Il=null,jl=null}function oO(a,s,l){for(var d=(a.mode&St)!==qe;Ce!==null;){var h=Ce,g=h.child;if(h.tag===Ue&&d){var v=h.memoizedState!==null,w=v||Rm;if(w){dw(a,s,l);continue}else{var E=h.alternate,k=E!==null&&E.memoizedState!==null,N=k||fn,L=Rm,D=fn;Rm=w,fn=N,fn&&!D&&(Ce=h,qB(h));for(var z=g;z!==null;)Ce=z,oO(z,s,l),z=z.sibling;Ce=h,Rm=L,fn=D,dw(a,s,l);continue}}(h.subtreeFlags&ad)!==Je&&g!==null?(g.return=h,Ce=g):dw(a,s,l)}}function dw(a,s,l){for(;Ce!==null;){var d=Ce;if((d.flags&ad)!==Je){var h=d.alternate;ur(d);try{$B(s,h,d,l)}catch(v){Zt(d,d.return,v)}Qr()}if(d===a){Ce=null;return}var g=d.sibling;if(g!==null){g.return=d.return,Ce=g;return}Ce=d.return}}function HB(a){for(;Ce!==null;){var s=Ce,l=s.child;switch(s.tag){case f:case O:case q:case G:{if(s.mode&Ft)try{ji(),ai(Ur,s,s.return)}finally{Ii(s)}else ai(Ur,s,s.return);break}case p:{Dl(s,s.return);var d=s.stateNode;typeof d.componentWillUnmount=="function"&&uw(s,s.return,d);break}case _:{Dl(s,s.return);break}case Ue:{var h=s.memoizedState!==null;if(h){uO(a);continue}break}}l!==null?(l.return=s,Ce=l):uO(a)}}function uO(a){for(;Ce!==null;){var s=Ce;if(s===a){Ce=null;return}var l=s.sibling;if(l!==null){l.return=s.return,Ce=l;return}Ce=s.return}}function qB(a){for(;Ce!==null;){var s=Ce,l=s.child;if(s.tag===Ue){var d=s.memoizedState!==null;if(d){lO(a);continue}}l!==null?(l.return=s,Ce=l):lO(a)}}function lO(a){for(;Ce!==null;){var s=Ce;ur(s);try{IB(s)}catch(d){Zt(s,s.return,d)}if(Qr(),s===a){Ce=null;return}var l=s.sibling;if(l!==null){l.return=s.return,Ce=l;return}Ce=s.return}}function GB(a,s,l,d){Ce=s,WB(s,a,l,d)}function WB(a,s,l,d){for(;Ce!==null;){var h=Ce,g=h.child;(h.subtreeFlags&rl)!==Je&&g!==null?(g.return=h,Ce=g):JB(a,s,l,d)}}function JB(a,s,l,d){for(;Ce!==null;){var h=Ce;if((h.flags&Ls)!==Je){ur(h);try{KB(s,h,l,d)}catch(v){Zt(h,h.return,v)}Qr()}if(h===a){Ce=null;return}var g=h.sibling;if(g!==null){g.return=h.return,Ce=g;return}Ce=h.return}}function KB(a,s,l,d){switch(s.tag){case f:case O:case G:{if(s.mode&Ft){k_();try{to(cn|Lr,s)}finally{A_(s)}}else to(cn|Lr,s);break}}}function ZB(a){Ce=a,YB()}function YB(){for(;Ce!==null;){var a=Ce,s=a.child;if((Ce.flags&Wo)!==Je){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var h=l[d];Ce=h,ez(h,a)}{var g=a.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}}Ce=a}}(a.subtreeFlags&rl)!==Je&&s!==null?(s.return=a,Ce=s):XB()}}function XB(){for(;Ce!==null;){var a=Ce;(a.flags&Ls)!==Je&&(ur(a),QB(a),Qr());var s=a.sibling;if(s!==null){s.return=a.return,Ce=s;return}Ce=a.return}}function QB(a){switch(a.tag){case f:case O:case G:{a.mode&Ft?(k_(),ai(cn|Lr,a,a.return),A_(a)):ai(cn|Lr,a,a.return);break}}}function ez(a,s){for(;Ce!==null;){var l=Ce;ur(l),rz(l,s),Qr();var d=l.child;d!==null?(d.return=l,Ce=d):tz(a)}}function tz(a){for(;Ce!==null;){var s=Ce,l=s.sibling,d=s.return;if(tO(s),s===a){Ce=null;return}if(l!==null){l.return=d,Ce=l;return}Ce=d}}function rz(a,s){switch(a.tag){case f:case O:case G:{a.mode&Ft?(k_(),ai(cn,a,s),A_(a)):ai(cn,a,s);break}}}function nz(a){switch(a.tag){case f:case O:case G:{try{to(Ur|Lr,a)}catch(l){Zt(a,a.return,l)}break}case p:{var s=a.stateNode;try{s.componentDidMount()}catch(l){Zt(a,a.return,l)}break}}}function az(a){switch(a.tag){case f:case O:case G:{try{to(cn|Lr,a)}catch(s){Zt(a,a.return,s)}break}}}function iz(a){switch(a.tag){case f:case O:case G:{try{ai(Ur|Lr,a,a.return)}catch(l){Zt(a,a.return,l)}break}case p:{var s=a.stateNode;typeof s.componentWillUnmount=="function"&&uw(a,a.return,s);break}}}function sz(a){switch(a.tag){case f:case O:case G:try{ai(cn|Lr,a,a.return)}catch(s){Zt(a,a.return,s)}}}if(typeof Symbol=="function"&&Symbol.for){var df=Symbol.for;df("selector.component"),df("selector.has_pseudo_class"),df("selector.role"),df("selector.test_id"),df("selector.text")}var oz=[];function uz(){oz.forEach(function(a){return a()})}var lz=t.ReactCurrentActQueue;function cz(a){{var s=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,l=typeof jest<"u";return l&&s!==!1}}function cO(){{var a=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!a&&lz.current!==null&&u("The current testing environment is not configured to support act(...)"),a}}var dz=Math.ceil,fw=t.ReactCurrentDispatcher,hw=t.ReactCurrentOwner,pn=t.ReactCurrentBatchConfig,oi=t.ReactCurrentActQueue,Br=0,dO=1,mn=2,ja=4,_s=0,ff=1,gu=2,Am=3,hf=4,fO=5,pw=6,Et=Br,Ln=null,mr=null,zr=ee,Li=ee,mw=Gs(ee),Vr=_s,pf=null,km=ee,mf=ee,Nm=ee,gf=null,Qn=null,gw=0,hO=500,pO=1/0,fz=500,ws=null;function yf(){pO=en()+fz}function mO(){return pO}var Pm=!1,yw=null,Ll=null,yu=!1,no=null,vf=ee,vw=[],bw=null,hz=50,bf=0,_w=null,ww=!1,$m=!1,pz=50,Ul=0,Im=null,_f=Qt,jm=ee,gO=!1;function Dm(){return Ln}function Un(){return(Et&(mn|ja))!==Br?en():(_f!==Qt||(_f=en()),_f)}function ao(a){var s=a.mode;if((s&St)===qe)return Qe;if((Et&mn)!==Br&&zr!==ee)return dd(zr);var l=lF()!==uF;if(l){if(pn.transition!==null){var d=pn.transition;d._updatedFibers||(d._updatedFibers=new Set),d._updatedFibers.add(a)}return jm===rn&&(jm=Yx()),jm}var h=Za();if(h!==rn)return h;var g=WU();return g}function mz(a){var s=a.mode;return(s&St)===qe?Qe:yD()}function Hr(a,s,l,d){Mz(),gO&&u("useInsertionEffect must not schedule updates."),ww&&($m=!0),fd(a,l,d),(Et&mn)!==ee&&a===Ln?zz(s):(Ka&&eT(a,s,l),Vz(s),a===Ln&&((Et&mn)===Br&&(mf=dt(mf,l)),Vr===hf&&io(a,zr)),ea(a,d),l===Qe&&Et===Br&&(s.mode&St)===qe&&!oi.isBatchingLegacy&&(yf(),gC()))}function gz(a,s,l){var d=a.current;d.lanes=s,fd(a,s,l),ea(a,l)}function yz(a){return(Et&mn)!==Br}function ea(a,s){var l=a.callbackNode;dD(a,s);var d=np(a,a===Ln?zr:ee);if(d===ee){l!==null&&PO(l),a.callbackNode=null,a.callbackPriority=rn;return}var h=tu(d),g=a.callbackPriority;if(g===h&&!(oi.current!==null&&l!==Ow)){l==null&&g!==Qe&&u("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}l!=null&&PO(l);var v;if(h===Qe)a.tag===Ws?(oi.isBatchingLegacy!==null&&(oi.didScheduleLegacyUpdate=!0),qM(bO.bind(null,a))):mC(bO.bind(null,a)),oi.current!==null?oi.current.push(Js):KU(function(){(Et&(mn|ja))===Br&&Js()}),v=null;else{var w;switch(nT(d)){case fa:w=Qh;break;case ds:w=yv;break;case fs:w=Xo;break;case sp:w=vv;break;default:w=Xo;break}v=Aw(w,yO.bind(null,a))}a.callbackPriority=h,a.callbackNode=v}function yO(a,s){if(jF(),_f=Qt,jm=ee,(Et&(mn|ja))!==Br)throw new Error("Should not already be working.");var l=a.callbackNode,d=Es();if(d&&a.callbackNode!==l)return null;var h=np(a,a===Ln?zr:ee);if(h===ee)return null;var g=!ap(a,h)&&!gD(a,h)&&!s,v=g?Rz(a,h):Um(a,h);if(v!==_s){if(v===gu){var w=Fv(a);w!==ee&&(h=w,v=Sw(a,w))}if(v===ff){var E=pf;throw vu(a,ee),io(a,h),ea(a,en()),E}if(v===pw)io(a,h);else{var k=!ap(a,h),N=a.current.alternate;if(k&&!bz(N)){if(v=Um(a,h),v===gu){var L=Fv(a);L!==ee&&(h=L,v=Sw(a,L))}if(v===ff){var D=pf;throw vu(a,ee),io(a,h),ea(a,en()),D}}a.finishedWork=N,a.finishedLanes=h,vz(a,v,h)}}return ea(a,en()),a.callbackNode===l?yO.bind(null,a):null}function Sw(a,s){var l=gf;if(op(a)){var d=vu(a,s);d.flags|=os,UM(a.containerInfo)}var h=Um(a,s);if(h!==gu){var g=Qn;Qn=l,g!==null&&vO(g)}return h}function vO(a){Qn===null?Qn=a:Qn.push.apply(Qn,a)}function vz(a,s,l){switch(s){case _s:case ff:throw new Error("Root did not complete. This is a bug in React.");case gu:{bu(a,Qn,ws);break}case Am:{if(io(a,l),Kx(l)&&!$O()){var d=gw+hO-en();if(d>10){var h=np(a,ee);if(h!==ee)break;var g=a.suspendedLanes;if(!ul(g,l)){Un(),Qx(a,g);break}a.timeoutHandle=bb(bu.bind(null,a,Qn,ws),d);break}}bu(a,Qn,ws);break}case hf:{if(io(a,l),mD(l))break;if(!$O()){var v=lD(a,l),w=v,E=en()-w,k=Uz(E)-E;if(k>10){a.timeoutHandle=bb(bu.bind(null,a,Qn,ws),k);break}}bu(a,Qn,ws);break}case fO:{bu(a,Qn,ws);break}default:throw new Error("Unknown root exit status.")}}function bz(a){for(var s=a;;){if(s.flags&cv){var l=s.updateQueue;if(l!==null){var d=l.stores;if(d!==null)for(var h=0;h<d.length;h++){var g=d[h],v=g.getSnapshot,w=g.value;try{if(!pa(v(),w))return!1}catch{return!1}}}}var E=s.child;if(s.subtreeFlags&cv&&E!==null){E.return=s,s=E;continue}if(s===a)return!0;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}return!0}function io(a,s){s=ip(s,Nm),s=ip(s,mf),bD(a,s)}function bO(a){if(DF(),(Et&(mn|ja))!==Br)throw new Error("Should not already be working.");Es();var s=np(a,ee);if(!da(s,Qe))return ea(a,en()),null;var l=Um(a,s);if(a.tag!==Ws&&l===gu){var d=Fv(a);d!==ee&&(s=d,l=Sw(a,d))}if(l===ff){var h=pf;throw vu(a,ee),io(a,s),ea(a,en()),h}if(l===pw)throw new Error("Root did not complete. This is a bug in React.");var g=a.current.alternate;return a.finishedWork=g,a.finishedLanes=s,bu(a,Qn,ws),ea(a,en()),null}function _z(a,s){s!==ee&&(Hv(a,dt(s,Qe)),ea(a,en()),(Et&(mn|ja))===Br&&(yf(),Js()))}function Ew(a,s){var l=Et;Et|=dO;try{return a(s)}finally{Et=l,Et===Br&&!oi.isBatchingLegacy&&(yf(),gC())}}function wz(a,s,l,d,h){var g=Za(),v=pn.transition;try{return pn.transition=null,nn(fa),a(s,l,d,h)}finally{nn(g),pn.transition=v,Et===Br&&yf()}}function Ss(a){no!==null&&no.tag===Ws&&(Et&(mn|ja))===Br&&Es();var s=Et;Et|=dO;var l=pn.transition,d=Za();try{return pn.transition=null,nn(fa),a?a():void 0}finally{nn(d),pn.transition=l,Et=s,(Et&(mn|ja))===Br&&Js()}}function _O(){return(Et&(mn|ja))!==Br}function Lm(a,s){Cn(mw,Li,a),Li=dt(Li,s)}function xw(a){Li=mw.current,Tn(mw,a)}function vu(a,s){a.finishedWork=null,a.finishedLanes=ee;var l=a.timeoutHandle;if(l!==_b&&(a.timeoutHandle=_b,JU(l)),mr!==null)for(var d=mr.return;d!==null;){var h=d.alternate;KR(h,d),d=d.return}Ln=a;var g=_u(a.current,null);return mr=g,zr=Li=s,Vr=_s,pf=null,km=ee,mf=ee,Nm=ee,gf=null,Qn=null,gF(),Qa.discardPendingWarnings(),g}function wO(a,s){do{var l=mr;try{if(Wp(),qC(),Qr(),hw.current=null,l===null||l.return===null){Vr=ff,pf=s,mr=null;return}if(Rt&&l.mode&Ft&&Sm(l,!0),ht)if(al(),s!==null&&typeof s=="object"&&typeof s.then=="function"){var d=s;Yj(l,d,zr)}else Zj(l,s,zr);qF(a,l.return,l,s,zr),TO(l)}catch(h){s=h,mr===l&&l!==null?(l=l.return,mr=l):l=mr;continue}return}while(!0)}function SO(){var a=fw.current;return fw.current=ym,a===null?ym:a}function EO(a){fw.current=a}function Sz(){gw=en()}function wf(a){km=dt(a,km)}function Ez(){Vr===_s&&(Vr=Am)}function Tw(){(Vr===_s||Vr===Am||Vr===gu)&&(Vr=hf),Ln!==null&&(Bv(km)||Bv(mf))&&io(Ln,zr)}function xz(a){Vr!==hf&&(Vr=gu),gf===null?gf=[a]:gf.push(a)}function Tz(){return Vr===_s}function Um(a,s){var l=Et;Et|=mn;var d=SO();if(Ln!==a||zr!==s){if(Ka){var h=a.memoizedUpdaters;h.size>0&&(Sf(a,zr),h.clear()),tT(a,s)}ws=rT(),vu(a,s)}Hx(s);do try{Cz();break}catch(g){wO(a,g)}while(!0);if(Wp(),Et=l,EO(d),mr!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return qx(),Ln=null,zr=ee,Vr}function Cz(){for(;mr!==null;)xO(mr)}function Rz(a,s){var l=Et;Et|=mn;var d=SO();if(Ln!==a||zr!==s){if(Ka){var h=a.memoizedUpdaters;h.size>0&&(Sf(a,zr),h.clear()),tT(a,s)}ws=rT(),yf(),vu(a,s)}Hx(s);do try{Oz();break}catch(g){wO(a,g)}while(!0);return Wp(),EO(d),Et=l,mr!==null?(rD(),_s):(qx(),Ln=null,zr=ee,Vr)}function Oz(){for(;mr!==null&&!kj();)xO(mr)}function xO(a){var s=a.alternate;ur(a);var l;(a.mode&Ft)!==qe?(O_(a),l=Cw(s,a,Li),Sm(a,!0)):l=Cw(s,a,Li),Qr(),a.memoizedProps=a.pendingProps,l===null?TO(a):mr=l,hw.current=null}function TO(a){var s=a;do{var l=s.alternate,d=s.return;if((s.flags&Xh)===Je){ur(s);var h=void 0;if((s.mode&Ft)===qe?h=JR(l,s,Li):(O_(s),h=JR(l,s,Li),Sm(s,!1)),Qr(),h!==null){mr=h;return}}else{var g=EB(l,s);if(g!==null){g.flags&=xj,mr=g;return}if((s.mode&Ft)!==qe){Sm(s,!1);for(var v=s.actualDuration,w=s.child;w!==null;)v+=w.actualDuration,w=w.sibling;s.actualDuration=v}if(d!==null)d.flags|=Xh,d.subtreeFlags=Je,d.deletions=null;else{Vr=pw,mr=null;return}}var E=s.sibling;if(E!==null){mr=E;return}s=d,mr=s}while(s!==null);Vr===_s&&(Vr=fO)}function bu(a,s,l){var d=Za(),h=pn.transition;try{pn.transition=null,nn(fa),Az(a,s,l,d)}finally{pn.transition=h,nn(d)}return null}function Az(a,s,l,d){do Es();while(no!==null);if(Fz(),(Et&(mn|ja))!==Br)throw new Error("Should not already be working.");var h=a.finishedWork,g=a.finishedLanes;if(Vj(g),h===null)return Bx(),null;if(g===ee&&u("root.finishedLanes should not be empty during a commit. This is a bug in React."),a.finishedWork=null,a.finishedLanes=ee,h===a.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");a.callbackNode=null,a.callbackPriority=rn;var v=dt(h.lanes,h.childLanes);_D(a,v),a===Ln&&(Ln=null,mr=null,zr=ee),((h.subtreeFlags&rl)!==Je||(h.flags&rl)!==Je)&&(yu||(yu=!0,bw=l,Aw(Xo,function(){return Es(),null})));var w=(h.subtreeFlags&(mv|gv|ad|rl))!==Je,E=(h.flags&(mv|gv|ad|rl))!==Je;if(w||E){var k=pn.transition;pn.transition=null;var N=Za();nn(fa);var L=Et;Et|=ja,hw.current=null,OB(a,h),gR(),zB(a,h,g),BU(a.containerInfo),a.current=h,Xj(g),VB(h,a,g),Qj(),Nj(),Et=L,nn(N),pn.transition=k}else a.current=h,gR();var D=yu;if(yu?(yu=!1,no=a,vf=g):(Ul=0,Im=null),v=a.pendingLanes,v===ee&&(Ll=null),D||AO(a.current,!1),Uj(h.stateNode,d),Ka&&a.memoizedUpdaters.clear(),uz(),ea(a,en()),s!==null)for(var z=a.onRecoverableError,H=0;H<s.length;H++){var J=s[H],ge=J.stack,ze=J.digest;z(J.value,{componentStack:ge,digest:ze})}if(Pm){Pm=!1;var je=yw;throw yw=null,je}return da(vf,Qe)&&a.tag!==Ws&&Es(),v=a.pendingLanes,da(v,Qe)?(IF(),a===_w?bf++:(bf=0,_w=a)):bf=0,Js(),Bx(),null}function Es(){if(no!==null){var a=nT(vf),s=xD(fs,a),l=pn.transition,d=Za();try{return pn.transition=null,nn(s),Nz()}finally{nn(d),pn.transition=l}}return!1}function kz(a){vw.push(a),yu||(yu=!0,Aw(Xo,function(){return Es(),null}))}function Nz(){if(no===null)return!1;var a=bw;bw=null;var s=no,l=vf;if(no=null,vf=ee,(Et&(mn|ja))!==Br)throw new Error("Cannot flush passive effects while already rendering.");ww=!0,$m=!1,eD(l);var d=Et;Et|=ja,ZB(s.current),GB(s,s.current,l,a);{var h=vw;vw=[];for(var g=0;g<h.length;g++){var v=h[g];PB(s,v)}}tD(),AO(s.current,!0),Et=d,Js(),$m?s===Im?Ul++:(Ul=0,Im=s):Ul=0,ww=!1,$m=!1,Mj(s);{var w=s.current.stateNode;w.effectDuration=0,w.passiveEffectDuration=0}return!0}function CO(a){return Ll!==null&&Ll.has(a)}function Pz(a){Ll===null?Ll=new Set([a]):Ll.add(a)}function $z(a){Pm||(Pm=!0,yw=a)}var Iz=$z;function RO(a,s,l){var d=pu(l,s),h=xR(a,d,Qe),g=Zs(a,h,Qe),v=Un();g!==null&&(fd(g,Qe,v),ea(g,v))}function Zt(a,s,l){if(TB(l),Ef(!1),a.tag===y){RO(a,a,l);return}var d=null;for(d=s;d!==null;){if(d.tag===y){RO(d,a,l);return}else if(d.tag===p){var h=d.type,g=d.stateNode;if(typeof h.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&!CO(g)){var v=pu(l,a),w=G_(d,v,Qe),E=Zs(d,w,Qe),k=Un();E!==null&&(fd(E,Qe,k),ea(E,k));return}}d=d.return}u(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,l)}function jz(a,s,l){var d=a.pingCache;d!==null&&d.delete(s);var h=Un();Qx(a,l),Hz(a),Ln===a&&ul(zr,l)&&(Vr===hf||Vr===Am&&Kx(zr)&&en()-gw<hO?vu(a,ee):Nm=dt(Nm,l)),ea(a,h)}function OO(a,s){s===rn&&(s=mz(a));var l=Un(),d=Yn(a,s);d!==null&&(fd(d,s,l),ea(d,l))}function Dz(a){var s=a.memoizedState,l=rn;s!==null&&(l=s.retryLane),OO(a,l)}function Lz(a,s){var l=rn,d;switch(a.tag){case j:d=a.stateNode;var h=a.memoizedState;h!==null&&(l=h.retryLane);break;case ke:d=a.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}d!==null&&d.delete(s),OO(a,l)}function Uz(a){return a<120?120:a<480?480:a<1080?1080:a<1920?1920:a<3e3?3e3:a<4320?4320:dz(a/1960)*1960}function Mz(){if(bf>hz)throw bf=0,_w=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Ul>pz&&(Ul=0,Im=null,u("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function Fz(){Qa.flushLegacyContextWarning(),Qa.flushPendingUnsafeLifecycleWarnings()}function AO(a,s){ur(a),Mm(a,Us,iz),s&&Mm(a,pv,sz),Mm(a,Us,nz),s&&Mm(a,pv,az),Qr()}function Mm(a,s,l){for(var d=a,h=null;d!==null;){var g=d.subtreeFlags&s;d!==h&&d.child!==null&&g!==Je?d=d.child:((d.flags&s)!==Je&&l(d),d.sibling!==null?d=d.sibling:d=h=d.return)}}var Fm=null;function kO(a){{if((Et&mn)!==Br||!(a.mode&St))return;var s=a.tag;if(s!==m&&s!==y&&s!==p&&s!==f&&s!==O&&s!==q&&s!==G)return;var l=it(a)||"ReactComponent";if(Fm!==null){if(Fm.has(l))return;Fm.add(l)}else Fm=new Set([l]);var d=Pn;try{ur(a),u("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{d?ur(a):Qr()}}}var Cw;{var Bz=null;Cw=function(a,s,l){var d=UO(Bz,s);try{return VR(a,s,l)}catch(g){if(QM()||g!==null&&typeof g=="object"&&typeof g.then=="function")throw g;if(Wp(),qC(),KR(a,s),UO(s,d),s.mode&Ft&&O_(s),uv(null,VR,null,a,s,l),wj()){var h=lv();typeof h=="object"&&h!==null&&h._suppressLogging&&typeof g=="object"&&g!==null&&!g._suppressLogging&&(g._suppressLogging=!0)}throw g}}}var NO=!1,Rw;Rw=new Set;function zz(a){if(Vo&&!NF())switch(a.tag){case f:case O:case G:{var s=mr&&it(mr)||"Unknown",l=s;if(!Rw.has(l)){Rw.add(l);var d=it(a)||"Unknown";u("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",d,s,s)}break}case p:{NO||(u("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),NO=!0);break}}}function Sf(a,s){if(Ka){var l=a.memoizedUpdaters;l.forEach(function(d){eT(a,d,s)})}}var Ow={};function Aw(a,s){{var l=oi.current;return l!==null?(l.push(s),Ow):Fx(a,s)}}function PO(a){if(a!==Ow)return Aj(a)}function $O(){return oi.current!==null}function Vz(a){{if(a.mode&St){if(!cO())return}else if(!cz()||Et!==Br||a.tag!==f&&a.tag!==O&&a.tag!==G)return;if(oi.current===null){var s=Pn;try{ur(a),u(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,it(a))}finally{s?ur(a):Qr()}}}}function Hz(a){a.tag!==Ws&&cO()&&oi.current===null&&u(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function Ef(a){gO=a}var Da=null,Ml=null,qz=function(a){Da=a};function Fl(a){{if(Da===null)return a;var s=Da(a);return s===void 0?a:s.current}}function kw(a){return Fl(a)}function Nw(a){{if(Da===null)return a;var s=Da(a);if(s===void 0){if(a!=null&&typeof a.render=="function"){var l=Fl(a.render);if(a.render!==l){var d={$$typeof:Be,render:l};return a.displayName!==void 0&&(d.displayName=a.displayName),d}}return a}return s.current}}function IO(a,s){{if(Da===null)return!1;var l=a.elementType,d=s.type,h=!1,g=typeof d=="object"&&d!==null?d.$$typeof:null;switch(a.tag){case p:{typeof d=="function"&&(h=!0);break}case f:{(typeof d=="function"||g===He)&&(h=!0);break}case O:{(g===Be||g===He)&&(h=!0);break}case q:case G:{(g===ct||g===He)&&(h=!0);break}default:return!1}if(h){var v=Da(l);if(v!==void 0&&v===Da(d))return!0}return!1}}function jO(a){{if(Da===null||typeof WeakSet!="function")return;Ml===null&&(Ml=new WeakSet),Ml.add(a)}}var Gz=function(a,s){{if(Da===null)return;var l=s.staleFamilies,d=s.updatedFamilies;Es(),Ss(function(){Pw(a.current,d,l)})}},Wz=function(a,s){{if(a.context!==ma)return;Es(),Ss(function(){xf(s,a,null,null)})}};function Pw(a,s,l){{var d=a.alternate,h=a.child,g=a.sibling,v=a.tag,w=a.type,E=null;switch(v){case f:case G:case p:E=w;break;case O:E=w.render;break}if(Da===null)throw new Error("Expected resolveFamily to be set during hot reload.");var k=!1,N=!1;if(E!==null){var L=Da(E);L!==void 0&&(l.has(L)?N=!0:s.has(L)&&(v===p?N=!0:k=!0))}if(Ml!==null&&(Ml.has(a)||d!==null&&Ml.has(d))&&(N=!0),N&&(a._debugNeedsRemount=!0),N||k){var D=Yn(a,Qe);D!==null&&Hr(D,a,Qe,Qt)}h!==null&&!N&&Pw(h,s,l),g!==null&&Pw(g,s,l)}}var Jz=function(a,s){{var l=new Set,d=new Set(s.map(function(h){return h.current}));return $w(a.current,d,l),l}};function $w(a,s,l){{var d=a.child,h=a.sibling,g=a.tag,v=a.type,w=null;switch(g){case f:case G:case p:w=v;break;case O:w=v.render;break}var E=!1;w!==null&&s.has(w)&&(E=!0),E?Kz(a,l):d!==null&&$w(d,s,l),h!==null&&$w(h,s,l)}}function Kz(a,s){{var l=Zz(a,s);if(l)return;for(var d=a;;){switch(d.tag){case _:s.add(d.stateNode);return;case b:s.add(d.stateNode.containerInfo);return;case y:s.add(d.stateNode.containerInfo);return}if(d.return===null)throw new Error("Expected to reach root first.");d=d.return}}}function Zz(a,s){for(var l=a,d=!1;;){if(l.tag===_)d=!0,s.add(l.stateNode);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)return d;for(;l.sibling===null;){if(l.return===null||l.return===a)return d;l=l.return}l.sibling.return=l.return,l=l.sibling}return!1}var Iw;{Iw=!1;try{var DO=Object.preventExtensions({})}catch{Iw=!0}}function Yz(a,s,l,d){this.tag=a,this.key=l,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=s,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=d,this.flags=Je,this.subtreeFlags=Je,this.deletions=null,this.lanes=ee,this.childLanes=ee,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!Iw&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var ga=function(a,s,l,d){return new Yz(a,s,l,d)};function jw(a){var s=a.prototype;return!!(s&&s.isReactComponent)}function Xz(a){return typeof a=="function"&&!jw(a)&&a.defaultProps===void 0}function Qz(a){if(typeof a=="function")return jw(a)?p:f;if(a!=null){var s=a.$$typeof;if(s===Be)return O;if(s===ct)return q}return m}function _u(a,s){var l=a.alternate;l===null?(l=ga(a.tag,s,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l._debugSource=a._debugSource,l._debugOwner=a._debugOwner,l._debugHookTypes=a._debugHookTypes,l.alternate=a,a.alternate=l):(l.pendingProps=s,l.type=a.type,l.flags=Je,l.subtreeFlags=Je,l.deletions=null,l.actualDuration=0,l.actualStartTime=-1),l.flags=a.flags&ls,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue;var d=a.dependencies;switch(l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.selfBaseDuration=a.selfBaseDuration,l.treeBaseDuration=a.treeBaseDuration,l._debugNeedsRemount=a._debugNeedsRemount,l.tag){case m:case f:case G:l.type=Fl(a.type);break;case p:l.type=kw(a.type);break;case O:l.type=Nw(a.type);break}return l}function e4(a,s){a.flags&=ls|kr;var l=a.alternate;if(l===null)a.childLanes=ee,a.lanes=s,a.child=null,a.subtreeFlags=Je,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null,a.selfBaseDuration=0,a.treeBaseDuration=0;else{a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=Je,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type;var d=l.dependencies;a.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},a.selfBaseDuration=l.selfBaseDuration,a.treeBaseDuration=l.treeBaseDuration}return a}function t4(a,s,l){var d;return a===Lp?(d=St,s===!0&&(d|=_r,d|=Ri)):d=qe,Ka&&(d|=Ft),ga(y,null,null,d)}function Dw(a,s,l,d,h,g){var v=m,w=a;if(typeof a=="function")jw(a)?(v=p,w=kw(w)):w=Fl(w);else if(typeof a=="string")v=_;else e:switch(a){case Ei:return so(l.children,h,g,s);case Lo:v=T,h|=_r,(h&St)!==qe&&(h|=Ri);break;case I:return r4(l,h,g,s);case bt:return n4(l,h,g,s);case Xe:return a4(l,h,g,s);case nr:return LO(l,h,g,s);case En:case jr:case xi:case Ga:case rr:default:{if(typeof a=="object"&&a!==null)switch(a.$$typeof){case re:v=A;break e;case me:v=R;break e;case Be:v=O,w=Nw(w);break e;case ct:v=q;break e;case He:v=ie,w=null;break e}var E="";{(a===void 0||typeof a=="object"&&a!==null&&Object.keys(a).length===0)&&(E+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var k=d?it(d):null;k&&(E+=`

Check the render method of \``+k+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(a==null?a:typeof a)+"."+E))}}var N=ga(v,l,s,h);return N.elementType=a,N.type=w,N.lanes=g,N._debugOwner=d,N}function Lw(a,s,l){var d=null;d=a._owner;var h=a.type,g=a.key,v=a.props,w=Dw(h,g,v,d,s,l);return w._debugSource=a._source,w._debugOwner=a._owner,w}function so(a,s,l,d){var h=ga(C,a,d,s);return h.lanes=l,h}function r4(a,s,l,d){typeof a.id!="string"&&u('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof a.id);var h=ga(P,a,d,s|Ft);return h.elementType=I,h.lanes=l,h.stateNode={effectDuration:0,passiveEffectDuration:0},h}function n4(a,s,l,d){var h=ga(j,a,d,s);return h.elementType=bt,h.lanes=l,h}function a4(a,s,l,d){var h=ga(ke,a,d,s);return h.elementType=Xe,h.lanes=l,h}function LO(a,s,l,d){var h=ga(Ue,a,d,s);h.elementType=nr,h.lanes=l;var g={isHidden:!1};return h.stateNode=g,h}function Uw(a,s,l){var d=ga(S,a,null,s);return d.lanes=l,d}function i4(){var a=ga(_,null,null,qe);return a.elementType="DELETED",a}function s4(a){var s=ga(Ae,null,null,qe);return s.stateNode=a,s}function Mw(a,s,l){var d=a.children!==null?a.children:[],h=ga(b,d,a.key,s);return h.lanes=l,h.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},h}function UO(a,s){return a===null&&(a=ga(m,null,null,qe)),a.tag=s.tag,a.key=s.key,a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.return=s.return,a.child=s.child,a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.pendingProps=s.pendingProps,a.memoizedProps=s.memoizedProps,a.updateQueue=s.updateQueue,a.memoizedState=s.memoizedState,a.dependencies=s.dependencies,a.mode=s.mode,a.flags=s.flags,a.subtreeFlags=s.subtreeFlags,a.deletions=s.deletions,a.lanes=s.lanes,a.childLanes=s.childLanes,a.alternate=s.alternate,a.actualDuration=s.actualDuration,a.actualStartTime=s.actualStartTime,a.selfBaseDuration=s.selfBaseDuration,a.treeBaseDuration=s.treeBaseDuration,a._debugSource=s._debugSource,a._debugOwner=s._debugOwner,a._debugNeedsRemount=s._debugNeedsRemount,a._debugHookTypes=s._debugHookTypes,a}function o4(a,s,l,d,h){this.tag=s,this.containerInfo=a,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=_b,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=rn,this.eventTimes=Vv(ee),this.expirationTimes=Vv(Qt),this.pendingLanes=ee,this.suspendedLanes=ee,this.pingedLanes=ee,this.expiredLanes=ee,this.mutableReadLanes=ee,this.finishedLanes=ee,this.entangledLanes=ee,this.entanglements=Vv(ee),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var g=this.pendingUpdatersLaneMap=[],v=0;v<_v;v++)g.push(new Set)}switch(s){case Lp:this._debugRootType=l?"hydrateRoot()":"createRoot()";break;case Ws:this._debugRootType=l?"hydrate()":"render()";break}}function MO(a,s,l,d,h,g,v,w,E,k){var N=new o4(a,s,l,w,E),L=t4(s,g);N.current=L,L.stateNode=N;{var D={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null};L.memoizedState=D}return Xb(L),N}var Fw="18.3.1";function u4(a,s,l){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return Nn(d),{$$typeof:la,key:d==null?null:""+d,children:a,containerInfo:s,implementation:l}}var Bw,zw;Bw=!1,zw={};function FO(a){if(!a)return ma;var s=Qu(a),l=HM(s);if(s.tag===p){var d=s.type;if(ki(d))return hC(s,d,l)}return l}function l4(a,s){{var l=Qu(a);if(l===void 0){if(typeof a.render=="function")throw new Error("Unable to find node on an unmounted component.");var d=Object.keys(a).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+d)}var h=Lx(l);if(h===null)return null;if(h.mode&_r){var g=it(l)||"Component";if(!zw[g]){zw[g]=!0;var v=Pn;try{ur(h),l.mode&_r?u("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",s,s,g):u("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",s,s,g)}finally{v?ur(v):Qr()}}}return h.stateNode}}function BO(a,s,l,d,h,g,v,w){var E=!1,k=null;return MO(a,s,E,k,l,d,h,g,v)}function zO(a,s,l,d,h,g,v,w,E,k){var N=!0,L=MO(l,d,N,a,h,g,v,w,E);L.context=FO(null);var D=L.current,z=Un(),H=ao(D),J=vs(z,H);return J.callback=s??null,Zs(D,J,H),gz(L,H,z),L}function xf(a,s,l,d){Lj(s,a);var h=s.current,g=Un(),v=ao(h);nD(v);var w=FO(l);s.context===null?s.context=w:s.pendingContext=w,Vo&&Pn!==null&&!Bw&&(Bw=!0,u(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,it(Pn)||"Unknown"));var E=vs(g,v);E.payload={element:a},d=d===void 0?null:d,d!==null&&(typeof d!="function"&&u("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",d),E.callback=d);var k=Zs(h,E,v);return k!==null&&(Hr(k,h,v,g),Xp(k,h,v)),v}function Bm(a){var s=a.current;if(!s.child)return null;switch(s.child.tag){case _:return s.child.stateNode;default:return s.child.stateNode}}function c4(a){switch(a.tag){case y:{var s=a.stateNode;if(op(s)){var l=fD(s);_z(s,l)}break}case j:{Ss(function(){var h=Yn(a,Qe);if(h!==null){var g=Un();Hr(h,a,Qe,g)}});var d=Qe;Vw(a,d);break}}}function VO(a,s){var l=a.memoizedState;l!==null&&l.dehydrated!==null&&(l.retryLane=vD(l.retryLane,s))}function Vw(a,s){VO(a,s);var l=a.alternate;l&&VO(l,s)}function d4(a){if(a.tag===j){var s=ud,l=Yn(a,s);if(l!==null){var d=Un();Hr(l,a,s,d)}Vw(a,s)}}function f4(a){if(a.tag===j){var s=ao(a),l=Yn(a,s);if(l!==null){var d=Un();Hr(l,a,s,d)}Vw(a,s)}}function HO(a){var s=Oj(a);return s===null?null:s.stateNode}var qO=function(a){return null};function h4(a){return qO(a)}var GO=function(a){return!1};function p4(a){return GO(a)}var WO=null,JO=null,KO=null,ZO=null,YO=null,XO=null,QO=null,eA=null,tA=null;{var rA=function(a,s,l){var d=s[l],h=yt(a)?a.slice():mt({},a);return l+1===s.length?(yt(h)?h.splice(d,1):delete h[d],h):(h[d]=rA(a[d],s,l+1),h)},nA=function(a,s){return rA(a,s,0)},aA=function(a,s,l,d){var h=s[d],g=yt(a)?a.slice():mt({},a);if(d+1===s.length){var v=l[d];g[v]=g[h],yt(g)?g.splice(h,1):delete g[h]}else g[h]=aA(a[h],s,l,d+1);return g},iA=function(a,s,l){if(s.length!==l.length){o("copyWithRename() expects paths of the same length");return}else for(var d=0;d<l.length-1;d++)if(s[d]!==l[d]){o("copyWithRename() expects paths to be the same except for the deepest key");return}return aA(a,s,l,0)},sA=function(a,s,l,d){if(l>=s.length)return d;var h=s[l],g=yt(a)?a.slice():mt({},a);return g[h]=sA(a[h],s,l+1,d),g},oA=function(a,s,l){return sA(a,s,0,l)},Hw=function(a,s){for(var l=a.memoizedState;l!==null&&s>0;)l=l.next,s--;return l};WO=function(a,s,l,d){var h=Hw(a,s);if(h!==null){var g=oA(h.memoizedState,l,d);h.memoizedState=g,h.baseState=g,a.memoizedProps=mt({},a.memoizedProps);var v=Yn(a,Qe);v!==null&&Hr(v,a,Qe,Qt)}},JO=function(a,s,l){var d=Hw(a,s);if(d!==null){var h=nA(d.memoizedState,l);d.memoizedState=h,d.baseState=h,a.memoizedProps=mt({},a.memoizedProps);var g=Yn(a,Qe);g!==null&&Hr(g,a,Qe,Qt)}},KO=function(a,s,l,d){var h=Hw(a,s);if(h!==null){var g=iA(h.memoizedState,l,d);h.memoizedState=g,h.baseState=g,a.memoizedProps=mt({},a.memoizedProps);var v=Yn(a,Qe);v!==null&&Hr(v,a,Qe,Qt)}},ZO=function(a,s,l){a.pendingProps=oA(a.memoizedProps,s,l),a.alternate&&(a.alternate.pendingProps=a.pendingProps);var d=Yn(a,Qe);d!==null&&Hr(d,a,Qe,Qt)},YO=function(a,s){a.pendingProps=nA(a.memoizedProps,s),a.alternate&&(a.alternate.pendingProps=a.pendingProps);var l=Yn(a,Qe);l!==null&&Hr(l,a,Qe,Qt)},XO=function(a,s,l){a.pendingProps=iA(a.memoizedProps,s,l),a.alternate&&(a.alternate.pendingProps=a.pendingProps);var d=Yn(a,Qe);d!==null&&Hr(d,a,Qe,Qt)},QO=function(a){var s=Yn(a,Qe);s!==null&&Hr(s,a,Qe,Qt)},eA=function(a){qO=a},tA=function(a){GO=a}}function m4(a){var s=Lx(a);return s===null?null:s.stateNode}function g4(a){return null}function y4(){return Pn}function v4(a){var s=a.findFiberByHostInstance,l=t.ReactCurrentDispatcher;return Dj({bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:WO,overrideHookStateDeletePath:JO,overrideHookStateRenamePath:KO,overrideProps:ZO,overridePropsDeletePath:YO,overridePropsRenamePath:XO,setErrorHandler:eA,setSuspenseHandler:tA,scheduleUpdate:QO,currentDispatcherRef:l,findHostInstanceByFiber:m4,findFiberByHostInstance:s||g4,findHostInstancesForRefresh:Jz,scheduleRefresh:Gz,scheduleRoot:Wz,setRefreshHandler:qz,getCurrentFiber:y4,reconcilerVersion:Fw})}var uA=typeof reportError=="function"?reportError:function(a){console.error(a)};function qw(a){this._internalRoot=a}zm.prototype.render=qw.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?u("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):Vm(arguments[1])?u("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&u("You passed a second argument to root.render(...) but it only accepts one argument.");var l=s.containerInfo;if(l.nodeType!==Ar){var d=HO(s.current);d&&d.parentNode!==l&&u("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}xf(a,s,null,null)},zm.prototype.unmount=qw.prototype.unmount=function(){typeof arguments[0]=="function"&&u("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;_O()&&u("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Ss(function(){xf(null,a,null,null)}),uC(s)}};function b4(a,s){if(!Vm(a))throw new Error("createRoot(...): Target container is not a DOM element.");lA(a);var l=!1,d=!1,h="",g=uA;s!=null&&(s.hydrate?o("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof s=="object"&&s!==null&&s.$$typeof===Oa&&u(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError),s.transitionCallbacks!==void 0&&s.transitionCallbacks);var v=BO(a,Lp,null,l,d,h,g);kp(v.current,a);var w=a.nodeType===Ar?a.parentNode:a;return Ad(w),new qw(v)}function zm(a){this._internalRoot=a}function _4(a){a&&jD(a)}zm.prototype.unstable_scheduleHydration=_4;function w4(a,s,l){if(!Vm(a))throw new Error("hydrateRoot(...): Target container is not a DOM element.");lA(a),s===void 0&&u("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var d=l??null,h=l!=null&&l.hydratedSources||null,g=!1,v=!1,w="",E=uA;l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError));var k=zO(s,null,a,Lp,d,g,v,w,E);if(kp(k.current,a),Ad(a),h)for(var N=0;N<h.length;N++){var L=h[N];TF(k,L)}return new zm(k)}function Vm(a){return!!(a&&(a.nodeType===Kn||a.nodeType===ss||a.nodeType===Yy))}function Tf(a){return!!(a&&(a.nodeType===Kn||a.nodeType===ss||a.nodeType===Yy||a.nodeType===Ar&&a.nodeValue===" react-mount-point-unstable "))}function lA(a){a.nodeType===Kn&&a.tagName&&a.tagName.toUpperCase()==="BODY"&&u("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),Fd(a)&&(a._reactRootContainer?u("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):u("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var S4=t.ReactCurrentOwner,cA;cA=function(a){if(a._reactRootContainer&&a.nodeType!==Ar){var s=HO(a._reactRootContainer.current);s&&s.parentNode!==a&&u("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var l=!!a._reactRootContainer,d=Gw(a),h=!!(d&&qs(d));h&&!l&&u("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),a.nodeType===Kn&&a.tagName&&a.tagName.toUpperCase()==="BODY"&&u("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function Gw(a){return a?a.nodeType===ss?a.documentElement:a.firstChild:null}function dA(){}function E4(a,s,l,d,h){if(h){if(typeof d=="function"){var g=d;d=function(){var D=Bm(v);g.call(D)}}var v=zO(s,d,a,Ws,null,!1,!1,"",dA);a._reactRootContainer=v,kp(v.current,a);var w=a.nodeType===Ar?a.parentNode:a;return Ad(w),Ss(),v}else{for(var E;E=a.lastChild;)a.removeChild(E);if(typeof d=="function"){var k=d;d=function(){var D=Bm(N);k.call(D)}}var N=BO(a,Ws,null,!1,!1,"",dA);a._reactRootContainer=N,kp(N.current,a);var L=a.nodeType===Ar?a.parentNode:a;return Ad(L),Ss(function(){xf(s,N,l,d)}),N}}function x4(a,s){a!==null&&typeof a!="function"&&u("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",s,a)}function Hm(a,s,l,d,h){cA(l),x4(h===void 0?null:h,"render");var g=l._reactRootContainer,v;if(!g)v=E4(l,s,a,h,d);else{if(v=g,typeof h=="function"){var w=h;h=function(){var E=Bm(v);w.call(E)}}xf(s,v,a,h)}return Bm(v)}var fA=!1;function T4(a){{fA||(fA=!0,u("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var s=S4.current;if(s!==null&&s.stateNode!==null){var l=s.stateNode._warnedAboutRefsInRender;l||u("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",kt(s.type)||"A component"),s.stateNode._warnedAboutRefsInRender=!0}}return a==null?null:a.nodeType===Kn?a:l4(a,"findDOMNode")}function C4(a,s,l){if(u("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Tf(s))throw new Error("Target container is not a DOM element.");{var d=Fd(s)&&s._reactRootContainer===void 0;d&&u("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return Hm(null,a,s,!0,l)}function R4(a,s,l){if(u("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Tf(s))throw new Error("Target container is not a DOM element.");{var d=Fd(s)&&s._reactRootContainer===void 0;d&&u("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return Hm(null,a,s,!1,l)}function O4(a,s,l,d){if(u("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Tf(l))throw new Error("Target container is not a DOM element.");if(a==null||!Sj(a))throw new Error("parentComponent must be a valid React Component");return Hm(a,s,l,!1,d)}var hA=!1;function A4(a){if(hA||(hA=!0,u("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!Tf(a))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var s=Fd(a)&&a._reactRootContainer===void 0;s&&u("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(a._reactRootContainer){{var l=Gw(a),d=l&&!qs(l);d&&u("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Ss(function(){Hm(null,null,a,!1,function(){a._reactRootContainer=null,uC(a)})}),!0}else{{var h=Gw(a),g=!!(h&&qs(h)),v=a.nodeType===Kn&&Tf(a.parentNode)&&!!a.parentNode._reactRootContainer;g&&u("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",v?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}TD(c4),RD(d4),OD(f4),AD(Za),kD(SD),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&u("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),dj(NU),pj(Ew,wz,Ss);function k4(a,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(s))throw new Error("Target container is not a DOM element.");return u4(a,s,null,l)}function N4(a,s,l,d){return O4(a,s,l,d)}var Ww={usingClientEntryPoint:!1,Events:[qs,yl,Np,xx,Tx,Ew]};function P4(a,s){return Ww.usingClientEntryPoint||u('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),b4(a,s)}function $4(a,s,l){return Ww.usingClientEntryPoint||u('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),w4(a,s,l)}function I4(a){return _O()&&u("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Ss(a)}var j4=v4({findFiberByHostInstance:iu,bundleType:1,version:Fw,rendererPackageName:"react-dom"});if(!j4&&Jt&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var pA=window.location.protocol;/^(https?|file):$/.test(pA)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(pA==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww,va.createPortal=k4,va.createRoot=P4,va.findDOMNode=T4,va.flushSync=I4,va.hydrate=C4,va.hydrateRoot=$4,va.render=R4,va.unmountComponentAtNode=A4,va.unstable_batchedUpdates=Ew,va.unstable_renderSubtreeIntoContainer=N4,va.version=Fw,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();VN.exports=va;var q4=VN.exports,Jw=q4;{var qm=Jw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;q0.createRoot=function(n,e){qm.usingClientEntryPoint=!0;try{return Jw.createRoot(n,e)}finally{qm.usingClientEntryPoint=!1}},q0.hydrateRoot=function(n,e,t){qm.usingClientEntryPoint=!0;try{return Jw.hydrateRoot(n,e,t)}finally{qm.usingClientEntryPoint=!1}}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ah(){return ah=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ah.apply(this,arguments)}var bo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(bo||(bo={}));const mA="popstate";function G4(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:u,hash:c}=r.location;return G0("",{pathname:o,search:u,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ih(i)}return J4(e,t,null,n)}function yr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Zi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W4(){return Math.random().toString(36).substr(2,8)}function gA(n,e){return{usr:n.state,key:n.key,idx:e}}function G0(n,e,t,r){return t===void 0&&(t=null),ah({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?_c(e):e,{state:t,key:e&&e.key||r||W4()})}function ih(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _c(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function J4(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,c=bo.Pop,f=null,p=m();p==null&&(p=0,u.replaceState(ah({},u.state,{idx:p}),""));function m(){return(u.state||{idx:null}).idx}function y(){c=bo.Pop;let T=m(),R=T==null?null:T-p;p=T,f&&f({action:c,location:C.location,delta:R})}function b(T,R){c=bo.Push;let A=G0(C.location,T,R);p=m()+1;let O=gA(A,p),P=C.createHref(A);try{u.pushState(O,"",P)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(P)}o&&f&&f({action:c,location:C.location,delta:1})}function _(T,R){c=bo.Replace;let A=G0(C.location,T,R);p=m();let O=gA(A,p),P=C.createHref(A);u.replaceState(O,"",P),o&&f&&f({action:c,location:C.location,delta:0})}function S(T){let R=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof T=="string"?T:ih(T);return A=A.replace(/ $/,"%20"),yr(R,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,R)}let C={get action(){return c},get location(){return n(i,u)},listen(T){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(mA,y),f=T,()=>{i.removeEventListener(mA,y),f=null}},createHref(T){return e(i,T)},createURL:S,encodeLocation(T){let R=S(T);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:_,go(T){return u.go(T)}};return C}var yA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(yA||(yA={}));function K4(n,e,t){return t===void 0&&(t="/"),Z4(n,e,t)}function Z4(n,e,t,r){let i=typeof e=="string"?_c(e):e,o=Oo(i.pathname||"/",t);if(o==null)return null;let u=GN(n);Y4(u);let c=null;for(let f=0;c==null&&f<u.length;++f){let p=uV(o);c=sV(u[f],p)}return c}function GN(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,u,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(yr(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=As([r,f.relativePath]),m=t.concat(f);o.children&&o.children.length>0&&(yr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),GN(o.children,e,m,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:aV(p,o.index),routesMeta:m})};return n.forEach((o,u)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,u);else for(let f of WN(o.path))i(o,u,f)}),e}function WN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=WN(r.join("/")),c=[];return c.push(...u.map(f=>f===""?o:[o,f].join("/"))),i&&c.push(...u),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function Y4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:iV(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const X4=/^:[\w-]+$/,Q4=3,eV=2,tV=1,rV=10,nV=-2,vA=n=>n==="*";function aV(n,e){let t=n.split("/"),r=t.length;return t.some(vA)&&(r+=nV),e&&(r+=eV),t.filter(i=>!vA(i)).reduce((i,o)=>i+(X4.test(o)?Q4:o===""?tV:rV),r)}function iV(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function sV(n,e,t){let{routesMeta:r}=n,i={},o="/",u=[];for(let c=0;c<r.length;++c){let f=r[c],p=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=W0({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m),b=f.route;if(!y)return null;Object.assign(i,y.params),u.push({params:i,pathname:As([o,y.pathname]),pathnameBase:fV(As([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=As([o,y.pathnameBase]))}return u}function W0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oV(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,m,y)=>{let{paramName:b,isOptional:_}=m;if(b==="*"){let C=c[y]||"";u=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const S=c[y];return _&&!S?p[b]=void 0:p[b]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function oV(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Zi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zi(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Oo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function lV(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?_c(n):n;return{pathname:t?t.startsWith("/")?t:cV(t,e):e,search:hV(r),hash:pV(i)}}function cV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Kw(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function JN(n,e){let t=dV(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function KN(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=_c(n):(i=ah({},n),yr(!i.pathname||!i.pathname.includes("?"),Kw("?","pathname","search",i)),yr(!i.pathname||!i.pathname.includes("#"),Kw("#","pathname","hash",i)),yr(!i.search||!i.search.includes("#"),Kw("#","search","hash",i)));let o=n===""||i.pathname==="",u=o?"/":i.pathname,c;if(u==null)c=t;else{let y=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),y-=1;i.pathname=b.join("/")}c=y>=0?e[y]:"/"}let f=lV(i,c),p=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||m)&&(f.pathname+="/"),f}const As=n=>n.join("/").replace(/\/\/+/g,"/"),fV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ZN=["post","put","patch","delete"];new Set(ZN);const gV=["get",...ZN];new Set(gV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sh(){return sh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sh.apply(this,arguments)}const _h=X.createContext(null);_h.displayName="DataRouter";const XS=X.createContext(null);XS.displayName="DataRouterState";const yV=X.createContext(null);yV.displayName="Await";const _i=X.createContext(null);_i.displayName="Navigation";const wh=X.createContext(null);wh.displayName="Location";const Xi=X.createContext({outlet:null,matches:[],isDataRoute:!1});Xi.displayName="Route";const QS=X.createContext(null);QS.displayName="RouteError";function vV(n,e){let{relative:t}=e===void 0?{}:e;Sh()||yr(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=X.useContext(_i),{hash:o,pathname:u,search:c}=Eh(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:As([r,u])),i.createHref({pathname:f,search:c,hash:o})}function Sh(){return X.useContext(wh)!=null}function wc(){return Sh()||yr(!1,"useLocation() may be used only in the context of a <Router> component."),X.useContext(wh).location}const YN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function XN(n){X.useContext(_i).static||X.useLayoutEffect(n)}function bV(){let{isDataRoute:n}=X.useContext(Xi);return n?IV():_V()}function _V(){Sh()||yr(!1,"useNavigate() may be used only in the context of a <Router> component.");let n=X.useContext(_h),{basename:e,future:t,navigator:r}=X.useContext(_i),{matches:i}=X.useContext(Xi),{pathname:o}=wc(),u=JSON.stringify(JN(i,t.v7_relativeSplatPath)),c=X.useRef(!1);return XN(()=>{c.current=!0}),X.useCallback(function(p,m){if(m===void 0&&(m={}),Zi(c.current,YN),!c.current)return;if(typeof p=="number"){r.go(p);return}let y=KN(p,JSON.parse(u),o,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:As([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,u,o,n])}function wV(){let{matches:n}=X.useContext(Xi),e=n[n.length-1];return e?e.params:{}}function Eh(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=X.useContext(_i),{matches:i}=X.useContext(Xi),{pathname:o}=wc(),u=JSON.stringify(JN(i,r.v7_relativeSplatPath));return X.useMemo(()=>KN(n,JSON.parse(u),o,t==="path"),[n,u,o,t])}function SV(n,e){return EV(n,e)}function EV(n,e,t,r){Sh()||yr(!1,"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=X.useContext(_i),{matches:o}=X.useContext(Xi),u=o[o.length-1],c=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let A=m&&m.path||"";eP(f,!m||A.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+f+'" (under <Route path="'+A+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+A+'"> to <Route ')+('path="'+(A==="/"?"*":A+"/*")+'">.'))}let y=wc(),b;if(e){var _;let A=typeof e=="string"?_c(e):e;p==="/"||(_=A.pathname)!=null&&_.startsWith(p)||yr(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+p+'" ')+('but pathname "'+A.pathname+'" was given in the `location` prop.')),b=A}else b=y;let S=b.pathname||"/",C=S;if(p!=="/"){let A=p.replace(/^\//,"").split("/");C="/"+S.replace(/^\//,"").split("/").slice(A.length).join("/")}let T=K4(n,{pathname:C});Zi(m||T!=null,'No routes matched location "'+b.pathname+b.search+b.hash+'" '),Zi(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,'Matched leaf route at location "'+b.pathname+b.search+b.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.');let R=OV(T&&T.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:As([p,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:As([p,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,t,r);return e&&R?X.createElement(wh.Provider,{value:{location:sh({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:bo.Pop}},R):R}function xV(){let n=$V(),e=mV(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=X.createElement(X.Fragment,null,X.createElement("p",null,"💿 Hey developer 👋"),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:o},"ErrorBoundary")," or"," ",X.createElement("code",{style:o},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:i},t):null,u)}const TV=X.createElement(xV,null);class CV extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(Xi.Provider,{value:this.props.routeContext},X.createElement(QS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RV(n){let{routeContext:e,match:t,children:r}=n,i=X.useContext(_h);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(Xi.Provider,{value:e},r)}function OV(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let m=u.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);m>=0||yr(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(c).join(",")),u=u.slice(0,Math.min(u.length,m+1))}let f=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<u.length;m++){let y=u[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=m),y.route.id){let{loaderData:b,errors:_}=t,S=y.route.loader&&b[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||S){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((m,y,b)=>{let _,S=!1,C=null,T=null;t&&(_=c&&y.route.id?c[y.route.id]:void 0,C=y.route.errorElement||TV,f&&(p<0&&b===0?(eP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,T=null):p===b&&(S=!0,T=y.route.hydrateFallbackElement||null)));let R=e.concat(u.slice(0,b+1)),A=()=>{let O;return _?O=C:S?O=T:y.route.Component?O=X.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=m,X.createElement(RV,{match:y,routeContext:{outlet:m,matches:R,isDataRoute:t!=null},children:O})};return t&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?X.createElement(CV,{location:t.location,revalidation:t.revalidation,component:C,error:_,children:A(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):A()},null)}var QN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(QN||{}),oh=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(oh||{});function eE(n){return n+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function AV(n){let e=X.useContext(_h);return e||yr(!1,eE(n)),e}function kV(n){let e=X.useContext(XS);return e||yr(!1,eE(n)),e}function NV(n){let e=X.useContext(Xi);return e||yr(!1,eE(n)),e}function tE(n){let e=NV(n),t=e.matches[e.matches.length-1];return t.route.id||yr(!1,n+' can only be used on routes that contain a unique "id"'),t.route.id}function PV(){return tE(oh.UseRouteId)}function $V(){var n;let e=X.useContext(QS),t=kV(oh.UseRouteError),r=tE(oh.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function IV(){let{router:n}=AV(QN.UseNavigateStable),e=tE(oh.UseNavigateStable),t=X.useRef(!1);return XN(()=>{t.current=!0}),X.useCallback(function(i,o){o===void 0&&(o={}),Zi(t.current,YN),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,sh({fromRouteId:e},o)))},[n,e])}const bA={};function eP(n,e,t){!e&&!bA[n]&&(bA[n]=!0,Zi(!1,t))}const _A={};function jV(n,e){_A[e]||(_A[e]=!0,console.warn(e))}const wA=(n,e,t)=>jV(n,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function DV(n,e){(n==null?void 0:n.v7_startTransition)===void 0&&wA("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(n==null?void 0:n.v7_relativeSplatPath)===void 0&&wA("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function gg(n){yr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LV(n){let{basename:e="/",children:t=null,location:r,navigationType:i=bo.Pop,navigator:o,static:u=!1,future:c}=n;Sh()&&yr(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),p=X.useMemo(()=>({basename:f,navigator:o,static:u,future:sh({v7_relativeSplatPath:!1},c)}),[f,c,o,u]);typeof r=="string"&&(r=_c(r));let{pathname:m="/",search:y="",hash:b="",state:_=null,key:S="default"}=r,C=X.useMemo(()=>{let T=Oo(m,f);return T==null?null:{location:{pathname:T,search:y,hash:b,state:_,key:S},navigationType:i}},[f,m,y,b,_,S,i]);return Zi(C!=null,'<Router basename="'+f+'"> is not able to match the URL '+('"'+m+y+b+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),C==null?null:X.createElement(_i.Provider,{value:p},X.createElement(wh.Provider,{children:t,value:C}))}function UV(n){let{children:e,location:t}=n;return SV(J0(e),t)}new Promise(()=>{});function J0(n,e){e===void 0&&(e=[]);let t=[];return X.Children.forEach(n,(r,i)=>{if(!X.isValidElement(r))return;let o=[...e,i];if(r.type===X.Fragment){t.push.apply(t,J0(r.props.children,o));return}r.type!==gg&&yr(!1,"["+(typeof r.type=="string"?r.type:r.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"),!r.props.index||!r.props.children||yr(!1,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=J0(r.props.children,o)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cc.apply(this,arguments)}function rE(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}const yg="get",vg="application/x-www-form-urlencoded";function sy(n){return n!=null&&typeof n.tagName=="string"}function MV(n){return sy(n)&&n.tagName.toLowerCase()==="button"}function FV(n){return sy(n)&&n.tagName.toLowerCase()==="form"}function BV(n){return sy(n)&&n.tagName.toLowerCase()==="input"}function zV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function VV(n,e){return n.button===0&&(!e||e==="_self")&&!zV(n)}let Gm=null;function HV(){if(Gm===null)try{new FormData(document.createElement("form"),0),Gm=!1}catch{Gm=!0}return Gm}const qV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zw(n){return n!=null&&!qV.has(n)?(Zi(!1,'"'+n+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+vg+'"')),null):n}function GV(n,e){let t,r,i,o,u;if(FV(n)){let c=n.getAttribute("action");r=c?Oo(c,e):null,t=n.getAttribute("method")||yg,i=Zw(n.getAttribute("enctype"))||vg,o=new FormData(n)}else if(MV(n)||BV(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(r=f?Oo(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||yg,i=Zw(n.getAttribute("formenctype"))||Zw(c.getAttribute("enctype"))||vg,o=new FormData(c,n),!HV()){let{name:p,type:m,value:y}=n;if(m==="image"){let b=p?p+".":"";o.append(b+"x","0"),o.append(b+"y","0")}else p&&o.append(p,y)}}else{if(sy(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yg,r=null,i=vg,u=n}return o&&i==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:u}}const WV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],KV=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],ZV="6";try{window.__reactRouterVersion=ZV}catch{}const tP=X.createContext({isTransitioning:!1});tP.displayName="ViewTransition";const YV=X.createContext(new Map);YV.displayName="Fetchers";const XV="startTransition",SA=V4[XV];function QV(n){let{basename:e,children:t,future:r,window:i}=n,o=X.useRef();o.current==null&&(o.current=G4({window:i,v5Compat:!0}));let u=o.current,[c,f]=X.useState({action:u.action,location:u.location}),{v7_startTransition:p}=r||{},m=X.useCallback(y=>{p&&SA?SA(()=>f(y)):f(y)},[f,p]);return X.useLayoutEffect(()=>u.listen(m),[u,m]),X.useEffect(()=>DV(r),[r]),X.createElement(LV,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:u,future:r})}const eH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,po=X.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:u,state:c,target:f,to:p,preventScrollReset:m,viewTransition:y}=e,b=rE(e,WV),{basename:_}=X.useContext(_i),S,C=!1;if(typeof p=="string"&&tH.test(p)&&(S=p,eH))try{let O=new URL(window.location.href),P=p.startsWith("//")?new URL(O.protocol+p):new URL(p),j=Oo(P.pathname,_);P.origin===O.origin&&j!=null?p=j+P.search+P.hash:C=!0}catch{Zi(!1,'<Link to="'+p+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let T=vV(p,{relative:i}),R=iH(p,{replace:u,state:c,target:f,preventScrollReset:m,relative:i,viewTransition:y});function A(O){r&&r(O),O.defaultPrevented||R(O)}return X.createElement("a",cc({},b,{href:S||T,onClick:C||o?r:A,ref:t,target:f}))});po.displayName="Link";const rH=X.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:u=!1,style:c,to:f,viewTransition:p,children:m}=e,y=rE(e,JV),b=Eh(f,{relative:y.relative}),_=wc(),S=X.useContext(XS),{navigator:C,basename:T}=X.useContext(_i),R=S!=null&&dH(b)&&p===!0,A=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,O=_.pathname,P=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(O=O.toLowerCase(),P=P?P.toLowerCase():null,A=A.toLowerCase()),P&&T&&(P=Oo(P,T)||P);const j=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let q=O===A||!u&&O.startsWith(A)&&O.charAt(j)==="/",G=P!=null&&(P===A||!u&&P.startsWith(A)&&P.charAt(A.length)==="/"),ie={isActive:q,isPending:G,isTransitioning:R},de=q?r:void 0,Ae;typeof o=="function"?Ae=o(ie):Ae=[o,q?"active":null,G?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let ke=typeof c=="function"?c(ie):c;return X.createElement(po,cc({},y,{"aria-current":de,className:Ae,ref:t,style:ke,to:f,viewTransition:p}),typeof m=="function"?m(ie):m)});rH.displayName="NavLink";const nH=X.forwardRef((n,e)=>{let{fetcherKey:t,navigate:r,reloadDocument:i,replace:o,state:u,method:c=yg,action:f,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:b}=n,_=rE(n,KV),S=lH(),C=cH(f,{relative:m}),T=c.toLowerCase()==="get"?"get":"post",R=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let O=A.nativeEvent.submitter,P=(O==null?void 0:O.getAttribute("formmethod"))||c;S(O||A.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:o,state:u,relative:m,preventScrollReset:y,viewTransition:b})};return X.createElement("form",cc({ref:e,method:T,action:C,onSubmit:i?p:R},_))});nH.displayName="Form";var kg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(kg||(kg={}));var EA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(EA||(EA={}));function aH(n){return n+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function rP(n){let e=X.useContext(_h);return e||yr(!1,aH(n)),e}function iH(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:u,viewTransition:c}=e===void 0?{}:e,f=bV(),p=wc(),m=Eh(n,{relative:u});return X.useCallback(y=>{if(VV(y,t)){y.preventDefault();let b=r!==void 0?r:ih(p)===ih(m);f(n,{replace:b,state:i,preventScrollReset:o,relative:u,viewTransition:c})}},[p,f,m,r,i,t,n,o,u,c])}function sH(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let oH=0,uH=()=>"__"+String(++oH)+"__";function lH(){let{router:n}=rP(kg.UseSubmit),{basename:e}=X.useContext(_i),t=PV();return X.useCallback(function(r,i){i===void 0&&(i={}),sH();let{action:o,method:u,encType:c,formData:f,body:p}=GV(r,e);if(i.navigate===!1){let m=i.fetcherKey||uH();n.fetch(m,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:f,body:p,formMethod:i.method||u,formEncType:i.encType||c,flushSync:i.flushSync})}else n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:f,body:p,formMethod:i.method||u,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function cH(n,e){let{relative:t}=e===void 0?{}:e,{basename:r}=X.useContext(_i),i=X.useContext(Xi);i||yr(!1,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u=cc({},Eh(n||".",{relative:t})),c=wc();if(n==null){u.search=c.search;let f=new URLSearchParams(u.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(b=>b).forEach(b=>f.append("index",b));let y=f.toString();u.search=y?"?"+y:""}}return(!n||n===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:As([r,u.pathname])),ih(u)}function dH(n,e){e===void 0&&(e={});let t=X.useContext(tP);t==null&&yr(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rP(kg.useViewTransitionState),i=Eh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Oo(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Oo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return W0(i.pathname,u)!=null||W0(i.pathname,o)!=null}const fH="modulepreload",hH=function(n){return"/"+n},xA={},kn=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=hH(f),f in xA)return;xA[f]=!0;const p=f.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":fH,p||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((b,_)=>{y.addEventListener("load",b),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return i.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},pH=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>kn(async()=>{const{default:r}=await Promise.resolve().then(()=>Sc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class nE extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class mH extends nE{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class TA extends nE{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class CA extends nE{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var K0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(K0||(K0={}));var gH=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};class yH{constructor(e,{headers:t={},customFetch:r,region:i=K0.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=pH(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return gH(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:u}=t;let c={},{region:f}=t;f||(f=this.region);const p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(c["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let m;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(c["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(c["Content-Type"]="application/json",m=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:m}).catch(C=>{throw new mH(C)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new TA(y);if(!y.ok)throw new CA(y);let _=((r=y.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield y.json():_==="application/octet-stream"?S=yield y.blob():_==="text/event-stream"?S=y:_==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(i){return{data:null,error:i,response:i instanceof CA||i instanceof TA?i.context:void 0}}})}}var ia={},aE={},oy={},xh={},uy={},ly={},vH=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dc=vH();const bH=dc.fetch,nP=dc.fetch.bind(dc),aP=dc.Headers,_H=dc.Request,wH=dc.Response,Sc=Object.freeze(Object.defineProperty({__proto__:null,Headers:aP,Request:_H,Response:wH,default:nP,fetch:bH},Symbol.toStringTag,{value:"Module"})),SH=B4(Sc);var cy={};Object.defineProperty(cy,"__esModule",{value:!0});let EH=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};cy.default=EH;var iP=Fa&&Fa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ly,"__esModule",{value:!0});const xH=iP(SH),TH=iP(cy);let CH=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=xH.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var u,c,f,p;let m=null,y=null,b=null,_=o.status,S=o.statusText;if(o.ok){if(this.method!=="HEAD"){const A=await o.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=A:y=JSON.parse(A))}const T=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),R=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");T&&R&&R.length>1&&(b=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,b=null,_=406,S="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const T=await o.text();try{m=JSON.parse(T),Array.isArray(m)&&o.status===404&&(y=[],m=null,_=200,S="OK")}catch{o.status===404&&T===""?(_=204,S="No Content"):m={message:T}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,_=200,S="OK"),m&&this.shouldThrowOnError)throw new TH.default(m)}return{error:m,data:y,count:b,status:_,statusText:S}});return this.shouldThrowOnError||(i=i.catch(o=>{var u,c,f;return{error:{message:`${(u=o==null?void 0:o.name)!==null&&u!==void 0?u:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(c=o==null?void 0:o.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(f=o==null?void 0:o.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};ly.default=CH;var RH=Fa&&Fa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(uy,"__esModule",{value:!0});const OH=RH(ly);let AH=class extends OH.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const u=o?`${o}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,u=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(u,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:u="text"}={}){var c;const f=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};uy.default=AH;var kH=Fa&&Fa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xh,"__esModule",{value:!0});const NH=kH(uy);let PH=class extends NH.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${u}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};xh.default=PH;var $H=Fa&&Fa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(oy,"__esModule",{value:!0});const Rf=$H(xh);let IH=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let o=!1;const u=(e??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",u),r&&this.headers.append("Prefer",`count=${r}`),new Rf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(u.length>0){const c=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new Rf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new Rf.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Rf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Rf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};oy.default=IH;var sP=Fa&&Fa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(aE,"__esModule",{value:!0});const jH=sP(oy),DH=sP(xh);let LH=class oP{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new jH.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new oP(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:o}={}){var u;let c;const f=new URL(`${this.url}/rpc/${e}`);let p;r||i?(c=r?"HEAD":"GET",Object.entries(t).filter(([y,b])=>b!==void 0).map(([y,b])=>[y,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([y,b])=>{f.searchParams.append(y,b)})):(c="POST",p=t);const m=new Headers(this.headers);return o&&m.set("Prefer",`count=${o}`),new DH.default({method:c,url:f,headers:m,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};aE.default=LH;var Ec=Fa&&Fa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ia,"__esModule",{value:!0});ia.PostgrestError=ia.PostgrestBuilder=ia.PostgrestTransformBuilder=ia.PostgrestFilterBuilder=ia.PostgrestQueryBuilder=ia.PostgrestClient=void 0;const uP=Ec(aE);ia.PostgrestClient=uP.default;const lP=Ec(oy);ia.PostgrestQueryBuilder=lP.default;const cP=Ec(xh);ia.PostgrestFilterBuilder=cP.default;const dP=Ec(uy);ia.PostgrestTransformBuilder=dP.default;const fP=Ec(ly);ia.PostgrestBuilder=fP.default;const hP=Ec(cy);ia.PostgrestError=hP.default;var UH=ia.default={PostgrestClient:uP.default,PostgrestQueryBuilder:lP.default,PostgrestFilterBuilder:cP.default,PostgrestTransformBuilder:dP.default,PostgrestBuilder:fP.default,PostgrestError:hP.default};const{PostgrestClient:MH,PostgrestQueryBuilder:t7,PostgrestFilterBuilder:r7,PostgrestTransformBuilder:n7,PostgrestBuilder:a7,PostgrestError:i7}=UH;class FH{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const BH="2.15.5",zH=`realtime-js/${BH}`,VH="1.0.0",Z0=1e4,HH=1e3,qH=100;var Vf;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vf||(Vf={}));var Wr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Wr||(Wr={}));var gi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(gi||(gi={}));var Y0;(function(n){n.websocket="websocket"})(Y0||(Y0={}));var Cu;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Cu||(Cu={}));class GH{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),o=t.getUint8(2);let u=this.HEADER_LENGTH+2;const c=r.decode(e.slice(u,u+i));u=u+i;const f=r.decode(e.slice(u,u+o));u=u+o;const p=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:c,event:f,payload:p}}}class pP{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var er;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(er||(er={}));const RA=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,u)=>(o[u]=WH(u,n,e,i),o),{})},WH=(n,e,t,r)=>{const i=e.find(c=>c.name===n),o=i==null?void 0:i.type,u=t[n];return o&&!r.includes(o)?mP(o,u):X0(u)},mP=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return YH(e,t)}switch(n){case er.bool:return JH(e);case er.float4:case er.float8:case er.int2:case er.int4:case er.int8:case er.numeric:case er.oid:return KH(e);case er.json:case er.jsonb:return ZH(e);case er.timestamp:return XH(e);case er.abstime:case er.date:case er.daterange:case er.int4range:case er.int8range:case er.money:case er.reltime:case er.text:case er.time:case er.timestamptz:case er.timetz:case er.tsrange:case er.tstzrange:return X0(e);default:return X0(e)}},X0=n=>n,JH=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},KH=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ZH=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},YH=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const u=n.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(c=>mP(e,c))}return n},XH=n=>typeof n=="string"?n.replace(" ","T"):n,gP=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Yw{constructor(e,t,r={},i=Z0){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var OA;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(OA||(OA={}));class Hf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:u,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hf.syncState(this.state,i,o,u),this.pendingDiffs.forEach(f=>{this.state=Hf.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:u,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hf.syncDiff(this.state,i,o,u),c())}),this.onJoin((i,o,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:u})}),this.onLeave((i,o,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const o=this.cloneDeep(e),u=this.transformState(t),c={},f={};return this.map(o,(p,m)=>{u[p]||(f[p]=m)}),this.map(u,(p,m)=>{const y=o[p];if(y){const b=m.map(T=>T.presence_ref),_=y.map(T=>T.presence_ref),S=m.filter(T=>_.indexOf(T.presence_ref)<0),C=y.filter(T=>b.indexOf(T.presence_ref)<0);S.length>0&&(c[p]=S),C.length>0&&(f[p]=C)}else c[p]=m}),this.syncDiff(o,{joins:c,leaves:f},r,i)}static syncDiff(e,t,r,i){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(c,f)=>{var p;const m=(p=e[c])!==null&&p!==void 0?p:[];if(e[c]=this.cloneDeep(f),m.length>0){const y=e[c].map(_=>_.presence_ref),b=m.filter(_=>y.indexOf(_.presence_ref)<0);e[c].unshift(...b)}r(c,m,f)}),this.map(u,(c,f)=>{let p=e[c];if(!p)return;const m=f.map(y=>y.presence_ref);p=p.filter(y=>m.indexOf(y.presence_ref)<0),e[c]=p,i(c,p,f),p.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var AA;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(AA||(AA={}));var qf;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(qf||(qf={}));var Os;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Os||(Os={}));class iE{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Yw(this,gi.join,this.params,this.timeout),this.rejoinTimer=new pP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gi.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Hf(this),this.broadcastEndpointURL=gP(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Wr.closed){const{config:{broadcast:u,presence:c,private:f}}=this.params,p=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(_=>_.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[qf.PRESENCE]&&this.bindings[qf.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},b={broadcast:u,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(Os.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(Os.CLOSED)),this.updateJoinPayload(Object.assign({config:b},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket.setAuth(),_===void 0){e==null||e(Os.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,T=(S=C==null?void 0:C.length)!==null&&S!==void 0?S:0,R=[];for(let A=0;A<T;A++){const O=C[A],{filter:{event:P,schema:j,table:q,filter:G}}=O,ie=_&&_[A];if(ie&&ie.event===P&&ie.schema===j&&ie.table===q&&ie.filter===G)R.push(Object.assign(Object.assign({},O),{id:ie.id}));else{this.unsubscribe(),this.state=Wr.errored,e==null||e(Os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(Os.SUBSCRIBED);return}}).receive("error",_=>{this.state=Wr.errored,e==null||e(Os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Wr.joined&&e===qf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,c,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(c=(u=this.params)===null||u===void 0?void 0:u.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Yw(this,gi.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),u}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Yw(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qH){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;const u=e.toLocaleLowerCase(),{close:c,error:f,leave:p,join:m}=gi;if(r&&[c,f,p,m].indexOf(u)>=0&&r!==this._joinRef())return;let b=this._onMessage(u,t,r);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var S,C,T;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((T=(C=_.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(_=>_.callback(b,r)):(o=this.bindings[u])===null||o===void 0||o.filter(_=>{var S,C,T,R,A,O;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const P=_.id,j=(S=_.filter)===null||S===void 0?void 0:S.event;return P&&((C=t.ids)===null||C===void 0?void 0:C.includes(P))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const P=(A=(R=_==null?void 0:_.filter)===null||R===void 0?void 0:R.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return P==="*"||P===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:C,table:T,commit_timestamp:R,type:A,errors:O}=S;b=Object.assign(Object.assign({},{schema:C,table:T,commit_timestamp:R,eventType:A,new:{},old:{},errors:O}),this._getPayloadRecords(S))}_.callback(b,r)})}_isClosed(){return this.state===Wr.closed}_isJoined(){return this.state===Wr.joined}_isJoining(){return this.state===Wr.joining}_isLeaving(){return this.state===Wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&iE.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gi.close,{},e)}_onError(e){this._on(gi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=RA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=RA(e.columns,e.old_record)),t}}const Xw=()=>{},Wm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QH=[1e3,2e3,5e3,1e4],e9=1e4,t9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class r9{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Z0,this.transport=null,this.heartbeatIntervalMs=Wm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xw,this.ref=0,this.reconnectTimer=null,this.logger=Xw,this.conn=null,this.sendBuffer=[],this.serializer=new GH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...u)=>kn(async()=>{const{default:c}=await Promise.resolve().then(()=>Sc);return{default:c}},void 0).then(({default:c})=>c(...u)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...u)=>o(...u)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Y0.websocket}`,this.httpEndpoint=gP(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=FH.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VH}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vf.connecting:return Cu.Connecting;case Vf.open:return Cu.Open;case Vf.closing:return Cu.Closing;default:return Cu.Closed}}isConnected(){return this.connectionState()===Cu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new iE(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:i,ref:o}=e,u=()=>{this.encode(e,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(HH,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Wm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:u}=t,c=u?`(${u})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${c}`.trim(),o),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(i,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([t9],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:zH};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(gi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new pP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,o,u,c,f,p,m;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Z0,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Wm.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Xw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:y=>QH[y-1]||e9,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(y,b)=>b(JSON.stringify(y)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class sE extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Kr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class n9 extends sE{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Q0 extends sE{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var a9=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};const yP=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>kn(async()=>{const{default:r}=await Promise.resolve().then(()=>Sc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},i9=()=>a9(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kn(()=>Promise.resolve().then(()=>Sc),void 0)).Response:Response}),eS=n=>{if(Array.isArray(n))return n.map(t=>eS(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=eS(r)}),e},s9=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Lu=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};const Qw=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),o9=(n,e,t)=>Lu(void 0,void 0,void 0,function*(){const r=yield i9();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const o=n.status||500,u=(i==null?void 0:i.statusCode)||o+"";e(new n9(Qw(i),o,u))}).catch(i=>{e(new Q0(Qw(i),i))}):e(new Q0(Qw(n),n))}),u9=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(s9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Th(n,e,t,r,i,o){return Lu(this,void 0,void 0,function*(){return new Promise((u,c)=>{n(t,u9(e,r,i,o)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>o9(f,c,r))})})}function Ng(n,e,t,r){return Lu(this,void 0,void 0,function*(){return Th(n,"GET",e,t,r)})}function Vi(n,e,t,r,i){return Lu(this,void 0,void 0,function*(){return Th(n,"POST",e,r,i,t)})}function tS(n,e,t,r,i){return Lu(this,void 0,void 0,function*(){return Th(n,"PUT",e,r,i,t)})}function l9(n,e,t,r){return Lu(this,void 0,void 0,function*(){return Th(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function vP(n,e,t,r,i){return Lu(this,void 0,void 0,function*(){return Th(n,"DELETE",e,r,i,t)})}var Bn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};const c9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class d9{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=yP(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Bn(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},kA),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const p=this._removeEmptyFolders(t),m=this._getFinalPath(p),y=yield(e=="PUT"?tS:Vi)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:c},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Kr(o))return{data:null,error:o};throw o}})}upload(e,t,r){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Bn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${u}`);c.searchParams.set("token",t);try{let f;const p=Object.assign({upsert:kA.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",p.cacheControl)):(f=r,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType);const y=yield tS(this.fetch,c.toString(),f,{headers:m});return{data:{path:o,fullPath:y.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Kr(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return Bn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const o=yield Vi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),u=new URL(this.url+o.url),c=u.searchParams.get("token");if(!c)throw new sE("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}update(e,t,r){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Bn(this,void 0,void 0,function*(){try{return{data:yield Vi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Vi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Bn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Vi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Bn(this,void 0,void 0,function*(){try{const i=yield Vi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}download(e,t){return Bn(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=o?`?${o}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Ng(this.fetch,`${this.url}/${i}/${c}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Kr(c))return{data:null,error:c};throw c}})}info(e){return Bn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ng(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:eS(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}exists(e){return Bn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield l9(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r)&&r instanceof Q0){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});f!==""&&i.push(f);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${p}`)}}}remove(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield vP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}list(e,t,r){return Bn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},c9),t),{prefix:e||""});return{data:yield Vi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}listV2(e,t){return Bn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Vi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const f9="2.12.1",h9={"X-Client-Info":`storage-js/${f9}`};var zl=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};class p9{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},h9),t),this.fetch=yP(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return zl(this,void 0,void 0,function*(){try{return{data:yield Ng(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Kr(e))return{data:null,error:e};throw e}})}getBucket(e){return zl(this,void 0,void 0,function*(){try{return{data:yield Ng(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return zl(this,void 0,void 0,function*(){try{return{data:yield Vi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return zl(this,void 0,void 0,function*(){try{return{data:yield tS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return zl(this,void 0,void 0,function*(){try{return{data:yield Vi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return zl(this,void 0,void 0,function*(){try{return{data:yield vP(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}}class m9 extends p9{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new d9(this.url,this.headers,e,this.fetch)}}const g9="2.57.4";let kf="";typeof Deno<"u"?kf="deno":typeof document<"u"?kf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kf="react-native":kf="node";const y9={"X-Client-Info":`supabase-js-${kf}/${g9}`},v9={headers:y9},b9={schema:"public"},_9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},w9={};var S9=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};const E9=n=>{let e;return n?e=n:typeof fetch>"u"?e=nP:e=fetch,(...t)=>e(...t)},x9=()=>typeof Headers>"u"?aP:Headers,T9=(n,e,t)=>{const r=E9(t),i=x9();return(o,u)=>S9(void 0,void 0,void 0,function*(){var c;const f=(c=yield e())!==null&&c!==void 0?c:n;let p=new i(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),r(o,Object.assign(Object.assign({},u),{headers:p}))})};var C9=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};function R9(n){return n.endsWith("/")?n:n+"/"}function O9(n,e){var t,r;const{db:i,auth:o,realtime:u,global:c}=n,{db:f,auth:p,realtime:m,global:y}=e,b={db:Object.assign(Object.assign({},f),i),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},m),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),c),{headers:Object.assign(Object.assign({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>C9(this,void 0,void 0,function*(){return""})};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function A9(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(R9(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const bP="2.71.1",ec=30*1e3,rS=3,e0=rS*ec,k9="http://localhost:9999",N9="supabase.auth.token",P9={"X-Client-Info":`gotrue-js/${bP}`},nS="X-Supabase-Api-Version",_P={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,I9=10*60*1e3;class oE extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ft(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class j9 extends oE{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function D9(n){return ft(n)&&n.name==="AuthApiError"}class wP extends oE{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Io extends oE{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ho extends Io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function L9(n){return ft(n)&&n.name==="AuthSessionMissingError"}class Jm extends Io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Km extends Io{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zm extends Io{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U9(n){return ft(n)&&n.name==="AuthImplicitGrantRedirectError"}class NA extends Io{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class aS extends Io{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function t0(n){return ft(n)&&n.name==="AuthRetryableFetchError"}class PA extends Io{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class iS extends Io{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$A=` 	
\r=`.split(""),M9=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<$A.length;e+=1)n[$A[e].charCodeAt(0)]=-2;for(let e=0;e<Pg.length;e+=1)n[Pg[e].charCodeAt(0)]=e;return n})();function IA(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Pg[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Pg[r]),e.queuedBits-=6}}function SP(n,e,t){const r=M9[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function jA(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=u=>{z9(u,r,t)};for(let u=0;u<n.length;u+=1)SP(n.charCodeAt(u),i,o);return e.join("")}function F9(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function B9(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}F9(r,e)}}function z9(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function V9(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)SP(n.charCodeAt(i),t,r);return new Uint8Array(e)}function H9(n){const e=[];return B9(n,t=>e.push(t)),new Uint8Array(e)}function q9(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>IA(i,t,r)),IA(null,t,r),e.join("")}function G9(n){return Math.round(Date.now()/1e3)+n}function W9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const hi=()=>typeof window<"u"&&typeof document<"u",wu={tested:!1,writable:!1},EP=()=>{if(!hi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wu.tested)return wu.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),wu.tested=!0,wu.writable=!0}catch{wu.tested=!0,wu.writable=!1}return wu.writable};function J9(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const xP=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>kn(async()=>{const{default:r}=await Promise.resolve().then(()=>Sc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},K9=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",tc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Su=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},oo=async(n,e)=>{await n.removeItem(e)};class dy{constructor(){this.promise=new dy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}dy.promiseConstructor=Promise;function r0(n){const e=n.split(".");if(e.length!==3)throw new iS("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!$9.test(e[r]))throw new iS("JWT not in base64url format");return{header:JSON.parse(jA(e[0])),payload:JSON.parse(jA(e[1])),signature:V9(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z9(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Y9(n,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await n(o);if(!e(o,null,u)){r(u);return}}catch(u){if(!e(o,u)){i(u);return}}})()})}function X9(n){return("0"+n.toString(16)).substr(-2)}function Q9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,X9).join("")}async function e3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function t3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await e3(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vl(n,e,t=!1){const r=Q9();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await tc(n,`${e}-code-verifier`,i);const o=await t3(r);return[o,r===o?"plain":"s256"]}const r3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n3(n){const e=n.headers.get(nS);if(!e||!e.match(r3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function a3(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function i3(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const s3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hl(n){if(!s3.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function n0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function DA(n){return JSON.parse(JSON.stringify(n))}var o3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const xu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),u3=[502,503,504];async function LA(n){var e;if(!K9(n))throw new aS(xu(n),0);if(u3.includes(n.status))throw new aS(xu(n),n.status);let t;try{t=await n.json()}catch(o){throw new wP(xu(o),o)}let r;const i=n3(n);if(i&&i.getTime()>=_P["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new PA(xu(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ho}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new PA(xu(t),n.status,t.weak_password.reasons);throw new j9(xu(t),n.status||500,r)}const l3=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Tt(n,e,t,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[nS]||(o[nS]=_P["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const u=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const c=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await c3(n,e,t+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function c3(n,e,t,r,i,o){const u=l3(e,r,i,o);let c;try{c=await n(t,Object.assign({},u))}catch(f){throw console.error(f),new aS(xu(f),0)}if(c.ok||await LA(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(f){await LA(f)}}function Cs(n){var e;let t=null;p3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=G9(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function UA(n){const e=Cs(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function vo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function d3(n){return{data:n,error:null}}function f3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=n,u=o3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},u);return{data:{properties:c,user:f},error:null}}function h3(n){return n}function p3(n){return n.access_token&&n.refresh_token&&n.expires_in}const a0=["global","local","others"];var m3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class g3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=xP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=a0[0]){if(a0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${a0.join(", ")}`);try{return await Tt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:vo})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=m3(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:f3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ft(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Tt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vo})}catch(t){if(ft(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,o,u,c,f;try{const p={nextPage:null,lastPage:0,total:0},m=await Tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:h3});if(m.error)throw m.error;const y=await m.json(),b=(u=m.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(f=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);p[`${T}Page`]=C}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ft(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Hl(e);try{return await Tt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vo})}catch(t){if(ft(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Hl(e);try{return await Tt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:vo})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Hl(e);try{return await Tt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:vo})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Hl(e.userId);try{const{data:t,error:r}=await Tt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Hl(e.userId),Hl(e.id);try{return{data:await Tt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ft(t))return{data:null,error:t};throw t}}}function MA(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function y3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ql={debug:!!(globalThis&&EP()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class TP extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class v3 extends TP{}async function b3(n,e,t){ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ql.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new v3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ql.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}y3();const _3={url:k9,storageKey:N9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:P9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function FA(n,e,t){return await t()}const Gl={};class uh{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uh.nextInstanceID,uh.nextInstanceID+=1,this.instanceID>0&&hi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},_3),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new g3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xP(i.fetch),this.lock=i.lock||FA,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:hi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=b3:this.lock=FA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:EP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=MA(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=MA(this.memoryStorage)),hi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Gl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Gl[this.storageKey]=Object.assign(Object.assign({},Gl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Gl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gl[this.storageKey]=Object.assign(Object.assign({},Gl[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bP}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=J9(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),hi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),U9(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",c),await this._saveSession(u),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ft(t)?{error:t}:{error:new wP("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const o=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Cs}),{data:u,error:c}=o;if(c||!u)return{data:{user:null,session:null},error:c};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(ft(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,i;try{let o;if("email"in e){const{email:m,password:y,options:b}=e;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await Vl(this.storage,this.storageKey)),o=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:m,password:y,data:(t=b==null?void 0:b.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:_,code_challenge_method:S},xform:Cs})}else if("phone"in e){const{phone:m,password:y,options:b}=e;o=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(i=b==null?void 0:b.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Cs})}else throw new Km("You must provide either an email or phone number and a password");const{data:u,error:c}=o;if(c||!u)return{data:{user:null,session:null},error:c};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(ft(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:c}=e;t=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:UA})}else if("phone"in e){const{phone:o,password:u,options:c}=e;t=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:UA})}else throw new Km("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,o,u,c,f,p,m,y,b,_;let S,C;if("message"in e)S=e.message,C=e.signature;else{const{chain:T,wallet:R,statement:A,options:O}=e;let P;if(hi())if(typeof R=="object")P=R;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))P=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=R}const j=new URL((t=O==null?void 0:O.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in P&&P.signIn){const q=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),A?{statement:A}:null));let G;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")G=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)G=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)S=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),C=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${j.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=O==null?void 0:O.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((u=O==null?void 0:O.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O==null?void 0:O.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(m=O==null?void 0:O.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const q=await P.signMessage(new TextEncoder().encode(S),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=q}}try{const{data:T,error:R}=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:q9(C)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Cs});if(R)throw R;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Jm}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:R})}catch(T){if(ft(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await Su(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:o,error:u}=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Cs});if(await oo(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Jm}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:u})}catch(o){if(ft(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:o,nonce:u}=e,c=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Cs}),{data:f,error:p}=c;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Jm}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,o,u;try{if("email"in e){const{email:c,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Vl(this.storage,this.storageKey));const{error:y}=await Tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:c,options:f}=e,{data:p,error:m}=await Tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:m}}throw new Km("You must provide either an email or phone number.")}catch(c){if(ft(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:c}=await Tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Cs});if(c)throw c;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(i){if(ft(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await Vl(this.storage,this.storageKey)),await Tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:d3})}catch(o){if(ft(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ho;const{error:i}=await Tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ft(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:u}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:u,error:c}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Km("You must provide either an email or phone number and a type")}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Su(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<e0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Su(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=n0()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,m)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,m))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:vo}):await this._useSession(async t=>{var r,i,o;const{data:u,error:c}=t;if(c)throw c;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ho}:await Tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:vo})})}catch(t){if(ft(t))return L9(t)&&(await this._removeSession(),await oo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new ho;const u=i.session;let c=null,f=null;this.flowType==="pkce"&&e.email!=null&&([c,f]=await Vl(this.storage,this.storageKey));const{data:p,error:m}=await Tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:f}),jwt:u.access_token,xform:vo});if(m)throw m;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ho;const t=Date.now()/1e3;let r=t,i=!0,o=null;const{payload:u}=r0(e.access_token);if(u.exp&&(r=u.exp,i=r<=t),i){const{session:c,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(ft(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:u,error:c}=t;if(c)throw c;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ho;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!hi())throw new Zm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new NA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zm("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new NA("No code detected.");const{data:A,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:u,expires_in:c,expires_at:f,token_type:p}=e;if(!o||!c||!u||!p)throw new Zm("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(c);let b=m+y;f&&(b=parseInt(f));const _=b-m;_*1e3<=ec&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const S=b-y;m-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,m):m-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,m);const{data:C,error:T}=await this._getUser(o);if(T)throw T;const R={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:y,expires_at:b,refresh_token:u,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(r){if(ft(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Su(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return{error:o};const u=(r=i.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:c}=await this.admin.signOut(u,e);if(c&&!(D9(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await oo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=W9(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:o},error:u}=t;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Vl(this.storage,this.storageKey,!0));try{return await Tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(ft(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async o=>{var u,c,f,p,m;const{data:y,error:b}=o;if(b)throw b;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Tt(this.fetch,"GET",_,{headers:this.headers,jwt:(m=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return hi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ft(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:o,error:u}=t;if(u)throw u;return await Tt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Y9(async i=>(i>0&&await Z9(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Cs})),(i,o)=>{const u=200*Math.pow(2,i);return o&&t0(o)&&Date.now()+u-r<ec})}catch(r){if(this._debug(t,"error",r),ft(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),hi()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Su(this.storage,this.storageKey);if(i&&this.userStorage){let u=await Su(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await tc(this.userStorage,this.storageKey+"-user",u)),i.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:n0()}else if(i&&!i.user&&!i.user){const u=await Su(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(i.user=u.user,await oo(this.storage,this.storageKey+"-user"),await tc(this.storage,this.storageKey,i)):i.user=n0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<e0;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${e0}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),t0(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:c}=await this._getUser(i.access_token);!c&&(u!=null&&u.user)?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ho;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new dy;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new ho;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),ft(o)){const u={session:null,error:o};return t0(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await tc(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const o=DA(i);await tc(this.storage,this.storageKey,o)}else{const i=DA(t);await tc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await oo(this.storage,this.storageKey),await oo(this.storage,this.storageKey+"-code-verifier"),await oo(this.storage,this.storageKey+"-user"),this.userStorage&&await oo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ec);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ec);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ec}ms, refresh threshold is ${rS} ticks`),i<=rS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof TP)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,u]=await Vl(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;return o?{data:null,error:o}:await Tt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:o,error:u}=t;if(u)return{data:null,error:u};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:p}=await Tt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:u,error:c}=await Tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(t){if(ft(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;return o?{data:null,error:o}:await Tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ft(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=r0(i.access_token);let c=null;u.aal&&(c=u.aal);let f=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const m=u.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+I9>i)return r;const{data:o,error:u}=await Tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:_,error:S}=await this.getSession();if(S||!_.session)return{data:null,error:S};r=_.session.access_token}const{header:i,payload:o,signature:u,raw:{header:c,payload:f}}=r0(r);t!=null&&t.allowExpired||a3(o.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:o,header:i,signature:u},error:null}}const m=i3(i.alg),y=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,u,H9(`${c}.${f}`)))throw new iS("Invalid JWT signature");return{data:{claims:o,header:i,signature:u},error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}}uh.nextInstanceID=0;const w3=uh;class S3 extends w3{constructor(e){super(e)}}var E3=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{p(r.next(m))}catch(y){u(y)}}function f(m){try{p(r.throw(m))}catch(y){u(y)}}function p(m){m.done?o(m.value):i(m.value).then(c,f)}p((r=r.apply(n,e||[])).next())})};class x3{constructor(e,t,r){var i,o,u;this.supabaseUrl=e,this.supabaseKey=t;const c=A9(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const f=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:b9,realtime:w9,auth:Object.assign(Object.assign({},_9),{storageKey:f}),global:v9},m=O9(r??{},p);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=m.auth)!==null&&u!==void 0?u:{},this.headers,m.global.fetch),this.fetch=T9(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new MH(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new m9(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new yH(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return E3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:u,flowType:c,lock:f,debug:p},m,y){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new S3({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),m),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:c,lock:f,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new r9(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const T3=(n,e,t)=>new x3(n,e,t);function C3(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}C3()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const R3="https://your-project-id.supabase.co",O3="your-anon-key-here",Zr=T3(R3,O3),CP=X.createContext(void 0),RP=()=>{const n=X.useContext(CP);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},A3=({children:n})=>{const[e,t]=X.useState(null),[r,i]=X.useState(!0);X.useEffect(()=>{(async()=>{const{data:{session:y}}=await Zr.auth.getSession();t((y==null?void 0:y.user)??null),i(!1)})();const{data:{subscription:m}}=Zr.auth.onAuthStateChange(async(y,b)=>{t((b==null?void 0:b.user)??null),i(!1)});return()=>m.unsubscribe()},[]);const f={user:e,loading:r,signUp:async(p,m,y)=>{const{data:b,error:_}=await Zr.auth.signUp({email:p,password:m,options:{data:{username:y}}});return{data:b,error:_}},signIn:async(p,m)=>{const{data:y,error:b}=await Zr.auth.signInWithPassword({email:p,password:m});return{data:y,error:b}},signOut:async()=>{const{error:p}=await Zr.auth.signOut();return{error:p}}};return U.jsxDEV(CP.Provider,{value:f,children:n},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/contexts/AuthContext.tsx",lineNumber:85,columnNumber:5},void 0)},k3=({isOpen:n,onClose:e})=>{const[t,r]=X.useState(!1),[i,o]=X.useState(""),[u,c]=X.useState(""),[f,p]=X.useState(""),[m,y]=X.useState(!1),[b,_]=X.useState(""),{signUp:S,signIn:C}=RP(),T=async R=>{R.preventDefault(),y(!0),_("");try{if(t){const{error:A}=await S(i,u,f);if(A)throw A;alert("Check your email for the confirmation link!"),e()}else{const{error:A}=await C(i,u);if(A)throw A;e()}}catch(A){_(A.message)}finally{y(!1)}};return n?U.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:U.jsxDEV("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[U.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[U.jsxDEV("h2",{className:"text-xl font-semibold",children:t?"Sign Up":"Sign In"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:43,columnNumber:11},void 0),U.jsxDEV("button",{onClick:e,className:"text-gray-400 hover:text-white",children:"✕"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:46,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:42,columnNumber:9},void 0),U.jsxDEV("form",{onSubmit:T,className:"space-y-4",children:[t&&U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Username"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:57,columnNumber:15},void 0),U.jsxDEV("input",{type:"text",value:f,onChange:R=>p(R.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:58,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:56,columnNumber:13},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Email"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:69,columnNumber:13},void 0),U.jsxDEV("input",{type:"email",value:i,onChange:R=>o(R.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:68,columnNumber:11},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Password"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:80,columnNumber:13},void 0),U.jsxDEV("input",{type:"password",value:u,onChange:R=>c(R.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,minLength:6},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:79,columnNumber:11},void 0),b&&U.jsxDEV("div",{className:"text-red-400 text-sm",children:b},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:92,columnNumber:13},void 0),U.jsxDEV("button",{type:"submit",disabled:m,className:"w-full bg-primary-600 hover:bg-primary-700 disabled:opacity-50 px-4 py-2 rounded-md font-medium transition-colors",children:m?"Loading...":t?"Sign Up":"Sign In"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:95,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:54,columnNumber:9},void 0),U.jsxDEV("div",{className:"mt-4 text-center",children:U.jsxDEV("button",{onClick:()=>r(!t),className:"text-primary-400 hover:text-primary-300 text-sm",children:t?"Already have an account? Sign In":"Don't have an account? Sign Up"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:105,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:104,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:41,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AuthModal.tsx",lineNumber:40,columnNumber:5},void 0):null},N3=()=>{var u;const[n,e]=X.useState(!1),{user:t,signOut:r,loading:i}=RP(),o=async()=>{await r()};return U.jsxDEV(U.Fragment,{children:[U.jsxDEV("header",{className:"bg-gray-800 border-b border-gray-700",children:U.jsxDEV("div",{className:"container mx-auto px-4 py-4",children:U.jsxDEV("div",{className:"flex items-center justify-between",children:[U.jsxDEV(po,{to:"/",className:"text-2xl font-bold text-primary-500 hover:text-primary-400 transition-colors",children:"Pachanga's Picks"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:19,columnNumber:13},void 0),U.jsxDEV("nav",{className:"hidden md:flex space-x-6",children:[U.jsxDEV(po,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:24,columnNumber:15},void 0),U.jsxDEV(po,{to:"/picks",className:"text-gray-300 hover:text-white transition-colors",children:"Official Picks"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:27,columnNumber:15},void 0),U.jsxDEV(po,{to:"/forum",className:"text-gray-300 hover:text-white transition-colors",children:"Forum"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:30,columnNumber:15},void 0),U.jsxDEV(po,{to:"/archive",className:"text-gray-300 hover:text-white transition-colors",children:"Archive"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:33,columnNumber:15},void 0),U.jsxDEV(po,{to:"/admin",className:"text-gray-300 hover:text-white transition-colors",children:"Admin"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:36,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:23,columnNumber:13},void 0),U.jsxDEV("div",{className:"flex items-center space-x-4",children:i?U.jsxDEV("span",{className:"text-gray-400",children:"Loading..."},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:43,columnNumber:17},void 0):t?U.jsxDEV(U.Fragment,{children:[U.jsxDEV("span",{className:"text-gray-300",children:["Welcome, ",((u=t.user_metadata)==null?void 0:u.username)||t.email]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:46,columnNumber:19},void 0),U.jsxDEV("button",{onClick:o,className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:49,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:45,columnNumber:17},void 0):U.jsxDEV(U.Fragment,{children:[U.jsxDEV("span",{className:"text-gray-400",children:"Welcome, Guest"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:58,columnNumber:19},void 0),U.jsxDEV("button",{onClick:()=>e(!0),className:"btn-secondary text-sm",children:"Sign In"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:59,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:57,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:41,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:18,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:17,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:16,columnNumber:7},void 0),U.jsxDEV(k3,{isOpen:n,onClose:()=>e(!1)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:72,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Header.tsx",lineNumber:15,columnNumber:5},void 0)},i0=({pick:n,showComments:e=!0,onCommentClick:t})=>{const r=o=>o>=80?"text-green-400":o>=60?"text-yellow-400":"text-red-400",i=o=>{switch(o){case"win":return"text-green-400";case"loss":return"text-red-400";case"push":return"text-yellow-400";default:return"text-gray-400"}};return U.jsxDEV("div",{className:"card mb-6",children:[U.jsxDEV("div",{className:"flex items-start justify-between mb-4",children:U.jsxDEV("div",{className:"flex-1",children:[U.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[U.jsxDEV("span",{className:"text-sm text-gray-400",children:n.game_info.league},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:24,columnNumber:13},void 0),U.jsxDEV("span",{className:"text-sm text-gray-500",children:"•"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:25,columnNumber:13},void 0),U.jsxDEV("span",{className:"text-sm text-gray-400",children:new Date(n.game_info.game_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:26,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:23,columnNumber:11},void 0),U.jsxDEV("h3",{className:"text-xl font-semibold mb-2",children:[n.game_info.away_team," @ ",n.game_info.home_team]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:31,columnNumber:11},void 0),U.jsxDEV("div",{className:"flex items-center space-x-4 mb-3",children:[U.jsxDEV("span",{className:`font-medium ${r(n.confidence)}`,children:[n.confidence,"% Confidence"]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:36,columnNumber:13},void 0),n.result&&U.jsxDEV("span",{className:`text-sm ${i(n.result)}`,children:n.result.toUpperCase()},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:40,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:35,columnNumber:11},void 0),U.jsxDEV("p",{className:"text-gray-300 mb-4",children:n.prediction},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:46,columnNumber:11},void 0),U.jsxDEV("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[U.jsxDEV("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Analysis:"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:49,columnNumber:13},void 0),U.jsxDEV("p",{className:"text-sm text-gray-300",children:n.reasoning},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:50,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:48,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:22,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:21,columnNumber:7},void 0),U.jsxDEV("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[U.jsxDEV("span",{children:["Posted ",new Date(n.created_at).toLocaleDateString()]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:56,columnNumber:9},void 0),e&&t&&U.jsxDEV("button",{onClick:t,className:"text-primary-400 hover:text-primary-300 transition-colors",children:"💬 View Discussion"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:59,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:55,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/PickCard.tsx",lineNumber:20,columnNumber:5},void 0)},OP=({comment:n,replies:e=[],depth:t=0,onReply:r})=>{const[i,o]=X.useState(!1),[u,c]=X.useState(""),f=()=>{u.trim()&&r&&(r(u),c(""),o(!1))},p=3,m=t>0?`ml-${Math.min(t*4,12)}`:"";return U.jsxDEV("div",{className:`${m} mb-4`,children:[U.jsxDEV("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[U.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[U.jsxDEV("span",{className:"font-medium text-primary-400",children:n.user_name},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:23,columnNumber:11},void 0),U.jsxDEV("span",{className:"text-sm text-gray-500",children:new Date(n.created_at).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:24,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:22,columnNumber:9},void 0),U.jsxDEV("p",{className:"text-gray-300 mb-3",children:n.content},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:29,columnNumber:9},void 0),U.jsxDEV("div",{className:"flex items-center space-x-4 text-sm",children:[U.jsxDEV("button",{onClick:()=>o(!i),className:"text-primary-400 hover:text-primary-300 transition-colors",children:"Reply"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:32,columnNumber:11},void 0),U.jsxDEV("div",{className:"flex items-center space-x-2",children:[U.jsxDEV("button",{className:"text-gray-400 hover:text-green-400",children:"👍"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:40,columnNumber:13},void 0),U.jsxDEV("span",{className:"text-gray-500",children:n.upvotes||0},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:41,columnNumber:13},void 0),U.jsxDEV("button",{className:"text-gray-400 hover:text-red-400",children:"👎"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:42,columnNumber:13},void 0),U.jsxDEV("span",{className:"text-gray-500",children:n.downvotes||0},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:43,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:39,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:31,columnNumber:9},void 0),i&&U.jsxDEV("div",{className:"mt-4",children:[U.jsxDEV("textarea",{value:u,onChange:y=>c(y.target.value),placeholder:"Write your reply...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-gray-100 placeholder-gray-400 focus:outline-none focus:border-primary-500",rows:3},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:49,columnNumber:13},void 0),U.jsxDEV("div",{className:"flex space-x-2 mt-2",children:[U.jsxDEV("button",{onClick:f,className:"btn-primary text-sm",children:"Reply"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:57,columnNumber:15},void 0),U.jsxDEV("button",{onClick:()=>o(!1),className:"btn-secondary text-sm",children:"Cancel"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:63,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:56,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:48,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:21,columnNumber:7},void 0),e.length>0&&t<p&&U.jsxDEV("div",{className:"mt-4",children:e.map(y=>U.jsxDEV(OP,{comment:y,replies:[],depth:t+1,onReply:b=>r&&r(b)},y.id,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:77,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:75,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/Comment.tsx",lineNumber:20,columnNumber:5},void 0)},BA={getAll:async()=>{const{data:n,error:e}=await Zr.from("picks").select("*").order("created_at",{ascending:!1});return{data:n,error:e}},getPinned:async()=>{const{data:n,error:e}=await Zr.from("picks").select("*").eq("is_pinned",!0).order("created_at",{ascending:!1});return{data:n,error:e}},getById:async n=>{const{data:e,error:t}=await Zr.from("picks").select("*").eq("id",n).single();return{data:e,error:t}},create:async n=>{const{data:{user:e}}=await Zr.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await Zr.from("picks").insert([{...n,user_id:e.id}]).select().single();return{data:t,error:r}},update:async(n,e)=>{const{data:t,error:r}=await Zr.from("picks").update({...e,updated_at:new Date().toISOString()}).eq("id",n).select().single();return{data:t,error:r}},delete:async n=>{const{error:e}=await Zr.from("picks").delete().eq("id",n);return{error:e}},subscribeToPicks:n=>Zr.channel("picks").on("postgres_changes",{event:"*",schema:"public",table:"picks"},n).subscribe()},P3={getByPostId:async n=>{const{data:e,error:t}=await Zr.from("comments").select("*").eq("post_id",n).order("created_at",{ascending:!0});return{data:e,error:t}},create:async n=>{const{data:{user:e}}=await Zr.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await Zr.from("comments").insert([{...n,user_id:e.id}]).select().single();return{data:t,error:r}},update:async(n,e)=>{const{data:t,error:r}=await Zr.from("comments").update(e).eq("id",n).select().single();return{data:t,error:r}},delete:async n=>{const{error:e}=await Zr.from("comments").delete().eq("id",n);return{error:e}},vote:async(n,e)=>{const{data:t,error:r}=await Zr.rpc("vote_comment",{comment_id:n,vote_type:e});return{data:t,error:r}}},$3=()=>{const[n,e]=X.useState([]),[t,r]=X.useState([]),[i,o]=X.useState([]),[u,c]=X.useState(null),[f,p]=X.useState(!1),[m,y]=X.useState(!0),[b,_]=X.useState("");X.useEffect(()=>{(async()=>{try{y(!0);const[R,A]=await Promise.all([BA.getAll(),BA.getPinned()]);if(R.error)throw R.error;if(A.error)throw A.error;e(R.data||[]),r(A.data||[])}catch(R){_(R.message)}finally{y(!1)}})()},[]);const S=async T=>{c(T),p(!0);try{const{data:R,error:A}=await P3.getByPostId(T.id);if(A)throw A;o(R||[])}catch(R){console.error("Error fetching comments:",R)}},C=()=>{p(!1),c(null),o([])};return U.jsxDEV("div",{className:"max-w-4xl mx-auto",children:[U.jsxDEV("div",{className:"mb-8",children:[U.jsxDEV("h1",{className:"text-3xl font-bold mb-2",children:"Official Picks"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:63,columnNumber:9},void 0),U.jsxDEV("p",{className:"text-gray-400",children:"Expert analysis and betting recommendations for this week's games"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:64,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:62,columnNumber:7},void 0),m&&U.jsxDEV("div",{className:"text-center py-8",children:U.jsxDEV("div",{className:"text-gray-400",children:"Loading picks..."},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:69,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:68,columnNumber:9},void 0),b&&U.jsxDEV("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded mb-4",children:["Error loading picks: ",b]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:74,columnNumber:9},void 0),!m&&!b&&U.jsxDEV(U.Fragment,{children:[t.length>0&&U.jsxDEV("div",{className:"mb-8",children:[U.jsxDEV("h2",{className:"text-xl font-semibold mb-4 text-primary-400",children:"📌 Pinned Picks"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:84,columnNumber:15},void 0),t.map(T=>U.jsxDEV(i0,{pick:T,onCommentClick:()=>S(T)},T.id,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:86,columnNumber:17},void 0))]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:83,columnNumber:13},void 0),U.jsxDEV("div",{className:"mb-8",children:[U.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"All Picks"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:97,columnNumber:13},void 0),n.length===0?U.jsxDEV("div",{className:"text-center py-8 text-gray-400",children:"No picks available yet. Check back soon!"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:99,columnNumber:15},void 0):n.map(T=>U.jsxDEV(i0,{pick:T,onCommentClick:()=>S(T)},T.id,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:104,columnNumber:17},void 0))]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:80,columnNumber:9},void 0),f&&u&&U.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:U.jsxDEV("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:U.jsxDEV("div",{className:"p-6",children:[U.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[U.jsxDEV("h3",{className:"text-xl font-semibold",children:"Discussion"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:121,columnNumber:17},void 0),U.jsxDEV("button",{onClick:C,className:"text-gray-400 hover:text-white",children:"✕"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:122,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:120,columnNumber:15},void 0),U.jsxDEV(i0,{pick:u,showComments:!1},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:130,columnNumber:15},void 0),U.jsxDEV("div",{className:"mt-6",children:[U.jsxDEV("h4",{className:"text-lg font-medium mb-4",children:["Comments (",i.length,")"]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:133,columnNumber:17},void 0),i.length===0?U.jsxDEV("div",{className:"text-gray-400 text-center py-4",children:"No comments yet. Be the first to share your thoughts!"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:135,columnNumber:19},void 0):i.map(T=>U.jsxDEV(OP,{comment:T,onReply:R=>console.log("Reply:",R)},T.id,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:140,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:132,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:119,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:118,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:117,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/HomePage.tsx",lineNumber:61,columnNumber:5},void 0)},I3=()=>{const{gameId:n}=wV();return U.jsxDEV("div",{className:"max-w-4xl mx-auto",children:U.jsxDEV("div",{className:"card",children:[U.jsxDEV("h1",{className:"text-2xl font-bold mb-4",children:"Game Thread"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/GameThread.tsx",lineNumber:9,columnNumber:9},void 0),U.jsxDEV("p",{className:"text-gray-400 mb-4",children:["Discussion for Game ID: ",n]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/GameThread.tsx",lineNumber:10,columnNumber:9},void 0),U.jsxDEV("p",{className:"text-gray-500",children:"This feature is coming soon..."},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/GameThread.tsx",lineNumber:11,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/GameThread.tsx",lineNumber:8,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/GameThread.tsx",lineNumber:7,columnNumber:5},void 0)};function tt(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function B(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}let AP=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return AP=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};function sS(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const oS=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Ye extends Error{}class wn extends Ye{constructor(e,t,r,i){super(`${wn.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=t;const o=t;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new fy({message:r,cause:oS(t)});const o=t==null?void 0:t.error;return e===400?new kP(e,o,r,i):e===401?new NP(e,o,r,i):e===403?new PP(e,o,r,i):e===404?new $P(e,o,r,i):e===409?new IP(e,o,r,i):e===422?new jP(e,o,r,i):e===429?new DP(e,o,r,i):e>=500?new LP(e,o,r,i):new wn(e,o,r,i)}}class Ea extends wn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class fy extends wn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class hy extends fy{constructor({message:e}={}){super({message:e??"Request timed out."})}}class kP extends wn{}class NP extends wn{}class PP extends wn{}class $P extends wn{}class IP extends wn{}class jP extends wn{}class DP extends wn{}class LP extends wn{}class UP extends Ye{constructor(){super("Could not parse response content as the length limit was reached")}}class MP extends Ye{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Nf extends Error{constructor(e){super(e)}}const j3=/^[a-z][a-z0-9+.-]*:/i,D3=n=>j3.test(n);let aa=n=>(aa=Array.isArray,aa(n)),zA=aa;function L3(n){return typeof n!="object"?{}:n??{}}function U3(n){if(!n)return!0;for(const e in n)return!1;return!0}function M3(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function s0(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const F3=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ye(`${n} must be an integer`);if(e<0)throw new Ye(`${n} must be a positive integer`);return e},B3=n=>{try{return JSON.parse(n)}catch{return}},Ch=n=>new Promise(e=>setTimeout(e,n)),rc="5.12.2",z3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function V3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const H3=()=>{var t;const n=V3();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":HA(Deno.build.os),"X-Stainless-Arch":VA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":HA(globalThis.process.platform??"unknown"),"X-Stainless-Arch":VA(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=q3();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function q3(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,u=r[3]||0;return{browser:e,version:`${i}.${o}.${u}`}}}return null}const VA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",HA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let qA;const G3=()=>qA??(qA=H3());function W3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function FP(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function BP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return FP({start(){},async pull(t){const{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function zP(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function J3(n){var r,i;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((i=(r=n[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const K3=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),VP="RFC3986",HP=n=>String(n),GA={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:HP},Z3="RFC1738";let uS=(n,e)=>(uS=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),uS(n,e));const Mi=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),o0=1024,Y3=(n,e,t,r,i)=>{if(n.length===0)return n;let o=n;if(typeof n=="symbol"?o=Symbol.prototype.toString.call(n):typeof n!="string"&&(o=String(n)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let u="";for(let c=0;c<o.length;c+=o0){const f=o.length>=o0?o.slice(c,c+o0):o,p=[];for(let m=0;m<f.length;++m){let y=f.charCodeAt(m);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||i===Z3&&(y===40||y===41)){p[p.length]=f.charAt(m);continue}if(y<128){p[p.length]=Mi[y];continue}if(y<2048){p[p.length]=Mi[192|y>>6]+Mi[128|y&63];continue}if(y<55296||y>=57344){p[p.length]=Mi[224|y>>12]+Mi[128|y>>6&63]+Mi[128|y&63];continue}m+=1,y=65536+((y&1023)<<10|f.charCodeAt(m)&1023),p[p.length]=Mi[240|y>>18]+Mi[128|y>>12&63]+Mi[128|y>>6&63]+Mi[128|y&63]}u+=p.join("")}return u};function X3(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function WA(n,e){if(aa(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const qP={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},GP=function(n,e){Array.prototype.push.apply(n,aa(e)?e:[e])};let JA;const Jr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Y3,encodeValuesOnly:!1,format:VP,formatter:HP,indices:!1,serializeDate(n){return(JA??(JA=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function Q3(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const u0={};function WP(n,e,t,r,i,o,u,c,f,p,m,y,b,_,S,C,T,R){let A=n,O=R,P=0,j=!1;for(;(O=O.get(u0))!==void 0&&!j;){const Ae=O.get(n);if(P+=1,typeof Ae<"u"){if(Ae===P)throw new RangeError("Cyclic object value");j=!0}typeof O.get(u0)>"u"&&(P=0)}if(typeof p=="function"?A=p(e,A):A instanceof Date?A=b==null?void 0:b(A):t==="comma"&&aa(A)&&(A=WA(A,function(Ae){return Ae instanceof Date?b==null?void 0:b(Ae):Ae})),A===null){if(o)return f&&!C?f(e,Jr.encoder,T,"key",_):e;A=""}if(Q3(A)||X3(A)){if(f){const Ae=C?e:f(e,Jr.encoder,T,"key",_);return[(S==null?void 0:S(Ae))+"="+(S==null?void 0:S(f(A,Jr.encoder,T,"value",_)))]}return[(S==null?void 0:S(e))+"="+(S==null?void 0:S(String(A)))]}const q=[];if(typeof A>"u")return q;let G;if(t==="comma"&&aa(A))C&&f&&(A=WA(A,f)),G=[{value:A.length>0?A.join(",")||null:void 0}];else if(aa(p))G=p;else{const Ae=Object.keys(A);G=m?Ae.sort(m):Ae}const ie=c?String(e).replace(/\./g,"%2E"):String(e),de=r&&aa(A)&&A.length===1?ie+"[]":ie;if(i&&aa(A)&&A.length===0)return de+"[]";for(let Ae=0;Ae<G.length;++Ae){const ke=G[Ae],st=typeof ke=="object"&&typeof ke.value<"u"?ke.value:A[ke];if(u&&st===null)continue;const Ue=y&&c?ke.replace(/\./g,"%2E"):ke,ae=aa(A)?typeof t=="function"?t(de,Ue):de:de+(y?"."+Ue:"["+Ue+"]");R.set(n,P);const Q=new WeakMap;Q.set(u0,R),GP(q,WP(st,ae,t,r,i,o,u,c,t==="comma"&&C&&aa(A)?null:f,p,m,y,b,_,S,C,T,Q))}return q}function eq(n=Jr){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Jr.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=VP;if(typeof n.format<"u"){if(!uS(GA,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=GA[t];let i=Jr.filter;(typeof n.filter=="function"||aa(n.filter))&&(i=n.filter);let o;if(n.arrayFormat&&n.arrayFormat in qP?o=n.arrayFormat:"indices"in n?o=n.indices?"indices":"repeat":o=Jr.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Jr.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Jr.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Jr.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Jr.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Jr.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Jr.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Jr.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Jr.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Jr.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Jr.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Jr.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Jr.strictNullHandling}}function tq(n,e={}){let t=n;const r=eq(e);let i,o;typeof r.filter=="function"?(o=r.filter,t=o("",t)):aa(r.filter)&&(o=r.filter,i=o);const u=[];if(typeof t!="object"||t===null)return"";const c=qP[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const p=new WeakMap;for(let b=0;b<i.length;++b){const _=i[b];r.skipNulls&&t[_]===null||GP(u,WP(t[_],_,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,p))}const m=u.join(r.delimiter);let y=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""}function rq(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}let KA;function uE(n){let e;return(KA??(e=new globalThis.TextEncoder,KA=e.encode.bind(e)))(n)}let ZA;function YA(n){let e;return(ZA??(e=new globalThis.TextDecoder,ZA=e.decode.bind(e)))(n)}var ba,_a;class py{constructor(){ba.set(this,void 0),_a.set(this,void 0),tt(this,ba,new Uint8Array),tt(this,_a,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?uE(e):e;tt(this,ba,rq([B(this,ba,"f"),t]));const r=[];let i;for(;(i=nq(B(this,ba,"f"),B(this,_a,"f")))!=null;){if(i.carriage&&B(this,_a,"f")==null){tt(this,_a,i.index);continue}if(B(this,_a,"f")!=null&&(i.index!==B(this,_a,"f")+1||i.carriage)){r.push(YA(B(this,ba,"f").subarray(0,B(this,_a,"f")-1))),tt(this,ba,B(this,ba,"f").subarray(B(this,_a,"f"))),tt(this,_a,null);continue}const o=B(this,_a,"f")!==null?i.preceding-1:i.preceding,u=YA(B(this,ba,"f").subarray(0,o));r.push(u),tt(this,ba,B(this,ba,"f").subarray(i.index)),tt(this,_a,null)}return r}flush(){return B(this,ba,"f").length?this.decode(`
`):[]}}ba=new WeakMap,_a=new WeakMap;py.NEWLINE_CHARS=new Set([`
`,"\r"]);py.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function nq(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function aq(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}const $g={off:0,error:200,warn:300,info:400,debug:500},XA=(n,e,t)=>{if(n){if(M3($g,n))return n;vn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys($g))}`)}};function Pf(){}function Ym(n,e,t){return!e||$g[n]>$g[t]?Pf:e[n].bind(e)}const iq={error:Pf,warn:Pf,info:Pf,debug:Pf};let QA=new WeakMap;function vn(n){const e=n.logger,t=n.logLevel??"off";if(!e)return iq;const r=QA.get(e);if(r&&r[0]===t)return r[1];const i={error:Ym("error",e,t),warn:Ym("warn",e,t),info:Ym("info",e,t),debug:Ym("debug",e,t)};return QA.set(e,[t,i]),i}const Tu=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Of;class Gi{constructor(e,t,r){this.iterator=e,Of.set(this,void 0),this.controller=t,tt(this,Of,r)}static fromSSEResponse(e,t,r){let i=!1;const o=r?vn(r):console;async function*u(){if(i)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of sq(e,t))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let p;try{p=JSON.parse(f.data)}catch(m){throw o.error("Could not parse message into JSON:",f.data),o.error("From chunk:",f.raw),m}if(p&&p.error)throw new wn(void 0,p.error,void 0,e.headers);yield p}else{let p;try{p=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new wn(void 0,p.error,p.message,void 0);yield{event:f.event,data:p}}}c=!0}catch(f){if(sS(f))return;throw f}finally{c||t.abort()}}return new Gi(u,t,r)}static fromReadableStream(e,t,r){let i=!1;async function*o(){const c=new py,f=zP(e);for await(const p of f)for(const m of c.decode(p))yield m;for(const p of c.flush())yield p}async function*u(){if(i)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of o())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(sS(f))return;throw f}finally{c||t.abort()}}return new Gi(u,t,r)}[(Of=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const u=r.next();e.push(u),t.push(u)}return o.shift()}});return[new Gi(()=>i(e),this.controller,B(this,Of,"f")),new Gi(()=>i(t),this.controller,B(this,Of,"f"))]}toReadableStream(){const e=this;let t;return FP({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await t.next();if(o)return r.close();const u=uE(JSON.stringify(i)+`
`);r.enqueue(u)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*sq(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ye("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ye("Attempted to iterate over a response with no body");const t=new uq,r=new py,i=zP(n.body);for await(const o of oq(i))for(const u of r.decode(o)){const c=t.decode(u);c&&(yield c)}for(const o of r.flush()){const u=t.decode(o);u&&(yield u)}}async function*oq(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?uE(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let o;for(;(o=aq(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class uq{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=lq(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function lq(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function JP(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,u=await(async()=>{var y;if(e.options.stream)return vn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Gi.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const c=t.headers.get("content-type"),f=(y=c==null?void 0:c.split(";")[0])==null?void 0:y.trim();if((f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))){const b=await t.json();return KP(b,t)}return await t.text()})();return vn(n).debug(`[${r}] response parsed`,Tu({retryOfRequestLogID:i,url:t.url,status:t.status,body:u,durationMs:Date.now()-o})),u}function KP(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var $f;class my extends Promise{constructor(e,t,r=JP){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,$f.set(this,void 0),tt(this,$f,e)}_thenUnwrap(e){return new my(B(this,$f,"f"),this.responsePromise,async(t,r)=>KP(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(B(this,$f,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}$f=new WeakMap;var Xm;class ZP{constructor(e,t,r,i){Xm.set(this,void 0),tt(this,Xm,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ye("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await B(this,Xm,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Xm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class cq extends my{constructor(e,t,r){super(e,t,async(i,o)=>new r(i,o.response,await JP(i,o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class gy extends ZP{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ir extends ZP{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),t=(r=e[e.length-1])==null?void 0:r.id;return t?{...this.options,query:{...L3(this.options.query),after:t}}:null}}const YP=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Gf(n,e,t){return YP(),new File(n,e??"unknown_file",t)}function bg(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const XP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",Pu=async(n,e)=>({...n,body:await fq(n.body,e)}),ek=new WeakMap;function dq(n){const e=typeof n=="function"?n:n.fetch,t=ek.get(e);if(t)return t;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new i(o).text()}catch{return!0}})();return ek.set(e,r),r}const fq=async(n,e)=>{if(!await dq(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([r,i])=>lS(t,r,i))),t},hq=n=>n instanceof Blob&&"name"in n,lS=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,Gf([await t.blob()],bg(t)));else if(XP(t))n.append(e,Gf([await new Response(BP(t)).blob()],bg(t)));else if(hq(t))n.append(e,t,bg(t));else if(Array.isArray(t))await Promise.all(t.map(r=>lS(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,i])=>lS(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},QP=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",pq=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&QP(n),mq=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function gq(n,e,t){if(YP(),n=await n,pq(n))return n instanceof File?n:Gf([await n.arrayBuffer()],n.name);if(mq(n)){const i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Gf(await cS(i),e,t)}const r=await cS(n);if(e||(e=bg(n)),!(t!=null&&t.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(t={...t,type:i})}return Gf(r,e,t)}async function cS(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(QP(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(XP(n))for await(const r of n)e.push(...await cS(r));else{const r=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${r?`; constructor: ${r}`:""}${yq(n)}`)}return e}function yq(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class at{constructor(e){this._client=e}}function e$(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const tk=Object.freeze(Object.create(null)),vq=(n=e$)=>function(t,...r){if(t.length===1)return t[0];let i=!1;const o=[],u=t.reduce((m,y,b)=>{var C;/[?#]/.test(y)&&(i=!0);const _=r[b];let S=(i?encodeURIComponent:n)(""+_);return b!==r.length&&(_==null||typeof _=="object"&&_.toString===((C=Object.getPrototypeOf(Object.getPrototypeOf(_.hasOwnProperty??tk)??tk))==null?void 0:C.toString))&&(S=_+"",o.push({start:m.length+y.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),m+y+(b===r.length?"":S)},""),c=u.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=f.exec(c))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((m,y)=>m.start-y.start),o.length>0){let m=0;const y=o.reduce((b,_)=>{const S=" ".repeat(_.start-m),C="^".repeat(_.length);return m=_.start+_.length,b+S+C},"");throw new Ye(`Path parameters result in path with invalid segments:
${o.map(b=>b.error).join(`
`)}
${u}
${y}`)}return u},pe=vq(e$);let t$=class extends at{list(e,t={},r){return this._client.getAPIList(pe`/chat/completions/${e}/messages`,Ir,{query:t,...r})}};function Ig(n){return n!==void 0&&"function"in n&&n.function!==void 0}function bq(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function lE(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Rh(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function _q(n,e){return!e||!r$(e)?{...n,choices:n.choices.map(t=>(n$(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:cE(n,e)}function cE(n,e){const t=n.choices.map(r=>{var i;if(r.finish_reason==="length")throw new UP;if(r.finish_reason==="content_filter")throw new MP;return n$(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(o=>Sq(e,o)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?wq(e,r.message.content):null}}});return{...n,choices:t}}function wq(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Sq(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(i=>{var o;return Ig(i)&&((o=i.function)==null?void 0:o.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Rh(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Eq(n,e){var r;if(!n||!("tools"in n)||!n.tools)return!1;const t=(r=n.tools)==null?void 0:r.find(i=>{var o;return Ig(i)&&((o=i.function)==null?void 0:o.name)===e.function.name});return Ig(t)&&(Rh(t)||(t==null?void 0:t.function.strict)||!1)}function r$(n){var e;return lE(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Rh(t)||t.type==="function"&&t.function.strict===!0))??!1}function n$(n){for(const e of n||[])if(e.type!=="function")throw new Ye(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function xq(n){for(const e of n??[]){if(e.type!=="function")throw new Ye(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ye(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const jg=n=>(n==null?void 0:n.role)==="assistant",a$=n=>(n==null?void 0:n.role)==="tool";var dS,_g,wg,If,jf,Sg,Df,Rs,Lf,Dg,Lg,nc,i$;class dE{constructor(){dS.add(this),this.controller=new AbortController,_g.set(this,void 0),wg.set(this,()=>{}),If.set(this,()=>{}),jf.set(this,void 0),Sg.set(this,()=>{}),Df.set(this,()=>{}),Rs.set(this,{}),Lf.set(this,!1),Dg.set(this,!1),Lg.set(this,!1),nc.set(this,!1),tt(this,_g,new Promise((e,t)=>{tt(this,wg,e,"f"),tt(this,If,t,"f")})),tt(this,jf,new Promise((e,t)=>{tt(this,Sg,e,"f"),tt(this,Df,t,"f")})),B(this,_g,"f").catch(()=>{}),B(this,jf,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},B(this,dS,"m",i$).bind(this))},0)}_connected(){this.ended||(B(this,wg,"f").call(this),this._emit("connect"))}get ended(){return B(this,Lf,"f")}get errored(){return B(this,Dg,"f")}get aborted(){return B(this,Lg,"f")}abort(){this.controller.abort()}on(e,t){return(B(this,Rs,"f")[e]||(B(this,Rs,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=B(this,Rs,"f")[e];if(!r)return this;const i=r.findIndex(o=>o.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(B(this,Rs,"f")[e]||(B(this,Rs,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{tt(this,nc,!0),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){tt(this,nc,!0),await B(this,jf,"f")}_emit(e,...t){if(B(this,Lf,"f"))return;e==="end"&&(tt(this,Lf,!0),B(this,Sg,"f").call(this));const r=B(this,Rs,"f")[e];if(r&&(B(this,Rs,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!B(this,nc,"f")&&!(r!=null&&r.length)&&Promise.reject(i),B(this,If,"f").call(this,i),B(this,Df,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!B(this,nc,"f")&&!(r!=null&&r.length)&&Promise.reject(i),B(this,If,"f").call(this,i),B(this,Df,"f").call(this,i),this._emit("end")}}_emitFinal(){}}_g=new WeakMap,wg=new WeakMap,If=new WeakMap,jf=new WeakMap,Sg=new WeakMap,Df=new WeakMap,Rs=new WeakMap,Lf=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,nc=new WeakMap,dS=new WeakSet,i$=function(e){if(tt(this,Dg,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Ea),e instanceof Ea)return tt(this,Lg,!0),this._emit("abort",e);if(e instanceof Ye)return this._emit("error",e);if(e instanceof Error){const t=new Ye(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ye(String(e)))};function Tq(n){return typeof n.parse=="function"}var Hn,fS,Ug,hS,pS,mS,s$,o$;const Cq=10;class u$ extends dE{constructor(){super(...arguments),Hn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),a$(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(jg(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),B(this,Hn,"m",fS).call(this)}async finalMessage(){return await this.done(),B(this,Hn,"m",Ug).call(this)}async finalFunctionToolCall(){return await this.done(),B(this,Hn,"m",hS).call(this)}async finalFunctionToolCallResult(){return await this.done(),B(this,Hn,"m",pS).call(this)}async totalUsage(){return await this.done(),B(this,Hn,"m",mS).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=B(this,Hn,"m",Ug).call(this);t&&this._emit("finalMessage",t);const r=B(this,Hn,"m",fS).call(this);r&&this._emit("finalContent",r);const i=B(this,Hn,"m",hS).call(this);i&&this._emit("finalFunctionToolCall",i);const o=B(this,Hn,"m",pS).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",B(this,Hn,"m",mS).call(this))}async _createChatCompletion(e,t,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),B(this,Hn,"m",s$).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(cE(o,t))}async _runChatCompletion(e,t,r){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){var _,S,C;const i="tool",{tool_choice:o="auto",stream:u,...c}=t,f=typeof o!="string"&&o.type==="function"&&((_=o==null?void 0:o.function)==null?void 0:_.name),{maxChatCompletions:p=Cq}=r||{},m=t.tools.map(T=>{if(Rh(T)){if(!T.$callback)throw new Ye("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:T.$callback,name:T.function.name,description:T.function.description||"",parameters:T.function.parameters,parse:T.$parseRaw,strict:!0}}}return T}),y={};for(const T of m)T.type==="function"&&(y[T.function.name||T.function.function.name]=T.function);const b="tools"in t?m.map(T=>T.type==="function"?{type:"function",function:{name:T.function.name||T.function.function.name,parameters:T.function.parameters,description:T.function.description,strict:T.function.strict}}:T):void 0;for(const T of t.messages)this._addMessage(T,!1);for(let T=0;T<p;++T){const A=(S=(await this._createChatCompletion(e,{...c,tool_choice:o,tools:b,messages:[...this.messages]},r)).choices[0])==null?void 0:S.message;if(!A)throw new Ye("missing message in ChatCompletion response");if(!((C=A.tool_calls)!=null&&C.length))return;for(const O of A.tool_calls){if(O.type!=="function")continue;const P=O.id,{name:j,arguments:q}=O.function,G=y[j];if(G){if(f&&f!==j){const ke=`Invalid tool_call: ${JSON.stringify(j)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:i,tool_call_id:P,content:ke});continue}}else{const ke=`Invalid tool_call: ${JSON.stringify(j)}. Available options are: ${Object.keys(y).map(st=>JSON.stringify(st)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:P,content:ke});continue}let ie;try{ie=Tq(G)?await G.parse(q):q}catch(ke){const st=ke instanceof Error?ke.message:String(ke);this._addMessage({role:i,tool_call_id:P,content:st});continue}const de=await G.function(ie,this),Ae=B(this,Hn,"m",o$).call(this,de);if(this._addMessage({role:i,tool_call_id:P,content:Ae}),f)return}}}}Hn=new WeakSet,fS=function(){return B(this,Hn,"m",Ug).call(this).content??null},Ug=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(jg(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Ye("stream ended without producing a ChatCompletionMessage with role=assistant")},hS=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(jg(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.filter(o=>o.type==="function").at(-1))==null?void 0:t.function}},pS=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(a$(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(o=>o.type==="function"&&o.id===t.tool_call_id))}))return t.content}},mS=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},s$=function(e){if(e.n!=null&&e.n>1)throw new Ye("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},o$=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class fE extends u${static runTools(e,t,r){const i=new fE,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,o)),i}_addMessage(e,t=!0){super._addMessage(e,t),jg(e)&&e.content&&this._emit("content",e.content)}}const l$=1,c$=2,d$=4,f$=8,h$=16,p$=32,m$=64,g$=128,y$=256,v$=g$|y$,b$=h$|p$|v$|m$,_$=l$|c$|b$,w$=d$|f$,Rq=_$|w$,sn={STR:l$,NUM:c$,ARR:d$,OBJ:f$,NULL:h$,BOOL:p$,NAN:m$,INFINITY:g$,MINUS_INFINITY:y$,INF:v$,SPECIAL:b$,ATOM:_$,COLLECTION:w$,ALL:Rq};class Oq extends Error{}class Aq extends Error{}function kq(n,e=sn.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return Nq(n.trim(),e)}const Nq=(n,e)=>{const t=n.length;let r=0;const i=b=>{throw new Oq(`${b} at position ${r}`)},o=b=>{throw new Aq(`${b} at position ${r}`)},u=()=>(y(),r>=t&&i("Unexpected end of input"),n[r]==='"'?c():n[r]==="{"?f():n[r]==="["?p():n.substring(r,r+4)==="null"||sn.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||sn.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||sn.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||sn.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||sn.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||sn.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):m()),c=()=>{const b=r;let _=!1;for(r++;r<t&&(n[r]!=='"'||_&&n[r-1]==="\\");)_=n[r]==="\\"?!_:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(b,++r-Number(_)))}catch(S){o(String(S))}else if(sn.STR&e)try{return JSON.parse(n.substring(b,r-Number(_))+'"')}catch{return JSON.parse(n.substring(b,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},f=()=>{r++,y();const b={};try{for(;n[r]!=="}";){if(y(),r>=t&&sn.OBJ&e)return b;const _=c();y(),r++;try{const S=u();Object.defineProperty(b,_,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(sn.OBJ&e)return b;throw S}y(),n[r]===","&&r++}}catch{if(sn.OBJ&e)return b;i("Expected '}' at end of object")}return r++,b},p=()=>{r++;const b=[];try{for(;n[r]!=="]";)b.push(u()),y(),n[r]===","&&r++}catch{if(sn.ARR&e)return b;i("Expected ']' at end of array")}return r++,b},m=()=>{if(r===0){n==="-"&&sn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(_){if(sn.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}o(String(_))}}const b=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(sn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(b,r))}catch{n.substring(b,r)==="-"&&sn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(b,n.lastIndexOf("e")))}catch(S){o(String(S))}}},y=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return u()},rk=n=>kq(n,sn.ALL^sn.NUM);var qr,Ts,Wl,uo,l0,Qm,c0,d0,f0,eg,h0,nk;class lh extends u${constructor(e){super(),qr.add(this),Ts.set(this,void 0),Wl.set(this,void 0),uo.set(this,void 0),tt(this,Ts,e),tt(this,Wl,[])}get currentChatCompletionSnapshot(){return B(this,uo,"f")}static fromReadableStream(e){const t=new lh(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new lh(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,r){var u;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),B(this,qr,"m",l0).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const c of o)B(this,qr,"m",c0).call(this,c);if((u=o.controller.signal)!=null&&u.aborted)throw new Ea;return this._addChatCompletion(B(this,qr,"m",eg).call(this))}async _fromReadableStream(e,t){var u;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),B(this,qr,"m",l0).call(this),this._connected();const i=Gi.fromReadableStream(e,this.controller);let o;for await(const c of i)o&&o!==c.id&&this._addChatCompletion(B(this,qr,"m",eg).call(this)),B(this,qr,"m",c0).call(this,c),o=c.id;if((u=i.controller.signal)!=null&&u.aborted)throw new Ea;return this._addChatCompletion(B(this,qr,"m",eg).call(this))}[(Ts=new WeakMap,Wl=new WeakMap,uo=new WeakMap,qr=new WeakSet,l0=function(){this.ended||tt(this,uo,void 0)},Qm=function(t){let r=B(this,Wl,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},B(this,Wl,"f")[t.index]=r,r)},c0=function(t){var i,o,u,c,f,p,m,y,b,_,S,C,T,R,A;if(this.ended)return;const r=B(this,qr,"m",nk).call(this,t);this._emit("chunk",t,r);for(const O of t.choices){const P=r.choices[O.index];O.delta.content!=null&&((i=P.message)==null?void 0:i.role)==="assistant"&&((o=P.message)!=null&&o.content)&&(this._emit("content",O.delta.content,P.message.content),this._emit("content.delta",{delta:O.delta.content,snapshot:P.message.content,parsed:P.message.parsed})),O.delta.refusal!=null&&((u=P.message)==null?void 0:u.role)==="assistant"&&((c=P.message)!=null&&c.refusal)&&this._emit("refusal.delta",{delta:O.delta.refusal,snapshot:P.message.refusal}),((f=O.logprobs)==null?void 0:f.content)!=null&&((p=P.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(m=O.logprobs)==null?void 0:m.content,snapshot:((y=P.logprobs)==null?void 0:y.content)??[]}),((b=O.logprobs)==null?void 0:b.refusal)!=null&&((_=P.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=O.logprobs)==null?void 0:S.refusal,snapshot:((C=P.logprobs)==null?void 0:C.refusal)??[]});const j=B(this,qr,"m",Qm).call(this,P);P.finish_reason&&(B(this,qr,"m",f0).call(this,P),j.current_tool_call_index!=null&&B(this,qr,"m",d0).call(this,P,j.current_tool_call_index));for(const q of O.delta.tool_calls??[])j.current_tool_call_index!==q.index&&(B(this,qr,"m",f0).call(this,P),j.current_tool_call_index!=null&&B(this,qr,"m",d0).call(this,P,j.current_tool_call_index)),j.current_tool_call_index=q.index;for(const q of O.delta.tool_calls??[]){const G=(T=P.message.tool_calls)==null?void 0:T[q.index];G!=null&&G.type&&((G==null?void 0:G.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(R=G.function)==null?void 0:R.name,index:q.index,arguments:G.function.arguments,parsed_arguments:G.function.parsed_arguments,arguments_delta:((A=q.function)==null?void 0:A.arguments)??""}):(G==null||G.type,void 0))}}},d0=function(t,r){var u,c,f;if(B(this,qr,"m",Qm).call(this,t).done_tool_calls.has(r))return;const o=(u=t.message.tool_calls)==null?void 0:u[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const p=(f=(c=B(this,Ts,"f"))==null?void 0:c.tools)==null?void 0:f.find(m=>Ig(m)&&m.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:Rh(p)?p.$parseRaw(o.function.arguments):p!=null&&p.function.strict?JSON.parse(o.function.arguments):null})}else o.type},f0=function(t){var i,o;const r=B(this,qr,"m",Qm).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const u=B(this,qr,"m",h0).call(this);this._emit("content.done",{content:t.message.content,parsed:u?u.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(o=t.logprobs)!=null&&o.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},eg=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const t=B(this,uo,"f");if(!t)throw new Ye("request ended without sending any chunks");return tt(this,uo,void 0),tt(this,Wl,[]),Pq(t,B(this,Ts,"f"))},h0=function(){var r;const t=(r=B(this,Ts,"f"))==null?void 0:r.response_format;return lE(t)?t:null},nk=function(t){var r,i,o,u;let c=B(this,uo,"f");const{choices:f,...p}=t;c?Object.assign(c,p):c=tt(this,uo,{...p,choices:[]});for(const{delta:m,finish_reason:y,index:b,logprobs:_=null,...S}of t.choices){let C=c.choices[b];if(C||(C=c.choices[b]={finish_reason:y,index:b,message:{},logprobs:_,...S}),_)if(!C.logprobs)C.logprobs=Object.assign({},_);else{const{content:q,refusal:G,...ie}=_;Object.assign(C.logprobs,ie),q&&((r=C.logprobs).content??(r.content=[]),C.logprobs.content.push(...q)),G&&((i=C.logprobs).refusal??(i.refusal=[]),C.logprobs.refusal.push(...G))}if(y&&(C.finish_reason=y,B(this,Ts,"f")&&r$(B(this,Ts,"f")))){if(y==="length")throw new UP;if(y==="content_filter")throw new MP}if(Object.assign(C,S),!m)continue;const{content:T,refusal:R,function_call:A,role:O,tool_calls:P,...j}=m;if(Object.assign(C.message,j),R&&(C.message.refusal=(C.message.refusal||"")+R),O&&(C.message.role=O),A&&(C.message.function_call?(A.name&&(C.message.function_call.name=A.name),A.arguments&&((o=C.message.function_call).arguments??(o.arguments=""),C.message.function_call.arguments+=A.arguments)):C.message.function_call=A),T&&(C.message.content=(C.message.content||"")+T,!C.message.refusal&&B(this,qr,"m",h0).call(this)&&(C.message.parsed=rk(C.message.content))),P){C.message.tool_calls||(C.message.tool_calls=[]);for(const{index:q,id:G,type:ie,function:de,...Ae}of P){const ke=(u=C.message.tool_calls)[q]??(u[q]={});Object.assign(ke,Ae),G&&(ke.id=G),ie&&(ke.type=ie),de&&(ke.function??(ke.function={name:de.name??"",arguments:""})),de!=null&&de.name&&(ke.function.name=de.name),de!=null&&de.arguments&&(ke.function.arguments+=de.arguments,Eq(B(this,Ts,"f"),ke)&&(ke.function.parsed_arguments=rk(ke.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",i=>{const o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,u)=>t.push({resolve:o,reject:u})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Gi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Pq(n,e){const{id:t,choices:r,created:i,model:o,system_fingerprint:u,...c}=n,f={...c,id:t,choices:r.map(({message:p,finish_reason:m,index:y,logprobs:b,..._})=>{if(!m)throw new Ye(`missing finish_reason for choice ${y}`);const{content:S=null,function_call:C,tool_calls:T,...R}=p,A=p.role;if(!A)throw new Ye(`missing role for choice ${y}`);if(C){const{arguments:O,name:P}=C;if(O==null)throw new Ye(`missing function_call.arguments for choice ${y}`);if(!P)throw new Ye(`missing function_call.name for choice ${y}`);return{..._,message:{content:S,function_call:{arguments:O,name:P},role:A,refusal:p.refusal??null},finish_reason:m,index:y,logprobs:b}}return T?{..._,index:y,finish_reason:m,logprobs:b,message:{...R,role:A,content:S,refusal:p.refusal??null,tool_calls:T.map((O,P)=>{const{function:j,type:q,id:G,...ie}=O,{arguments:de,name:Ae,...ke}=j||{};if(G==null)throw new Ye(`missing choices[${y}].tool_calls[${P}].id
${tg(n)}`);if(q==null)throw new Ye(`missing choices[${y}].tool_calls[${P}].type
${tg(n)}`);if(Ae==null)throw new Ye(`missing choices[${y}].tool_calls[${P}].function.name
${tg(n)}`);if(de==null)throw new Ye(`missing choices[${y}].tool_calls[${P}].function.arguments
${tg(n)}`);return{...ie,id:G,type:q,function:{...ke,name:Ae,arguments:de}}})}}:{..._,message:{...R,content:S,role:A,refusal:p.refusal??null},finish_reason:m,index:y,logprobs:b}}),created:i,model:o,object:"chat.completion",...u?{system_fingerprint:u}:{}};return _q(f,e)}function tg(n){return JSON.stringify(n)}class Mg extends lh{static fromReadableStream(e){const t=new Mg(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){const i=new Mg(t),o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,o)),i}}let hE=class extends at{constructor(){super(...arguments),this.messages=new t$(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(pe`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(pe`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",Ir,{query:e,...t})}delete(e,t){return this._client.delete(pe`/chat/completions/${e}`,t)}parse(e,t){return xq(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>cE(r,e))}runTools(e,t){return e.stream?Mg.runTools(this._client,e,t):fE.runTools(this._client,e,t)}stream(e,t){return lh.createChatCompletion(this._client,e,t)}};hE.Messages=t$;class pE extends at{constructor(){super(...arguments),this.completions=new hE(this._client)}}pE.Completions=hE;const S$=Symbol("brand.privateNullableHeaders");function*$q(n){if(!n)return;if(S$ in n){const{values:r,nulls:i}=n;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():zA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=zA(r[1])?r[1]:[r[1]];let u=!1;for(const c of o)c!==void 0&&(e&&!u&&(u=!0,yield[i,null]),yield[i,c])}}const Ge=n=>{const e=new Headers,t=new Set;for(const r of n){const i=new Set;for(const[o,u]of $q(r)){const c=o.toLowerCase();i.has(c)||(e.delete(o),i.add(c)),u===null?(e.delete(o),t.add(c)):(e.append(o,u),t.delete(c))}}return{[S$]:!0,values:e,nulls:t}};class E$ extends at{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:Ge([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class x$ extends at{create(e,t){return this._client.post("/audio/transcriptions",Pu({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class T$ extends at{create(e,t){return this._client.post("/audio/translations",Pu({body:e,...t,__metadata:{model:e.model}},this._client))}}class Oh extends at{constructor(){super(...arguments),this.transcriptions=new x$(this._client),this.translations=new T$(this._client),this.speech=new E$(this._client)}}Oh.Transcriptions=x$;Oh.Translations=T$;Oh.Speech=E$;class C$ extends at{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(pe`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",Ir,{query:e,...t})}cancel(e,t){return this._client.post(pe`/batches/${e}/cancel`,t)}}class R$ extends at{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(pe`/assistants/${e}`,{...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(pe`/assistants/${e}`,{body:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},t){return this._client.getAPIList("/assistants",Ir,{query:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(pe`/assistants/${e}`,{...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class O$ extends at{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class A$ extends at{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class yy extends at{constructor(){super(...arguments),this.sessions=new O$(this._client),this.transcriptionSessions=new A$(this._client)}}yy.Sessions=O$;yy.TranscriptionSessions=A$;class k$ extends at{create(e,t,r){return this._client.post(pe`/threads/${e}/messages`,{body:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){const{thread_id:i}=t;return this._client.get(pe`/threads/${i}/messages/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){const{thread_id:i,...o}=t;return this._client.post(pe`/threads/${i}/messages/${e}`,{body:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(pe`/threads/${e}/messages`,Ir,{query:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t,r){const{thread_id:i}=t;return this._client.delete(pe`/threads/${i}/messages/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class N$ extends at{retrieve(e,t,r){const{thread_id:i,run_id:o,...u}=t;return this._client.get(pe`/threads/${i}/runs/${o}/steps/${e}`,{query:u,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t,r){const{thread_id:i,...o}=t;return this._client.getAPIList(pe`/threads/${i}/runs/${e}/steps`,Ir,{query:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const Iq=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var p0={};const Jl=n=>{var e,t,r,i;if(typeof globalThis.process<"u")return((e=p0==null?void 0:p0[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:i.trim()};var bn,Ou,gS,Hi,Eg,mi,Au,sc,Ru,Fg,Sa,xg,Tg,Wf,Uf,Mf,ak,ik,sk,ok,uk,lk,ck;class Jf extends dE{constructor(){super(...arguments),bn.add(this),gS.set(this,[]),Hi.set(this,{}),Eg.set(this,{}),mi.set(this,void 0),Au.set(this,void 0),sc.set(this,void 0),Ru.set(this,void 0),Fg.set(this,void 0),Sa.set(this,void 0),xg.set(this,void 0),Tg.set(this,void 0),Wf.set(this,void 0)}[(gS=new WeakMap,Hi=new WeakMap,Eg=new WeakMap,mi=new WeakMap,Au=new WeakMap,sc=new WeakMap,Ru=new WeakMap,Fg=new WeakMap,Sa=new WeakMap,xg=new WeakMap,Tg=new WeakMap,Wf=new WeakMap,bn=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,u)=>t.push({resolve:o,reject:u})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Ou;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var o;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Gi.fromReadableStream(e,this.controller);for await(const u of i)B(this,bn,"m",Uf).call(this,u);if((o=i.controller.signal)!=null&&o.aborted)throw new Ea;return this._addRun(B(this,bn,"m",Mf).call(this))}toReadableStream(){return new Gi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i){const o=new Ou;return o._run(()=>o._runToolAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,r,i){var f;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},c=await e.submitToolOutputs(t,u,{...i,signal:this.controller.signal});this._connected();for await(const p of c)B(this,bn,"m",Uf).call(this,p);if((f=c.controller.signal)!=null&&f.aborted)throw new Ea;return this._addRun(B(this,bn,"m",Mf).call(this))}static createThreadAssistantStream(e,t,r){const i=new Ou;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const o=new Ou;return o._run(()=>o._runAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return B(this,xg,"f")}currentRun(){return B(this,Tg,"f")}currentMessageSnapshot(){return B(this,mi,"f")}currentRunStepSnapshot(){return B(this,Wf,"f")}async finalRunSteps(){return await this.done(),Object.values(B(this,Hi,"f"))}async finalMessages(){return await this.done(),Object.values(B(this,Eg,"f"))}async finalRun(){if(await this.done(),!B(this,Au,"f"))throw Error("Final run was not received.");return B(this,Au,"f")}async _createThreadAssistantStream(e,t,r){var c;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},u=await e.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const f of u)B(this,bn,"m",Uf).call(this,f);if((c=u.controller.signal)!=null&&c.aborted)throw new Ea;return this._addRun(B(this,bn,"m",Mf).call(this))}async _createAssistantStream(e,t,r,i){var f;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},c=await e.create(t,u,{...i,signal:this.controller.signal});this._connected();for await(const p of c)B(this,bn,"m",Uf).call(this,p);if((f=c.controller.signal)!=null&&f.aborted)throw new Ea;return this._addRun(B(this,bn,"m",Mf).call(this))}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let o=e[r];if(o==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(s0(o)&&s0(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(u=>typeof u=="string"||typeof u=="number")){o.push(...i);continue}for(const u of i){if(!s0(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const c=u.index;if(c==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=o[c];f==null?o.push(u):o[c]=this.accumulateDelta(f,u)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);e[r]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,i){return await this._createAssistantStream(t,e,r,i)}async _runToolAssistantStream(e,t,r,i){return await this._createToolAssistantStream(t,e,r,i)}}Ou=Jf,Uf=function(e){if(!this.ended)switch(tt(this,xg,e),B(this,bn,"m",sk).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":B(this,bn,"m",ck).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":B(this,bn,"m",ik).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":B(this,bn,"m",ak).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Mf=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");if(!B(this,Au,"f"))throw Error("Final run has not been received");return B(this,Au,"f")},ak=function(e){const[t,r]=B(this,bn,"m",uk).call(this,e,B(this,mi,"f"));tt(this,mi,t),B(this,Eg,"f")[t.id]=t;for(const i of r){const o=t.content[i.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,u=t.content[i.index];if(u&&u.type=="text")this._emit("textDelta",o,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=B(this,sc,"f")){if(B(this,Ru,"f"))switch(B(this,Ru,"f").type){case"text":this._emit("textDone",B(this,Ru,"f").text,B(this,mi,"f"));break;case"image_file":this._emit("imageFileDone",B(this,Ru,"f").image_file,B(this,mi,"f"));break}tt(this,sc,i.index)}tt(this,Ru,t.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(B(this,sc,"f")!==void 0){const i=e.data.content[B(this,sc,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,B(this,mi,"f"));break;case"text":this._emit("textDone",i.text,B(this,mi,"f"));break}}B(this,mi,"f")&&this._emit("messageDone",e.data),tt(this,mi,void 0)}},ik=function(e){const t=B(this,bn,"m",ok).call(this,e);switch(tt(this,Wf,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==B(this,Fg,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):(B(this,Sa,"f")&&this._emit("toolCallDone",B(this,Sa,"f")),tt(this,Fg,o.index),tt(this,Sa,t.step_details.tool_calls[o.index]),B(this,Sa,"f")&&this._emit("toolCallCreated",B(this,Sa,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":tt(this,Wf,void 0),e.data.step_details.type=="tool_calls"&&B(this,Sa,"f")&&(this._emit("toolCallDone",B(this,Sa,"f")),tt(this,Sa,void 0)),this._emit("runStepDone",e.data,t);break}},sk=function(e){B(this,gS,"f").push(e),this._emit("event",e)},ok=function(e){switch(e.event){case"thread.run.step.created":return B(this,Hi,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=B(this,Hi,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Ou.accumulateDelta(t,r.delta);B(this,Hi,"f")[e.data.id]=i}return B(this,Hi,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":B(this,Hi,"f")[e.data.id]=e.data;break}if(B(this,Hi,"f")[e.data.id])return B(this,Hi,"f")[e.data.id];throw new Error("No snapshot available")},uk=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in t.content){let u=t.content[o.index];t.content[o.index]=B(this,bn,"m",lk).call(this,o,u)}else t.content[o.index]=o,r.push(o);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},lk=function(e,t){return Ou.accumulateDelta(t,e)},ck=function(e){switch(tt(this,Tg,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":tt(this,Au,e.data),B(this,Sa,"f")&&(this._emit("toolCallDone",B(this,Sa,"f")),tt(this,Sa,void 0));break}};let mE=class extends at{constructor(){super(...arguments),this.steps=new N$(this._client)}create(e,t,r){const{include:i,...o}=t;return this._client.post(pe`/threads/${e}/runs`,{query:{include:i},body:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:t.stream??!1})}retrieve(e,t,r){const{thread_id:i}=t;return this._client.get(pe`/threads/${i}/runs/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){const{thread_id:i,...o}=t;return this._client.post(pe`/threads/${i}/runs/${e}`,{body:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(pe`/threads/${e}/runs`,Ir,{query:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,t,r){const{thread_id:i}=t;return this._client.post(pe`/threads/${i}/runs/${e}/cancel`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,t,r){return Jf.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){var o;const i=Ge([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=r==null?void 0:r.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const{data:u,response:c}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const p=c.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(f=m)}}await Ch(f);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(e,t,r){return Jf.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){const{thread_id:i,...o}=t;return this._client.post(pe`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,r){const i=await this.submitToolOutputs(e,t,r);return await this.poll(i.id,t,r)}submitToolOutputsStream(e,t,r){return Jf.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}};mE.Steps=N$;class vy extends at{constructor(){super(...arguments),this.runs=new mE(this._client),this.messages=new k$(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(pe`/threads/${e}`,{...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(pe`/threads/${e}`,{body:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t){return this._client.delete(pe`/threads/${e}`,{...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return Jf.createThreadAssistantStream(e,this._client.beta.threads,t)}}vy.Runs=mE;vy.Messages=k$;class Ah extends at{constructor(){super(...arguments),this.realtime=new yy(this._client),this.assistants=new R$(this._client),this.threads=new vy(this._client)}}Ah.Realtime=yy;Ah.Assistants=R$;Ah.Threads=vy;class P$ extends at{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class $$ extends at{retrieve(e,t,r){const{container_id:i}=t;return this._client.get(pe`/containers/${i}/files/${e}/content`,{...r,headers:Ge([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let gE=class extends at{constructor(){super(...arguments),this.content=new $$(this._client)}create(e,t,r){return this._client.post(pe`/containers/${e}/files`,Pu({body:t,...r},this._client))}retrieve(e,t,r){const{container_id:i}=t;return this._client.get(pe`/containers/${i}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(pe`/containers/${e}/files`,Ir,{query:t,...r})}delete(e,t,r){const{container_id:i}=t;return this._client.delete(pe`/containers/${i}/files/${e}`,{...r,headers:Ge([{Accept:"*/*"},r==null?void 0:r.headers])})}};gE.Content=$$;class yE extends at{constructor(){super(...arguments),this.files=new gE(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(pe`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",Ir,{query:e,...t})}delete(e,t){return this._client.delete(pe`/containers/${e}`,{...t,headers:Ge([{Accept:"*/*"},t==null?void 0:t.headers])})}}yE.Files=gE;class I$ extends at{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&vn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?o:(vn(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(u=>(u&&u.data&&u.data.forEach(c=>{const f=c.embedding;c.embedding=Iq(f)}),u)))}}class j$ extends at{retrieve(e,t,r){const{eval_id:i,run_id:o}=t;return this._client.get(pe`/evals/${i}/runs/${o}/output_items/${e}`,r)}list(e,t,r){const{eval_id:i,...o}=t;return this._client.getAPIList(pe`/evals/${i}/runs/${e}/output_items`,Ir,{query:o,...r})}}class vE extends at{constructor(){super(...arguments),this.outputItems=new j$(this._client)}create(e,t,r){return this._client.post(pe`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){const{eval_id:i}=t;return this._client.get(pe`/evals/${i}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(pe`/evals/${e}/runs`,Ir,{query:t,...r})}delete(e,t,r){const{eval_id:i}=t;return this._client.delete(pe`/evals/${i}/runs/${e}`,r)}cancel(e,t,r){const{eval_id:i}=t;return this._client.post(pe`/evals/${i}/runs/${e}`,r)}}vE.OutputItems=j$;class bE extends at{constructor(){super(...arguments),this.runs=new vE(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(pe`/evals/${e}`,t)}update(e,t,r){return this._client.post(pe`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",Ir,{query:e,...t})}delete(e,t){return this._client.delete(pe`/evals/${e}`,t)}}bE.Runs=vE;let D$=class extends at{create(e,t){return this._client.post("/files",Pu({body:e,...t},this._client))}retrieve(e,t){return this._client.get(pe`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",Ir,{query:e,...t})}delete(e,t){return this._client.delete(pe`/files/${e}`,t)}content(e,t){return this._client.get(pe`/files/${e}/content`,{...t,headers:Ge([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let u=await this.retrieve(e);for(;!u.status||!i.has(u.status);)if(await Ch(t),u=await this.retrieve(e),Date.now()-o>r)throw new hy({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return u}};class L$ extends at{}let U$=class extends at{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class _E extends at{constructor(){super(...arguments),this.graders=new U$(this._client)}}_E.Graders=U$;class M$ extends at{create(e,t,r){return this._client.getAPIList(pe`/fine_tuning/checkpoints/${e}/permissions`,gy,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(pe`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){const{fine_tuned_model_checkpoint:i}=t;return this._client.delete(pe`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let wE=class extends at{constructor(){super(...arguments),this.permissions=new M$(this._client)}};wE.Permissions=M$;class F$ extends at{list(e,t={},r){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/checkpoints`,Ir,{query:t,...r})}}class SE extends at{constructor(){super(...arguments),this.checkpoints=new F$(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(pe`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",Ir,{query:e,...t})}cancel(e,t){return this._client.post(pe`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/events`,Ir,{query:t,...r})}pause(e,t){return this._client.post(pe`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(pe`/fine_tuning/jobs/${e}/resume`,t)}}SE.Checkpoints=F$;class xc extends at{constructor(){super(...arguments),this.methods=new L$(this._client),this.jobs=new SE(this._client),this.checkpoints=new wE(this._client),this.alpha=new _E(this._client)}}xc.Methods=L$;xc.Jobs=SE;xc.Checkpoints=wE;xc.Alpha=_E;class B$ extends at{}class EE extends at{constructor(){super(...arguments),this.graderModels=new B$(this._client)}}EE.GraderModels=B$;class z$ extends at{createVariation(e,t){return this._client.post("/images/variations",Pu({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",Pu({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class V$ extends at{retrieve(e,t){return this._client.get(pe`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",gy,e)}delete(e,t){return this._client.delete(pe`/models/${e}`,t)}}class H$ extends at{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function jq(n,e){return!e||!Lq(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:q$(n,e)}function q$(n,e){const t=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Fq(e,i)};if(i.type==="message"){const o=i.content.map(u=>u.type==="output_text"?{...u,parsed:Dq(e,u.text)}:u);return{...i,content:o}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||yS(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function Dq(n,e){var t,r,i,o;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=n.text)==null?void 0:i.format)?((o=n.text)==null?void 0:o.format).$parseRaw(e):JSON.parse(e)}function Lq(n){var e;return!!lE((e=n.text)==null?void 0:e.format)}function Uq(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function Mq(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function Fq(n,e){const t=Mq(n.tools??[],e.name);return{...e,...e,parsed_arguments:Uq(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function yS(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}var Kl,rg,lo,ng,dk,fk,hk,pk;class xE extends dE{constructor(e){super(),Kl.add(this),rg.set(this,void 0),lo.set(this,void 0),ng.set(this,void 0),tt(this,rg,e)}static createResponse(e,t,r){const i=new xE(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,r){var c;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),B(this,Kl,"m",dk).call(this);let o,u=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),u=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const f of o)B(this,Kl,"m",fk).call(this,f,u);if((c=o.controller.signal)!=null&&c.aborted)throw new Ea;return B(this,Kl,"m",hk).call(this)}[(rg=new WeakMap,lo=new WeakMap,ng=new WeakMap,Kl=new WeakSet,dk=function(){this.ended||tt(this,lo,void 0)},fk=function(t,r){if(this.ended)return;const i=(u,c)=>{(r==null||c.sequence_number>r)&&this._emit(u,c)},o=B(this,Kl,"m",pk).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const u=o.output[t.output_index];if(!u)throw new Ye(`missing output at index ${t.output_index}`);if(u.type==="message"){const c=u.content[t.content_index];if(!c)throw new Ye(`missing content at index ${t.content_index}`);if(c.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${c.type}`);i("response.output_text.delta",{...t,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const u=o.output[t.output_index];if(!u)throw new Ye(`missing output at index ${t.output_index}`);u.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:u.arguments});break}default:i(t.type,t);break}},hk=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const t=B(this,lo,"f");if(!t)throw new Ye("request ended without sending any events");tt(this,lo,void 0);const r=Bq(t,B(this,rg,"f"));return tt(this,ng,r),r},pk=function(t){let r=B(this,lo,"f");if(!r){if(t.type!=="response.created")throw new Ye(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=tt(this,lo,t.response),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const i=r.output[t.output_index];if(!i)throw new Ye(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new Ye(`missing output at index ${t.output_index}`);if(i.type==="message"){const o=i.content[t.content_index];if(!o)throw new Ye(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new Ye(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{tt(this,lo,t.response);break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,u)=>t.push({resolve:o,reject:u})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=B(this,ng,"f");if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}}function Bq(n,e){return jq(n,e)}class G$ extends at{list(e,t={},r){return this._client.getAPIList(pe`/responses/${e}/input_items`,Ir,{query:t,...r})}}class TE extends at{constructor(){super(...arguments),this.inputItems=new G$(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&yS(r),r))}retrieve(e,t={},r){return this._client.get(pe`/responses/${e}`,{query:t,...r,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&yS(i),i))}delete(e,t){return this._client.delete(pe`/responses/${e}`,{...t,headers:Ge([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>q$(r,e))}stream(e,t){return xE.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(pe`/responses/${e}/cancel`,t)}}TE.InputItems=G$;class W$ extends at{create(e,t,r){return this._client.post(pe`/uploads/${e}/parts`,Pu({body:t,...r},this._client))}}class CE extends at{constructor(){super(...arguments),this.parts=new W$(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(pe`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(pe`/uploads/${e}/complete`,{body:t,...r})}}CE.Parts=W$;const zq=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class J$ extends at{create(e,t,r){return this._client.post(pe`/vector_stores/${e}/file_batches`,{body:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){const{vector_store_id:i}=t;return this._client.get(pe`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,t,r){const{vector_store_id:i}=t;return this._client.post(pe`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){const i=await this.create(e,t);return await this.poll(e,i.id,r)}listFiles(e,t,r){const{vector_store_id:i,...o}=t;return this._client.getAPIList(pe`/vector_stores/${i}/file_batches/${e}/files`,Ir,{query:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,t,r){var o;const i=Ge([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=r==null?void 0:r.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const{data:u,response:c}=await this.retrieve(t,{vector_store_id:e},{...r,headers:i}).withResponse();switch(u.status){case"in_progress":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const p=c.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(f=m)}}await Ch(f);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=(i==null?void 0:i.maxConcurrency)??5,u=Math.min(o,t.length),c=this._client,f=t.values(),p=[...r];async function m(b){for(let _ of b){const S=await c.files.create({file:_,purpose:"assistants"},i);p.push(S.id)}}const y=Array(u).fill(f).map(m);return await zq(y),await this.createAndPoll(e,{file_ids:p})}}class K$ extends at{create(e,t,r){return this._client.post(pe`/vector_stores/${e}/files`,{body:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){const{vector_store_id:i}=t;return this._client.get(pe`/vector_stores/${i}/files/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){const{vector_store_id:i,...o}=t;return this._client.post(pe`/vector_stores/${i}/files/${e}`,{body:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(pe`/vector_stores/${e}/files`,Ir,{query:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t,r){const{vector_store_id:i}=t;return this._client.delete(pe`/vector_stores/${i}/files/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}async poll(e,t,r){var o;const i=Ge([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=r==null?void 0:r.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const u=await this.retrieve(t,{vector_store_id:e},{...r,headers:i}).withResponse(),c=u.data;switch(c.status){case"in_progress":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const p=u.response.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(f=m)}}await Ch(f);break;case"failed":case"completed":return c}}}async upload(e,t,r){const i=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,t,r){const i=await this.upload(e,t,r);return await this.poll(e,i.id,r)}content(e,t,r){const{vector_store_id:i}=t;return this._client.getAPIList(pe`/vector_stores/${i}/files/${e}/content`,gy,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class by extends at{constructor(){super(...arguments),this.files=new K$(this._client),this.fileBatches=new J$(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(pe`/vector_stores/${e}`,{...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(pe`/vector_stores/${e}`,{body:t,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",Ir,{query:e,...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(pe`/vector_stores/${e}`,{...t,headers:Ge([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,r){return this._client.getAPIList(pe`/vector_stores/${e}/search`,gy,{body:t,method:"post",...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}by.Files=K$;by.FileBatches=J$;var ac,Z$,Cg;class Y$ extends at{constructor(){super(...arguments),ac.add(this)}async unwrap(e,t,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,t,r,i),JSON.parse(e)}async verifySignature(e,t,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");B(this,ac,"m",Z$).call(this,r);const o=Ge([t]).values,u=B(this,ac,"m",Cg).call(this,o,"webhook-signature"),c=B(this,ac,"m",Cg).call(this,o,"webhook-timestamp"),f=B(this,ac,"m",Cg).call(this,o,"webhook-id"),p=parseInt(c,10);if(isNaN(p))throw new Nf("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-p>i)throw new Nf("Webhook timestamp is too old");if(p>m+i)throw new Nf("Webhook timestamp is too new");const y=u.split(" ").map(C=>C.startsWith("v1,")?C.substring(3):C),b=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),_=f?`${f}.${c}.${e}`:`${c}.${e}`,S=await crypto.subtle.importKey("raw",b,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const C of y)try{const T=Buffer.from(C,"base64");if(await crypto.subtle.verify("HMAC",S,T,new TextEncoder().encode(_)))return}catch{continue}throw new Nf("The given webhook signature does not match the expected signature")}}ac=new WeakSet,Z$=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Cg=function(e,t){if(!e)throw new Error("Headers are required");const r=e.get(t);if(r==null)throw new Error(`Missing required header: ${t}`);return r};var vS,RE,Rg,X$;let Ct=class{constructor({baseURL:e=Jl("OPENAI_BASE_URL"),apiKey:t=Jl("OPENAI_API_KEY"),organization:r=Jl("OPENAI_ORG_ID")??null,project:i=Jl("OPENAI_PROJECT_ID")??null,webhookSecret:o=Jl("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if(vS.add(this),Rg.set(this,void 0),this.completions=new P$(this),this.chat=new pE(this),this.embeddings=new I$(this),this.files=new D$(this),this.images=new z$(this),this.audio=new Oh(this),this.moderations=new H$(this),this.models=new V$(this),this.fineTuning=new xc(this),this.graders=new EE(this),this.vectorStores=new by(this),this.webhooks=new Y$(this),this.beta=new Ah(this),this.batches=new C$(this),this.uploads=new CE(this),this.responses=new TE(this),this.evals=new bE(this),this.containers=new yE(this),t===void 0)throw new Ye("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const c={apiKey:t,organization:r,project:i,webhookSecret:o,...u,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&z3())throw new Ye(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??RE.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=XA(c.logLevel,"ClientOptions.logLevel",this)??XA(Jl("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??W3(),tt(this,Rg,K3),this._options=c,this.apiKey=t,this.organization=r,this.project=i,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return Ge([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return tq(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${rc}`}defaultIdempotencyKey(){return`stainless-node-retry-${AP()}`}makeStatusError(e,t,r,i){return wn.generate(e,t,r,i)}buildURL(e,t,r){const i=!B(this,vS,"m",X$).call(this)&&r||this.baseURL,o=D3(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return U3(u)||(t={...u,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:t,...i})))}request(e,t=null){return new my(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var R,A;const i=await e,o=i.maxRetries??this.maxRetries;t==null&&(t=o),await this.prepareOptions(i);const{req:u,url:c,timeout:f}=await this.buildRequest(i,{retryCount:o-t});await this.prepareRequest(u,{url:c,options:i});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(vn(this).debug(`[${p}] sending request`,Tu({retryOfRequestLogID:r,method:i.method,url:c,options:i,headers:u.headers})),(R=i.signal)!=null&&R.aborted)throw new Ea;const b=new AbortController,_=await this.fetchWithTimeout(c,u,f,b).catch(oS),S=Date.now();if(_ instanceof Error){const O=`retrying, ${t} attempts remaining`;if((A=i.signal)!=null&&A.aborted)throw new Ea;const P=sS(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(t)return vn(this).info(`[${p}] connection ${P?"timed out":"failed"} - ${O}`),vn(this).debug(`[${p}] connection ${P?"timed out":"failed"} (${O})`,Tu({retryOfRequestLogID:r,url:c,durationMs:S-y,message:_.message})),this.retryRequest(i,t,r??p);throw vn(this).info(`[${p}] connection ${P?"timed out":"failed"} - error; no more retries left`),vn(this).debug(`[${p}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Tu({retryOfRequestLogID:r,url:c,durationMs:S-y,message:_.message})),P?new hy:new fy({cause:_})}const C=[..._.headers.entries()].filter(([O])=>O==="x-request-id").map(([O,P])=>", "+O+": "+JSON.stringify(P)).join(""),T=`[${p}${m}${C}] ${u.method} ${c} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${S-y}ms`;if(!_.ok){const O=await this.shouldRetry(_);if(t&&O){const de=`retrying, ${t} attempts remaining`;return await J3(_.body),vn(this).info(`${T} - ${de}`),vn(this).debug(`[${p}] response error (${de})`,Tu({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:S-y})),this.retryRequest(i,t,r??p,_.headers)}const P=O?"error; no more retries left":"error; not retryable";vn(this).info(`${T} - ${P}`);const j=await _.text().catch(de=>oS(de).message),q=B3(j),G=q?void 0:j;throw vn(this).debug(`[${p}] response error (${P})`,Tu({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:G,durationMs:Date.now()-y})),this.makeStatusError(_.status,q,G,_.headers)}return vn(this).info(T),vn(this).debug(`[${p}] response start`,Tu({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:S-y})),{response:_,options:i,controller:b,requestLogID:p,retryOfRequestLogID:r,startTime:y}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){const r=this.makeRequest(t,null,void 0);return new cq(this,r,e)}async fetchWithTimeout(e,t,r,i){const{signal:o,method:u,...c}=t||{};o&&o.addEventListener("abort",()=>i.abort());const f=setTimeout(()=>i.abort(),r),p=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:i.signal,...p?{duplex:"half"}:{},method:"GET",...c};u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,i){let o;const u=i==null?void 0:i.get("retry-after-ms");if(u){const f=parseFloat(u);Number.isNaN(f)||(o=f)}const c=i==null?void 0:i.get("retry-after");if(c&&!o){const f=parseFloat(c);Number.isNaN(f)?o=Date.parse(c)-Date.now():o=f*1e3}if(!(o&&0<=o&&o<60*1e3)){const f=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,f)}return await Ch(o),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,u=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:i,path:o,query:u,defaultBaseURL:c}=r,f=this.buildURL(o,u,c);"timeout"in r&&F3("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:p,body:m}=this.buildBody({options:r}),y=await this.buildHeaders({options:e,method:i,bodyHeaders:p,retryCount:t});return{req:{method:i,headers:y,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const u=Ge([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...G3(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ge([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:BP(e)}:B(this,Rg,"f").call(this,{body:e,headers:r})}};RE=Ct,Rg=new WeakMap,vS=new WeakSet,X$=function(){return this.baseURL!=="https://api.openai.com/v1"};Ct.OpenAI=RE;Ct.DEFAULT_TIMEOUT=6e5;Ct.OpenAIError=Ye;Ct.APIError=wn;Ct.APIConnectionError=fy;Ct.APIConnectionTimeoutError=hy;Ct.APIUserAbortError=Ea;Ct.NotFoundError=$P;Ct.ConflictError=IP;Ct.RateLimitError=DP;Ct.BadRequestError=kP;Ct.AuthenticationError=NP;Ct.InternalServerError=LP;Ct.PermissionDeniedError=PP;Ct.UnprocessableEntityError=jP;Ct.InvalidWebhookSignatureError=Nf;Ct.toFile=gq;Ct.Completions=P$;Ct.Chat=pE;Ct.Embeddings=I$;Ct.Files=D$;Ct.Images=z$;Ct.Audio=Oh;Ct.Moderations=H$;Ct.Models=V$;Ct.FineTuning=xc;Ct.Graders=EE;Ct.VectorStores=by;Ct.Webhooks=Y$;Ct.Beta=Ah;Ct.Batches=C$;Ct.Uploads=CE;Ct.Responses=TE;Ct.Evals=bE;Ct.Containers=yE;function mk(n,e=OE){n=n.trim();const t=n.indexOf("```");if(t===-1)return e(n);let r=n.substring(t+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const i=r.indexOf("```");let o=r;return i!==-1&&(o=r.substring(0,i)),e(o.trim())}function OE(n){if(typeof n>"u")return null;try{return JSON.parse(n)}catch{}let e="";const t=[];let r=!1,i=!1;for(let o of n){if(r)o==='"'&&!i?r=!1:o===`
`&&!i?o="\\n":o==="\\"?i=!i:i=!1;else if(o==='"')r=!0,i=!1;else if(o==="{")t.push("}");else if(o==="[")t.push("]");else if(o==="}"||o==="]")if(t&&t[t.length-1]===o)t.pop();else return null;e+=o}r&&(e+='"');for(let o=t.length-1;o>=0;o-=1)e+=t[o];try{return JSON.parse(e)}catch{return null}}var Vq=function(n,e){if(typeof n!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,n.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const Hq=iy(Vq);var Q$={exports:{}};const qq=/[\p{Lu}]/u,Gq=/[\p{Ll}]/u,gk=/^[\p{Lu}](?![\p{Lu}])/gu,e1=/([\p{Alpha}\p{N}_]|$)/u,t1=/[_.\- ]+/,Wq=new RegExp("^"+t1.source),yk=new RegExp(t1.source+e1.source,"gu"),vk=new RegExp("\\d+"+e1.source,"gu"),Jq=(n,e,t)=>{let r=!1,i=!1,o=!1;for(let u=0;u<n.length;u++){const c=n[u];r&&qq.test(c)?(n=n.slice(0,u)+"-"+n.slice(u),r=!1,o=i,i=!0,u++):i&&o&&Gq.test(c)?(n=n.slice(0,u-1)+"-"+n.slice(u-1),o=i,i=!1,r=!0):(r=e(c)===c&&t(c)!==c,o=i,i=t(c)===c&&e(c)!==c)}return n},Kq=(n,e)=>(gk.lastIndex=0,n.replace(gk,t=>e(t))),Zq=(n,e)=>(yk.lastIndex=0,vk.lastIndex=0,n.replace(yk,(t,r)=>e(r)).replace(vk,t=>e(t))),r1=(n,e)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(n)?n=n.map(o=>o.trim()).filter(o=>o.length).join("-"):n=n.trim(),n.length===0)return"";const t=e.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(e.locale),r=e.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(e.locale);return n.length===1?e.pascalCase?r(n):t(n):(n!==t(n)&&(n=Jq(n,t,r)),n=n.replace(Wq,""),e.preserveConsecutiveUppercase?n=Kq(n,t):n=t(n),e.pascalCase&&(n=r(n.charAt(0))+n.slice(1)),Zq(n,r))};Q$.exports=r1;Q$.exports.default=r1;function Yq(n,e){return(e==null?void 0:e[n])||Hq(n)}function Xq(n,e,t){const r={};for(const i in n)Object.hasOwn(n,i)&&(r[e(i,t)]=n[i]);return r}function bk(n){return Array.isArray(n)?[...n]:{...n}}function Qq(n,e){const t=bk(n);for(const[r,i]of Object.entries(e)){const[o,...u]=r.split(".").reverse();let c=t;for(const f of u.reverse()){if(c[f]===void 0)break;c[f]=bk(c[f]),c=c[f]}c[o]!==void 0&&(c[o]={lc:1,type:"secret",id:[i]})}return t}function n1(n){const e=Object.getPrototypeOf(n);return typeof n.lc_name=="function"&&(typeof e.lc_name!="function"||n.lc_name()!==e.lc_name())?n.lc_name():n.name}class Ns{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,n1(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Ns||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce((i,o)=>(i[o]=o in this?this[o]:this.lc_kwargs[o],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(t,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(t).forEach(i=>{let o=this,u=r;const[c,...f]=i.split(".").reverse();for(const p of f.reverse()){if(!(p in o)||o[p]===void 0)return;(!(p in u)||u[p]===void 0)&&(typeof o[p]=="object"&&o[p]!=null?u[p]={}:Array.isArray(o[p])&&(u[p]=[])),o=o[p],u=u[p]}c in o&&o[c]!==void 0&&(u[c]=u[c]||o[c])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:Xq(Object.keys(t).length?Qq(r,t):r,Yq,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function $u(n){return typeof n=="object"&&n!==null&&"type"in n&&typeof n.type=="string"&&"source_type"in n&&(n.source_type==="url"||n.source_type==="base64"||n.source_type==="text"||n.source_type==="id")}function e5(n){return $u(n)&&n.source_type==="url"&&"url"in n&&typeof n.url=="string"}function t5(n){return $u(n)&&n.source_type==="base64"&&"data"in n&&typeof n.data=="string"}function r5(n){if($u(n)){if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url}};if(n.source_type==="base64"){if(!n.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${n.mime_type};base64,${n.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function _k(n){const e=n.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${n}" - does not match type/subtype format.`);const t=e[0].trim(),r=e[1].trim();if(t===""||r==="")throw new Error(`Invalid mime type: "${n}" - type or subtype is empty.`);const i={};for(const o of n.split(";").slice(1)){const u=o.split("=");if(u.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${n}".`);const c=u[0].trim(),f=u[1].trim();if(c==="")throw new Error(`Invalid parameter syntax in mime type: "${n}".`);i[c]=f}return{type:t,subtype:r,parameters:i}}function wk({dataUrl:n,asTypedArray:e=!1}){const t=n.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(t){r=t[1].toLowerCase();const i=e?Uint8Array.from(atob(t[2]),o=>o.charCodeAt(0)):t[2];return{mime_type:r,data:i}}}function a1(n,e){if(n.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(n)}if(n.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(n)}if(n.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(n)}if(n.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(n)}throw new Error(`Unable to convert content block type '${n.type}' to provider-specific format: not recognized.`)}function Tc(n,e){return typeof n=="string"?n===""?e:typeof e=="string"?n+e:Array.isArray(e)&&e.some(t=>$u(t))?[{type:"text",source_type:"text",text:n},...e]:[{type:"text",text:n},...e]:Array.isArray(e)?_y(n,e)??[...n,...e]:e===""?n:Array.isArray(n)&&n.some(t=>$u(t))?[...n,{type:"file",source_type:"text",text:e}]:[...n,{type:"text",text:e}]}function n5(n,e){return n==="error"||e==="error"?"error":"success"}function a5(n,e){function t(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(u=>t(u,i+1));const o={};for(const u of Object.keys(r))o[u]=t(r[u],i+1);return o}return JSON.stringify(t(n,0),null,2)}class Ji extends Ns{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const t=a5(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}}function Gn(n,e){const t={...n};for(const[r,i]of Object.entries(e))if(t[r]==null)t[r]=i;else{if(i==null)continue;if(typeof t[r]!=typeof i||Array.isArray(t[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof t[r]=="string"){if(r==="type")continue;t[r]+=i}else if(typeof t[r]=="object"&&!Array.isArray(t[r]))t[r]=Gn(t[r],i);else if(Array.isArray(t[r]))t[r]=_y(t[r],i);else{if(t[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return t}function _y(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0||e===void 0)return n||e;{const t=[...n];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const i=t.findIndex(o=>o.index===r.index);i!==-1?t[i]=Gn(t[i],r):t.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;t.push(r)}return t}}}function i5(n,e){if(!n&&!e)throw new Error("Cannot merge two undefined objects.");if(!n||!e)return n||e;if(typeof n!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof n}
Right ${typeof e}`);if(typeof n=="string"&&typeof e=="string")return n+e;if(Array.isArray(n)&&Array.isArray(e))return _y(n,e);if(typeof n=="object"&&typeof e=="object")return Gn(n,e);if(n===e)return n;throw new Error(`Can not merge objects of different types.
Left ${n}
Right ${e}`)}class Cc extends Ji{}function s5(n){return typeof n.role=="string"}function Rc(n){return typeof(n==null?void 0:n._getType)=="function"}function o5(n){return Rc(n)&&typeof n.concat=="function"}function u5(n){return n!=null&&typeof n=="object"&&"lc_direct_tool_output"in n&&n.lc_direct_tool_output===!0}class bS extends Ji{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status,this.metadata=e.metadata}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class AE extends Cc{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new AE({content:Tc(this.content,e.content),additional_kwargs:Gn(this.additional_kwargs,e.additional_kwargs),response_metadata:Gn(this.response_metadata,e.response_metadata),artifact:i5(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:n5(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function l5(n){const e=[],t=[];for(const r of n)if(r.function){const i=r.function.name;try{const o=JSON.parse(r.function.arguments),u={name:i||"",args:o||{},id:r.id};e.push(u)}catch{t.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,t]}class Iu extends Ji{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){var i;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{r=e;const o=(i=r.additional_kwargs)==null?void 0:i.tool_calls,u=r.tool_calls;o!=null&&o.length>0&&(u===void 0||u.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&u===void 0){const[c,f]=l5(o);r.tool_calls=c??[],r.invalid_tool_calls=f??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function kh(n){return n._getType()==="ai"}function Sk(n){return n._getType()==="ai"}class Ao extends Cc{constructor(e){var r,i;let t;if(typeof e=="string")t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const o=e.tool_call_chunks.reduce((f,p)=>{const m=p.id||`fallback-${p.index||0}`;return f[m]=f[m]??[],f[m].push(p),f},{}),u=[],c=[];for(const[f,p]of Object.entries(o)){let m={};const y=((r=p[0])==null?void 0:r.name)??"",b=p.map(C=>C.args||"").join(""),_=b.length?b:"{}",S=((i=p[0])==null?void 0:i.id)||f;try{if(m=OE(_),m===null||typeof m!="object"||Array.isArray(m))throw new Error("Malformed tool call chunk args.");u.push({name:y,args:m,id:S,type:"tool_call"})}catch{c.push({name:y,args:_,id:S,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:u,invalid_tool_calls:c,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,i,o,u,c,f,p,m,y,b,_,S,C,T,R,A,O,P,j,q,G,ie,de,Ae,ke,st,Ue,ae,Q,ye,te,Se,_e,Pe,Ze,$e,ht,Rt,ut,ir;const t={content:Tc(this.content,e.content),additional_kwargs:Gn(this.additional_kwargs,e.additional_kwargs),response_metadata:Gn(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Wt=_y(this.tool_call_chunks,e.tool_call_chunks);Wt!==void 0&&Wt.length>0&&(t.tool_call_chunks=Wt)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Wt={...(((i=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:i.audio)!==void 0||((u=(o=e.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:u.audio)!==void 0)&&{audio:(((f=(c=this.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:f.audio)??0)+(((m=(p=e.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:m.audio)??0)},...(((b=(y=this.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:b.cache_read)!==void 0||((S=(_=e.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:S.cache_read)!==void 0)&&{cache_read:(((T=(C=this.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:T.cache_read)??0)+(((A=(R=e.usage_metadata)==null?void 0:R.input_token_details)==null?void 0:A.cache_read)??0)},...(((P=(O=this.usage_metadata)==null?void 0:O.input_token_details)==null?void 0:P.cache_creation)!==void 0||((q=(j=e.usage_metadata)==null?void 0:j.input_token_details)==null?void 0:q.cache_creation)!==void 0)&&{cache_creation:(((ie=(G=this.usage_metadata)==null?void 0:G.input_token_details)==null?void 0:ie.cache_creation)??0)+(((Ae=(de=e.usage_metadata)==null?void 0:de.input_token_details)==null?void 0:Ae.cache_creation)??0)}},Tr={...(((st=(ke=this.usage_metadata)==null?void 0:ke.output_token_details)==null?void 0:st.audio)!==void 0||((ae=(Ue=e.usage_metadata)==null?void 0:Ue.output_token_details)==null?void 0:ae.audio)!==void 0)&&{audio:(((ye=(Q=this.usage_metadata)==null?void 0:Q.output_token_details)==null?void 0:ye.audio)??0)+(((Se=(te=e.usage_metadata)==null?void 0:te.output_token_details)==null?void 0:Se.audio)??0)},...(((Pe=(_e=this.usage_metadata)==null?void 0:_e.output_token_details)==null?void 0:Pe.reasoning)!==void 0||(($e=(Ze=e.usage_metadata)==null?void 0:Ze.output_token_details)==null?void 0:$e.reasoning)!==void 0)&&{reasoning:(((Rt=(ht=this.usage_metadata)==null?void 0:ht.output_token_details)==null?void 0:Rt.reasoning)??0)+(((ir=(ut=e.usage_metadata)==null?void 0:ut.output_token_details)==null?void 0:ir.reasoning)??0)}},cr=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Ht=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Jt={input_tokens:cr.input_tokens+Ht.input_tokens,output_tokens:cr.output_tokens+Ht.output_tokens,total_tokens:cr.total_tokens+Ht.total_tokens,...Object.keys(Wt).length>0&&{input_token_details:Wt},...Object.keys(Tr).length>0&&{output_token_details:Tr}};t.usage_metadata=Jt}return new Ao(t)}}class Uu extends Ji{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Uu}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class wy extends Cc{static lc_name(){return"ChatMessageChunk"}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new wy({content:Tc(this.content,e.content),additional_kwargs:Gn(this.additional_kwargs,e.additional_kwargs),response_metadata:Gn(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class c5 extends Ji{static lc_name(){return"FunctionMessage"}constructor(e,t){typeof e=="string"&&(e={content:e,name:t}),super(e)}_getType(){return"function"}}class Sy extends Cc{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Sy({content:Tc(this.content,e.content),additional_kwargs:Gn(this.additional_kwargs,e.additional_kwargs),response_metadata:Gn(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Oc extends Ji{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}}class Ey extends Cc{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){return new Ey({content:Tc(this.content,e.content),additional_kwargs:Gn(this.additional_kwargs,e.additional_kwargs),response_metadata:Gn(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class _S extends Ji{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}}class ch extends Cc{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){return new ch({content:Tc(this.content,e.content),additional_kwargs:Gn(this.additional_kwargs,e.additional_kwargs),response_metadata:Gn(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function xy(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function Kf(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="tool_call")}function d5(n){return!!(n&&typeof n=="object"&&"toolCall"in n&&n.toolCall!=null&&typeof n.toolCall=="object"&&"id"in n.toolCall&&typeof n.toolCall.id=="string")}class dh extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}function f5(n){return Kf(n)?n:typeof n.id=="string"&&n.type==="function"&&typeof n.function=="object"&&n.function!==null&&"arguments"in n.function&&typeof n.function.arguments=="string"&&"name"in n.function&&typeof n.function.name=="string"?{id:n.id,args:JSON.parse(n.function.arguments),name:n.function.name,type:"tool_call"}:n}function h5(n){return typeof n=="object"&&n!=null&&n.lc===1&&Array.isArray(n.id)&&n.kwargs!=null&&typeof n.kwargs=="object"}function m0(n){let e,t;if(h5(n)){const r=n.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",t=n.kwargs}else{const{type:r,...i}=n;e=r,t=i}if(e==="human"||e==="user")return new Oc(t);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=t;if(!Array.isArray(r))return new Iu(t);const o=r.map(f5);return new Iu({...i,tool_calls:o})}else{if(e==="system")return new _S(t);if(e==="developer")return new _S({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in t)return new bS({...t,content:t.content,tool_call_id:t.tool_call_id,name:t.name});throw xy(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(n,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function _o(n){if(typeof n=="string")return new Oc(n);if(Rc(n))return n;if(Array.isArray(n)){const[e,t]=n;return m0({type:e,content:t})}else if(s5(n)){const{role:e,...t}=n;return m0({...t,type:e})}else return m0(n)}function i1(n,e="Human",t="AI"){const r=[];for(const i of n){let o;if(i._getType()==="human")o=e;else if(i._getType()==="ai")o=t;else if(i._getType()==="system")o="System";else if(i._getType()==="function")o="Function";else if(i._getType()==="tool")o="Tool";else if(i._getType()==="generic")o=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const u=i.name?`${i.name}, `:"",c=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${o}: ${u}${c}`)}return r.join(`
`)}function p5(n){var t;const e=n._getType();if(e==="human")return new Ey({...n});if(e==="ai"){let r={...n};return"tool_calls"in r&&(r={...r,tool_call_chunks:(t=r.tool_calls)==null?void 0:t.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Ao({...r})}else{if(e==="system")return new ch({...n});if(e==="function")return new Sy({...n});if(Uu.isInstance(n))return new wy({...n});throw new Error("Unknown message type.")}}var Dt;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const o={};for(const u of i)o[u]=u;return o},n.getValidEnumValues=i=>{const o=n.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),u={};for(const c of o)u[c]=i[c];return n.objectValues(u)},n.objectValues=i=>n.objectKeys(i).map(function(o){return i[o]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const u in i)Object.prototype.hasOwnProperty.call(i,u)&&o.push(u);return o},n.find=(i,o)=>{for(const u of i)if(o(u))return u},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}n.joinValues=r,n.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Dt||(Dt={}));var Ek;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Ek||(Ek={}));const Ne=Dt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mo=n=>{switch(typeof n){case"undefined":return Ne.undefined;case"string":return Ne.string;case"number":return Number.isNaN(n)?Ne.nan:Ne.number;case"boolean":return Ne.boolean;case"function":return Ne.function;case"bigint":return Ne.bigint;case"symbol":return Ne.symbol;case"object":return Array.isArray(n)?Ne.array:n===null?Ne.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ne.promise:typeof Map<"u"&&n instanceof Map?Ne.map:typeof Set<"u"&&n instanceof Set?Ne.set:typeof Date<"u"&&n instanceof Date?Ne.date:Ne.object;default:return Ne.unknown}},oe=Dt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ps extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(i);else if(u.code==="invalid_return_type")i(u.returnTypeError);else if(u.code==="invalid_arguments")i(u.argumentsError);else if(u.path.length===0)r._errors.push(t(u));else{let c=r,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(t(u))):c[p]=c[p]||{_errors:[]},c=c[p],f++}}};return i(this),r}static assert(e){if(!(e instanceof Ps))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Dt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)if(i.path.length>0){const o=i.path[0];t[o]=t[o]||[],t[o].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ps.create=n=>new Ps(n);const wS=(n,e)=>{let t;switch(n.code){case oe.invalid_type:n.received===Ne.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case oe.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Dt.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:t=`Unrecognized key(s) in object: ${Dt.joinValues(n.keys,", ")}`;break;case oe.invalid_union:t="Invalid input";break;case oe.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Dt.joinValues(n.options)}`;break;case oe.invalid_enum_value:t=`Invalid enum value. Expected ${Dt.joinValues(n.options)}, received '${n.received}'`;break;case oe.invalid_arguments:t="Invalid function arguments";break;case oe.invalid_return_type:t="Invalid function return type";break;case oe.invalid_date:t="Invalid date";break;case oe.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Dt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case oe.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case oe.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case oe.custom:t="Invalid input";break;case oe.invalid_intersection_types:t="Intersection results could not be merged";break;case oe.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case oe.not_finite:t="Number must be finite";break;default:t=e.defaultError,Dt.assertNever(n)}return{message:t}};let m5=wS;function g5(){return m5}const y5=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,o=[...t,...i.path||[]],u={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="";const f=r.filter(p=>!!p).slice().reverse();for(const p of f)c=p(u,{data:e,defaultError:c}).message;return{...i,path:o,message:c}};function Te(n,e){const t=g5(),r=y5({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===wS?void 0:wS].filter(i=>!!i)});n.common.issues.push(r)}class xa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return ot;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const o=await i.key,u=await i.value;r.push({key:o,value:u})}return xa.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:o,value:u}=i;if(o.status==="aborted"||u.status==="aborted")return ot;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||i.alwaysSet)&&(r[o.value]=u.value)}return{status:e.value,value:r}}}const ot=Object.freeze({status:"aborted"}),Ff=n=>({status:"dirty",value:n}),za=n=>({status:"valid",value:n}),xk=n=>n.status==="aborted",Tk=n=>n.status==="dirty",fc=n=>n.status==="valid",Bg=n=>typeof Promise<"u"&&n instanceof Promise;var Le;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Le||(Le={}));class ko{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ck=(n,e)=>{if(fc(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ps(n.common.issues);return this._error=t,this._error}}};function _t(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(u,c)=>{const{message:f}=n;return u.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:f??r??c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:f??t??c.defaultError}},description:i}}class $t{get description(){return this._def.description}_getType(e){return mo(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xa,ctx:{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Bg(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Ck(r,i)}"~validate"(e){var r,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:t});return fc(o)?{value:o.value}:{issues:t.common.issues}}catch(o){(i=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(o=>fc(o)?{value:o.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Bg(i)?i:Promise.resolve(i));return Ck(r,o)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{const u=e(i),c=()=>o.addIssue({code:oe.custom,...r(i)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new pc({schema:this,typeName:Z.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Co.create(this,this._def)}nullable(){return mc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ki.create(this)}promise(){return qg.create(this,this._def)}or(e){return Vg.create([this,e],this._def)}and(e){return Hg.create(this,e,this._def)}transform(e){return new pc({..._t(this._def),schema:this,typeName:Z.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new xS({..._t(this._def),innerType:this,defaultValue:t,typeName:Z.ZodDefault})}brand(){return new F5({typeName:Z.ZodBranded,type:this,..._t(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new TS({..._t(this._def),innerType:this,catchValue:t,typeName:Z.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return kE.create(this,e)}readonly(){return CS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const v5=/^c[^\s-]{8,}$/i,b5=/^[0-9a-z]+$/,_5=/^[0-9A-HJKMNP-TV-Z]{26}$/i,w5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,S5=/^[a-z0-9_-]{21}$/i,E5=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,x5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,T5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,C5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let g0;const R5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,A5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,k5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,N5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,P5=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,s1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$5=new RegExp(`^${s1}$`);function o1(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function I5(n){return new RegExp(`^${o1(n)}$`)}function j5(n){let e=`${s1}T${o1(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function D5(n,e){return!!((e==="v4"||!e)&&R5.test(n)||(e==="v6"||!e)&&A5.test(n))}function L5(n,e){if(!E5.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function U5(n,e){return!!((e==="v4"||!e)&&O5.test(n)||(e==="v6"||!e)&&k5.test(n))}class wo extends $t{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ne.string){const o=this._getOrReturnCtx(e);return Te(o,{code:oe.invalid_type,expected:Ne.string,received:o.parsedType}),ot}const r=new xa;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(i=this._getOrReturnCtx(e,i),u?Te(i,{code:oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&Te(i,{code:oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")T5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"email",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")g0||(g0=new RegExp(C5,"u")),g0.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"emoji",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")w5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"uuid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")S5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"nanoid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")v5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")b5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid2",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")_5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ulid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Te(i,{validation:"url",code:oe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"regex",code:oe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?j5(o).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?$5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?I5(o).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?x5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"duration",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?D5(e.data,o.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ip",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?L5(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"jwt",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?U5(e.data,o.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cidr",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?N5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?P5.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64url",code:oe.invalid_string,message:o.message}),r.dirty()):Dt.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:oe.invalid_string,...Le.errToObj(r)})}_addCheck(e){return new wo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Le.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Le.errToObj(t)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new wo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}wo.create=n=>new wo({checks:[],typeName:Z.ZodString,coerce:(n==null?void 0:n.coerce)??!1,..._t(n)});function M5(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,o=Number.parseInt(n.toFixed(i).replace(".","")),u=Number.parseInt(e.toFixed(i).replace(".",""));return o%u/10**i}class fh extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ne.number){const o=this._getOrReturnCtx(e);return Te(o,{code:oe.invalid_type,expected:Ne.number,received:o.parsedType}),ot}let r;const i=new xa;for(const o of this._def.checks)o.kind==="int"?Dt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?M5(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.not_finite,message:o.message}),i.dirty()):Dt.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Le.toString(t))}setLimit(e,t,r,i){return new fh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Le.toString(i)}]})}_addCheck(e){return new fh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Dt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}fh.create=n=>new fh({checks:[],typeName:Z.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,..._t(n)});class hh extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ne.bigint)return this._getInvalidInput(e);let r;const i=new xa;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:oe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Dt.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Te(t,{code:oe.invalid_type,expected:Ne.bigint,received:t.parsedType}),ot}gte(e,t){return this.setLimit("min",e,!0,Le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Le.toString(t))}setLimit(e,t,r,i){return new hh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Le.toString(i)}]})}_addCheck(e){return new hh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}hh.create=n=>new hh({checks:[],typeName:Z.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,..._t(n)});class Rk extends $t{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ne.boolean){const r=this._getOrReturnCtx(e);return Te(r,{code:oe.invalid_type,expected:Ne.boolean,received:r.parsedType}),ot}return za(e.data)}}Rk.create=n=>new Rk({typeName:Z.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,..._t(n)});class zg extends $t{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ne.date){const o=this._getOrReturnCtx(e);return Te(o,{code:oe.invalid_type,expected:Ne.date,received:o.parsedType}),ot}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Te(o,{code:oe.invalid_date}),ot}const r=new xa;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:oe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Dt.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zg({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}zg.create=n=>new zg({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Z.ZodDate,..._t(n)});class Ok extends $t{_parse(e){if(this._getType(e)!==Ne.symbol){const r=this._getOrReturnCtx(e);return Te(r,{code:oe.invalid_type,expected:Ne.symbol,received:r.parsedType}),ot}return za(e.data)}}Ok.create=n=>new Ok({typeName:Z.ZodSymbol,..._t(n)});class Ak extends $t{_parse(e){if(this._getType(e)!==Ne.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:oe.invalid_type,expected:Ne.undefined,received:r.parsedType}),ot}return za(e.data)}}Ak.create=n=>new Ak({typeName:Z.ZodUndefined,..._t(n)});class kk extends $t{_parse(e){if(this._getType(e)!==Ne.null){const r=this._getOrReturnCtx(e);return Te(r,{code:oe.invalid_type,expected:Ne.null,received:r.parsedType}),ot}return za(e.data)}}kk.create=n=>new kk({typeName:Z.ZodNull,..._t(n)});class SS extends $t{constructor(){super(...arguments),this._any=!0}_parse(e){return za(e.data)}}SS.create=n=>new SS({typeName:Z.ZodAny,..._t(n)});class Nk extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return za(e.data)}}Nk.create=n=>new Nk({typeName:Z.ZodUnknown,..._t(n)});class No extends $t{_parse(e){const t=this._getOrReturnCtx(e);return Te(t,{code:oe.invalid_type,expected:Ne.never,received:t.parsedType}),ot}}No.create=n=>new No({typeName:Z.ZodNever,..._t(n)});class Pk extends $t{_parse(e){if(this._getType(e)!==Ne.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:oe.invalid_type,expected:Ne.void,received:r.parsedType}),ot}return za(e.data)}}Pk.create=n=>new Pk({typeName:Z.ZodVoid,..._t(n)});class Ki extends $t{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==Ne.array)return Te(t,{code:oe.invalid_type,expected:Ne.array,received:t.parsedType}),ot;if(i.exactLength!==null){const u=t.data.length>i.exactLength.value,c=t.data.length<i.exactLength.value;(u||c)&&(Te(t,{code:u?oe.too_big:oe.too_small,minimum:c?i.exactLength.value:void 0,maximum:u?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Te(t,{code:oe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Te(t,{code:oe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((u,c)=>i.type._parseAsync(new ko(t,u,t.path,c)))).then(u=>xa.mergeArray(r,u));const o=[...t.data].map((u,c)=>i.type._parseSync(new ko(t,u,t.path,c)));return xa.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new Ki({...this._def,minLength:{value:e,message:Le.toString(t)}})}max(e,t){return new Ki({...this._def,maxLength:{value:e,message:Le.toString(t)}})}length(e,t){return new Ki({...this._def,exactLength:{value:e,message:Le.toString(t)}})}nonempty(e){return this.min(1,e)}}Ki.create=(n,e)=>new Ki({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Z.ZodArray,..._t(e)});function ic(n){if(n instanceof Pr){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Co.create(ic(r))}return new Pr({...n._def,shape:()=>e})}else return n instanceof Ki?new Ki({...n._def,type:ic(n.element)}):n instanceof Co?Co.create(ic(n.unwrap())):n instanceof mc?mc.create(ic(n.unwrap())):n instanceof ju?ju.create(n.items.map(e=>ic(e))):n}class Pr extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Dt.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ne.object){const p=this._getOrReturnCtx(e);return Te(p,{code:oe.invalid_type,expected:Ne.object,received:p.parsedType}),ot}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof No&&this._def.unknownKeys==="strip"))for(const p in i.data)u.includes(p)||c.push(p);const f=[];for(const p of u){const m=o[p],y=i.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new ko(i,y,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof No){const p=this._def.unknownKeys;if(p==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(p==="strict")c.length>0&&(Te(i,{code:oe.unrecognized_keys,keys:c}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const m of c){const y=i.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new ko(i,y,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const p=[];for(const m of f){const y=await m.key,b=await m.value;p.push({key:y,value:b,alwaysSet:m.alwaysSet})}return p}).then(p=>xa.mergeObjectSync(r,p)):xa.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new Pr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var o,u;const i=((u=(o=this._def).errorMap)==null?void 0:u.call(o,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:Le.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Pr({...this._def,unknownKeys:"strip"})}passthrough(){return new Pr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Pr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Pr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Z.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Pr({...this._def,catchall:e})}pick(e){const t={};for(const r of Dt.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Pr({...this._def,shape:()=>t})}omit(e){const t={};for(const r of Dt.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Pr({...this._def,shape:()=>t})}deepPartial(){return ic(this)}partial(e){const t={};for(const r of Dt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}return new Pr({...this._def,shape:()=>t})}required(e){const t={};for(const r of Dt.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Co;)o=o._def.innerType;t[r]=o}return new Pr({...this._def,shape:()=>t})}keyof(){return u1(Dt.objectKeys(this.shape))}}Pr.create=(n,e)=>new Pr({shape:()=>n,unknownKeys:"strip",catchall:No.create(),typeName:Z.ZodObject,..._t(e)});Pr.strictCreate=(n,e)=>new Pr({shape:()=>n,unknownKeys:"strict",catchall:No.create(),typeName:Z.ZodObject,..._t(e)});Pr.lazycreate=(n,e)=>new Pr({shape:n,unknownKeys:"strip",catchall:No.create(),typeName:Z.ZodObject,..._t(e)});class Vg extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new Ps(c.ctx.common.issues));return Te(t,{code:oe.invalid_union,unionErrors:u}),ot}if(t.common.async)return Promise.all(r.map(async o=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(i);{let o;const u=[];for(const f of r){const p={...t,common:{...t.common,issues:[]},parent:null},m=f._parseSync({data:t.data,path:t.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new Ps(f));return Te(t,{code:oe.invalid_union,unionErrors:c}),ot}}get options(){return this._def.options}}Vg.create=(n,e)=>new Vg({options:n,typeName:Z.ZodUnion,..._t(e)});function ES(n,e){const t=mo(n),r=mo(e);if(n===e)return{valid:!0,data:n};if(t===Ne.object&&r===Ne.object){const i=Dt.objectKeys(e),o=Dt.objectKeys(n).filter(c=>i.indexOf(c)!==-1),u={...n,...e};for(const c of o){const f=ES(n[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(t===Ne.array&&r===Ne.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<n.length;o++){const u=n[o],c=e[o],f=ES(u,c);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return t===Ne.date&&r===Ne.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Hg extends $t{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(o,u)=>{if(xk(o)||xk(u))return ot;const c=ES(o.value,u.value);return c.valid?((Tk(o)||Tk(u))&&t.dirty(),{status:t.value,value:c.data}):(Te(r,{code:oe.invalid_intersection_types}),ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,u])=>i(o,u)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Hg.create=(n,e,t)=>new Hg({left:n,right:e,typeName:Z.ZodIntersection,..._t(t)});class ju extends $t{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.array)return Te(r,{code:oe.invalid_type,expected:Ne.array,received:r.parsedType}),ot;if(r.data.length<this._def.items.length)return Te(r,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ot;!this._def.rest&&r.data.length>this._def.items.length&&(Te(r,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...r.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new ko(r,u,r.path,c)):null}).filter(u=>!!u);return r.common.async?Promise.all(o).then(u=>xa.mergeArray(t,u)):xa.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new ju({...this._def,rest:e})}}ju.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ju({items:n,typeName:Z.ZodTuple,rest:null,..._t(e)})};class $k extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.map)return Te(r,{code:oe.invalid_type,expected:Ne.map,received:r.parsedType}),ot;const i=this._def.keyType,o=this._def.valueType,u=[...r.data.entries()].map(([c,f],p)=>({key:i._parse(new ko(r,c,r.path,[p,"key"])),value:o._parse(new ko(r,f,r.path,[p,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,m=await f.value;if(p.status==="aborted"||m.status==="aborted")return ot;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(p.value,m.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const f of u){const p=f.key,m=f.value;if(p.status==="aborted"||m.status==="aborted")return ot;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(p.value,m.value)}return{status:t.value,value:c}}}}$k.create=(n,e,t)=>new $k({valueType:e,keyType:n,typeName:Z.ZodMap,..._t(t)});class ph extends $t{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.set)return Te(r,{code:oe.invalid_type,expected:Ne.set,received:r.parsedType}),ot;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Te(r,{code:oe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Te(r,{code:oe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const o=this._def.valueType;function u(f){const p=new Set;for(const m of f){if(m.status==="aborted")return ot;m.status==="dirty"&&t.dirty(),p.add(m.value)}return{status:t.value,value:p}}const c=[...r.data.values()].map((f,p)=>o._parse(new ko(r,f,r.path,p)));return r.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,t){return new ph({...this._def,minSize:{value:e,message:Le.toString(t)}})}max(e,t){return new ph({...this._def,maxSize:{value:e,message:Le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ph.create=(n,e)=>new ph({valueType:n,minSize:null,maxSize:null,typeName:Z.ZodSet,..._t(e)});class Ik extends $t{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ik.create=(n,e)=>new Ik({getter:n,typeName:Z.ZodLazy,..._t(e)});class jk extends $t{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Te(t,{received:t.data,code:oe.invalid_literal,expected:this._def.value}),ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}jk.create=(n,e)=>new jk({value:n,typeName:Z.ZodLiteral,..._t(e)});function u1(n,e){return new hc({values:n,typeName:Z.ZodEnum,..._t(e)})}class hc extends $t{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Te(t,{expected:Dt.joinValues(r),received:t.parsedType,code:oe.invalid_type}),ot}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Te(t,{received:t.data,code:oe.invalid_enum_value,options:r}),ot}return za(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return hc.create(e,{...this._def,...t})}exclude(e,t=this._def){return hc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}hc.create=u1;class Dk extends $t{_parse(e){const t=Dt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ne.string&&r.parsedType!==Ne.number){const i=Dt.objectValues(t);return Te(r,{expected:Dt.joinValues(i),received:r.parsedType,code:oe.invalid_type}),ot}if(this._cache||(this._cache=new Set(Dt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Dt.objectValues(t);return Te(r,{received:r.data,code:oe.invalid_enum_value,options:i}),ot}return za(e.data)}get enum(){return this._def.values}}Dk.create=(n,e)=>new Dk({values:n,typeName:Z.ZodNativeEnum,..._t(e)});class qg extends $t{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ne.promise&&t.common.async===!1)return Te(t,{code:oe.invalid_type,expected:Ne.promise,received:t.parsedType}),ot;const r=t.parsedType===Ne.promise?t.data:Promise.resolve(t.data);return za(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}qg.create=(n,e)=>new qg({type:n,typeName:Z.ZodPromise,..._t(e)});class pc extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:u=>{Te(r,u),u.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const u=i.transform(r.data,o);if(r.common.async)return Promise.resolve(u).then(async c=>{if(t.value==="aborted")return ot;const f=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return f.status==="aborted"?ot:f.status==="dirty"||t.value==="dirty"?Ff(f.value):f});{if(t.value==="aborted")return ot;const c=this._def.schema._parseSync({data:u,path:r.path,parent:r});return c.status==="aborted"?ot:c.status==="dirty"||t.value==="dirty"?Ff(c.value):c}}if(i.type==="refinement"){const u=c=>{const f=i.refinement(c,o);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ot:(c.status==="dirty"&&t.dirty(),u(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ot:(c.status==="dirty"&&t.dirty(),u(c.value).then(()=>({status:t.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!fc(u))return ot;const c=i.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>fc(u)?Promise.resolve(i.transform(u.value,o)).then(c=>({status:t.value,value:c})):ot);Dt.assertNever(i)}}pc.create=(n,e,t)=>new pc({schema:n,typeName:Z.ZodEffects,effect:e,..._t(t)});pc.createWithPreprocess=(n,e,t)=>new pc({schema:e,effect:{type:"preprocess",transform:n},typeName:Z.ZodEffects,..._t(t)});class Co extends $t{_parse(e){return this._getType(e)===Ne.undefined?za(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Co.create=(n,e)=>new Co({innerType:n,typeName:Z.ZodOptional,..._t(e)});class mc extends $t{_parse(e){return this._getType(e)===Ne.null?za(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mc.create=(n,e)=>new mc({innerType:n,typeName:Z.ZodNullable,..._t(e)});class xS extends $t{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}xS.create=(n,e)=>new xS({innerType:n,typeName:Z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._t(e)});class TS extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Bg(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ps(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ps(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}TS.create=(n,e)=>new TS({innerType:n,typeName:Z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._t(e)});class Lk extends $t{_parse(e){if(this._getType(e)!==Ne.nan){const r=this._getOrReturnCtx(e);return Te(r,{code:oe.invalid_type,expected:Ne.nan,received:r.parsedType}),ot}return{status:"valid",value:e.data}}}Lk.create=n=>new Lk({typeName:Z.ZodNaN,..._t(n)});class F5 extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class kE extends $t{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ot:o.status==="dirty"?(t.dirty(),Ff(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ot:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new kE({in:e,out:t,typeName:Z.ZodPipeline})}}class CS extends $t{_parse(e){const t=this._def.innerType._parse(e),r=i=>(fc(i)&&(i.value=Object.freeze(i.value)),i);return Bg(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}CS.create=(n,e)=>new CS({innerType:n,typeName:Z.ZodReadonly,..._t(e)});var Z;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Z||(Z={}));const NE=wo.create,Uk=SS.create;No.create;Ki.create;const PE=Pr.create;Vg.create;Hg.create;ju.create;hc.create;qg.create;Co.create;mc.create;var Ty={exports:{}},l1={};function Ba(n,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(n)),this._timeouts=n,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var B5=Ba;Ba.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Ba.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Ba.prototype.retry=function(n){if(this._timeout&&clearTimeout(this._timeout),!n)return!1;var e=new Date().getTime();if(n&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(n),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(n);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t),this._options.unref&&this._timer.unref(),!0};Ba.prototype.attempt=function(n,e){this._fn=n,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Ba.prototype.try=function(n){console.log("Using RetryOperation.try() is deprecated"),this.attempt(n)};Ba.prototype.start=function(n){console.log("Using RetryOperation.start() is deprecated"),this.attempt(n)};Ba.prototype.start=Ba.prototype.try;Ba.prototype.errors=function(){return this._errors};Ba.prototype.attempts=function(){return this._attempts};Ba.prototype.mainError=function(){if(this._errors.length===0)return null;for(var n={},e=null,t=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,u=(n[o]||0)+1;n[o]=u,u>=t&&(e=i,t=u)}return e};(function(n){var e=B5;n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],u=0;u<r.retries;u++)o.push(this.createTimeout(u,r));return t&&t.forever&&!o.length&&o.push(this.createTimeout(u,r)),o.sort(function(c,f){return c-f}),o},n.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,o=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return o=Math.min(o,r.maxTimeout),o},n.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var o in t)typeof t[o]=="function"&&i.push(o)}for(var u=0;u<i.length;u++){var c=i[u],f=t[c];t[c]=(function(m){var y=n.operation(r),b=Array.prototype.slice.call(arguments,1),_=b.pop();b.push(function(S){y.retry(S)||(S&&(arguments[0]=y.mainError()),_.apply(this,arguments))}),y.attempt(function(){m.apply(t,b)})}).bind(t,f),t[c].options=r}}})(l1);var z5=l1;const V5=z5,H5=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class c1 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const q5=(n,e,t)=>{const r=t.retries-(e-1);return n.attemptNumber=e,n.retriesLeft=r,n},G5=n=>H5.includes(n),d1=(n,e)=>new Promise((t,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=V5.operation(e);i.attempt(async o=>{try{t(await n(o))}catch(u){if(!(u instanceof Error)){r(new TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));return}if(u instanceof c1)i.stop(),r(u.originalError);else if(u instanceof TypeError&&!G5(u.message))i.stop(),r(u);else{q5(u,o,e);try{await e.onFailedAttempt(u)}catch(c){r(c);return}i.retry(u)||r(i.mainError())}}})});Ty.exports=d1;Ty.exports.default=d1;Ty.exports.AbortError=c1;var W5=Ty.exports;const Gg=iy(W5),J5=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Zf(n){return typeof n=="string"&&J5.test(n)}function K5(n){if(!Zf(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var yn=[];for(var y0=0;y0<256;++y0)yn.push((y0+256).toString(16).slice(1));function f1(n,e=0){return(yn[n[e+0]]+yn[n[e+1]]+yn[n[e+2]]+yn[n[e+3]]+"-"+yn[n[e+4]]+yn[n[e+5]]+"-"+yn[n[e+6]]+yn[n[e+7]]+"-"+yn[n[e+8]]+yn[n[e+9]]+"-"+yn[n[e+10]]+yn[n[e+11]]+yn[n[e+12]]+yn[n[e+13]]+yn[n[e+14]]+yn[n[e+15]]).toLowerCase()}var ag,Z5=new Uint8Array(16);function Y5(){if(!ag&&(ag=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ag))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ag(Z5)}function X5(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var Q5="6ba7b810-9dad-11d1-80b4-00c04fd430c8",eG="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function tG(n,e,t){function r(i,o,u,c){var f;if(typeof i=="string"&&(i=X5(i)),typeof o=="string"&&(o=K5(o)),((f=o)===null||f===void 0?void 0:f.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+i.length);if(p.set(o),p.set(i,o.length),p=t(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,u){c=c||0;for(var m=0;m<16;++m)u[c+m]=p[m];return u}return f1(p)}try{r.name=n}catch{}return r.DNS=Q5,r.URL=eG,r}var rG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Mk={randomUUID:rG};function qn(n,e,t){if(Mk.randomUUID&&!n)return Mk.randomUUID();n=n||{};var r=n.random||(n.rng||Y5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,f1(r)}function nG(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function v0(n,e){return n<<e|n>>>32-e}function aG(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var o=n.length/4+2,u=Math.ceil(o/16),c=new Array(u),f=0;f<u;++f){for(var p=new Uint32Array(16),m=0;m<16;++m)p[m]=n[f*64+m*4]<<24|n[f*64+m*4+1]<<16|n[f*64+m*4+2]<<8|n[f*64+m*4+3];c[f]=p}c[u-1][14]=(n.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(n.length-1)*8&4294967295;for(var y=0;y<u;++y){for(var b=new Uint32Array(80),_=0;_<16;++_)b[_]=c[y][_];for(var S=16;S<80;++S)b[S]=v0(b[S-3]^b[S-8]^b[S-14]^b[S-16],1);for(var C=t[0],T=t[1],R=t[2],A=t[3],O=t[4],P=0;P<80;++P){var j=Math.floor(P/20),q=v0(C,5)+nG(j,T,R,A)+O+e[j]+b[P]>>>0;O=A,A=R,R=v0(T,30)>>>0,T=C,C=q}t[0]=t[0]+C>>>0,t[1]=t[1]+T>>>0,t[2]=t[2]+R>>>0,t[3]=t[3]+A>>>0,t[4]=t[4]+O>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Fk=tG("v5",80,aG);let iG=class{getStore(){}run(e,t){return t()}};const b0=Symbol.for("ls:tracing_async_local_storage"),sG=new iG;let oG=class{getInstance(){return globalThis[b0]??sG}initializeGlobalInstance(e){globalThis[b0]===void 0&&(globalThis[b0]=e)}};const uG=new oG;function lG(n=!1){const e=uG.getInstance().getStore();if(!n&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function $E(n){return typeof n=="function"&&"langsmith:traceable"in n}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const cG=Object.prototype.hasOwnProperty;function RS(n,e){return cG.call(n,e)}function OS(n){if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(n);let e=[];for(let t in n)RS(n,t)&&e.push(t);return e}function Wi(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function AS(n){let e=0;const t=n.length;let r;for(;e<t;){if(r=n.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Zl(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function dG(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function kS(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(kS(n[t]))return!0}else if(typeof n=="object"){const t=OS(n),r=t.length;for(var e=0;e<r;e++)if(kS(n[t[e]]))return!0}}return!1}function Bk(n,e){const t=[n];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&t.push(`${r}: ${i}`)}return t.join(`
`)}class fG extends Error{constructor(e,t,r,i,o){super(Bk(e,{name:t,index:r,operation:i,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=Bk(e,{name:t,index:r,operation:i,tree:o})}}const $r=fG,oc={add:function(n,e,t){return n[e]=this.value,{newDocument:t}},remove:function(n,e,t){var r=n[e];return delete n[e],{newDocument:t,removed:r}},replace:function(n,e,t){var r=n[e];return n[e]=this.value,{newDocument:t,removed:r}},move:function(n,e,t){let r=NS(t,this.path);r&&(r=Wi(r));const i=Yf(t,{op:"remove",path:this.from}).removed;return Yf(t,{op:"add",path:this.path,value:i}),{newDocument:t,removed:r}},copy:function(n,e,t){const r=NS(t,this.from);return Yf(t,{op:"add",path:this.path,value:Wi(r)}),{newDocument:t}},test:function(n,e,t){return{newDocument:t,test:Jg(n[e],this.value)}},_get:function(n,e,t){return this.value=n[e],{newDocument:t}}};var hG={add:function(n,e,t){return AS(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:t,index:e}},remove:function(n,e,t){var r=n.splice(e,1);return{newDocument:t,removed:r[0]}},replace:function(n,e,t){var r=n[e];return n[e]=this.value,{newDocument:t,removed:r}},move:oc.move,copy:oc.copy,test:oc.test,_get:oc._get};function NS(n,e){if(e=="")return n;var t={op:"_get",path:e};return Yf(n,t),t.value}function Yf(n,e,t=!1,r=!0,i=!0,o=0){if(t&&(typeof t=="function"?t(e,0,n,e.path):PS(e,0)),e.path===""){let u={newDocument:n};if(e.op==="add")return u.newDocument=e.value,u;if(e.op==="replace")return u.newDocument=e.value,u.removed=n,u;if(e.op==="move"||e.op==="copy")return u.newDocument=NS(n,e.from),e.op==="move"&&(u.removed=n),u;if(e.op==="test"){if(u.test=Jg(n,e.value),u.test===!1)throw new $r("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return u.newDocument=n,u}else{if(e.op==="remove")return u.removed=n,u.newDocument=null,u;if(e.op==="_get")return e.value=n,u;if(t)throw new $r("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,n);return u}}else{r||(n=Wi(n));const c=(e.path||"").split("/");let f=n,p=1,m=c.length,y,b,_;for(typeof t=="function"?_=t:_=PS;;){if(b=c[p],b&&b.indexOf("~")!=-1&&(b=dG(b)),i&&(b=="__proto__"||b=="prototype"&&p>0&&c[p-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&y===void 0&&(f[b]===void 0?y=c.slice(0,p).join("/"):p==m-1&&(y=e.path),y!==void 0&&_(e,0,n,y)),p++,Array.isArray(f)){if(b==="-")b=f.length;else{if(t&&!AS(b))throw new $r("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,n);AS(b)&&(b=~~b)}if(p>=m){if(t&&e.op==="add"&&b>f.length)throw new $r("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,n);const S=hG[e.op].call(e,f,b,n);if(S.test===!1)throw new $r("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return S}}else if(p>=m){const S=oc[e.op].call(e,f,b,n);if(S.test===!1)throw new $r("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return S}if(f=f[b],t&&p<m&&(!f||typeof f!="object"))throw new $r("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,n)}}}function Wg(n,e,t,r=!0,i=!0){if(t&&!Array.isArray(e))throw new $r("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(n=Wi(n));const o=new Array(e.length);for(let u=0,c=e.length;u<c;u++)o[u]=Yf(n,e[u],t,!0,i,u),n=o[u].newDocument;return o.newDocument=n,o}function PS(n,e,t,r){if(typeof n!="object"||n===null||Array.isArray(n))throw new $r("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,t);if(oc[n.op]){if(typeof n.path!="string")throw new $r("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,t);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new $r('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,t);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new $r("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new $r("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&kS(n.value))throw new $r("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,t);if(t){if(n.op=="add"){var i=n.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new $r("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,t)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==r)throw new $r("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,t)}else if(n.op==="move"||n.op==="copy"){var u={op:"_get",path:n.from,value:void 0},c=pG([u],t);if(c&&c.name==="OPERATION_PATH_UNRESOLVABLE")throw new $r("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,t)}}}else throw new $r("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,t)}function pG(n,e,t){try{if(!Array.isArray(n))throw new $r("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Wg(Wi(e),Wi(n),t||!0);else{t=t||PS;for(var r=0;r<n.length;r++)t(n[r],r,e,void 0)}}catch(i){if(i instanceof $r)return i;throw i}}function Jg(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),r=Array.isArray(e),i,o,u;if(t&&r){if(o=n.length,o!=e.length)return!1;for(i=o;i--!==0;)if(!Jg(n[i],e[i]))return!1;return!0}if(t!=r)return!1;var c=Object.keys(n);if(o=c.length,o!==Object.keys(e).length)return!1;for(i=o;i--!==0;)if(!e.hasOwnProperty(c[i]))return!1;for(i=o;i--!==0;)if(u=c[i],!Jg(n[u],e[u]))return!1;return!0}return n!==n&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function h1(n,e,t,r,i){if(e!==n){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=OS(e),u=OS(n),c=!1,f=u.length-1;f>=0;f--){var p=u[f],m=n[p];if(RS(e,p)&&!(e[p]===void 0&&m!==void 0&&Array.isArray(e)===!1)){var y=e[p];typeof m=="object"&&m!=null&&typeof y=="object"&&y!=null&&Array.isArray(m)===Array.isArray(y)?h1(m,y,t,r+"/"+Zl(p),i):m!==y&&(i&&t.push({op:"test",path:r+"/"+Zl(p),value:Wi(m)}),t.push({op:"replace",path:r+"/"+Zl(p),value:Wi(y)}))}else Array.isArray(n)===Array.isArray(e)?(i&&t.push({op:"test",path:r+"/"+Zl(p),value:Wi(m)}),t.push({op:"remove",path:r+"/"+Zl(p)}),c=!0):(i&&t.push({op:"test",path:r,value:n}),t.push({op:"replace",path:r,value:e}))}if(!(!c&&o.length==u.length))for(var f=0;f<o.length;f++){var p=o[f];!RS(n,p)&&e[p]!==void 0&&t.push({op:"add",path:r+"/"+Zl(p),value:Wi(e[p])})}}}function mG(n,e,t=!1){var r=[];return h1(n,e,r,"",t),r}const gG="gen_ai.operation.name",yG="gen_ai.system",zk="gen_ai.request.model",vG="gen_ai.response.model",Vk="gen_ai.usage.input_tokens",Hk="gen_ai.usage.output_tokens",qk="gen_ai.usage.total_tokens",bG="gen_ai.request.max_tokens",_G="gen_ai.request.temperature",wG="gen_ai.request.top_p",SG="gen_ai.request.frequency_penalty",EG="gen_ai.request.presence_penalty",xG="gen_ai.response.finish_reasons",TG="gen_ai.prompt",CG="gen_ai.completion",RG="gen_ai.request.extra_query",OG="gen_ai.request.extra_body",AG="gen_ai.serialized.name",kG="gen_ai.serialized.signature",NG="gen_ai.serialized.doc",PG="gen_ai.response.id",$G="gen_ai.response.service_tier",IG="gen_ai.response.system_fingerprint",jG="gen_ai.usage.input_token_details",DG="gen_ai.usage.output_token_details",LG="langsmith.trace.session_id",UG="langsmith.trace.session_name",MG="langsmith.span.kind",FG="langsmith.trace.name",BG="langsmith.metadata",Gk="langsmith.span.tags",zG="langsmith.request.streaming",VG="langsmith.request.headers",HG=(...n)=>fetch(...n),p1=Symbol.for("ls:fetch_implementation"),qG=()=>{const n=globalThis[p1];return n?typeof n=="function"&&"Headers"in n&&"Request"in n&&"Response"in n:!1},GG=n=>async(...e)=>{if(n||sa("DEBUG")==="true"){const[r,i]=e;console.log(`→ ${(i==null?void 0:i.method)||"GET"} ${r}`)}const t=await(globalThis[p1]??HG)(...e);return(n||sa("DEBUG")==="true")&&console.log(`← ${t.status} ${t.statusText} ${t.url}`),t},m1=()=>sa("PROJECT")??Yi("LANGCHAIN_SESSION")??"default",g1="0.3.68";var Xf={};let Fi;const WG=()=>typeof window<"u"&&typeof window.document<"u",JG=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",KG=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),y1=()=>typeof Deno<"u",ZG=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!y1(),v1=()=>Fi||(typeof Bun<"u"?Fi="bun":WG()?Fi="browser":ZG()?Fi="node":JG()?Fi="webworker":KG()?Fi="jsdom":y1()?Fi="deno":Fi="other",Fi);let _0;function b1(){if(_0===void 0){const n=v1(),e=QG();_0={library:"langsmith",runtime:n,sdk:"langsmith-js",sdk_version:g1,...e}}return _0}function YG(){const n=XG()||{},e={},t=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,i]of Object.entries(n))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof i=="string"&&!t.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function XG(){try{return typeof process<"u"&&Xf?Object.entries(Xf).reduce((n,[e,t])=>(n[e]=String(t),n),{}):void 0}catch{return}}function Yi(n){try{return typeof process<"u"?Xf==null?void 0:Xf[n]:void 0}catch{return}}function sa(n){return Yi(`LANGSMITH_${n}`)||Yi(`LANGCHAIN_${n}`)}let w0;function QG(){if(w0!==void 0)return w0;const n=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const t of n){const r=Yi(t);r!==void 0&&(e[t]=r)}return w0=e,e}function _1(){return Yi("OTEL_ENABLED")==="true"||sa("OTEL_ENABLED")==="true"}class eW{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...t){!this.hasWarned&&_1()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(t.length===1&&typeof t[0]=="function"?r=t[0]:t.length===2&&typeof t[1]=="function"?r=t[1]:t.length===3&&typeof t[2]=="function"&&(r=t[2]),typeof r=="function")return r()}}class tW{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new eW})}getTracer(e,t){return this.mockTracer}getActiveSpan(){}setSpan(e,t){return e}getSpan(e){}setSpanContext(e,t){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class rW{active(){return{}}with(e,t){return t()}}const S0=Symbol.for("ls:otel_trace"),E0=Symbol.for("ls:otel_context"),Wk=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),nW=new tW,aW=new rW;class iW{getTraceInstance(){return globalThis[S0]??nW}getContextInstance(){return globalThis[E0]??aW}initializeGlobalInstances(e){globalThis[S0]===void 0&&(globalThis[S0]=e.trace),globalThis[E0]===void 0&&(globalThis[E0]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[Wk]=e}getDefaultOTLPTracerComponents(){return globalThis[Wk]??void 0}}const IE=new iW;function w1(){return IE.getTraceInstance()}function sW(){return IE.getContextInstance()}function oW(){return IE.getDefaultOTLPTracerComponents()}const uW={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function lW(n){return uW[n]||n}class cW{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,t){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const i=this.createSpanForRun(r,r.run,t.get(r.id));i&&!r.run.end_time&&this.spans.set(r.id,i)}else this.updateSpanForRun(r,r.run)}catch(i){console.error(`Error processing operation ${r.id}:`,i)}}createSpanForRun(e,t,r){const i=r&&w1().getSpan(r);if(i)try{return this.finishSpanSetup(i,t,e)}catch(o){console.error(`Failed to create span for run ${e.id}:`,o);return}}finishSpanSetup(e,t,r){return this.setSpanAttributes(e,t,r),t.error?(e.setStatus({code:2}),e.recordException(new Error(t.error))):e.setStatus({code:1}),t.end_time&&e.end(new Date(t.end_time)),e}updateSpanForRun(e,t){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,t,e),t.error?(r.setStatus({code:2}),r.recordException(new Error(t.error))):r.setStatus({code:1});const i=t.end_time;i&&(r.end(new Date(i)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var t;if((t=e.extra)!=null&&t.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const i=r.invocation_params;if(i.model)return i.model;if(i.model_name)return i.model_name}}}setSpanAttributes(e,t,r){var c;if("run_type"in t&&t.run_type){e.setAttribute(MG,t.run_type);const f=lW(t.run_type||"chain");e.setAttribute(gG,f)}"name"in t&&t.name&&e.setAttribute(FG,t.name),"session_id"in t&&t.session_id&&e.setAttribute(LG,t.session_id),"session_name"in t&&t.session_name&&e.setAttribute(UG,t.session_name),this.setGenAiSystem(e,t);const i=this.extractModelName(t);i&&e.setAttribute(zk,i),"prompt_tokens"in t&&typeof t.prompt_tokens=="number"&&e.setAttribute(Vk,t.prompt_tokens),"completion_tokens"in t&&typeof t.completion_tokens=="number"&&e.setAttribute(Hk,t.completion_tokens),"total_tokens"in t&&typeof t.total_tokens=="number"&&e.setAttribute(qk,t.total_tokens),this.setInvocationParameters(e,t);const o=((c=t.extra)==null?void 0:c.metadata)||{};for(const[f,p]of Object.entries(o))p!=null&&e.setAttribute(`${BG}.${f}`,String(p));const u=t.tags;if(u&&Array.isArray(u)?e.setAttribute(Gk,u.join(", ")):u&&e.setAttribute(Gk,String(u)),"serialized"in t&&typeof t.serialized=="object"){const f=t.serialized;f.name&&e.setAttribute(AG,String(f.name)),f.signature&&e.setAttribute(kG,String(f.signature)),f.doc&&e.setAttribute(NG,String(f.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,t){let r="langchain";const i=this.extractModelName(t);if(i){const o=i.toLowerCase();o.includes("anthropic")||o.startsWith("claude")?r="anthropic":o.includes("bedrock")?r="aws.bedrock":o.includes("azure")&&o.includes("openai")?r="az.ai.openai":o.includes("azure")&&o.includes("inference")?r="az.ai.inference":o.includes("cohere")?r="cohere":o.includes("deepseek")?r="deepseek":o.includes("gemini")?r="gemini":o.includes("groq")?r="groq":o.includes("watson")||o.includes("ibm")?r="ibm.watsonx.ai":o.includes("mistral")?r="mistral_ai":o.includes("gpt")||o.includes("openai")?r="openai":o.includes("perplexity")||o.includes("sonar")?r="perplexity":o.includes("vertex")?r="vertex_ai":(o.includes("xai")||o.includes("grok"))&&(r="xai")}e.setAttribute(yG,r)}setInvocationParameters(e,t){var i,o;if(!((o=(i=t.extra)==null?void 0:i.metadata)!=null&&o.invocation_params))return;const r=t.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(bG,r.max_tokens),r.temperature!==void 0&&e.setAttribute(_G,r.temperature),r.top_p!==void 0&&e.setAttribute(wG,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(SG,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(EG,r.presence_penalty)}setIOAttributes(e,t){if(t.run.inputs)try{const r=t.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(zk,r.model),r.stream!==void 0&&e.setAttribute(zG,r.stream),r.extra_headers&&e.setAttribute(VG,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(RG,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(OG,JSON.stringify(r.extra_body))),e.setAttribute(TG,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${t.id}`,r)}if(t.run.outputs)try{const r=t.run.outputs,i=this.getUnifiedRunTokens(r);if(i&&(e.setAttribute(Vk,i[0]),e.setAttribute(Hk,i[1]),e.setAttribute(qk,i[0]+i[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(vG,String(r.model)),r.id&&e.setAttribute(PG,r.id),r.choices&&Array.isArray(r.choices)){const o=r.choices.map(u=>u.finish_reason).filter(u=>u).map(String);o.length>0&&e.setAttribute(xG,o.join(", "))}if(r.service_tier&&e.setAttribute($G,r.service_tier),r.system_fingerprint&&e.setAttribute(IG,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const o=r.usage_metadata;o.input_token_details&&e.setAttribute(jG,JSON.stringify(o.input_token_details)),o.output_token_details&&e.setAttribute(DG,JSON.stringify(o.output_token_details))}}e.setAttribute(CG,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${t.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let t=this.extractUnifiedRunTokens(e.usage_metadata);if(t)return t;const r=Object.keys(e);for(const u of r){const c=e[u];if(!(!c||typeof c!="object")&&(t=this.extractUnifiedRunTokens(c.usage_metadata),t||c.lc===1&&c.kwargs&&typeof c.kwargs=="object"&&(t=this.extractUnifiedRunTokens(c.kwargs.usage_metadata),t)))return t}const i=e.generations||[];if(!Array.isArray(i))return null;const o=Array.isArray(i[0])?i.flat():i;for(const u of o)if(typeof u=="object"&&u.message&&typeof u.message=="object"&&u.message.kwargs&&typeof u.message.kwargs=="object"&&(t=this.extractUnifiedRunTokens(u.message.kwargs.usage_metadata),t))return t;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}var S1={},E1={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(f,p,m){this.fn=f,this.context=p,this.once=m||!1}function o(f,p,m,y,b){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new i(m,y||f,b),S=t?t+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],_]:f._events[S].push(_):(f._events[S]=_,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new r:delete f._events[p]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)e.call(m,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},c.prototype.listeners=function(p){var m=t?t+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var b=0,_=y.length,S=new Array(_);b<_;b++)S[b]=y[b].fn;return S},c.prototype.listenerCount=function(p){var m=t?t+p:p,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(p,m,y,b,_,S){var C=t?t+p:p;if(!this._events[C])return!1;var T=this._events[C],R=arguments.length,A,O;if(T.fn){switch(T.once&&this.removeListener(p,T.fn,void 0,!0),R){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,m),!0;case 3:return T.fn.call(T.context,m,y),!0;case 4:return T.fn.call(T.context,m,y,b),!0;case 5:return T.fn.call(T.context,m,y,b,_),!0;case 6:return T.fn.call(T.context,m,y,b,_,S),!0}for(O=1,A=new Array(R-1);O<R;O++)A[O-1]=arguments[O];T.fn.apply(T.context,A)}else{var P=T.length,j;for(O=0;O<P;O++)switch(T[O].once&&this.removeListener(p,T[O].fn,void 0,!0),R){case 1:T[O].fn.call(T[O].context);break;case 2:T[O].fn.call(T[O].context,m);break;case 3:T[O].fn.call(T[O].context,m,y);break;case 4:T[O].fn.call(T[O].context,m,y,b);break;default:if(!A)for(j=1,A=new Array(R-1);j<R;j++)A[j-1]=arguments[j];T[O].fn.apply(T[O].context,A)}}return!0},c.prototype.on=function(p,m,y){return o(this,p,m,y,!1)},c.prototype.once=function(p,m,y){return o(this,p,m,y,!0)},c.prototype.removeListener=function(p,m,y,b){var _=t?t+p:p;if(!this._events[_])return this;if(!m)return u(this,_),this;var S=this._events[_];if(S.fn)S.fn===m&&(!b||S.once)&&(!y||S.context===y)&&u(this,_);else{for(var C=0,T=[],R=S.length;C<R;C++)(S[C].fn!==m||b&&!S[C].once||y&&S[C].context!==y)&&T.push(S[C]);T.length?this._events[_]=T.length===1?T[0]:T:u(this,_)}return this},c.prototype.removeAllListeners=function(p){var m;return p?(m=t?t+p:p,this._events[m]&&u(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c})(E1);var dW=E1.exports,Cy={exports:{}},fW=(n,e)=>(e=e||(()=>{}),n.then(t=>new Promise(r=>{r(e())}).then(()=>t),t=>new Promise(r=>{r(e())}).then(()=>{throw t})));const hW=fW;class x1 extends Error{constructor(e){super(e),this.name="TimeoutError"}}const T1=(n,e,t)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(n);return}const o=setTimeout(()=>{if(typeof t=="function"){try{r(t())}catch(f){i(f)}return}const u=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,c=t instanceof Error?t:new x1(u);typeof n.cancel=="function"&&n.cancel(),i(c)},e);hW(n.then(r,i),()=>{clearTimeout(o)})});Cy.exports=T1;Cy.exports.default=T1;Cy.exports.TimeoutError=x1;var pW=Cy.exports,jE={},DE={};Object.defineProperty(DE,"__esModule",{value:!0});function mW(n,e,t){let r=0,i=n.length;for(;i>0;){const o=i/2|0;let u=r+o;t(n[u],e)<=0?(r=++u,i-=o+1):i=o}return r}DE.default=mW;Object.defineProperty(jE,"__esModule",{value:!0});const gW=DE;class yW{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);const r={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(r);return}const i=gW.default(this._queue,r,(o,u)=>u.priority-o.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}}jE.default=yW;Object.defineProperty(S1,"__esModule",{value:!0});const vW=dW,C1=pW,bW=jE,ig=()=>{},_W=new C1.TimeoutError;class wW extends vW{constructor(e){var t,r,i,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=ig,this._resolveIdle=ig,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:bW.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=ig,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=ig,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,i)=>{const o=async()=>{this._pendingCount++,this._intervalCount++;try{const u=this._timeout===void 0&&t.timeout===void 0?e():C1.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&i(_W)});r(await u)}catch(u){i(u)}this._next()};this._queue.enqueue(o,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async r=>this.add(r,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var ks=S1.default=wW;const SW=[429,500,502,503,504];let Jk=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in ks?this.queue=new ks.default({concurrency:this.maxConcurrency}):this.queue=new ks({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...t){const r=this.onFailedResponseHook;return this.queue.add(()=>Gg(()=>e(...t).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.name==="TimeoutError"||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const o=i==null?void 0:i.response;if(r&&await r(o))return;const u=(o==null?void 0:o.status)??(i==null?void 0:i.status);if(u&&!SW.includes(+u))throw i},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((i,o)=>{var u;(u=e.signal)==null||u.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(t,...r)}};function Kk(n){return typeof(n==null?void 0:n._getType)=="function"}function Zk(n){const e={type:n._getType(),data:{content:n.content}};return n!=null&&n.additional_kwargs&&Object.keys(n.additional_kwargs).length>0&&(e.data.additional_kwargs={...n.additional_kwargs}),e}const EW=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function lt(n,e){if(!EW.test(n)){const t=e!==void 0?`Invalid UUID for ${e}: ${n}`:`Invalid UUID: ${n}`;throw new Error(t)}return n}const Yk={};function R1(n){Yk[n]||(console.warn(n),Yk[n]=!0)}var $S={exports:{}};const xW="2.0.0",O1=256,TW=Number.MAX_SAFE_INTEGER||9007199254740991,CW=16,RW=O1-6,OW=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Ry={MAX_LENGTH:O1,MAX_SAFE_COMPONENT_LENGTH:CW,MAX_SAFE_BUILD_LENGTH:RW,MAX_SAFE_INTEGER:TW,RELEASE_TYPES:OW,SEMVER_SPEC_VERSION:xW,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},x0={};const AW=typeof process=="object"&&x0&&x0.NODE_DEBUG&&/\bsemver\b/i.test(x0.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};var Oy=AW;(function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Ry,o=Oy;e=n.exports={};const u=e.re=[],c=e.safeRe=[],f=e.src=[],p=e.safeSrc=[],m=e.t={};let y=0;const b="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",i],[b,r]],S=T=>{for(const[R,A]of _)T=T.split(`${R}*`).join(`${R}{0,${A}}`).split(`${R}+`).join(`${R}{1,${A}}`);return T},C=(T,R,A)=>{const O=S(R),P=y++;o(T,P,R),m[T]=P,f[P]=R,p[P]=O,u[P]=new RegExp(R,A?"g":void 0),c[P]=new RegExp(O,A?"g":void 0)};C("NUMERICIDENTIFIER","0|[1-9]\\d*"),C("NUMERICIDENTIFIERLOOSE","\\d+"),C("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${b}*`),C("MAINVERSION",`(${f[m.NUMERICIDENTIFIER]})\\.(${f[m.NUMERICIDENTIFIER]})\\.(${f[m.NUMERICIDENTIFIER]})`),C("MAINVERSIONLOOSE",`(${f[m.NUMERICIDENTIFIERLOOSE]})\\.(${f[m.NUMERICIDENTIFIERLOOSE]})\\.(${f[m.NUMERICIDENTIFIERLOOSE]})`),C("PRERELEASEIDENTIFIER",`(?:${f[m.NONNUMERICIDENTIFIER]}|${f[m.NUMERICIDENTIFIER]})`),C("PRERELEASEIDENTIFIERLOOSE",`(?:${f[m.NONNUMERICIDENTIFIER]}|${f[m.NUMERICIDENTIFIERLOOSE]})`),C("PRERELEASE",`(?:-(${f[m.PRERELEASEIDENTIFIER]}(?:\\.${f[m.PRERELEASEIDENTIFIER]})*))`),C("PRERELEASELOOSE",`(?:-?(${f[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[m.PRERELEASEIDENTIFIERLOOSE]})*))`),C("BUILDIDENTIFIER",`${b}+`),C("BUILD",`(?:\\+(${f[m.BUILDIDENTIFIER]}(?:\\.${f[m.BUILDIDENTIFIER]})*))`),C("FULLPLAIN",`v?${f[m.MAINVERSION]}${f[m.PRERELEASE]}?${f[m.BUILD]}?`),C("FULL",`^${f[m.FULLPLAIN]}$`),C("LOOSEPLAIN",`[v=\\s]*${f[m.MAINVERSIONLOOSE]}${f[m.PRERELEASELOOSE]}?${f[m.BUILD]}?`),C("LOOSE",`^${f[m.LOOSEPLAIN]}$`),C("GTLT","((?:<|>)?=?)"),C("XRANGEIDENTIFIERLOOSE",`${f[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),C("XRANGEIDENTIFIER",`${f[m.NUMERICIDENTIFIER]}|x|X|\\*`),C("XRANGEPLAIN",`[v=\\s]*(${f[m.XRANGEIDENTIFIER]})(?:\\.(${f[m.XRANGEIDENTIFIER]})(?:\\.(${f[m.XRANGEIDENTIFIER]})(?:${f[m.PRERELEASE]})?${f[m.BUILD]}?)?)?`),C("XRANGEPLAINLOOSE",`[v=\\s]*(${f[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[m.XRANGEIDENTIFIERLOOSE]})(?:${f[m.PRERELEASELOOSE]})?${f[m.BUILD]}?)?)?`),C("XRANGE",`^${f[m.GTLT]}\\s*${f[m.XRANGEPLAIN]}$`),C("XRANGELOOSE",`^${f[m.GTLT]}\\s*${f[m.XRANGEPLAINLOOSE]}$`),C("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),C("COERCE",`${f[m.COERCEPLAIN]}(?:$|[^\\d])`),C("COERCEFULL",f[m.COERCEPLAIN]+`(?:${f[m.PRERELEASE]})?(?:${f[m.BUILD]})?(?:$|[^\\d])`),C("COERCERTL",f[m.COERCE],!0),C("COERCERTLFULL",f[m.COERCEFULL],!0),C("LONETILDE","(?:~>?)"),C("TILDETRIM",`(\\s*)${f[m.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",C("TILDE",`^${f[m.LONETILDE]}${f[m.XRANGEPLAIN]}$`),C("TILDELOOSE",`^${f[m.LONETILDE]}${f[m.XRANGEPLAINLOOSE]}$`),C("LONECARET","(?:\\^)"),C("CARETTRIM",`(\\s*)${f[m.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",C("CARET",`^${f[m.LONECARET]}${f[m.XRANGEPLAIN]}$`),C("CARETLOOSE",`^${f[m.LONECARET]}${f[m.XRANGEPLAINLOOSE]}$`),C("COMPARATORLOOSE",`^${f[m.GTLT]}\\s*(${f[m.LOOSEPLAIN]})$|^$`),C("COMPARATOR",`^${f[m.GTLT]}\\s*(${f[m.FULLPLAIN]})$|^$`),C("COMPARATORTRIM",`(\\s*)${f[m.GTLT]}\\s*(${f[m.LOOSEPLAIN]}|${f[m.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",C("HYPHENRANGE",`^\\s*(${f[m.XRANGEPLAIN]})\\s+-\\s+(${f[m.XRANGEPLAIN]})\\s*$`),C("HYPHENRANGELOOSE",`^\\s*(${f[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[m.XRANGEPLAINLOOSE]})\\s*$`),C("STAR","(<|>)?=?\\s*\\*"),C("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),C("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})($S,$S.exports);var Nh=$S.exports;const kW=Object.freeze({loose:!0}),NW=Object.freeze({}),PW=n=>n?typeof n!="object"?kW:n:NW;var LE=PW;const Xk=/^[0-9]+$/,A1=(n,e)=>{const t=Xk.test(n),r=Xk.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},$W=(n,e)=>A1(e,n);var k1={compareIdentifiers:A1,rcompareIdentifiers:$W};const sg=Oy,{MAX_LENGTH:Qk,MAX_SAFE_INTEGER:og}=Ry,{safeRe:ug,t:lg}=Nh,IW=LE,{compareIdentifiers:Yl}=k1;let jW=class zi{constructor(e,t){if(t=IW(t),e instanceof zi){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Qk)throw new TypeError(`version is longer than ${Qk} characters`);sg("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?ug[lg.LOOSE]:ug[lg.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>og||this.major<0)throw new TypeError("Invalid major version");if(this.minor>og||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>og||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<og)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(sg("SemVer.compare",this.version,this.options,e),!(e instanceof zi)){if(typeof e=="string"&&e===this.version)return 0;e=new zi(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof zi||(e=new zi(e,this.options)),Yl(this.major,e.major)||Yl(this.minor,e.minor)||Yl(this.patch,e.patch)}comparePre(e){if(e instanceof zi||(e=new zi(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(sg("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Yl(r,i)}while(++t)}compareBuild(e){e instanceof zi||(e=new zi(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(sg("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Yl(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){const i=`-${t}`.match(this.options.loose?ug[lg.PRERELEASELOOSE]:ug[lg.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];r===!1&&(o=[t]),Yl(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var UE=jW;const eN=UE,DW=(n,e,t)=>new eN(n,t).compare(new eN(e,t));var Ac=DW;const LW=Ac,UW=(n,e,t)=>LW(n,e,t)>0;var MW=UW;const FW=Ac,BW=(n,e,t)=>FW(n,e,t)<0;var zW=BW;const VW=Ac,HW=(n,e,t)=>VW(n,e,t)===0;var qW=HW;const GW=Ac,WW=(n,e,t)=>GW(n,e,t)!==0;var JW=WW;const KW=Ac,ZW=(n,e,t)=>KW(n,e,t)>=0;var YW=ZW;const XW=Ac,QW=(n,e,t)=>XW(n,e,t)<=0;var e6=QW;const t6=qW,r6=JW,n6=MW,a6=YW,i6=zW,s6=e6,o6=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return t6(n,t,r);case"!=":return r6(n,t,r);case">":return n6(n,t,r);case">=":return a6(n,t,r);case"<":return i6(n,t,r);case"<=":return s6(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var u6=o6;const{safeRe:y7,t:v7}=Nh;class l6{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}}var c6=l6,T0,tN;function wi(){if(tN)return T0;tN=1;const n=/\s+/g;class e{constructor(Q,ye){if(ye=i(ye),Q instanceof e)return Q.loose===!!ye.loose&&Q.includePrerelease===!!ye.includePrerelease?Q:new e(Q.raw,ye);if(Q instanceof o)return this.raw=Q.value,this.set=[[Q]],this.formatted=void 0,this;if(this.options=ye,this.loose=!!ye.loose,this.includePrerelease=!!ye.includePrerelease,this.raw=Q.trim().replace(n," "),this.set=this.raw.split("||").map(te=>this.parseRange(te.trim())).filter(te=>te.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const te=this.set[0];if(this.set=this.set.filter(Se=>!C(Se[0])),this.set.length===0)this.set=[te];else if(this.set.length>1){for(const Se of this.set)if(Se.length===1&&T(Se[0])){this.set=[Se];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Q=0;Q<this.set.length;Q++){Q>0&&(this.formatted+="||");const ye=this.set[Q];for(let te=0;te<ye.length;te++)te>0&&(this.formatted+=" "),this.formatted+=ye[te].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Q){const te=((this.options.includePrerelease&&_)|(this.options.loose&&S))+":"+Q,Se=r.get(te);if(Se)return Se;const _e=this.options.loose,Pe=_e?f[p.HYPHENRANGELOOSE]:f[p.HYPHENRANGE];Q=Q.replace(Pe,st(this.options.includePrerelease)),u("hyphen replace",Q),Q=Q.replace(f[p.COMPARATORTRIM],m),u("comparator trim",Q),Q=Q.replace(f[p.TILDETRIM],y),u("tilde trim",Q),Q=Q.replace(f[p.CARETTRIM],b),u("caret trim",Q);let Ze=Q.split(" ").map(ut=>A(ut,this.options)).join(" ").split(/\s+/).map(ut=>ke(ut,this.options));_e&&(Ze=Ze.filter(ut=>(u("loose invalid filter",ut,this.options),!!ut.match(f[p.COMPARATORLOOSE])))),u("range list",Ze);const $e=new Map,ht=Ze.map(ut=>new o(ut,this.options));for(const ut of ht){if(C(ut))return[ut];$e.set(ut.value,ut)}$e.size>1&&$e.has("")&&$e.delete("");const Rt=[...$e.values()];return r.set(te,Rt),Rt}intersects(Q,ye){if(!(Q instanceof e))throw new TypeError("a Range is required");return this.set.some(te=>R(te,ye)&&Q.set.some(Se=>R(Se,ye)&&te.every(_e=>Se.every(Pe=>_e.intersects(Pe,ye)))))}test(Q){if(!Q)return!1;if(typeof Q=="string")try{Q=new c(Q,this.options)}catch{return!1}for(let ye=0;ye<this.set.length;ye++)if(Ue(this.set[ye],Q,this.options))return!0;return!1}}T0=e;const t=c6,r=new t,i=LE,o=Ay(),u=Oy,c=UE,{safeRe:f,t:p,comparatorTrimReplace:m,tildeTrimReplace:y,caretTrimReplace:b}=Nh,{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:S}=Ry,C=ae=>ae.value==="<0.0.0-0",T=ae=>ae.value==="",R=(ae,Q)=>{let ye=!0;const te=ae.slice();let Se=te.pop();for(;ye&&te.length;)ye=te.every(_e=>Se.intersects(_e,Q)),Se=te.pop();return ye},A=(ae,Q)=>(u("comp",ae,Q),ae=q(ae,Q),u("caret",ae),ae=P(ae,Q),u("tildes",ae),ae=ie(ae,Q),u("xrange",ae),ae=Ae(ae,Q),u("stars",ae),ae),O=ae=>!ae||ae.toLowerCase()==="x"||ae==="*",P=(ae,Q)=>ae.trim().split(/\s+/).map(ye=>j(ye,Q)).join(" "),j=(ae,Q)=>{const ye=Q.loose?f[p.TILDELOOSE]:f[p.TILDE];return ae.replace(ye,(te,Se,_e,Pe,Ze)=>{u("tilde",ae,te,Se,_e,Pe,Ze);let $e;return O(Se)?$e="":O(_e)?$e=`>=${Se}.0.0 <${+Se+1}.0.0-0`:O(Pe)?$e=`>=${Se}.${_e}.0 <${Se}.${+_e+1}.0-0`:Ze?(u("replaceTilde pr",Ze),$e=`>=${Se}.${_e}.${Pe}-${Ze} <${Se}.${+_e+1}.0-0`):$e=`>=${Se}.${_e}.${Pe} <${Se}.${+_e+1}.0-0`,u("tilde return",$e),$e})},q=(ae,Q)=>ae.trim().split(/\s+/).map(ye=>G(ye,Q)).join(" "),G=(ae,Q)=>{u("caret",ae,Q);const ye=Q.loose?f[p.CARETLOOSE]:f[p.CARET],te=Q.includePrerelease?"-0":"";return ae.replace(ye,(Se,_e,Pe,Ze,$e)=>{u("caret",ae,Se,_e,Pe,Ze,$e);let ht;return O(_e)?ht="":O(Pe)?ht=`>=${_e}.0.0${te} <${+_e+1}.0.0-0`:O(Ze)?_e==="0"?ht=`>=${_e}.${Pe}.0${te} <${_e}.${+Pe+1}.0-0`:ht=`>=${_e}.${Pe}.0${te} <${+_e+1}.0.0-0`:$e?(u("replaceCaret pr",$e),_e==="0"?Pe==="0"?ht=`>=${_e}.${Pe}.${Ze}-${$e} <${_e}.${Pe}.${+Ze+1}-0`:ht=`>=${_e}.${Pe}.${Ze}-${$e} <${_e}.${+Pe+1}.0-0`:ht=`>=${_e}.${Pe}.${Ze}-${$e} <${+_e+1}.0.0-0`):(u("no pr"),_e==="0"?Pe==="0"?ht=`>=${_e}.${Pe}.${Ze}${te} <${_e}.${Pe}.${+Ze+1}-0`:ht=`>=${_e}.${Pe}.${Ze}${te} <${_e}.${+Pe+1}.0-0`:ht=`>=${_e}.${Pe}.${Ze} <${+_e+1}.0.0-0`),u("caret return",ht),ht})},ie=(ae,Q)=>(u("replaceXRanges",ae,Q),ae.split(/\s+/).map(ye=>de(ye,Q)).join(" ")),de=(ae,Q)=>{ae=ae.trim();const ye=Q.loose?f[p.XRANGELOOSE]:f[p.XRANGE];return ae.replace(ye,(te,Se,_e,Pe,Ze,$e)=>{u("xRange",ae,te,Se,_e,Pe,Ze,$e);const ht=O(_e),Rt=ht||O(Pe),ut=Rt||O(Ze),ir=ut;return Se==="="&&ir&&(Se=""),$e=Q.includePrerelease?"-0":"",ht?Se===">"||Se==="<"?te="<0.0.0-0":te="*":Se&&ir?(Rt&&(Pe=0),Ze=0,Se===">"?(Se=">=",Rt?(_e=+_e+1,Pe=0,Ze=0):(Pe=+Pe+1,Ze=0)):Se==="<="&&(Se="<",Rt?_e=+_e+1:Pe=+Pe+1),Se==="<"&&($e="-0"),te=`${Se+_e}.${Pe}.${Ze}${$e}`):Rt?te=`>=${_e}.0.0${$e} <${+_e+1}.0.0-0`:ut&&(te=`>=${_e}.${Pe}.0${$e} <${_e}.${+Pe+1}.0-0`),u("xRange return",te),te})},Ae=(ae,Q)=>(u("replaceStars",ae,Q),ae.trim().replace(f[p.STAR],"")),ke=(ae,Q)=>(u("replaceGTE0",ae,Q),ae.trim().replace(f[Q.includePrerelease?p.GTE0PRE:p.GTE0],"")),st=ae=>(Q,ye,te,Se,_e,Pe,Ze,$e,ht,Rt,ut,ir)=>(O(te)?ye="":O(Se)?ye=`>=${te}.0.0${ae?"-0":""}`:O(_e)?ye=`>=${te}.${Se}.0${ae?"-0":""}`:Pe?ye=`>=${ye}`:ye=`>=${ye}${ae?"-0":""}`,O(ht)?$e="":O(Rt)?$e=`<${+ht+1}.0.0-0`:O(ut)?$e=`<${ht}.${+Rt+1}.0-0`:ir?$e=`<=${ht}.${Rt}.${ut}-${ir}`:ae?$e=`<${ht}.${Rt}.${+ut+1}-0`:$e=`<=${$e}`,`${ye} ${$e}`.trim()),Ue=(ae,Q,ye)=>{for(let te=0;te<ae.length;te++)if(!ae[te].test(Q))return!1;if(Q.prerelease.length&&!ye.includePrerelease){for(let te=0;te<ae.length;te++)if(u(ae[te].semver),ae[te].semver!==o.ANY&&ae[te].semver.prerelease.length>0){const Se=ae[te].semver;if(Se.major===Q.major&&Se.minor===Q.minor&&Se.patch===Q.patch)return!0}return!1}return!0};return T0}var C0,rN;function Ay(){if(rN)return C0;rN=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(m,y){if(y=t(y),m instanceof e){if(m.loose===!!y.loose)return m;m=m.value}m=m.trim().split(/\s+/).join(" "),u("comparator",m,y),this.options=y,this.loose=!!y.loose,this.parse(m),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(m){const y=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],b=m.match(y);if(!b)throw new TypeError(`Invalid comparator: ${m}`);this.operator=b[1]!==void 0?b[1]:"",this.operator==="="&&(this.operator=""),b[2]?this.semver=new c(b[2],this.options.loose):this.semver=n}toString(){return this.value}test(m){if(u("Comparator.test",m,this.options.loose),this.semver===n||m===n)return!0;if(typeof m=="string")try{m=new c(m,this.options)}catch{return!1}return o(m,this.operator,this.semver,this.options)}intersects(m,y){if(!(m instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(m.value,y).test(this.value):m.operator===""?m.value===""?!0:new f(this.value,y).test(m.semver):(y=t(y),y.includePrerelease&&(this.value==="<0.0.0-0"||m.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||m.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&m.operator.startsWith(">")||this.operator.startsWith("<")&&m.operator.startsWith("<")||this.semver.version===m.semver.version&&this.operator.includes("=")&&m.operator.includes("=")||o(this.semver,"<",m.semver,y)&&this.operator.startsWith(">")&&m.operator.startsWith("<")||o(this.semver,">",m.semver,y)&&this.operator.startsWith("<")&&m.operator.startsWith(">")))}}C0=e;const t=LE,{safeRe:r,t:i}=Nh,o=u6,u=Oy,c=UE,f=wi();return C0}wi();wi();wi();wi();wi();wi();const d6=Ay(),{ANY:b7}=d6;wi();wi();wi();const ME=Ay(),{ANY:_7}=ME;new ME(">=0.0.0-0");new ME(">=0.0.0");const R0=Nh,nN=Ry,aN=k1;Ay();wi();R0.re,R0.src,R0.t,nN.SEMVER_SPEC_VERSION,nN.RELEASE_TYPES,aN.compareIdentifiers,aN.rcompareIdentifiers;function co(n){if(!n||n.split("/").length>2||n.startsWith("/")||n.endsWith("/")||n.split(":").length>2)throw new Error(`Invalid identifier format: ${n}`);const[e,t]=n.split(":"),r=t||"latest";if(e.includes("/")){const[i,o]=e.split("/",2);if(!i||!o)throw new Error(`Invalid identifier format: ${n}`);return[i,o,r]}else{if(!e)throw new Error(`Invalid identifier format: ${n}`);return["-",e,r]}}class f6 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function Ve(n,e,t){let r;if(n.ok){t&&(r=await n.text());return}if(n.status===403)try{const u=await n.json();(u==null?void 0:u.error)==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const c=new Error(`${n.status} ${n.statusText}`);throw c.status=n==null?void 0:n.status,c}if(r===void 0)try{r=await n.text()}catch{r=""}const i=`Failed to ${e}. Received status [${n.status}]: ${n.statusText}. Message: ${r}`;if(n.status===409)throw new f6(i);const o=new Error(i);throw o.status=n.status,o}const N1="ERR_CONFLICTING_ENDPOINTS";class h6 extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:N1}),this.name="ConflictingEndpointsError"}}function p6(n){return typeof n=="object"&&n!==null&&n.code===N1}var iN="[...]",m6={result:"[Circular]"},Kg=[],uc=[];const g6=new TextEncoder;function y6(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function cg(n){return g6.encode(n)}function P1(n){if(n&&typeof n=="object"&&n!==null){if(n instanceof Map)return Object.fromEntries(n);if(n instanceof Set)return Array.from(n);if(n instanceof Date)return n.toISOString();if(n instanceof RegExp)return n.toString();if(n instanceof Error)return{name:n.name,message:n.message}}else if(typeof n=="bigint")return n.toString();return n}function v6(n){return function(e,t){return P1(t)}}function wa(n,e,t,r,i){var o;try{const u=JSON.stringify(n,v6(t),r);return cg(u)}catch(u){if(!((o=u.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),cg("[Unserializable]");sa("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=y6()),IS(n,"",0,[],void 0,0,i);let c;try{uc.length===0?c=JSON.stringify(n,t,r):c=JSON.stringify(n,b6(t),r)}catch{return cg("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Kg.length!==0;){const f=Kg.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return cg(c)}}function O0(n,e,t,r){var i=Object.getOwnPropertyDescriptor(r,t);i.get!==void 0?i.configurable?(Object.defineProperty(r,t,{value:n}),Kg.push([r,t,e,i])):uc.push([e,t,n]):(r[t]=n,Kg.push([r,t,e]))}function IS(n,e,t,r,i,o,u){o+=1;var c;if(typeof n=="object"&&n!==null){for(c=0;c<r.length;c++)if(r[c]===n){O0(m6,n,e,i);return}if(typeof u.depthLimit<"u"&&o>u.depthLimit){O0(iN,n,e,i);return}if(typeof u.edgesLimit<"u"&&t+1>u.edgesLimit){O0(iN,n,e,i);return}if(r.push(n),Array.isArray(n))for(c=0;c<n.length;c++)IS(n[c],c,c,r,n,o,u);else{n=P1(n);var f=Object.keys(n);for(c=0;c<f.length;c++){var p=f[c];IS(n[p],p,c,r,n,o,u)}}r.pop()}}function b6(n){return n=typeof n<"u"?n:function(e,t){return t},function(e,t){if(uc.length>0)for(var r=0;r<uc.length;r++){var i=uc[r];if(i[1]===e&&i[0]===t){t=i[2],uc.splice(r,1);break}}return n.call(this,e,t)}}function sN(n){const e=b1(),t=YG(),r=n.extra??{},i=r.metadata;return n.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...t,...t.revision_id||"revision_id"in n&&n.revision_id?{revision_id:("revision_id"in n?n.revision_id:void 0)??t.revision_id}:{},...i}},n}const _6=n=>{const e=(n==null?void 0:n.toString())??sa("TRACING_SAMPLING_RATE");if(e===void 0)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},w6=n=>{const t=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"};async function S6(n){const e=[];for await(const t of n)e.push(t);return e}function dg(n){if(n!==void 0)return n.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const E6=async n=>{if((n==null?void 0:n.status)===429){const e=parseInt(n.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(t=>setTimeout(t,e)),!0}return!1};function oN(n){return typeof n=="number"?Number(n.toFixed(4)):n}class x6{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const r=new Promise(o=>{t=o}),i=wa(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:t,itemPromise:r,size:i}),this.sizeBytes+=i,r}pop(e){var i;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let r=0;for(;r+(((i=this.peek())==null?void 0:i.size)??0)<e&&this.items.length>0;){const o=this.items.shift();o&&(t.push(o),r+=o.size,this.sizeBytes-=o.size)}if(t.length===0&&this.items.length>0){const o=this.items.shift();t.push(o),r+=o.size,this.sizeBytes-=o.size}return[t.map(o=>({action:o.action,item:o.payload,otelContext:o.otelContext,apiKey:o.apiKey,apiUrl:o.apiUrl})),()=>t.forEach(o=>o.itemPromiseResolve())]}}const T6=24*1024*1024,C6=1e4,uN="https://api.smith.langchain.com";class mh{get _fetch(){return this.fetchImplementation||GG(this.debug)}constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new x6}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Yi("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Yi("LANGSMITH_DEBUG")==="true"});const t=mh.getDefaultClientConfig();if(this.tracingSampleRate=_6(e.tracingSamplingRate),this.apiUrl=dg(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=dg(e.apiKey??t.apiKey),this.webUrl=dg(e.webUrl??t.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=dg(e.workspaceId??sa("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new Jk({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation,this.batchIngestCaller=new Jk({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:E6,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,_1()&&(this.langSmithToOTELTranslator=new cW)}static getDefaultClientConfig(){const e=sa("API_KEY"),t=sa("ENDPOINT")??uN,r=sa("HIDE_INPUTS")==="true",i=sa("HIDE_OUTPUTS")==="true";return{apiUrl:t,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:w6(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${g1}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const t={...e};return t.inputs!==void 0&&(t.inputs=await this.processInputs(t.inputs)),t.outputs!==void 0&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){const r=(t==null?void 0:t.toString())??"",i=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const u=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(u,`fetch ${e}`),u})}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let i=Number(t.get("offset"))||0;const o=Number(t.get("limit"))||100;for(;;){t.set("offset",String(i)),t.set("limit",String(o));const u=`${this.apiUrl}${e}?${t}`,c=await this.caller.call(async()=>{const p=await this._fetch(u,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(p,`fetch ${e}`),p}),f=r?r(await c.json()):await c.json();if(f.length===0||(yield f,f.length<o))break;i+=f.length}}async*_getCursorPaginatedList(e,t=null,r="POST",i="runs"){const o=t?{...t}:{};for(;;){const u=JSON.stringify(o),f=await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(m,`fetch ${e}`),m})).json();if(!f||!f[i])break;yield f[i];const p=f.cursors;if(!p||!p.next)break;o.cursor=p.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(this.tracingSampleRate===void 0)return e;if(t){const r=[];for(const i of e)this.filteredPostUuids.has(i.trace_id)?i.id===i.trace_id&&this.filteredPostUuids.delete(i.trace_id):r.push(i);return r}else{const r=[];for(const i of e){const o=i.trace_id??i.id;this.filteredPostUuids.has(o)||(i.id===o?this._shouldSample()?r.push(i):this.filteredPostUuids.add(o):r.push(i))}return r}}async _getBatchSizeLimitBytes(){var t;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((t=e.batch_ingest_config)==null?void 0:t.size_limit_bytes)??T6}async _getDatasetExamplesMultiPartSupport(){var t;return((t=(await this._ensureServerInfo()).instance_flags)==null?void 0:t.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[r,i]=this.autoBatchQueue.pop(e);if(!r.length){i();break}const o=r.reduce((f,p)=>{const m=p.apiUrl??this.apiUrl,y=p.apiKey??this.apiKey,_=p.apiKey===this.apiKey&&p.apiUrl===this.apiUrl?"default":`${m}|${y}`;return f[_]||(f[_]=[]),f[_].push(p),f},{}),u=[];for(const[f,p]of Object.entries(o)){const m=this._processBatch(p,{apiUrl:f==="default"?void 0:f.split("|")[0],apiKey:f==="default"?void 0:f.split("|")[1]});u.push(m)}const c=Promise.all(u).finally(i);t.push(c)}return Promise.all(t)}async _processBatch(e,t){var r,i;if(e.length)try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const o={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},u=await this._ensureServerInfo();if((r=u==null?void 0:u.batch_ingest_config)!=null&&r.use_multipart_endpoint){const c=(i=u==null?void 0:u.instance_flags)==null?void 0:i.gzip_body_enabled;await this.multipartIngestRuns(o,{...t,useGzip:c})}else await this.batchIngestRuns(o,t)}}catch(o){console.error("Error exporting batch:",o)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const t=new Map,r=[];for(const i of e)i.item.id&&i.otelContext&&(t.set(i.item.id,i.otelContext),i.action==="create"?r.push({operation:"post",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}):r.push({operation:"patch",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}));this.langSmithToOTELTranslator.exportBatch(r,t)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=sN(e.item);const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const t=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(C6),...this.fetchOptions});return await Ve(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(t,null,2)+`
`),t}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}_cloneCurrentOTELContext(){const e=w1(),t=sW();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(t.active(),r)}}async createRun(e,t){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;const o=await this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){const f=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:o,otelContext:f,apiKey:t==null?void 0:t.apiKey,apiUrl:t==null?void 0:t.apiUrl}).catch(console.error);return}const u=sN(o);(t==null?void 0:t.apiKey)!==void 0&&(r["x-api-key"]=t.apiKey),(t==null?void 0:t.workspaceId)!==void 0&&(r["x-tenant-id"]=t.workspaceId);const c=wa(u,`Creating run with id: ${u.id}`);await this.caller.call(async()=>{const f=await this._fetch(`${(t==null?void 0:t.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ve(f,"create run",!0),f})}async batchIngestRuns({runCreates:e,runUpdates:t},r){if(e===void 0&&t===void 0)return;let i=await Promise.all((e==null?void 0:e.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]),o=await Promise.all((t==null?void 0:t.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]);if(i.length>0&&o.length>0){const f=i.reduce((m,y)=>(y.id&&(m[y.id]=y),m),{}),p=[];for(const m of o)m.id!==void 0&&f[m.id]?f[m.id]={...f[m.id],...m}:p.push(m);i=Object.values(f),o=p}const u={post:i,patch:o};if(!u.post.length&&!u.patch.length)return;const c={post:[],patch:[]};for(const f of["post","patch"]){const p=f,m=u[p].reverse();let y=m.pop();for(;y!==void 0;)c[p].push(y),y=m.pop()}if(c.post.length>0||c.patch.length>0){const f=c.post.map(p=>p.id).concat(c.patch.map(p=>p.id)).join(",");await this._postBatchIngestRuns(wa(c,`Ingesting runs with ids: ${f}`),r)}}async _postBatchIngestRuns(e,t){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(t==null?void 0:t.apiKey)!==void 0&&(r["x-api-key"]=t.apiKey),await this.batchIngestCaller.call(async()=>{const i=await this._fetch(`${(t==null?void 0:t.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await Ve(i,"batch create run",!0),i})}async multipartIngestRuns({runCreates:e,runUpdates:t},r){if(e===void 0&&t===void 0)return;const i={};let o=[];for(const y of e??[]){const b=await this.prepareRunCreateOrUpdateInputs(y);b.id!==void 0&&b.attachments!==void 0&&(i[b.id]=b.attachments),delete b.attachments,o.push(b)}let u=[];for(const y of t??[])u.push(await this.prepareRunCreateOrUpdateInputs(y));if(o.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(u.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(o.length>0&&u.length>0){const y=o.reduce((_,S)=>(S.id&&(_[S.id]=S),_),{}),b=[];for(const _ of u)_.id!==void 0&&y[_.id]?y[_.id]={...y[_.id],..._}:b.push(_);o=Object.values(y),u=b}if(o.length===0&&u.length===0)return;const p=[],m=[];for(const[y,b]of[["post",o],["patch",u]])for(const _ of b){const{inputs:S,outputs:C,events:T,extra:R,error:A,serialized:O,attachments:P,...j}=_,q={inputs:S,outputs:C,events:T,extra:R,error:A,serialized:O},G=wa(j,`Serializing for multipart ingestion of run with id: ${j.id}`);m.push({name:`${y}.${j.id}`,payload:new Blob([G],{type:`application/json; length=${G.length}`})});for(const[ie,de]of Object.entries(q)){if(de===void 0)continue;const Ae=wa(de,`Serializing ${ie} for multipart ingestion of run with id: ${j.id}`);m.push({name:`${y}.${j.id}.${ie}`,payload:new Blob([Ae],{type:`application/json; length=${Ae.length}`})})}if(j.id!==void 0){const ie=i[j.id];if(ie){delete i[j.id];for(const[de,Ae]of Object.entries(ie)){let ke,st;if(Array.isArray(Ae)?[ke,st]=Ae:(ke=Ae.mimeType,st=Ae.data),de.includes(".")){console.warn(`Skipping attachment '${de}' for run ${j.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}m.push({name:`attachment.${j.id}.${de}`,payload:new Blob([st],{type:`${ke}; length=${st.byteLength}`})})}}}p.push(`trace=${j.trace_id},id=${j.id}`)}await this._sendMultipartRequest(m,p.join("; "),r)}async _createNodeFetchBody(e,t){const r=[];for(const u of e)r.push(new Blob([`--${t}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${u.name}"\r
`,`Content-Type: ${u.payload.type}\r
\r
`])),r.push(u.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${t}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,t){const r=new TextEncoder;return new ReadableStream({async start(o){const u=async c=>{typeof c=="string"?o.enqueue(r.encode(c)):o.enqueue(c)};for(const c of e){await u(`--${t}\r
`),await u(`Content-Disposition: form-data; name="${c.name}"\r
`),await u(`Content-Type: ${c.payload.type}\r
\r
`);const p=c.payload.stream().getReader();try{let m;for(;!(m=await p.read()).done;)o.enqueue(m.value)}finally{p.releaseLock()}await u(`\r
`)}await u(`--${t}--\r
`),o.close()}})}async _sendMultipartRequest(e,t,r){const i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=qG(),u=()=>this._createNodeFetchBody(e,i),c=()=>this._createMultipartStream(e,i),f=async p=>this.batchIngestCaller.call(async()=>{const m=await p(),y={...this.headers,"Content-Type":`multipart/form-data; boundary=${i}`};(r==null?void 0:r.apiKey)!==void 0&&(y["x-api-key"]=r.apiKey);let b=m;r!=null&&r.useGzip&&typeof m=="object"&&"pipeThrough"in m&&(b=m.pipeThrough(new CompressionStream("gzip")),y["Content-Encoding"]="gzip");const _=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:y,body:b,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(_,"Failed to send multipart request",!0),_});try{let p,m=!1;!o&&!this.multipartStreamingDisabled&&v1()!=="bun"?(m=!0,p=await f(c)):p=await f(u),(!this.multipartStreamingDisabled||m)&&p.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==uN&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${t}".`),this.multipartStreamingDisabled=!0,p=await f(u))}catch(p){console.warn(`${p.message.trim()}

Context: ${t}`)}}async updateRun(e,t,r){lt(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));const i={...t,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const c=this._cloneCurrentOTELContext();if(t.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:i,otelContext:c,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:c,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const o={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(o["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(o["x-tenant-id"]=r.workspaceId);const u=wa(t,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const c=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:o,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(c,"update run",!0),c})}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){lt(e);let r=await this._get(`/runs/${e}`);return t&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(t!==void 0){let i;t.session_id?i=t.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:sa("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${i}/r/${t.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var o;const t=await S6(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},i={};t.sort((u,c)=>((u==null?void 0:u.dotted_order)??"").localeCompare((c==null?void 0:c.dotted_order)??""));for(const u of t){if(u.parent_run_id===null||u.parent_run_id===void 0)throw new Error(`Child run ${u.id} has no parent`);(o=u.dotted_order)!=null&&o.startsWith(e.dotted_order??"")&&u.id!==e.id&&(u.parent_run_id in r||(r[u.parent_run_id]=[]),r[u.parent_run_id].push(u),i[u.id]=u)}e.child_runs=r[e.id]||[];for(const u in r)u!==e.id&&(i[u].child_runs=r[u]);return e}async*listRuns(e){const{projectId:t,projectName:r,parentRunId:i,traceId:o,referenceExampleId:u,startTime:c,executionOrder:f,isRoot:p,runType:m,error:y,id:b,query:_,filter:S,traceFilter:C,treeFilter:T,limit:R,select:A,order:O}=e;let P=[];if(t&&(P=Array.isArray(t)?t:[t]),r){const ie=Array.isArray(r)?r:[r],de=await Promise.all(ie.map(Ae=>this.readProject({projectName:Ae}).then(ke=>ke.id)));P.push(...de)}const j=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],q={session:P.length?P:null,run_type:m,reference_example:u,query:_,filter:S,trace_filter:C,tree_filter:T,execution_order:f,parent_run:i,start_time:c?c.toISOString():null,error:y,id:b,limit:R,trace:o,select:A||j,is_root:p,order:O};let G=0;for await(const ie of this._getCursorPaginatedList("/runs/query",q))if(R){if(G>=R)break;if(ie.length+G>R){yield*ie.slice(0,R-G);break}G+=ie.length,yield*ie}else yield*ie}async*listGroupRuns(e){const{projectId:t,projectName:r,groupBy:i,filter:o,startTime:u,endTime:c,limit:f,offset:p}=e,y={session_id:t||(await this.readProject({projectName:r})).id,group_by:i,filter:o,start_time:u?u.toISOString():null,end_time:c?c.toISOString():null,limit:Number(f)||100};let b=Number(p)||0;const _="/runs/group",S=`${this.apiUrl}${_}`;for(;;){const C={...y,offset:b},T=Object.fromEntries(Object.entries(C).filter(([q,G])=>G!==void 0)),R=JSON.stringify(T),O=await(await this.caller.call(async()=>{const q=await this._fetch(S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:R});return await Ve(q,`Failed to fetch ${_}`),q})).json(),{groups:P,total:j}=O;if(P.length===0)break;for(const q of P)yield q;if(b+=P.length,b>=j)break}}async getRunStats({id:e,trace:t,parentRun:r,runType:i,projectNames:o,projectIds:u,referenceExampleIds:c,startTime:f,endTime:p,error:m,query:y,filter:b,traceFilter:_,treeFilter:S,isRoot:C,dataSourceType:T}){let R=u||[];o&&(R=[...u||[],...await Promise.all(o.map(G=>this.readProject({projectName:G}).then(ie=>ie.id)))]);const O=Object.fromEntries(Object.entries({id:e,trace:t,parent_run:r,run_type:i,session:R,reference_example:c,start_time:f,end_time:p,error:m,query:y,filter:b,trace_filter:_,tree_filter:S,is_root:C,data_source_type:T}).filter(([G,ie])=>ie!==void 0)),P=JSON.stringify(O);return await(await this.caller.call(async()=>{const G=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:P});return await Ve(G,"get run stats"),G})).json()}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||qn()};lt(e);const i=JSON.stringify(r),u=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Ve(c,"share run"),c})).json();if(u===null||!("share_token"in u))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${u.share_token}/r`}async unshareRun(e){lt(e),await this.caller.call(async()=>{const t=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(t,"unshare run",!0),t})}async readRunSharedLink(e){lt(e);const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(i,"read run shared link"),i})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(t!==void 0)for(const u of t)r.append("id",u);return lt(e),await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(u,"list shared runs"),u})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),lt(e);const i=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,"read dataset shared schema"),o})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const r={dataset_id:e};lt(e);const i=JSON.stringify(r),u=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Ve(c,"share dataset"),c})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async unshareDataset(e){lt(e),await this.caller.call(async()=>{const t=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(t,"unshare dataset",!0),t})}async readSharedDataset(e){return lt(e),await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(i,"read shared dataset"),i})).json()}async listSharedExamples(e,t){const r={};t!=null&&t.exampleIds&&(r.id=t.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([c,f])=>{Array.isArray(f)?f.forEach(p=>i.append(c,p)):i.append(c,f)});const o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(c,"list shared examples"),c}),u=await o.json();if(!o.ok)throw"detail"in u?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(u.detail)?u.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return u.map(c=>({...c,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:i=!1,projectExtra:o=null,referenceDatasetId:u=null}){const c=i?"?upsert=true":"",f=`${this.apiUrl}/sessions${c}`,p=o||{};r&&(p.metadata=r);const m={name:e,extra:p,description:t};u!==null&&(m.reference_dataset_id=u);const y=JSON.stringify(m);return await(await this.caller.call(async()=>{const S=await this._fetch(f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await Ve(S,"create project"),S})).json()}async updateProject(e,{name:t=null,description:r=null,metadata:i=null,projectExtra:o=null,endTime:u=null}){const c=`${this.apiUrl}/sessions/${e}`;let f=o;i&&(f={...f||{},metadata:i});const p=JSON.stringify({name:t,extra:f,description:r,end_time:u?new Date(u).toISOString():null});return await(await this.caller.call(async()=>{const b=await this._fetch(c,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:p});return await Ve(b,"update project"),b})).json()}async hasProject({projectId:e,projectName:t}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)lt(e),r+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(u,"has project"),u});try{const u=await o.json();return o.ok?Array.isArray(u)?u.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let i="/sessions";const o=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)lt(e),i+=`/${e}`;else if(t!==void 0)o.append("name",t);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const u=await this._get(i,o);let c;if(Array.isArray(u)){if(u.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);c=u[0]}else c=u;return c}async getProjectUrl({projectId:e,projectName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:i,referenceDatasetName:o,includeStats:u,datasetVersion:c,referenceFree:f,metadata:p}={}){const m=new URLSearchParams;if(e!==void 0)for(const y of e)m.append("id",y);if(t!==void 0&&m.append("name",t),r!==void 0&&m.append("name_contains",r),i!==void 0)m.append("reference_dataset",i);else if(o!==void 0){const y=await this.readDataset({datasetName:o});m.append("reference_dataset",y.id)}u!==void 0&&m.append("include_stats",u.toString()),c!==void 0&&m.append("dataset_version",c),f!==void 0&&m.append("reference_free",f.toString()),p!==void 0&&m.append("metadata",JSON.stringify(p));for await(const y of this._getPaginated("/sessions",m))yield*y}async deleteProject({projectId:e,projectName:t}){let r;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:t})).id:r=e,lt(r),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(i,`delete session ${r} (${t})`,!0),i})}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:i,description:o,dataType:u,name:c}){const f=`${this.apiUrl}/datasets/upload`,p=new FormData;return p.append("file",e,t),r.forEach(b=>{p.append("input_keys",b)}),i.forEach(b=>{p.append("output_keys",b)}),o&&p.append("description",o),u&&p.append("data_type",u),c&&p.append("name",c),await(await this.caller.call(async()=>{const b=await this._fetch(f,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:p});return await Ve(b,"upload CSV"),b})).json()}async createDataset(e,{description:t,dataType:r,inputsSchema:i,outputsSchema:o,metadata:u}={}){const c={name:e,description:t,extra:u?{metadata:u}:void 0};r&&(c.data_type=r),i&&(c.inputs_schema_definition=i),o&&(c.outputs_schema_definition=o);const f=JSON.stringify(c);return await(await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ve(y,"create dataset"),y})).json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e&&t)throw new Error("Must provide either datasetName or datasetId, not both");if(e)lt(e),r+=`/${e}`;else if(t)i.append("name",t);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,i);let u;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);u=o[0]}else u=o;return u}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:i}){let o=e;if(o===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:t})).id);const u=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,u)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){const r="/datasets";if(e===void 0)if(t!==void 0)e=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(c=>JSON.parse(c))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:i,datasetNameContains:o,metadata:u}={}){const c="/datasets",f=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(r!==void 0)for(const p of r)f.append("id",p);i!==void 0&&f.append("name",i),o!==void 0&&f.append("name_contains",o),u!==void 0&&f.append("metadata",JSON.stringify(u));for await(const p of this._getPaginated(c,f))yield*p}async updateDataset(e){const{datasetId:t,datasetName:r,...i}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const o=t??(await this.readDataset({datasetName:r})).id;lt(o);const u=JSON.stringify(i);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(f,"update dataset"),f})).json()}async updateDatasetTag(e){const{datasetId:t,datasetName:r,asOf:i,tag:o}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const u=t??(await this.readDataset({datasetName:r})).id;lt(u);const c=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:o});await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${u}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ve(f,"update dataset tags",!0),f})}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",i=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(i=(await this.readDataset({datasetName:t})).id),i!==void 0)lt(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const o=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,`delete ${r}`,!0),o})}async indexDataset({datasetId:e,datasetName:t,tag:r}){let i=e;if(!i&&!t)throw new Error("Must provide either datasetName or datasetId");if(i&&t)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:t})).id),lt(i);const u=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(f,"index dataset"),f})).json()}async similarExamples(e,t,r,{filter:i}={}){const o={limit:r,inputs:e};i!==void 0&&(o.filter=i),lt(t);const u=JSON.stringify(o);return(await(await this.caller.call(async()=>{const p=await this._fetch(`${this.apiUrl}/datasets/${t}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:u});return await Ve(p,"fetch similar examples"),p})).json()).examples}async createExample(e,t,r){var m;if(lN(e)&&(t!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=t?r==null?void 0:r.datasetId:e.dataset_id;const o=t?r==null?void 0:r.datasetName:e.dataset_name;if(i===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:o})).id);const u=(t?r==null?void 0:r.createdAt:e.created_at)||new Date;let c;lN(e)?c=e:c={inputs:e,outputs:t,created_at:u==null?void 0:u.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const f=await this._uploadExamplesMultipart(i,[c]);return await this.readExample(((m=f.example_ids)==null?void 0:m[0])??qn())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const A=e;let O=A[0].dataset_id;const P=A[0].dataset_name;if(O===void 0&&P===void 0)throw new Error("Must provide either datasetName or datasetId");if(O!==void 0&&P!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");O===void 0&&(O=(await this.readDataset({datasetName:P})).id);const j=await this._uploadExamplesMultipart(O,A);return await Promise.all(j.example_ids.map(G=>this.readExample(G)))}const{inputs:t,outputs:r,metadata:i,splits:o,sourceRunIds:u,useSourceRunIOs:c,useSourceRunAttachments:f,attachments:p,exampleIds:m,datasetId:y,datasetName:b}=e;if(t===void 0)throw new Error("Must provide inputs when using legacy parameters");let _=y;const S=b;if(_===void 0&&S===void 0)throw new Error("Must provide either datasetName or datasetId");if(_!==void 0&&S!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");_===void 0&&(_=(await this.readDataset({datasetName:S})).id);const C=t.map((A,O)=>({dataset_id:_,inputs:A,outputs:r==null?void 0:r[O],metadata:i==null?void 0:i[O],split:o==null?void 0:o[O],id:m==null?void 0:m[O],attachments:p==null?void 0:p[O],source_run_id:u==null?void 0:u[O],use_source_run_io:c==null?void 0:c[O],use_source_run_attachments:f==null?void 0:f[O]})),T=await this._uploadExamplesMultipart(_,C);return await Promise.all(T.example_ids.map(A=>this.readExample(A)))}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const i=e.map(u=>Kk(u)?Zk(u):u),o=Kk(t)?Zk(t):t;return this.createExample({input:i},{output:o},r)}async readExample(e){lt(e);const t=`/examples/${e}`,r=await this._get(t),{attachment_urls:i,...o}=r,u=o;return i&&(u.attachments=Object.entries(i).reduce((c,[f,p])=>(c[f.slice(11)]={presigned_url:p.presigned_url,mime_type:p.mime_type},c),{})),u}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:i,splits:o,inlineS3Urls:u,metadata:c,limit:f,offset:p,filter:m,includeAttachments:y}={}){let b;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)b=e;else if(t!==void 0)b=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const _=new URLSearchParams({dataset:b}),S=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;S&&_.append("as_of",S);const C=u??!0;if(_.append("inline_s3_urls",C.toString()),r!==void 0)for(const R of r)_.append("id",R);if(o!==void 0)for(const R of o)_.append("splits",R);if(c!==void 0){const R=JSON.stringify(c);_.append("metadata",R)}f!==void 0&&_.append("limit",f.toString()),p!==void 0&&_.append("offset",p.toString()),m!==void 0&&_.append("filter",m),y===!0&&["attachment_urls","outputs","metadata"].forEach(R=>_.append("select",R));let T=0;for await(const R of this._getPaginated("/examples",_)){for(const A of R){const{attachment_urls:O,...P}=A,j=P;O&&(j.attachments=Object.entries(O).reduce((q,[G,ie])=>(q[G.slice(11)]={presigned_url:ie.presigned_url,mime_type:ie.mime_type||void 0},q),{})),yield j,T++}if(f!==void 0&&T>=f)break}}async deleteExample(e){lt(e);const t=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(r,`delete ${t}`,!0),r})}async updateExample(e,t){let r;t?r=e:r=e.id,lt(r);let i;t?i={id:r,...t}:i=e;let o;return i.dataset_id!==void 0?o=i.dataset_id:o=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(o,[i])}async updateExamples(e){let t;return e[0].dataset_id===void 0?t=(await this.readExample(e[0].id)).dataset_id:t=e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:r,tag:i}){let o;if(e?o=e:o=(await this.readDataset({datasetName:t})).id,lt(o),r&&i||!r&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const u=new URLSearchParams;return r!==void 0&&u.append("as_of",typeof r=="string"?r:r.toISOString()),i!==void 0&&u.append("tag",i),await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${o}/version?${u.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(f,"read dataset version"),f})).json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let i;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:t})).id:i=e,lt(i);const o=new URLSearchParams,u=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return u&&o.append("as_of",u),await this._get(`/datasets/${i}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:i,remove:o=!1}){let u;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?u=(await this.readDataset({datasetName:t})).id:u=e,lt(u);const c={split_name:r,examples:i.map(p=>(lt(p),p)),remove:o},f=JSON.stringify(c);await this.caller.call(async()=>{const p=await this._fetch(`${this.apiUrl}/datasets/${u}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ve(p,"update dataset splits",!0),p})}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:i,referenceExample:o}={loadChildRuns:!1}){R1("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let u;if(typeof e=="string")u=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)u=e;else throw new Error(`Invalid run type: ${typeof e}`);u.reference_example_id!==null&&u.reference_example_id!==void 0&&(o=await this.readExample(u.reference_example_id));const c=await t.evaluateRun(u,o),[f,p]=await this._logEvaluationFeedback(c,u,r);return p[0]}async createFeedback(e,t,{score:r,value:i,correction:o,comment:u,sourceInfo:c,feedbackSourceType:f="api",sourceRunId:p,feedbackId:m,feedbackConfig:y,projectId:b,comparativeExperimentId:_}){var A;if(!e&&!b)throw new Error("One of runId or projectId must be provided");if(e&&b)throw new Error("Only one of runId or projectId can be provided");const S={type:f??"api",metadata:c??{}};p!==void 0&&(S==null?void 0:S.metadata)!==void 0&&!S.metadata.__run&&(S.metadata.__run={run_id:p}),(S==null?void 0:S.metadata)!==void 0&&((A=S.metadata.__run)==null?void 0:A.run_id)!==void 0&&lt(S.metadata.__run.run_id);const C={id:m??qn(),run_id:e,key:t,score:oN(r),value:i,correction:o,comment:u,feedback_source:S,comparative_experiment_id:_,feedbackConfig:y,session_id:b},T=JSON.stringify(C),R=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const O=await this._fetch(R,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:T});return await Ve(O,"create feedback",!0),O}),C}async updateFeedback(e,{score:t,value:r,correction:i,comment:o}){const u={};t!=null&&(u.score=oN(t)),r!=null&&(u.value=r),i!=null&&(u.correction=i),o!=null&&(u.comment=o),lt(e);const c=JSON.stringify(u);await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ve(f,"update feedback",!0),f})}async readFeedback(e){lt(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){lt(e);const t=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(r,`delete ${t}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e)for(const o of e)lt(o),i.append("run",o);if(t)for(const o of t)i.append("key",o);if(r)for(const o of r)i.append("source",o);for await(const o of this._getPaginated("/feedback",i))yield*o}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:i}={}){const o={run_id:e,feedback_key:t,feedback_config:i};r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3};const u=JSON.stringify(o);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(f,"create presigned feedback token"),f})).json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:i,description:o,metadata:u,id:c}){var y;if(t.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const f={id:c,name:e,experiment_ids:t,reference_dataset_id:r,description:o,created_at:(y=i??new Date)==null?void 0:y.toISOString(),extra:{}};u&&(f.extra.metadata=u);const p=JSON.stringify(f);return(await this.caller.call(async()=>{const b=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:p});return await Ve(b,"create comparative experiment"),b})).json()}async*listPresignedFeedbackTokens(e){lt(e);const t=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",t))yield*r}_selectEvalResults(e){let t;return"results"in e?t=e.results:Array.isArray(e)?t=e:t=[e],t}async _logEvaluationFeedback(e,t,r){const i=this._selectEvalResults(e),o=[];for(const u of i){let c=r||{};u.evaluatorInfo&&(c={...u.evaluatorInfo,...c});let f=null;u.targetRunId?f=u.targetRunId:t&&(f=t.id),o.push(await this.createFeedback(f,u.key,{score:u.score,value:u.value,comment:u.comment,correction:u.correction,sourceInfo:c,sourceRunId:u.sourceRunId,feedbackConfig:u.feedbackConfig,feedbackSourceType:"model"}))}return[i,o]}async logEvaluationFeedback(e,t,r){const[i]=await this._logEvaluationFeedback(e,t,r);return i}async*listAnnotationQueues(e={}){const{queueIds:t,name:r,nameContains:i,limit:o}=e,u=new URLSearchParams;t&&t.forEach((f,p)=>{lt(f,`queueIds[${p}]`),u.append("ids",f)}),r&&u.append("name",r),i&&u.append("name_contains",i),u.append("limit",(o!==void 0?Math.min(o,100):100).toString());let c=0;for await(const f of this._getPaginated("/annotation-queues",u))if(yield*f,c++,o!==void 0&&c>=o)break}async createAnnotationQueue(e){const{name:t,description:r,queueId:i,rubricInstructions:o}=e,u={name:t,description:r,id:i||qn(),rubric_instructions:o},c=JSON.stringify(Object.fromEntries(Object.entries(u).filter(([p,m])=>m!==void 0)));return(await this.caller.call(async()=>{const p=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ve(p,"create annotation queue"),p})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,t){const{name:r,description:i,rubricInstructions:o}=t,u=JSON.stringify({name:r,description:i,rubric_instructions:o});await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(c,"update annotation queue",!0),c})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const t=await this._fetch(`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(t,"delete annotation queue",!0),t})}async addRunsToAnnotationQueue(e,t){const r=JSON.stringify(t.map((i,o)=>lt(i,`runIds[${o}]`).toString()));await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Ve(i,"add runs to annotation queue",!0),i})}async getRunFromAnnotationQueue(e,t){const r=`/annotation-queues/${lt(e,"queueId")}/run`;return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,"get run from annotation queue"),o})).json()}async deleteRunFromAnnotationQueue(e,t){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}/runs/${lt(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return e=="-"||t.tenant_handle===e}async _ownerConflictError(e,t){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(i,"get latest commit hash"),i})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[r,i,o]=co(e),u=JSON.stringify({like:t});return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(f,`${t?"like":"unlike"} prompt`),f})).json()}async _getPromptUrl(e){const[t,r,i]=co(e);if(await this._currentTenantIsOwner(t)){const o=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${t}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&t.append("is_public",e.isPublic.toString()),e!=null&&e.query&&t.append("query",e.query);for await(const r of this._getPaginated("/repos",t,i=>i.repos))yield*r}async getPrompt(e){const[t,r,i]=co(e),o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(c==null?void 0:c.status)===404?null:(await Ve(c,"get prompt"),c)}),u=await(o==null?void 0:o.json());return u!=null&&u.repo?u.repo:null}async createPrompt(e,t){const r=await this._getSettings();if(t!=null&&t.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,o,u]=co(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const c={repo_handle:o,...(t==null?void 0:t.description)&&{description:t.description},...(t==null?void 0:t.readme)&&{readme:t.readme},...(t==null?void 0:t.tags)&&{tags:t.tags},is_public:!!(t!=null&&t.isPublic)},f=JSON.stringify(c),p=await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ve(y,"create prompt"),y}),{repo:m}=await p.json();return m}async createCommit(e,t,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,o,u]=co(e),c=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${o}`):r==null?void 0:r.parentCommitHash,f={manifest:JSON.parse(JSON.stringify(t)),parent_commit:c},p=JSON.stringify(f),y=await(await this.caller.call(async()=>{const b=await this._fetch(`${this.apiUrl}/commits/${i}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:p});return await Ve(b,"create commit"),b})).json();return this._getPromptUrl(`${i}/${o}${y.commit_hash?`:${y.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){var u;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const c of t){const f=c.id,p={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},m=wa(p,`Serializing body for example with id: ${f}`),y=new Blob([m],{type:"application/json"});if(r.append(f,y),c.inputs){const b=wa(c.inputs,`Serializing inputs for example with id: ${f}`),_=new Blob([b],{type:"application/json"});r.append(`${f}.inputs`,_)}if(c.outputs){const b=wa(c.outputs,`Serializing outputs whle updating example with id: ${f}`),_=new Blob([b],{type:"application/json"});r.append(`${f}.outputs`,_)}if(c.attachments)for(const[b,_]of Object.entries(c.attachments)){let S,C;Array.isArray(_)?[S,C]=_:(S=_.mimeType,C=_.data);const T=new Blob([C],{type:`${S}; length=${C.byteLength}`});r.append(`${f}.attachment.${b}`,T)}if(c.attachments_operations){const b=wa(c.attachments_operations,`Serializing attachments while updating example with id: ${f}`),_=new Blob([b],{type:"application/json"});r.append(`${f}.attachments_operations`,_)}}const i=e??((u=t[0])==null?void 0:u.dataset_id);return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${i}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Ve(c,"update examples"),c})).json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of t){const u=(o.id??qn()).toString(),c={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},f=wa(c,`Serializing body for uploaded example with id: ${u}`),p=new Blob([f],{type:"application/json"});if(r.append(u,p),o.inputs){const m=wa(o.inputs,`Serializing inputs for uploaded example with id: ${u}`),y=new Blob([m],{type:"application/json"});r.append(`${u}.inputs`,y)}if(o.outputs){const m=wa(o.outputs,`Serializing outputs for uploaded example with id: ${u}`),y=new Blob([m],{type:"application/json"});r.append(`${u}.outputs`,y)}if(o.attachments)for(const[m,y]of Object.entries(o.attachments)){let b,_;Array.isArray(y)?[b,_]=y:(b=y.mimeType,_=y.data);const S=new Blob([_],{type:`${b}; length=${_.byteLength}`});r.append(`${u}.attachment.${m}`,S)}}return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Ve(o,"upload examples"),o})).json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=co(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((t==null?void 0:t.description)!==void 0&&(o.description=t.description),(t==null?void 0:t.readme)!==void 0&&(o.readme=t.readme),(t==null?void 0:t.tags)!==void 0&&(o.tags=t.tags),(t==null?void 0:t.isPublic)!==void 0&&(o.is_public=t.isPublic),(t==null?void 0:t.isArchived)!==void 0&&(o.is_archived=t.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const u=JSON.stringify(o);return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Ve(f,"update prompt"),f})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,r,i]=co(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(u,"delete prompt"),u})).json()}async pullPromptCommit(e,t){const[r,i,o]=co(e),c=await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/commits/${r}/${i}/${o}${t!=null&&t.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(f,"pull prompt commit"),f})).json();return{owner:r,repo:i,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async _pullPrompt(e,t){const r=await this.pullPromptCommit(e,{includeModel:t==null?void 0:t.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(i=>i!=="object")&&await this.updatePrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}):await this.createPrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}),t!=null&&t.object?await this.createCommit(e,t==null?void 0:t.object,{parentCommitHash:t==null?void 0:t.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=t,[o,u]=this.parseTokenOrUrl(e,r),c=new mh({apiUrl:o,apiKey:"placeholder"}),f=await c.readSharedDataset(u),p=i||f.name;try{if(await this.hasDataset({datasetId:p})){console.log(`Dataset ${p} already exists in your tenant. Skipping.`);return}}catch{}const m=await c.listSharedExamples(u),y=await this.createDataset(p,{description:f.description,dataType:f.data_type||"kv",inputsSchema:f.inputs_schema_definition??void 0,outputsSchema:f.outputs_schema_definition??void 0});try{await this.createExamples({inputs:m.map(b=>b.inputs),outputs:m.flatMap(b=>b.outputs?[b.outputs]:[]),datasetId:y.id})}catch(b){throw console.error(`An error occurred while creating dataset ${p}. You should delete it manually.`),b}}parseTokenOrUrl(e,t,r=2,i="dataset"){try{return lt(e),[t,e]}catch{}try{const u=new URL(e).pathname.split("/").filter(c=>c!=="");if(u.length>=r){const c=u[u.length-r];return[t,c]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,t;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((t=(e=oW())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:t.forceFlush())}}function lN(n){return"dataset_id"in n||"dataset_name"in n}const R6=n=>!!["TRACING_V2","TRACING"].find(t=>sa(t)==="true"),A0=Symbol.for("lc:context_variables");function O6(n){return n.replace(/[-:.]/g,"")}function $1(n,e,t=1){const r=t.toFixed(0).slice(0,3).padStart(3,"0"),i=`${new Date(n).toISOString().slice(0,-1)}${r}Z`;return{dottedOrder:O6(i)+e,microsecondPrecisionDatestring:i}}class Zg{constructor(e,t,r,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r,this.replicas=i}static fromHeader(e){const t=e.split(",");let r={},i=[],o,u;for(const c of t){const[f,p]=c.split("="),m=decodeURIComponent(p);f==="langsmith-metadata"?r=JSON.parse(m):f==="langsmith-tags"?i=m.split(","):f==="langsmith-project"?o=m:f==="langsmith-replicas"&&(u=JSON.parse(m))}return new Zg(r,i,o,u)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class na{constructor(e){var c;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),A6(e)){Object.assign(this,{...e});return}const t=na.getDefaultConfig(),{metadata:r,...i}=e,o=i.client??na.getSharedClient(),u={...r,...(c=i==null?void 0:i.extra)==null?void 0:c.metadata};if(i.extra={...i.extra,metadata:u},Object.assign(this,{...t,...i,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=I6(this.replicas),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const{dottedOrder:f,microsecondPrecisionDatestring:p}=$1(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+f:this.dotted_order=f,this._serialized_start_time=p}}set metadata(e){var t;this.extra={...this.extra,metadata:{...(t=this.extra)==null?void 0:t.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:qn(),run_type:"chain",project_name:m1(),child_runs:[],api_url:Yi("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Yi("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return na.sharedClient||(na.sharedClient=new mh),na.sharedClient}createChild(e){var f,p,m,y,b,_;const t=this.child_execution_order+1,r=new na({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});A0 in this&&(r[A0]=this[A0]);const i=Symbol.for("lc:child_config"),o=((f=e.extra)==null?void 0:f[i])??this.extra[i];if(N6(o)){const S={...o},C=k6(S.callbacks)?(m=(p=S.callbacks).copy)==null?void 0:m.call(p):void 0;C&&(Object.assign(C,{_parentRunId:r.id}),(_=(b=(y=C.handlers)==null?void 0:y.find(I1))==null?void 0:b.updateFromRunTree)==null||_.call(b,r),S.callbacks=C),r.extra[i]=S}const u=new Set;let c=this;for(;c!=null&&!u.has(c.id);)u.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,t),c=c.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,t,r=!0){var c,f;const i=e.extra??{};if(((c=i==null?void 0:i.runtime)==null?void 0:c.library)===void 0&&(i.runtime||(i.runtime={}),t))for(const[p,m]of Object.entries(t))i.runtime[p]||(i.runtime[p]=m);let o,u;return r?(u=((f=e.parent_run)==null?void 0:f.id)??e.parent_run_id,o=[]):(o=e.child_runs.map(p=>this._convertToCreate(p,t,r)),u=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:u,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,t,r=!0){const i=this._convertToCreate(this,t,r);if(e===this.project_name)return i;const o=y=>Fk(`${y}:${e}`,Fk.DNS),u=o(i.id),c=i.trace_id?o(i.trace_id):void 0,f=i.parent_run_id?o(i.parent_run_id):void 0;let p;if(i.dotted_order){const y=P6(i.dotted_order),b=[];for(let S=0;S<y.length-1;S++){const[C,T]=y[S],R=o(T);b.push(C.toISOString().replace(/[-:]/g,"").replace(".","")+R)}const[_]=y[y.length-1];b.push(_.toISOString().replace(/[-:]/g,"").replace(".","")+u),p=b.join(".")}else p=void 0;return{...i,id:u,trace_id:c,parent_run_id:f,dotted_order:p,session_name:e}}async postRun(e=!0){try{const t=b1();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:o,workspaceId:u}of this.replicas){const c=this._remapForProject(r??this.project_name,t,!0);await this.client.createRun(c,{apiKey:i,apiUrl:o,workspaceId:u})}else{const r=this._convertToCreate(this,t,e);await this.client.createRun(r)}if(!e){R1("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(e){var t;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:o,workspaceId:u,updates:c}of this.replicas){const f=this._remapForProject(r??this.project_name),p={id:f.id,outputs:f.outputs,error:f.error,parent_run_id:f.parent_run_id,session_name:f.session_name,reference_example_id:f.reference_example_id,end_time:f.end_time,dotted_order:f.dotted_order,trace_id:f.trace_id,events:f.events,tags:f.tags,extra:f.extra,attachments:this.attachments,...c};e!=null&&e.excludeInputs||(p.inputs=f.inputs),await this.client.updateRun(f.id,p,{apiKey:i,apiUrl:o,workspaceId:u})}else try{const r={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((t=this.parent_run)==null?void 0:t.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,t){var p,m,y,b;const r=e==null?void 0:e.callbacks;let i,o,u,c=R6();if(r){const _=((p=r==null?void 0:r.getParentRunId)==null?void 0:p.call(r))??"",S=(m=r==null?void 0:r.handlers)==null?void 0:m.find(C=>(C==null?void 0:C.name)=="langchain_tracer");i=(y=S==null?void 0:S.getRun)==null?void 0:y.call(S,_),o=S==null?void 0:S.projectName,u=S==null?void 0:S.client,c=c||!!S}return i?new na({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:u,tracingEnabled:c,project_name:o,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(b=i==null?void 0:i.extra)==null?void 0:b.metadata,...e==null?void 0:e.metadata}}}).createChild(t):new na({...t,client:u,tracingEnabled:c,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){var p;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const o=i.trim(),u=o.split(".").map(m=>{const[y,b]=m.split("Z");return{strTime:y,time:Date.parse(y+"Z"),uuid:b}}),c=u[0].uuid,f={...t,name:(t==null?void 0:t.name)??"parent",run_type:(t==null?void 0:t.run_type)??"chain",start_time:(t==null?void 0:t.start_time)??Date.now(),id:(p=u.at(-1))==null?void 0:p.uuid,trace_id:c,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const m=Zg.fromHeader(r.baggage);f.metadata=m.metadata,f.tags=m.tags,f.project_name=m.project_name,f.replicas=m.replicas}return new na(f)}toHeaders(e){var r;const t={"langsmith-trace":this.dotted_order,baggage:new Zg((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[i,o]of Object.entries(t))e.set(i,o);return t}}Object.defineProperty(na,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function A6(n){return n!=null&&typeof n.createChild=="function"&&typeof n.postRun=="function"}function I1(n){return typeof n=="object"&&n!=null&&typeof n.name=="string"&&n.name==="langchain_tracer"}function cN(n){return Array.isArray(n)&&n.some(e=>I1(e))}function k6(n){return typeof n=="object"&&n!=null&&Array.isArray(n.handlers)}function N6(n){var e;return n!=null&&typeof n.callbacks=="object"&&(cN((e=n.callbacks)==null?void 0:e.handlers)||cN(n.callbacks))}function P6(n){return n.split(".").map(t=>{const r=t.slice(0,-36),i=t.slice(-36),o=parseInt(r.slice(0,4)),u=parseInt(r.slice(4,6))-1,c=parseInt(r.slice(6,8)),f=parseInt(r.slice(9,11)),p=parseInt(r.slice(11,13)),m=parseInt(r.slice(13,15)),y=parseInt(r.slice(15,21));return[new Date(o,u,c,f,p,m,y/1e3),i]})}function $6(){const n=Yi("LANGSMITH_RUNS_ENDPOINTS");if(!n)return[];try{const e=JSON.parse(n);if(Array.isArray(e)){const t=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}t.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return t}else if(typeof e=="object"&&e!==null){j6(e);const t=[];for(const[r,i]of Object.entries(e)){const o=r.replace(/\/$/,"");if(typeof i=="string")t.push({apiUrl:o,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof i}`);continue}}return t}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS – must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(p6(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS – must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function I6(n){return n?n.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):$6()}function j6(n){if(Object.keys(n).length>0&&sa("ENDPOINT"))throw new h6}var k0={};const D6=()=>typeof window<"u"&&typeof window.document<"u",L6=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",U6=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),FE=()=>typeof Deno<"u",M6=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!FE(),F6=()=>{let n;return D6()?n="browser":M6()?n="node":L6()?n="webworker":U6()?n="jsdom":FE()?n="deno":n="other",n};let N0;function B6(){return N0===void 0&&(N0={library:"langchain-js",runtime:F6()}),N0}function Ro(n){try{return typeof process<"u"?k0==null?void 0:k0[n]:FE()?Deno==null?void 0:Deno.env.get(n):void 0}catch{return}}class z6{}function V6(n){return"lc_prefer_streaming"in n&&n.lc_prefer_streaming}class Ph extends z6{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,n1(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Ro("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Ns.prototype.toJSON.call(this)}toJSONNotImplemented(){return Ns.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends Ph{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:qn()}),Object.assign(this,e)}}return new t}}const H6=n=>{const e=n;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},q6=n=>{if(n)return n.events=n.events??[],n.child_runs=n.child_runs??[],n};function jS(n,e){if(n)return new na({...n,start_time:n._serialized_start_time??n.start_time,parent_run:jS(e),child_runs:n.child_runs.map(t=>jS(t)).filter(t=>t!==void 0),extra:{...n.extra,runtime:B6()},tracingEnabled:!1})}function P0(n,e){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[e]:n}}function Af(n){return typeof n._addRunToRunMap=="function"}class $h extends Ph{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?q6(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const{dottedOrder:t,microsecondPrecisionDatestring:r}=$1(new Date(e.start_time).getTime(),e.id,e.execution_order),i={...e},o=this.getRunById(i.parent_run_id);if(i.parent_run_id!==void 0?o&&(this._addChildRun(o,i),o.child_execution_order=Math.max(o.child_execution_order,i.child_execution_order),i.trace_id=o.trace_id,o.dotted_order!==void 0&&(i.dotted_order=[o.dotted_order,t].join("."),i._serialized_start_time=r)):(i.trace_id=i.id,i.dotted_order=t,i._serialized_start_time=r),this.usesRunTreeMap){const u=jS(i,o);u!==void 0&&this.runTreeMap.set(i.id,u)}else this.runMap.set(i.id,i);return i}async _endTrace(e){var r;const t=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,i,o,u,c,f){const p=this._getExecutionOrder(i),m=Date.now(),y=c?{...o,metadata:c}:o,b={id:r,name:f??e.id[e.id.length-1],parent_run_id:i,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{prompts:t},execution_order:p,child_runs:[],child_execution_order:p,run_type:"llm",extra:y??{},tags:u||[]};return this._addRunToRunMap(b)}async handleLLMStart(e,t,r,i,o,u,c,f){var m,y;const p=this.getRunById(r)??this._createRunForLLMStart(e,t,r,i,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,p)),await((y=this.onLLMStart)==null?void 0:y.call(this,p)),p}_createRunForChatModelStart(e,t,r,i,o,u,c,f){const p=this._getExecutionOrder(i),m=Date.now(),y=c?{...o,metadata:c}:o,b={id:r,name:f??e.id[e.id.length-1],parent_run_id:i,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{messages:t},execution_order:p,child_runs:[],child_execution_order:p,run_type:"llm",extra:y??{},tags:u||[]};return this._addRunToRunMap(b)}async handleChatModelStart(e,t,r,i,o,u,c,f){var m,y;const p=this.getRunById(r)??this._createRunForChatModelStart(e,t,r,i,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,p)),await((y=this.onLLMStart)==null?void 0:y.call(this,p)),p}async handleLLMEnd(e,t,r,i,o){var c;const u=this.getRunById(t);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.outputs=e,u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...o},await((c=this.onLLMEnd)==null?void 0:c.call(this,u)),await this._endTrace(u),u}async handleLLMError(e,t,r,i,o){var c;const u=this.getRunById(t);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...o},await((c=this.onLLMError)==null?void 0:c.call(this,u)),await this._endTrace(u),u}_createRunForChainStart(e,t,r,i,o,u,c,f){const p=this._getExecutionOrder(i),m=Date.now(),y={id:r,name:f??e.id[e.id.length-1],parent_run_id:i,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:t,execution_order:p,child_execution_order:p,run_type:c??"chain",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(y)}async handleChainStart(e,t,r,i,o,u,c,f){var m,y;const p=this.getRunById(r)??this._createRunForChainStart(e,t,r,i,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,p)),await((y=this.onChainStart)==null?void 0:y.call(this,p)),p}async handleChainEnd(e,t,r,i,o){var c;const u=this.getRunById(t);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.outputs=P0(e,"output"),u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(u.inputs=P0(o.inputs,"input")),await((c=this.onChainEnd)==null?void 0:c.call(this,u)),await this._endTrace(u),u}async handleChainError(e,t,r,i,o){var c;const u=this.getRunById(t);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(u.inputs=P0(o.inputs,"input")),await((c=this.onChainError)==null?void 0:c.call(this,u)),await this._endTrace(u),u}_createRunForToolStart(e,t,r,i,o,u,c){const f=this._getExecutionOrder(i),p=Date.now(),m={id:r,name:c??e.id[e.id.length-1],parent_run_id:i,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{input:t},execution_order:f,child_execution_order:f,run_type:"tool",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleToolStart(e,t,r,i,o,u,c){var p,m;const f=this.getRunById(r)??this._createRunForToolStart(e,t,r,i,o,u,c);return await((p=this.onRunCreate)==null?void 0:p.call(this,f)),await((m=this.onToolStart)==null?void 0:m.call(this,f)),f}async handleToolEnd(e,t){var i;const r=this.getRunById(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,t){var i;const r=this.getRunById(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,t){var o;const r=this.getRunById(t);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(e,t){var i;const r=this.getRunById(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,t,r,i,o,u,c){const f=this._getExecutionOrder(i),p=Date.now(),m={id:r,name:c??e.id[e.id.length-1],parent_run_id:i,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{query:t},execution_order:f,child_execution_order:f,run_type:"retriever",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleRetrieverStart(e,t,r,i,o,u,c){var p,m;const f=this.getRunById(r)??this._createRunForRetrieverStart(e,t,r,i,o,u,c);return await((p=this.onRunCreate)==null?void 0:p.call(this,f)),await((m=this.onRetrieverStart)==null?void 0:m.call(this,f)),f}async handleRetrieverEnd(e,t){var i;const r=this.getRunById(t);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,t){var i;const r=this.getRunById(t);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,t){var i;const r=this.getRunById(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,t,r,i,o,u){var f;const c=this.getRunById(r);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return c.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:u==null?void 0:u.chunk}}),await((f=this.onLLMNewToken)==null?void 0:f.call(this,c,e,{chunk:u==null?void 0:u.chunk})),c}}var BE={exports:{}};BE.exports;(function(n){const t=(o=0)=>u=>`\x1B[${38+o};5;${u}m`,r=(o=0)=>(u,c,f)=>`\x1B[${38+o};2;${u};${c};${f}m`;function i(){const o=new Map,u={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};u.color.gray=u.color.blackBright,u.bgColor.bgGray=u.bgColor.bgBlackBright,u.color.grey=u.color.blackBright,u.bgColor.bgGrey=u.bgColor.bgBlackBright;for(const[c,f]of Object.entries(u)){for(const[p,m]of Object.entries(f))u[p]={open:`\x1B[${m[0]}m`,close:`\x1B[${m[1]}m`},f[p]=u[p],o.set(m[0],m[1]);Object.defineProperty(u,c,{value:f,enumerable:!1})}return Object.defineProperty(u,"codes",{value:o,enumerable:!1}),u.color.close="\x1B[39m",u.bgColor.close="\x1B[49m",u.color.ansi256=t(),u.color.ansi16m=r(),u.bgColor.ansi256=t(10),u.bgColor.ansi16m=r(10),Object.defineProperties(u,{rgbToAnsi256:{value:(c,f,p)=>c===f&&f===p?c<8?16:c>248?231:Math.round((c-8)/247*24)+232:16+36*Math.round(c/255*5)+6*Math.round(f/255*5)+Math.round(p/255*5),enumerable:!1},hexToRgb:{value:c=>{const f=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(c.toString(16));if(!f)return[0,0,0];let{colorString:p}=f.groups;p.length===3&&(p=p.split("").map(y=>y+y).join(""));const m=Number.parseInt(p,16);return[m>>16&255,m>>8&255,m&255]},enumerable:!1},hexToAnsi256:{value:c=>u.rgbToAnsi256(...u.hexToRgb(c)),enumerable:!1}}),u}Object.defineProperty(n,"exports",{enumerable:!0,get:i})})(BE);var G6=BE.exports;const j1=iy(G6);function zn(n,e){return`${n.open}${e}${n.close}`}function La(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function dN(n){return typeof n=="string"?n.trim():n==null?n:La(n,n.toString())}function fo(n){if(!n.end_time)return"";const e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:ra}=j1;class fN extends $h{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)t.push(i),r=i;else break}return t}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,o,u)=>{const c=`${i.execution_order}:${i.run_type}:${i.name}`;return o===u.length-1?zn(j1.bold,c):c}).join(" > ");return zn(ra.grey,r)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.green,"[chain/start]")} [${t}] Entering Chain run with input: ${La(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.cyan,"[chain/end]")} [${t}] [${fo(e)}] Exiting Chain run with output: ${La(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.red,"[chain/error]")} [${t}] [${fo(e)}] Chain run errored with error: ${La(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${zn(ra.green,"[llm/start]")} [${t}] Entering LLM run with input: ${La(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.cyan,"[llm/end]")} [${t}] [${fo(e)}] Exiting LLM run with output: ${La(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.red,"[llm/error]")} [${t}] [${fo(e)}] LLM run errored with error: ${La(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.green,"[tool/start]")} [${t}] Entering Tool run with input: "${dN(e.inputs.input)}"`)}onToolEnd(e){var r;const t=this.getBreadcrumbs(e);console.log(`${zn(ra.cyan,"[tool/end]")} [${t}] [${fo(e)}] Exiting Tool run with output: "${dN((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.red,"[tool/error]")} [${t}] [${fo(e)}] Tool run errored with error: ${La(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${La(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.cyan,"[retriever/end]")} [${t}] [${fo(e)}] Exiting Retriever run with output: ${La(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${zn(ra.red,"[retriever/error]")} [${t}] [${fo(e)}] Retriever run errored with error: ${La(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${zn(ra.blue,"[agent/action]")} [${r}] Agent selected action: ${La(t.actions[t.actions.length-1],"[action]")}`)}}let $0;const W6=()=>{if($0===void 0){const n=Ro("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};$0=new mh(n)}return $0};class Qf extends $h{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:t,projectName:r,client:i,replicas:o}=e;this.projectName=r??m1(),this.replicas=o,this.exampleId=t,this.client=i??W6();const u=Qf.getTraceableRunTree();u&&this.updateFromRunTree(u)}async persistRun(e){}async onRunCreate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t==null?void 0:t.postRun())}async onRunUpdate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t==null?void 0:t.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){this.runTreeMap.set(e.id,e);let t=e;const r=new Set;for(;t.parent_run&&!(r.has(t.id)||(r.add(t.id),!t.parent_run));)t=t.parent_run;r.clear();const i=[t];for(;i.length>0;){const o=i.shift();!o||r.has(o.id)||(r.add(o.id),this.runTreeMap.set(o.id,o),o.child_runs&&i.push(...o.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const t=this.runTreeMap.get(e);if(t)return new na({...t,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return lG(!0)}catch{return}}}const D1=Symbol.for("ls:tracing_async_local_storage"),Og=Symbol.for("lc:context_variables"),J6=n=>{globalThis[D1]=n},gh=()=>globalThis[D1];let eh;function K6(){const n="default"in ks?ks.default:ks;return new n({autoStart:!0,concurrency:1})}function Z6(){return typeof eh>"u"&&(eh=K6()),eh}async function Yr(n,e){if(e===!0){const t=gh();t!==void 0?await t.run(void 0,async()=>n()):await n()}else eh=Z6(),eh.add(async()=>{const t=gh();t!==void 0?await t.run(void 0,async()=>n()):await n()})}const Y6=n=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(t=>Ro(t)==="true");function L1(n){var r;const e=gh();if(e===void 0)return;const t=e.getStore();return(r=t==null?void 0:t[Og])==null?void 0:r[n]}const X6=Symbol("lc:configure_hooks"),Q6=()=>L1(X6)||[];function U1(n){return n?Array.isArray(n)||"name"in n?{callbacks:n}:n:{}}class e8{setHandler(e){return this.setHandlers([e])}}class ky{constructor(e,t,r,i,o,u,c,f){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:f})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;try{await((r=t.handleText)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,i,o){await Promise.all(this.handlers.map(u=>Yr(async()=>{var c;try{await((c=u.handleCustomEvent)==null?void 0:c.call(u,e,t,this.runId,this.tags,this.metadata))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleCustomEvent: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}}class t8 extends ky{getChild(e){const t=new _n(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw i}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${i}`),t.raiseError)throw e}},t.awaitHandlers)))}}class hN extends ky{async handleLLMNewToken(e,t,r,i,o,u){await Promise.all(this.handlers.map(c=>Yr(async()=>{var f;if(!c.ignoreLLM)try{await((f=c.handleLLMNewToken)==null?void 0:f.call(c,e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,u))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMNewToken: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}async handleLLMError(e,t,r,i,o){await Promise.all(this.handlers.map(u=>Yr(async()=>{var c;if(!u.ignoreLLM)try{await((c=u.handleLLMError)==null?void 0:c.call(u,e,this.runId,this._parentRunId,this.tags,o))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMError: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}async handleLLMEnd(e,t,r,i,o){await Promise.all(this.handlers.map(u=>Yr(async()=>{var c;if(!u.ignoreLLM)try{await((c=u.handleLLMEnd)==null?void 0:c.call(u,e,this.runId,this._parentRunId,this.tags,o))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMEnd: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}}class r8 extends ky{getChild(e){const t=new _n(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,i,o){await Promise.all(this.handlers.map(u=>Yr(async()=>{var c;if(!u.ignoreChain)try{await((c=u.handleChainError)==null?void 0:c.call(u,e,this.runId,this._parentRunId,this.tags,o))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainError: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}async handleChainEnd(e,t,r,i,o){await Promise.all(this.handlers.map(u=>Yr(async()=>{var c;if(!u.ignoreChain)try{await((c=u.handleChainEnd)==null?void 0:c.call(u,e,this.runId,this._parentRunId,this.tags,o))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainEnd: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentAction)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}}class n8 extends ky{getChild(e){const t=new _n(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>Yr(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}}class _n extends e8{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(t==null?void 0:t.handlers)??this.handlers,this.inheritableHandlers=(t==null?void 0:t.inheritableHandlers)??this.inheritableHandlers,this.tags=(t==null?void 0:t.tags)??this.tags,this.inheritableTags=(t==null?void 0:t.inheritableTags)??this.inheritableTags,this.metadata=(t==null?void 0:t.metadata)??this.metadata,this.inheritableMetadata=(t==null?void 0:t.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,i=void 0,o=void 0,u=void 0,c=void 0,f=void 0){return Promise.all(t.map(async(p,m)=>{const y=m===0&&r?r:qn();return await Promise.all(this.handlers.map(b=>{if(!b.ignoreLLM)return Af(b)&&b._createRunForLLMStart(e,[p],y,this._parentRunId,o,this.tags,this.metadata,f),Yr(async()=>{var _;try{await((_=b.handleLLMStart)==null?void 0:_.call(b,e,[p],y,this._parentRunId,o,this.tags,this.metadata,f))}catch(S){if((b.raiseError?console.error:console.warn)(`Error in handler ${b.constructor.name}, handleLLMStart: ${S}`),b.raiseError)throw S}},b.awaitHandlers)})),new hN(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,i=void 0,o=void 0,u=void 0,c=void 0,f=void 0){return Promise.all(t.map(async(p,m)=>{const y=m===0&&r?r:qn();return await Promise.all(this.handlers.map(b=>{if(!b.ignoreLLM)return Af(b)&&b._createRunForChatModelStart(e,[p],y,this._parentRunId,o,this.tags,this.metadata,f),Yr(async()=>{var _,S;try{if(b.handleChatModelStart)await((_=b.handleChatModelStart)==null?void 0:_.call(b,e,[p],y,this._parentRunId,o,this.tags,this.metadata,f));else if(b.handleLLMStart){const C=i1(p);await((S=b.handleLLMStart)==null?void 0:S.call(b,e,[C],y,this._parentRunId,o,this.tags,this.metadata,f))}}catch(C){if((b.raiseError?console.error:console.warn)(`Error in handler ${b.constructor.name}, handleLLMStart: ${C}`),b.raiseError)throw C}},b.awaitHandlers)})),new hN(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=qn(),i=void 0,o=void 0,u=void 0,c=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreChain)return Af(f)&&f._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,i,c),Yr(async()=>{var p;try{await((p=f.handleChainStart)==null?void 0:p.call(f,e,t,r,this._parentRunId,this.tags,this.metadata,i,c))}catch(m){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleChainStart: ${m}`),f.raiseError)throw m}},f.awaitHandlers)})),new r8(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=qn(),i=void 0,o=void 0,u=void 0,c=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreAgent)return Af(f)&&f._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,c),Yr(async()=>{var p;try{await((p=f.handleToolStart)==null?void 0:p.call(f,e,t,r,this._parentRunId,this.tags,this.metadata,c))}catch(m){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleToolStart: ${m}`),f.raiseError)throw m}},f.awaitHandlers)})),new n8(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=qn(),i=void 0,o=void 0,u=void 0,c=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreRetriever)return Af(f)&&f._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,c),Yr(async()=>{var p;try{await((p=f.handleRetrieverStart)==null?void 0:p.call(f,e,t,r,this._parentRunId,this.tags,this.metadata,c))}catch(m){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleRetrieverStart: ${m}`),f.raiseError)throw m}},f.awaitHandlers)})),new t8(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,i,o){await Promise.all(this.handlers.map(u=>Yr(async()=>{var c;if(!u.ignoreCustomEvent)try{await((c=u.handleCustomEvent)==null?void 0:c.call(u,e,t,r,this.tags,this.metadata))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleCustomEvent: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new _n(this._parentRunId);for(const i of this.handlers){const o=this.inheritableHandlers.includes(i);r.addHandler(i,o)}for(const i of this.tags){const o=this.inheritableTags.includes(i);r.addTags([i],o)}for(const i of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},o)}for(const i of e)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===i.name)||r.addHandler(i,t);return r}static fromHandlers(e){class t extends Ph{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:qn()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static configure(e,t,r,i,o,u,c){return this._configureSync(e,t,r,i,o,u,c)}static _configureSync(e,t,r,i,o,u,c){var b;let f;(e||t)&&(Array.isArray(e)||!e?(f=new _n,f.setHandlers((e==null?void 0:e.map(Yg))??[],!0)):f=e,f=f.copy(Array.isArray(t)?t.map(Yg):t==null?void 0:t.handlers,!1));const p=Ro("LANGCHAIN_VERBOSE")==="true"||(c==null?void 0:c.verbose),m=((b=Qf.getTraceableRunTree())==null?void 0:b.tracingEnabled)||Y6(),y=m||(Ro("LANGCHAIN_TRACING")??!1);if(p||y){if(f||(f=new _n),p&&!f.handlers.some(_=>_.name===fN.prototype.name)){const _=new fN;f.addHandler(_,!0)}if(y&&!f.handlers.some(_=>_.name==="langchain_tracer")&&m){const _=new Qf;f.addHandler(_,!0)}if(m){const _=Qf.getTraceableRunTree();if(_&&f._parentRunId===void 0){f._parentRunId=_.id;const S=f.handlers.find(C=>C.name==="langchain_tracer");S==null||S.updateFromRunTree(_)}}}for(const{contextVar:_,inheritable:S=!0,handlerClass:C,envVar:T}of Q6()){const R=T&&Ro(T)==="true"&&C;let A;const O=_!==void 0?L1(_):void 0;O&&H6(O)?A=O:R&&(A=new C({})),A!==void 0&&(f||(f=new _n),f.handlers.some(P=>P.name===A.name)||f.addHandler(A,S))}return(r||i)&&f&&(f.addTags(r??[]),f.addTags(i??[],!1)),(o||u)&&f&&(f.addMetadata(o??{}),f.addMetadata(u??{},!1)),f}}function Yg(n){return"name"in n?n:Ph.fromMethods(n)}class a8{getStore(){}run(e,t){return t()}enterWith(e){}}const i8=new a8,pN=Symbol.for("lc:child_config");class s8{getInstance(){return gh()??i8}getRunnableConfig(){var t,r;return(r=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:r[pN]}runWithConfig(e,t,r){var m;const i=_n._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),u=o.getStore(),c=i==null?void 0:i.getParentRunId(),f=(m=i==null?void 0:i.handlers)==null?void 0:m.find(y=>(y==null?void 0:y.name)==="langchain_tracer");let p;return f&&c?p=f.getRunTreeWithTracingConfig(c):r||(p=new na({name:"<runnable_lambda>",tracingEnabled:!1})),p&&(p.extra={...p.extra,[pN]:e}),u!==void 0&&u[Og]!==void 0&&(p===void 0&&(p={}),p[Og]=u[Og]),o.run(p,t)}initializeGlobalInstance(e){gh()===void 0&&J6(e)}}const Po=new s8,I0=25;async function vi(n){return _n._configureSync(n==null?void 0:n.callbacks,void 0,n==null?void 0:n.tags,void 0,n==null?void 0:n.metadata)}function DS(...n){const e={};for(const t of n.filter(r=>!!r))for(const r of Object.keys(t))if(r==="metadata")e[r]={...e[r],...t[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(t[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...t[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=t.timeout:t.timeout!==void 0&&(e.timeout=Math.min(e.timeout,t.timeout));else if(r==="signal")e.signal===void 0?e.signal=t.signal:t.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,t.signal]):e.signal=t.signal);else if(r==="callbacks"){const i=e.callbacks,o=t.callbacks;if(Array.isArray(o))if(!i)e.callbacks=o;else if(Array.isArray(i))e.callbacks=i.concat(o);else{const u=i.copy();for(const c of o)u.addHandler(Yg(c),!0);e.callbacks=u}else if(o)if(!i)e.callbacks=o;else if(Array.isArray(i)){const u=o.copy();for(const c of i)u.addHandler(Yg(c),!0);e.callbacks=u}else e.callbacks=new _n(o._parentRunId,{handlers:i.handlers.concat(o.handlers),inheritableHandlers:i.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(o.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(o.inheritableTags))),metadata:{...i.metadata,...o.metadata}})}else{const i=r;e[i]=t[i]??e[i]}return e}const o8=new Set(["string","number","boolean"]);function jt(n){var r;const e=Po.getRunnableConfig();let t={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:o,...u}=e;t=Object.entries(u).reduce((c,[f,p])=>(p!==void 0&&(c[f]=p),c),t)}if(n&&(t=Object.entries(n).reduce((i,[o,u])=>(u!==void 0&&(i[o]=u),i),t)),t!=null&&t.configurable)for(const i of Object.keys(t.configurable))o8.has(typeof t.configurable[i])&&!((r=t.metadata)!=null&&r[i])&&(t.metadata||(t.metadata={}),t.metadata[i]=t.configurable[i]);if(t.timeout!==void 0){if(t.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(t.timeout);t.signal!==void 0?"any"in AbortSignal&&(t.signal=AbortSignal.any([t.signal,i])):t.signal=i,delete t.timeout}return t}function Xr(n={},{callbacks:e,maxConcurrency:t,recursionLimit:r,runName:i,configurable:o,runId:u}={}){const c=jt(n);return e!==void 0&&(delete c.runName,c.callbacks=e),r!==void 0&&(c.recursionLimit=r),t!==void 0&&(c.maxConcurrency=t),i!==void 0&&(c.runName=i),o!==void 0&&(c.configurable={...c.configurable,...o}),u!==void 0&&delete c.runId,c}function gc(n){return n?{configurable:n.configurable,recursionLimit:n.recursionLimit,callbacks:n.callbacks,tags:n.tags,metadata:n.metadata,maxConcurrency:n.maxConcurrency,timeout:n.timeout,signal:n.signal}:void 0}async function $o(n,e){if(e===void 0)return n;let t;return Promise.race([n.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{t=()=>{i(new Error("Aborted"))},e.addEventListener("abort",t),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",t))}class Ta extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new Ta({start(r){return i();function i(){return t.read().then(({done:o,value:u})=>{if(o){r.close();return}return r.enqueue(u),i()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new Ta({async pull(t){const{value:r,done:i}=await e.next();i&&t.close(),t.enqueue(r)},async cancel(t){await e.return(t)}})}}function M1(n,e=2){const t=Array.from({length:e},()=>[]);return t.map(async function*(i){for(;;)if(i.length===0){const o=await n.next();for(const u of t)u.push(o)}else{if(i[0].done)return;yield i.shift().value}})}function Ny(n,e){if(Array.isArray(n)&&Array.isArray(e))return n.concat(e);if(typeof n=="string"&&typeof e=="string")return n+e;if(typeof n=="number"&&typeof e=="number")return n+e;if("concat"in n&&typeof n.concat=="function")return n.concat(e);if(typeof n=="object"&&typeof e=="object"){const t={...n};for(const[r,i]of Object.entries(e))r in t&&!Array.isArray(t[r])?t[r]=Ny(t[r],i):t[r]=i;return t}else throw new Error(`Cannot concat ${typeof n} and ${typeof e}`)}class kc{constructor(e){var t;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((t=this.config)==null?void 0:t.signal),this.setup=new Promise((r,i)=>{Po.runWithConfig(gc(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,i):this.firstResult.then(o=>r(void 0),i)},!0)})}async next(...e){var t;return(t=this.signal)==null||t.throwIfAborted(),this.firstResultUsed?Po.runWithConfig(gc(this.config),this.signal?async()=>$o(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function u8(n,e,t,r,...i){const o=new kc({generator:e,startSetup:t,signal:r}),u=await o.setup;return{output:n(o,u,...i),setup:u}}class go{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=Wg({},t);return new yh({ops:t,state:r[r.length-1].newDocument})}}class yh extends go{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=Wg(this.state,e.ops);return new yh({ops:t,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const t=Wg({},e.ops);return new yh({ops:e.ops,state:t[t.length-1].newDocument})}}const l8=n=>n.name==="log_stream_tracer";async function mN(n,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:t}=n;if(["retriever","llm","prompt"].includes(n.run_type))return t;if(!(Object.keys(t).length===1&&(t==null?void 0:t.input)===""))return t.input}async function gN(n,e){const{outputs:t}=n;return e==="original"||["retriever","llm","prompt"].includes(n.run_type)?t:t!==void 0&&Object.keys(t).length===1&&(t==null?void 0:t.output)!==void 0?t.output:t}function c8(n){return n!==void 0&&n.message!==void 0}class yN extends $h{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ta.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||t.find(i=>{var o;return(o=this.includeTags)==null?void 0:o.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&t.every(i=>{var o;return!((o=this.excludeTags)!=null&&o.includes(i))})),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new go({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new go({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await mN(e,this._schemaFormat)),await this.writer.write(new go({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await mN(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await gN(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const i=new go({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const t=new go({ops:[{op:"replace",path:"/final_output",value:await gN(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const o=e.inputs.messages!==void 0;let u;o?c8(r==null?void 0:r.chunk)?u=r==null?void 0:r.chunk:u=new Ao({id:`run-${e.id}`,content:t}):u=t;const c=new go({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${i}/streamed_output/-`,value:u}]});await this.writer.write(c)}}const LS="__run";class yc{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new yc({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Du extends yc{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new Du({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function fg({name:n,serialized:e}){return n!==void 0?n:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const d8=n=>n.name==="event_stream_tracer";class f8 extends $h{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ta.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||t.find(i=>{var o;return(o=this.includeTags)==null?void 0:o.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&t.every(i=>{var o;return!((o=this.excludeTags)!=null&&o.includes(i))})),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function o(c,f){return c==="llm"&&typeof f=="string"?new yc({text:f}):f}let u=this.tappedPromises.get(e);if(u===void 0){let c;u=new Promise(f=>{c=f}),this.tappedPromises.set(e,u);try{const f={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...f,data:{chunk:o(i.runType,r.value)}},i),yield r.value;for await(const p of t)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...f,data:{chunk:o(i.runType,p)}},i),yield p}finally{c()}}else{yield r.value;for await(const c of t)yield c}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){var u,c;const t=fg(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},i)}async onLLMNewToken(e,t,r){const i=this.runInfoMap.get(e.id);let o,u;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")u="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new Ao({content:t,id:`run-${e.id}`}):o=r.chunk.message;else if(i.runType==="llm")u="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new yc({text:t}):o=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:u,data:{chunk:o},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var u,c,f;const t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(u=e.outputs)==null?void 0:u.generations;let o;if(t.runType==="chat_model"){for(const p of i??[]){if(o!==void 0)break;o=(c=p[0])==null?void 0:c.message}r="on_chat_model_end"}else if(t.runType==="llm")o={generations:i==null?void 0:i.map(p=>p.map(m=>({text:m.text,generationInfo:m.generationInfo}))),llmOutput:((f=e.outputs)==null?void 0:f.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){var u,c;const t=fg(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:t,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},i.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,i.inputs=e.inputs.input):(o.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:o,name:t,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},i)}async onChainEnd(e){var c;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??t.inputs??{},u={output:((c=e.outputs)==null?void 0:c.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(u.input=i.input,t.inputs=i.input),await this.sendEndEvent({event:r,data:u,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){var i,o;const t=fg(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(e){var i;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){var o,u;const t=fg(e),i={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:((u=e.extra)==null?void 0:u.metadata)??{}},i)}async onRetrieverEnd(e){var r;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:t},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const h8=[400,401,402,403,404,405,406,407,409],p8=n=>{var t,r;if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const e=((t=n==null?void 0:n.response)==null?void 0:t.status)??(n==null?void 0:n.status);if(e&&h8.includes(+e))throw n;if(((r=n==null?void 0:n.error)==null?void 0:r.code)==="insufficient_quota"){const i=new Error(n==null?void 0:n.message);throw i.name="InsufficientQuotaError",i}};class zE{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??p8;const t="default"in ks?ks.default:ks;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Gg(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((i,o)=>{var u;(u=e.signal)==null||u.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}class F1 extends $h{constructor({config:e,onStart:t,onEnd:r,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function VE(n){return n?n.lc_runnable:!1}class m8{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t)),this.includeTags!==void 0&&(r=r||i.some(o=>{var u;return(u=this.includeTags)==null?void 0:u.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(r=r&&i.every(o=>{var u;return!((u=this.excludeTags)!=null&&u.includes(o))})),r}}function j0(n){return n.replace(/[^a-zA-Z-_0-9]/g,"_")}const g8=["*","_","`"];function y8(n){let e="";for(const[t,r]of Object.entries(n))e+=`	classDef ${t} ${r};
`;return e}function v8(n,e,t){const{firstNode:r,lastNode:i,nodeColors:o,withStyles:u=!0,curveStyle:c="linear",wrapLabelNWords:f=9}=t??{};let p=u?`%%{init: {'flowchart': {'curve': '${c}'}}}%%
graph TD;
`:`graph TD;
`;if(u){const _="default",S={[_]:"{0}({1})"};r!==void 0&&(S[r]="{0}([{1}]):::first"),i!==void 0&&(S[i]="{0}([{1}]):::last");for(const[C,T]of Object.entries(n)){const R=T.name.split(":").pop()??"";let O=g8.some(j=>R.startsWith(j)&&R.endsWith(j))?`<p>${R}</p>`:R;Object.keys(T.metadata??{}).length&&(O+=`<hr/><small><em>${Object.entries(T.metadata??{}).map(([j,q])=>`${j} = ${q}`).join(`
`)}</em></small>`);const P=(S[C]??S[_]).replace("{0}",j0(C)).replace("{1}",O);p+=`	${P}
`}}const m={};for(const _ of e){const S=_.source.split(":"),C=_.target.split(":"),T=S.filter((R,A)=>R===C[A]).join(":");m[T]||(m[T]=[]),m[T].push(_)}const y=new Set;function b(_,S){const C=_.length===1&&_[0].source===_[0].target;if(S&&!C){const T=S.split(":").pop();if(y.has(T))throw new Error(`Found duplicate subgraph '${T}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(T),p+=`	subgraph ${T}
`}for(const T of _){const{source:R,target:A,data:O,conditional:P}=T;let j="";if(O!==void 0){let q=O;const G=q.split(" ");G.length>f&&(q=Array.from({length:Math.ceil(G.length/f)},(ie,de)=>G.slice(de*f,(de+1)*f).join(" ")).join("&nbsp;<br>&nbsp;")),j=P?` -. &nbsp;${q}&nbsp; .-> `:` -- &nbsp;${q}&nbsp; --> `}else j=P?" -.-> ":" --> ";p+=`	${j0(R)}${j}${j0(A)};
`}for(const T in m)T.startsWith(`${S}:`)&&T!==S&&b(m[T],T);S&&!C&&(p+=`	end
`)}b(m[""]??[],"");for(const _ in m)!_.includes(":")&&_!==""&&b(m[_],_);return u&&(p+=y8(o??{})),p}async function b8(n,e){let{backgroundColor:t="white"}=e??{};const r=btoa(n);t!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)||(t=`!${t}`));const i=`https://mermaid.ink/img/${r}?bgColor=${t}`,o=await fetch(i);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function Py(n,e,t){function r(c,f){var p;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(p=c._zod).traits??(p.traits=new Set),c._zod.traits.add(n),e(c,f);for(const m in u.prototype)m in c||Object.defineProperty(c,m,{value:u.prototype[m].bind(c)});c._zod.constr=u,c._zod.def=f}const i=(t==null?void 0:t.Parent)??Object;class o extends i{}Object.defineProperty(o,"name",{value:n});function u(c){var f;const p=t!=null&&t.Parent?new o:this;r(p,c),(f=p._zod).deferred??(f.deferred=[]);for(const m of p._zod.deferred)m();return p}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:c=>{var f,p;return t!=null&&t.Parent&&c instanceof t.Parent?!0:(p=(f=c==null?void 0:c._zod)==null?void 0:f.traits)==null?void 0:p.has(n)}}),Object.defineProperty(u,"name",{value:n}),u}class Xg extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const _8={};function $y(n){return _8}function w8(n){const e=Object.values(n).filter(r=>typeof r=="number");return Object.entries(n).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function S8(n,e){return typeof e=="bigint"?e.toString():e}const B1=Error.captureStackTrace?Error.captureStackTrace:(...n)=>{};function Qg(n,e,t){const r=new n._zod.constr(e??n._zod.def);return(!e||t!=null&&t.parent)&&(r._zod.parent=n),r}function E8(n){return{}}function D0(n,e=0){var t;for(let r=e;r<n.issues.length;r++)if(((t=n.issues[r])==null?void 0:t.continue)!==!0)return!0;return!1}function hg(n){return typeof n=="string"?n:n==null?void 0:n.message}function Iy(n,e,t){var i,o,u,c,f,p;const r={...n,path:n.path??[]};if(!n.message){const m=hg((u=(o=(i=n.inst)==null?void 0:i._zod.def)==null?void 0:o.error)==null?void 0:u.call(o,n))??hg((c=e==null?void 0:e.error)==null?void 0:c.call(e,n))??hg((f=t.customError)==null?void 0:f.call(t,n))??hg((p=t.localeError)==null?void 0:p.call(t,n))??"Invalid input";r.message=m}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const z1=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),Object.defineProperty(n,"message",{get(){return JSON.stringify(e,S8,2)},enumerable:!0}),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},x8=Py("$ZodError",z1),jy=Py("$ZodError",z1,{Parent:Error}),T8=n=>(e,t,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},u=e._zod.run({value:t,issues:[]},o);if(u instanceof Promise)throw new Xg;if(u.issues.length){const c=new((i==null?void 0:i.Err)??n)(u.issues.map(f=>Iy(f,o,$y())));throw B1(c,i==null?void 0:i.callee),c}return u.value},V1=T8(jy),C8=n=>async(e,t,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let u=e._zod.run({value:t,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const c=new((i==null?void 0:i.Err)??n)(u.issues.map(f=>Iy(f,o,$y())));throw B1(c,i==null?void 0:i.callee),c}return u.value},R8=C8(jy),O8=n=>(e,t,r)=>{const i=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:t,issues:[]},i);if(o instanceof Promise)throw new Xg;return o.issues.length?{success:!1,error:new(n??x8)(o.issues.map(u=>Iy(u,i,$y())))}:{success:!0,data:o.value}},A8=O8(jy),k8=n=>async(e,t,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:t,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new n(o.issues.map(u=>Iy(u,i,$y())))}:{success:!0,data:o.value}},N8=k8(jy),P8={major:4,minor:0,patch:0},$8=Py("$ZodType",(n,e)=>{var i;var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=P8;const r=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&r.unshift(n);for(const o of r)for(const u of o._zod.onattach)u(n);if(r.length===0)(t=n._zod).deferred??(t.deferred=[]),(i=n._zod.deferred)==null||i.push(()=>{n._zod.run=n._zod.parse});else{const o=(u,c,f)=>{let p=D0(u),m;for(const y of c){if(y._zod.def.when){if(!y._zod.def.when(u))continue}else if(p)continue;const b=u.issues.length,_=y._zod.check(u);if(_ instanceof Promise&&(f==null?void 0:f.async)===!1)throw new Xg;if(m||_ instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await _,u.issues.length!==b&&(p||(p=D0(u,b)))});else{if(u.issues.length===b)continue;p||(p=D0(u,b))}}return m?m.then(()=>u):u};n._zod.run=(u,c)=>{const f=n._zod.parse(u,c);if(f instanceof Promise){if(c.async===!1)throw new Xg;return f.then(p=>o(p,r,c))}return o(f,r,c)}}n["~standard"]={validate:o=>{var u;try{const c=A8(n,o);return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}}catch{return N8(n,o).then(f=>{var p;return f.success?{value:f.data}:{issues:(p=f.error)==null?void 0:p.issues}})}},vendor:"zod",version:1}}),I8=Py("$ZodNever",(n,e)=>{$8.init(n,e),n._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});class H1{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function j8(){return new H1}const So=j8();function D8(n,e){return new n({type:"never",...E8()})}class vN{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??So,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var y,b,_;var r;const i=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},u=this.seen.get(e);if(u)return u.count++,t.schemaPath.includes(e)&&(u.cycle=t.path),u.schema;const c={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,c);const f=(b=(y=e._zod).toJSONSchema)==null?void 0:b.call(y);if(f)c.schema=f;else{const S={...t,schemaPath:[...t.schemaPath,e],path:t.path},C=e._zod.parent;if(C)c.ref=C,this.process(C,S),this.seen.get(C).isParent=!0;else{const T=c.schema;switch(i.type){case"string":{const R=T;R.type="string";const{minimum:A,maximum:O,format:P,patterns:j,contentEncoding:q}=e._zod.bag;if(typeof A=="number"&&(R.minLength=A),typeof O=="number"&&(R.maxLength=O),P&&(R.format=o[P]??P,R.format===""&&delete R.format),q&&(R.contentEncoding=q),j&&j.size>0){const G=[...j];G.length===1?R.pattern=G[0].source:G.length>1&&(c.schema.allOf=[...G.map(ie=>({...this.target==="draft-7"?{type:"string"}:{},pattern:ie.source}))])}break}case"number":{const R=T,{minimum:A,maximum:O,format:P,multipleOf:j,exclusiveMaximum:q,exclusiveMinimum:G}=e._zod.bag;typeof P=="string"&&P.includes("int")?R.type="integer":R.type="number",typeof G=="number"&&(R.exclusiveMinimum=G),typeof A=="number"&&(R.minimum=A,typeof G=="number"&&(G>=A?delete R.minimum:delete R.exclusiveMinimum)),typeof q=="number"&&(R.exclusiveMaximum=q),typeof O=="number"&&(R.maximum=O,typeof q=="number"&&(q<=O?delete R.maximum:delete R.exclusiveMaximum)),typeof j=="number"&&(R.multipleOf=j);break}case"boolean":{const R=T;R.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{T.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{T.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const R=T,{minimum:A,maximum:O}=e._zod.bag;typeof A=="number"&&(R.minItems=A),typeof O=="number"&&(R.maxItems=O),R.type="array",R.items=this.process(i.element,{...S,path:[...S.path,"items"]});break}case"object":{const R=T;R.type="object",R.properties={};const A=i.shape;for(const j in A)R.properties[j]=this.process(A[j],{...S,path:[...S.path,"properties",j]});const O=new Set(Object.keys(A)),P=new Set([...O].filter(j=>{const q=i.shape[j]._zod;return this.io==="input"?q.optin===void 0:q.optout===void 0}));P.size>0&&(R.required=Array.from(P)),((_=i.catchall)==null?void 0:_._zod.def.type)==="never"?R.additionalProperties=!1:i.catchall?i.catchall&&(R.additionalProperties=this.process(i.catchall,{...S,path:[...S.path,"additionalProperties"]})):this.io==="output"&&(R.additionalProperties=!1);break}case"union":{const R=T;R.anyOf=i.options.map((A,O)=>this.process(A,{...S,path:[...S.path,"anyOf",O]}));break}case"intersection":{const R=T,A=this.process(i.left,{...S,path:[...S.path,"allOf",0]}),O=this.process(i.right,{...S,path:[...S.path,"allOf",1]}),P=q=>"allOf"in q&&Object.keys(q).length===1,j=[...P(A)?A.allOf:[A],...P(O)?O.allOf:[O]];R.allOf=j;break}case"tuple":{const R=T;R.type="array";const A=i.items.map((j,q)=>this.process(j,{...S,path:[...S.path,"prefixItems",q]}));if(this.target==="draft-2020-12"?R.prefixItems=A:R.items=A,i.rest){const j=this.process(i.rest,{...S,path:[...S.path,"items"]});this.target==="draft-2020-12"?R.items=j:R.additionalItems=j}i.rest&&(R.items=this.process(i.rest,{...S,path:[...S.path,"items"]}));const{minimum:O,maximum:P}=e._zod.bag;typeof O=="number"&&(R.minItems=O),typeof P=="number"&&(R.maxItems=P);break}case"record":{const R=T;R.type="object",R.propertyNames=this.process(i.keyType,{...S,path:[...S.path,"propertyNames"]}),R.additionalProperties=this.process(i.valueType,{...S,path:[...S.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const R=T,A=w8(i.entries);A.every(O=>typeof O=="number")&&(R.type="number"),A.every(O=>typeof O=="string")&&(R.type="string"),R.enum=A;break}case"literal":{const R=T,A=[];for(const O of i.values)if(O===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof O=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");A.push(Number(O))}else A.push(O);if(A.length!==0)if(A.length===1){const O=A[0];R.type=O===null?"null":typeof O,R.const=O}else A.every(O=>typeof O=="number")&&(R.type="number"),A.every(O=>typeof O=="string")&&(R.type="string"),A.every(O=>typeof O=="boolean")&&(R.type="string"),A.every(O=>O===null)&&(R.type="null"),R.enum=A;break}case"file":{const R=T,A={type:"string",format:"binary",contentEncoding:"binary"},{minimum:O,maximum:P,mime:j}=e._zod.bag;O!==void 0&&(A.minLength=O),P!==void 0&&(A.maxLength=P),j?j.length===1?(A.contentMediaType=j[0],Object.assign(R,A)):R.anyOf=j.map(q=>({...A,contentMediaType:q})):Object.assign(R,A);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const R=this.process(i.innerType,S);T.anyOf=[R,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,S),c.ref=i.innerType;break}case"success":{const R=T;R.type="boolean";break}case"default":{this.process(i.innerType,S),c.ref=i.innerType,T.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,S),c.ref=i.innerType,this.io==="input"&&(T._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,S),c.ref=i.innerType;let R;try{R=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}T.default=R;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const R=T,A=e._zod.pattern;if(!A)throw new Error("Pattern not found in template literal");R.type="string",R.pattern=A.source;break}case"pipe":{const R=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(R,S),c.ref=R;break}case"readonly":{this.process(i.innerType,S),c.ref=i.innerType,T.readOnly=!0;break}case"promise":{this.process(i.innerType,S),c.ref=i.innerType;break}case"optional":{this.process(i.innerType,S),c.ref=i.innerType;break}case"lazy":{const R=e._zod.innerType;this.process(R,S),c.ref=R;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const p=this.metadataRegistry.get(e);return p&&Object.assign(c.schema,p),this.io==="input"&&Gr(e)&&(delete c.schema.examples,delete c.schema.default),this.io==="input"&&c.schema._prefault&&((r=c.schema).default??(r.default=c.schema._prefault)),delete c.schema._prefault,this.seen.get(e).schema}emit(e,t){var m,y,b,_,S,C;const r={cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=T=>{var j;const R=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const q=(j=r.external.registry.get(T[0]))==null?void 0:j.id,G=r.external.uri??(de=>de);if(q)return{ref:G(q)};const ie=T[1].defId??T[1].schema.id??`schema${this.counter++}`;return T[1].defId=ie,{defId:ie,ref:`${G("__shared")}#/${R}/${ie}`}}if(T[1]===i)return{ref:"#"};const O=`#/${R}/`,P=T[1].schema.id??`__schema${this.counter++}`;return{defId:P,ref:O+P}},u=T=>{if(T[1].schema.$ref)return;const R=T[1],{ref:A,defId:O}=o(T);R.def={...R.schema},O&&(R.defId=O);const P=R.schema;for(const j in P)delete P[j];P.$ref=A};if(r.cycles==="throw")for(const T of this.seen.entries()){const R=T[1];if(R.cycle)throw new Error(`Cycle detected: #/${(m=R.cycle)==null?void 0:m.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const T of this.seen.entries()){const R=T[1];if(e===T[0]){u(T);continue}if(r.external){const O=(y=r.external.registry.get(T[0]))==null?void 0:y.id;if(e!==T[0]&&O){u(T);continue}}if((b=this.metadataRegistry.get(T[0]))==null?void 0:b.id){u(T);continue}if(R.cycle){u(T);continue}if(R.count>1&&r.reused==="ref"){u(T);continue}}const c=(T,R)=>{const A=this.seen.get(T),O=A.def??A.schema,P={...O};if(A.ref===null)return;const j=A.ref;if(A.ref=null,j){c(j,R);const q=this.seen.get(j).schema;q.$ref&&R.target==="draft-7"?(O.allOf=O.allOf??[],O.allOf.push(q)):(Object.assign(O,q),Object.assign(O,P))}A.isParent||this.override({zodSchema:T,jsonSchema:O,path:A.path??[]})};for(const T of[...this.seen.entries()].reverse())c(T[0],{target:this.target});const f={};if(this.target==="draft-2020-12"?f.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?f.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(_=r.external)!=null&&_.uri){const T=(S=r.external.registry.get(e))==null?void 0:S.id;if(!T)throw new Error("Schema is missing an `id` property");f.$id=r.external.uri(T)}Object.assign(f,i.def);const p=((C=r.external)==null?void 0:C.defs)??{};for(const T of this.seen.entries()){const R=T[1];R.def&&R.defId&&(p[R.defId]=R.def)}r.external||Object.keys(p).length>0&&(this.target==="draft-2020-12"?f.$defs=p:f.definitions=p);try{return JSON.parse(JSON.stringify(f))}catch{throw new Error("Error converting schema to JSON.")}}}function US(n,e){if(n instanceof H1){const r=new vN(e),i={};for(const c of n._idmap.entries()){const[f,p]=c;r.process(p)}const o={},u={registry:n,uri:e==null?void 0:e.uri,defs:i};for(const c of n._idmap.entries()){const[f,p]=c;o[f]=r.emit(p,{...e,external:u})}if(Object.keys(i).length>0){const c=r.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[c]:i}}return{schemas:o}}const t=new vN(e);return t.process(n),t.emit(n,e)}function Gr(n,e){const t=e??{seen:new Set};if(t.seen.has(n))return!1;t.seen.add(n);const i=n._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Gr(i.element,t);case"object":{for(const o in i.shape)if(Gr(i.shape[o],t))return!0;return!1}case"union":{for(const o of i.options)if(Gr(o,t))return!0;return!1}case"intersection":return Gr(i.left,t)||Gr(i.right,t);case"tuple":{for(const o of i.items)if(Gr(o,t))return!0;return!!(i.rest&&Gr(i.rest,t))}case"record":return Gr(i.keyType,t)||Gr(i.valueType,t);case"map":return Gr(i.keyType,t)||Gr(i.valueType,t);case"set":return Gr(i.valueType,t);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Gr(i.innerType,t);case"lazy":return Gr(i.getter(),t);case"default":return Gr(i.innerType,t);case"prefault":return Gr(i.innerType,t);case"custom":return!1;case"transform":return!0;case"pipe":return Gr(i.in,t)||Gr(i.out,t);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${i.type}`)}const L8=Symbol("Let zodToJsonSchema decide on which parser to use"),U8={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},M8=n=>({...U8,...n}),F8=n=>{const e=M8(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function q1(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function qt(n,e,t,r,i){n[e]=t,q1(n,e,r,i)}const G1=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")};function Ca(n){if(n.target!=="openAi")return{};const e=[...n.basePath,n.definitionPath,n.openAiAnyTypeName];return n.flags.hasReferencedOpenAiAnyType=!0,{$ref:n.$refStrategy==="relative"?G1(e,n.currentPath):e.join("/")}}function B8(n,e){var r,i,o;const t={type:"array"};return(r=n.type)!=null&&r._def&&((o=(i=n.type)==null?void 0:i._def)==null?void 0:o.typeName)!==Z.ZodAny&&(t.items=Vt(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&qt(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&qt(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(qt(t,"minItems",n.exactLength.value,n.exactLength.message,e),qt(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function z8(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?qt(t,"minimum",r.value,r.message,e):qt(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),qt(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?qt(t,"maximum",r.value,r.message,e):qt(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),qt(t,"maximum",r.value,r.message,e));break;case"multipleOf":qt(t,"multipleOf",r.value,r.message,e);break}return t}function V8(){return{type:"boolean"}}function W1(n,e){return Vt(n.type._def,e)}const H8=(n,e)=>Vt(n.innerType._def,e);function J1(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,o)=>J1(n,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return q8(n,e)}}const q8=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":qt(t,"minimum",r.value,r.message,e);break;case"max":qt(t,"maximum",r.value,r.message,e);break}return t};function G8(n,e){return{...Vt(n.innerType._def,e),default:n.defaultValue()}}function W8(n,e){return e.effectStrategy==="input"?Vt(n.schema._def,e):Ca(e)}function J8(n){return{type:"string",enum:Array.from(n.values)}}const K8=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function Z8(n,e){const t=[Vt(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Vt(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return t.forEach(o=>{if(K8(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let u=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...f}=o;u=f}else r=void 0;i.push(u)}}),i.length?{allOf:i,...r}:void 0}function Y8(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let L0;const ui={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(L0===void 0&&(L0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),L0),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function K1(n,e){const t={type:"string"};if(n.checks)for(const r of n.checks)switch(r.kind){case"min":qt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":qt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":li(t,"email",r.message,e);break;case"format:idn-email":li(t,"idn-email",r.message,e);break;case"pattern:zod":Vn(t,ui.email,r.message,e);break}break;case"url":li(t,"uri",r.message,e);break;case"uuid":li(t,"uuid",r.message,e);break;case"regex":Vn(t,r.regex,r.message,e);break;case"cuid":Vn(t,ui.cuid,r.message,e);break;case"cuid2":Vn(t,ui.cuid2,r.message,e);break;case"startsWith":Vn(t,RegExp(`^${U0(r.value,e)}`),r.message,e);break;case"endsWith":Vn(t,RegExp(`${U0(r.value,e)}$`),r.message,e);break;case"datetime":li(t,"date-time",r.message,e);break;case"date":li(t,"date",r.message,e);break;case"time":li(t,"time",r.message,e);break;case"duration":li(t,"duration",r.message,e);break;case"length":qt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),qt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{Vn(t,RegExp(U0(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&li(t,"ipv4",r.message,e),r.version!=="v4"&&li(t,"ipv6",r.message,e);break}case"base64url":Vn(t,ui.base64url,r.message,e);break;case"jwt":Vn(t,ui.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Vn(t,ui.ipv4Cidr,r.message,e),r.version!=="v4"&&Vn(t,ui.ipv6Cidr,r.message,e);break}case"emoji":Vn(t,ui.emoji(),r.message,e);break;case"ulid":{Vn(t,ui.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{li(t,"binary",r.message,e);break}case"contentEncoding:base64":{qt(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Vn(t,ui.base64,r.message,e);break}}break}case"nanoid":Vn(t,ui.nanoid,r.message,e)}return t}function U0(n,e){return e.patternStrategy==="escape"?Q8(n):n}const X8=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Q8(n){let e="";for(let t=0;t<n.length;t++)X8.has(n[t])||(e+="\\"),e+=n[t];return e}function li(n,e,t,r){var i;n.format||(i=n.anyOf)!=null&&i.some(o=>o.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):qt(n,"format",e,t,r)}function Vn(n,e,t,r){var i;n.pattern||(i=n.allOf)!=null&&i.some(o=>o.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:bN(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):qt(n,"pattern",bN(e,r),t,r)}function bN(n,e){var f;if(!e.applyRegexFlags||!n.flags)return n.source;const t={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},r=t.i?n.source.toLowerCase():n.source;let i="",o=!1,u=!1,c=!1;for(let p=0;p<r.length;p++){if(o){i+=r[p],o=!1;continue}if(t.i){if(u){if(r[p].match(/[a-z]/)){c?(i+=r[p],i+=`${r[p-2]}-${r[p]}`.toUpperCase(),c=!1):r[p+1]==="-"&&((f=r[p+2])!=null&&f.match(/[a-z]/))?(i+=r[p],c=!0):i+=`${r[p]}${r[p].toUpperCase()}`;continue}}else if(r[p].match(/[a-z]/)){i+=`[${r[p]}${r[p].toUpperCase()}]`;continue}}if(t.m){if(r[p]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[p]==="$"){i+=`($|(?=[\r
]))`;continue}}if(t.s&&r[p]==="."){i+=u?`${r[p]}\r
`:`[${r[p]}\r
]`;continue}i+=r[p],r[p]==="\\"?o=!0:u&&r[p]==="]"?u=!1:!u&&r[p]==="["&&(u=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return i}function Z1(n,e){var r,i,o,u,c,f;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===Z.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((p,m)=>({...p,[m]:Vt(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",m]})??Ca(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const t={type:"object",additionalProperties:Vt(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(((i=n.keyType)==null?void 0:i._def.typeName)===Z.ZodString&&((o=n.keyType._def.checks)!=null&&o.length)){const{type:p,...m}=K1(n.keyType._def,e);return{...t,propertyNames:m}}else{if(((u=n.keyType)==null?void 0:u._def.typeName)===Z.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};if(((c=n.keyType)==null?void 0:c._def.typeName)===Z.ZodBranded&&n.keyType._def.type._def.typeName===Z.ZodString&&((f=n.keyType._def.type._def.checks)!=null&&f.length)){const{type:p,...m}=W1(n.keyType._def,e);return{...t,propertyNames:m}}}return t}function eJ(n,e){if(e.mapStrategy==="record")return Z1(n,e);const t=Vt(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Ca(e),r=Vt(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Ca(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function tJ(n){const e=n.values,r=Object.keys(n.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function rJ(n){return n.target==="openAi"?void 0:{not:Ca({...n,currentPath:[...n.currentPath,"not"]})}}function nJ(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ey={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function aJ(n,e){if(e.target==="openApi3")return _N(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in ey&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((i,o)=>{const u=ey[o._def.typeName];return u&&!i.includes(u)?[...i,u]:i},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((i,o)=>{const u=typeof o._def.value;switch(u){case"string":case"number":case"boolean":return[...i,u];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===t.length){const i=r.filter((o,u,c)=>c.indexOf(o)===u);return{type:i.length>1?i:i[0],enum:t.reduce((o,u)=>o.includes(u._def.value)?o:[...o,u._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return _N(n,e)}const _N=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,i)=>Vt(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function iJ(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"?{type:ey[n.innerType._def.typeName],nullable:!0}:{type:[ey[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Vt(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=Vt(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function sJ(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",q1(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?qt(t,"minimum",r.value,r.message,e):qt(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),qt(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?qt(t,"maximum",r.value,r.message,e):qt(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),qt(t,"maximum",r.value,r.message,e));break;case"multipleOf":qt(t,"multipleOf",r.value,r.message,e);break}return t}function oJ(n,e){const t=e.target==="openAi",r={type:"object",properties:{}},i=[],o=n.shape();for(const c in o){let f=o[c];if(f===void 0||f._def===void 0)continue;let p=lJ(f);p&&t&&(f._def.typeName==="ZodOptional"&&(f=f._def.innerType),f.isNullable()||(f=f.nullable()),p=!1);const m=Vt(f._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});m!==void 0&&(r.properties[c]=m,p||i.push(c))}i.length&&(r.required=i);const u=uJ(n,e);return u!==void 0&&(r.additionalProperties=u),r}function uJ(n,e){if(n.catchall._def.typeName!=="ZodNever")return Vt(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function lJ(n){try{return n.isOptional()}catch{return!0}}const cJ=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Vt(n.innerType._def,e);const t=Vt(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:Ca(e)},t]}:Ca(e)},dJ=(n,e)=>{if(e.pipeStrategy==="input")return Vt(n.in._def,e);if(e.pipeStrategy==="output")return Vt(n.out._def,e);const t=Vt(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Vt(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(i=>i!==void 0)}};function fJ(n,e){return Vt(n.type._def,e)}function hJ(n,e){const r={type:"array",uniqueItems:!0,items:Vt(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&qt(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&qt(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function pJ(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Vt(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Vt(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Vt(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function mJ(n){return{not:Ca(n)}}function gJ(n){return Ca(n)}const yJ=(n,e)=>Vt(n.innerType._def,e),vJ=(n,e,t)=>{switch(e){case Z.ZodString:return K1(n,t);case Z.ZodNumber:return sJ(n,t);case Z.ZodObject:return oJ(n,t);case Z.ZodBigInt:return z8(n,t);case Z.ZodBoolean:return V8();case Z.ZodDate:return J1(n,t);case Z.ZodUndefined:return mJ(t);case Z.ZodNull:return nJ(t);case Z.ZodArray:return B8(n,t);case Z.ZodUnion:case Z.ZodDiscriminatedUnion:return aJ(n,t);case Z.ZodIntersection:return Z8(n,t);case Z.ZodTuple:return pJ(n,t);case Z.ZodRecord:return Z1(n,t);case Z.ZodLiteral:return Y8(n,t);case Z.ZodEnum:return J8(n);case Z.ZodNativeEnum:return tJ(n);case Z.ZodNullable:return iJ(n,t);case Z.ZodOptional:return cJ(n,t);case Z.ZodMap:return eJ(n,t);case Z.ZodSet:return hJ(n,t);case Z.ZodLazy:return()=>n.getter()._def;case Z.ZodPromise:return fJ(n,t);case Z.ZodNaN:case Z.ZodNever:return rJ(t);case Z.ZodEffects:return W8(n,t);case Z.ZodAny:return Ca(t);case Z.ZodUnknown:return gJ(t);case Z.ZodDefault:return G8(n,t);case Z.ZodBranded:return W1(n,t);case Z.ZodReadonly:return yJ(n,t);case Z.ZodCatch:return H8(n,t);case Z.ZodPipeline:return dJ(n,t);case Z.ZodFunction:case Z.ZodVoid:case Z.ZodSymbol:return;default:return(r=>{})()}};function Vt(n,e,t=!1){var c;const r=e.seen.get(n);if(e.override){const f=(c=e.override)==null?void 0:c.call(e,n,e,r,t);if(f!==L8)return f}if(r&&!t){const f=bJ(r,e);if(f!==void 0)return f}const i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);const o=vJ(n,n.typeName,e),u=typeof o=="function"?Vt(o(),e):o;if(u&&_J(n,e,u),e.postProcess){const f=e.postProcess(u,n,e);return i.jsonSchema=u,f}return i.jsonSchema=u,u}const bJ=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:G1(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((t,r)=>e.currentPath[r]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Ca(e)):e.$refStrategy==="seen"?Ca(e):void 0}},_J=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),wJ=(n,e)=>{const t=F8(e);let r;const i=e==null?void 0:e.name,o=Vt(n._def,t,!1)??Ca(t);t.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[t.openAiAnyTypeName]||(r[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));const u=i===void 0?r?{...o,[t.definitionPath]:r}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,i].join("/"),[t.definitionPath]:{...r,[i]:o}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};function lc(n,e){const t=typeof n;if(t!==typeof e)return!1;if(Array.isArray(n)){if(!Array.isArray(e))return!1;const r=n.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!lc(n[i],e[i]))return!1;return!0}if(t==="object"){if(!n||!e)return n===e;const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(const u of r)if(!lc(n[u],e[u]))return!1;return!0}return n===e}function pi(n){return encodeURI(SJ(n))}function SJ(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}const EJ={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},xJ={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},TJ={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let CJ=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function Bf(n,e=Object.create(null),t=CJ,r=""){if(n&&typeof n=="object"&&!Array.isArray(n)){const o=n.$id||n.id;if(o){const u=new URL(o,t.href);u.hash.length>1?e[u.href]=n:(u.hash="",r===""?t=u:Bf(n,e,t))}}else if(n!==!0&&n!==!1)return e;const i=t.href+(r?"#"+r:"");if(e[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(e[i]=n,n===!0||n===!1)return e;if(n.__absolute_uri__===void 0&&Object.defineProperty(n,"__absolute_uri__",{enumerable:!1,value:i}),n.$ref&&n.__absolute_ref__===void 0){const o=new URL(n.$ref,t.href);o.hash=o.hash,Object.defineProperty(n,"__absolute_ref__",{enumerable:!1,value:o.href})}if(n.$recursiveRef&&n.__absolute_recursive_ref__===void 0){const o=new URL(n.$recursiveRef,t.href);o.hash=o.hash,Object.defineProperty(n,"__absolute_recursive_ref__",{enumerable:!1,value:o.href})}if(n.$anchor){const o=new URL("#"+n.$anchor,t.href);e[o.href]=n}for(let o in n){if(TJ[o])continue;const u=`${r}/${pi(o)}`,c=n[o];if(Array.isArray(c)){if(EJ[o]){const f=c.length;for(let p=0;p<f;p++)Bf(c[p],e,t,`${u}/${p}`)}}else if(xJ[o])for(let f in c)Bf(c[f],e,t,`${u}/${pi(f)}`);else Bf(c,e,t,u)}return e}const RJ=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,OJ=[0,31,28,31,30,31,30,31,31,30,31,30,31],AJ=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,kJ=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,NJ=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,PJ=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,$J=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,IJ=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,jJ=/^(?:\/(?:[^~/]|~0|~1)*)*$/,DJ=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,LJ=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,UJ=n=>{if(n[0]==='"')return!1;const[e,t,...r]=n.split("@");return!e||!t||r.length!==0||e.length>64||t.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(t)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:t.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},MJ=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,FJ=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,BJ=n=>n.length>1&&n.length<80&&(/^P\d+([.,]\d+)?W$/.test(n)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(n)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(n));function Bi(n){return n.test.bind(n)}const wN={date:Y1,time:X1.bind(void 0,!1),"date-time":HJ,duration:BJ,uri:WJ,"uri-reference":Bi(NJ),"uri-template":Bi(PJ),url:Bi($J),email:UJ,hostname:Bi(kJ),ipv4:Bi(MJ),ipv6:Bi(FJ),regex:KJ,uuid:Bi(IJ),"json-pointer":Bi(jJ),"json-pointer-uri-fragment":Bi(DJ),"relative-json-pointer":Bi(LJ)};function zJ(n){return n%4===0&&(n%100!==0||n%400===0)}function Y1(n){const e=n.match(RJ);if(!e)return!1;const t=+e[1],r=+e[2],i=+e[3];return r>=1&&r<=12&&i>=1&&i<=(r==2&&zJ(t)?29:OJ[r])}function X1(n,e){const t=e.match(AJ);if(!t)return!1;const r=+t[1],i=+t[2],o=+t[3],u=!!t[5];return(r<=23&&i<=59&&o<=59||r==23&&i==59&&o==60)&&(!n||u)}const VJ=/t|\s/i;function HJ(n){const e=n.split(VJ);return e.length==2&&Y1(e[0])&&X1(!0,e[1])}const qJ=/\/|:/,GJ=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function WJ(n){return qJ.test(n)&&GJ.test(n)}const JJ=/[^\\]\\Z/;function KJ(n){if(JJ.test(n))return!1;try{return new RegExp(n,"u"),!0}catch{return!1}}function ZJ(n){let e=0,t=n.length,r=0,i;for(;r<t;)e++,i=n.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=n.charCodeAt(r),(i&64512)==56320&&r++);return e}function gr(n,e,t="2019-09",r=Bf(e),i=!0,o=null,u="#",c="#",f=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:u,keyword:"false",keywordLocation:u,error:"False boolean schema."}]};const p=typeof n;let m;switch(p){case"boolean":case"number":case"string":m=p;break;case"object":n===null?m="null":Array.isArray(n)?m="array":m="object";break;default:throw new Error(`Instances of "${p}" type are not supported.`)}const{$ref:y,$recursiveRef:b,$recursiveAnchor:_,type:S,const:C,enum:T,required:R,not:A,anyOf:O,allOf:P,oneOf:j,if:q,then:G,else:ie,format:de,properties:Ae,patternProperties:ke,additionalProperties:st,unevaluatedProperties:Ue,minProperties:ae,maxProperties:Q,propertyNames:ye,dependentRequired:te,dependentSchemas:Se,dependencies:_e,prefixItems:Pe,items:Ze,additionalItems:$e,unevaluatedItems:ht,contains:Rt,minContains:ut,maxContains:ir,minItems:Wt,maxItems:Tr,uniqueItems:cr,minimum:Ht,maximum:Jt,exclusiveMinimum:Cr,exclusiveMaximum:sr,multipleOf:Rr,minLength:dr,maxLength:fr,pattern:Nn,__absolute_ref__:Jn,__absolute_recursive_ref__:ua}=e,ce=[];if(_===!0&&o===null&&(o=e),b==="#"){const Re=o===null?r[ua]:o,Ee=`${c}/$recursiveRef`,Me=gr(n,o===null?e:o,t,r,i,Re,u,Ee,f);Me.valid||ce.push({instanceLocation:u,keyword:"$recursiveRef",keywordLocation:Ee,error:"A subschema had errors."},...Me.errors)}if(y!==void 0){const Ee=r[Jn||y];if(Ee===void 0){let se=`Unresolved $ref "${y}".`;throw Jn&&Jn!==y&&(se+=`  Absolute URI "${Jn}".`),se+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(se)}const Me=`${c}/$ref`,le=gr(n,Ee,t,r,i,o,u,Me,f);if(le.valid||ce.push({instanceLocation:u,keyword:"$ref",keywordLocation:Me,error:"A subschema had errors."},...le.errors),t==="4"||t==="7")return{valid:ce.length===0,errors:ce}}if(Array.isArray(S)){let Re=S.length,Ee=!1;for(let Me=0;Me<Re;Me++)if(m===S[Me]||S[Me]==="integer"&&m==="number"&&n%1===0&&n===n){Ee=!0;break}Ee||ce.push({instanceLocation:u,keyword:"type",keywordLocation:`${c}/type`,error:`Instance type "${m}" is invalid. Expected "${S.join('", "')}".`})}else S==="integer"?(m!=="number"||n%1||n!==n)&&ce.push({instanceLocation:u,keyword:"type",keywordLocation:`${c}/type`,error:`Instance type "${m}" is invalid. Expected "${S}".`}):S!==void 0&&m!==S&&ce.push({instanceLocation:u,keyword:"type",keywordLocation:`${c}/type`,error:`Instance type "${m}" is invalid. Expected "${S}".`});if(C!==void 0&&(m==="object"||m==="array"?lc(n,C)||ce.push({instanceLocation:u,keyword:"const",keywordLocation:`${c}/const`,error:`Instance does not match ${JSON.stringify(C)}.`}):n!==C&&ce.push({instanceLocation:u,keyword:"const",keywordLocation:`${c}/const`,error:`Instance does not match ${JSON.stringify(C)}.`})),T!==void 0&&(m==="object"||m==="array"?T.some(Re=>lc(n,Re))||ce.push({instanceLocation:u,keyword:"enum",keywordLocation:`${c}/enum`,error:`Instance does not match any of ${JSON.stringify(T)}.`}):T.some(Re=>n===Re)||ce.push({instanceLocation:u,keyword:"enum",keywordLocation:`${c}/enum`,error:`Instance does not match any of ${JSON.stringify(T)}.`})),A!==void 0){const Re=`${c}/not`;gr(n,A,t,r,i,o,u,Re).valid&&ce.push({instanceLocation:u,keyword:"not",keywordLocation:Re,error:'Instance matched "not" schema.'})}let Er=[];if(O!==void 0){const Re=`${c}/anyOf`,Ee=ce.length;let Me=!1;for(let le=0;le<O.length;le++){const se=O[le],Ie=Object.create(f),Fe=gr(n,se,t,r,i,_===!0?o:null,u,`${Re}/${le}`,Ie);ce.push(...Fe.errors),Me=Me||Fe.valid,Fe.valid&&Er.push(Ie)}Me?ce.length=Ee:ce.splice(Ee,0,{instanceLocation:u,keyword:"anyOf",keywordLocation:Re,error:"Instance does not match any subschemas."})}if(P!==void 0){const Re=`${c}/allOf`,Ee=ce.length;let Me=!0;for(let le=0;le<P.length;le++){const se=P[le],Ie=Object.create(f),Fe=gr(n,se,t,r,i,_===!0?o:null,u,`${Re}/${le}`,Ie);ce.push(...Fe.errors),Me=Me&&Fe.valid,Fe.valid&&Er.push(Ie)}Me?ce.length=Ee:ce.splice(Ee,0,{instanceLocation:u,keyword:"allOf",keywordLocation:Re,error:"Instance does not match every subschema."})}if(j!==void 0){const Re=`${c}/oneOf`,Ee=ce.length,Me=j.filter((le,se)=>{const Ie=Object.create(f),Fe=gr(n,le,t,r,i,_===!0?o:null,u,`${Re}/${se}`,Ie);return ce.push(...Fe.errors),Fe.valid&&Er.push(Ie),Fe.valid}).length;Me===1?ce.length=Ee:ce.splice(Ee,0,{instanceLocation:u,keyword:"oneOf",keywordLocation:Re,error:`Instance does not match exactly one subschema (${Me} matches).`})}if((m==="object"||m==="array")&&Object.assign(f,...Er),q!==void 0){const Re=`${c}/if`;if(gr(n,q,t,r,i,o,u,Re,f).valid){if(G!==void 0){const Me=gr(n,G,t,r,i,o,u,`${c}/then`,f);Me.valid||ce.push({instanceLocation:u,keyword:"if",keywordLocation:Re,error:'Instance does not match "then" schema.'},...Me.errors)}}else if(ie!==void 0){const Me=gr(n,ie,t,r,i,o,u,`${c}/else`,f);Me.valid||ce.push({instanceLocation:u,keyword:"if",keywordLocation:Re,error:'Instance does not match "else" schema.'},...Me.errors)}}if(m==="object"){if(R!==void 0)for(const le of R)le in n||ce.push({instanceLocation:u,keyword:"required",keywordLocation:`${c}/required`,error:`Instance does not have required property "${le}".`});const Re=Object.keys(n);if(ae!==void 0&&Re.length<ae&&ce.push({instanceLocation:u,keyword:"minProperties",keywordLocation:`${c}/minProperties`,error:`Instance does not have at least ${ae} properties.`}),Q!==void 0&&Re.length>Q&&ce.push({instanceLocation:u,keyword:"maxProperties",keywordLocation:`${c}/maxProperties`,error:`Instance does not have at least ${Q} properties.`}),ye!==void 0){const le=`${c}/propertyNames`;for(const se in n){const Ie=`${u}/${pi(se)}`,Fe=gr(se,ye,t,r,i,o,Ie,le);Fe.valid||ce.push({instanceLocation:u,keyword:"propertyNames",keywordLocation:le,error:`Property name "${se}" does not match schema.`},...Fe.errors)}}if(te!==void 0){const le=`${c}/dependantRequired`;for(const se in te)if(se in n){const Ie=te[se];for(const Fe of Ie)Fe in n||ce.push({instanceLocation:u,keyword:"dependentRequired",keywordLocation:le,error:`Instance has "${se}" but does not have "${Fe}".`})}}if(Se!==void 0)for(const le in Se){const se=`${c}/dependentSchemas`;if(le in n){const Ie=gr(n,Se[le],t,r,i,o,u,`${se}/${pi(le)}`,f);Ie.valid||ce.push({instanceLocation:u,keyword:"dependentSchemas",keywordLocation:se,error:`Instance has "${le}" but does not match dependant schema.`},...Ie.errors)}}if(_e!==void 0){const le=`${c}/dependencies`;for(const se in _e)if(se in n){const Ie=_e[se];if(Array.isArray(Ie))for(const Fe of Ie)Fe in n||ce.push({instanceLocation:u,keyword:"dependencies",keywordLocation:le,error:`Instance has "${se}" but does not have "${Fe}".`});else{const Fe=gr(n,Ie,t,r,i,o,u,`${le}/${pi(se)}`);Fe.valid||ce.push({instanceLocation:u,keyword:"dependencies",keywordLocation:le,error:`Instance has "${se}" but does not match dependant schema.`},...Fe.errors)}}}const Ee=Object.create(null);let Me=!1;if(Ae!==void 0){const le=`${c}/properties`;for(const se in Ae){if(!(se in n))continue;const Ie=`${u}/${pi(se)}`,Fe=gr(n[se],Ae[se],t,r,i,o,Ie,`${le}/${pi(se)}`);if(Fe.valid)f[se]=Ee[se]=!0;else if(Me=i,ce.push({instanceLocation:u,keyword:"properties",keywordLocation:le,error:`Property "${se}" does not match schema.`},...Fe.errors),Me)break}}if(!Me&&ke!==void 0){const le=`${c}/patternProperties`;for(const se in ke){const Ie=new RegExp(se,"u"),Fe=ke[se];for(const or in n){if(!Ie.test(or))continue;const fe=`${u}/${pi(or)}`,De=gr(n[or],Fe,t,r,i,o,fe,`${le}/${pi(se)}`);De.valid?f[or]=Ee[or]=!0:(Me=i,ce.push({instanceLocation:u,keyword:"patternProperties",keywordLocation:le,error:`Property "${or}" matches pattern "${se}" but does not match associated schema.`},...De.errors))}}}if(!Me&&st!==void 0){const le=`${c}/additionalProperties`;for(const se in n){if(Ee[se])continue;const Ie=`${u}/${pi(se)}`,Fe=gr(n[se],st,t,r,i,o,Ie,le);Fe.valid?f[se]=!0:(Me=i,ce.push({instanceLocation:u,keyword:"additionalProperties",keywordLocation:le,error:`Property "${se}" does not match additional properties schema.`},...Fe.errors))}}else if(!Me&&Ue!==void 0){const le=`${c}/unevaluatedProperties`;for(const se in n)if(!f[se]){const Ie=`${u}/${pi(se)}`,Fe=gr(n[se],Ue,t,r,i,o,Ie,le);Fe.valid?f[se]=!0:ce.push({instanceLocation:u,keyword:"unevaluatedProperties",keywordLocation:le,error:`Property "${se}" does not match unevaluated properties schema.`},...Fe.errors)}}}else if(m==="array"){Tr!==void 0&&n.length>Tr&&ce.push({instanceLocation:u,keyword:"maxItems",keywordLocation:`${c}/maxItems`,error:`Array has too many items (${n.length} > ${Tr}).`}),Wt!==void 0&&n.length<Wt&&ce.push({instanceLocation:u,keyword:"minItems",keywordLocation:`${c}/minItems`,error:`Array has too few items (${n.length} < ${Wt}).`});const Re=n.length;let Ee=0,Me=!1;if(Pe!==void 0){const le=`${c}/prefixItems`,se=Math.min(Pe.length,Re);for(;Ee<se;Ee++){const Ie=gr(n[Ee],Pe[Ee],t,r,i,o,`${u}/${Ee}`,`${le}/${Ee}`);if(f[Ee]=!0,!Ie.valid&&(Me=i,ce.push({instanceLocation:u,keyword:"prefixItems",keywordLocation:le,error:"Items did not match schema."},...Ie.errors),Me))break}}if(Ze!==void 0){const le=`${c}/items`;if(Array.isArray(Ze)){const se=Math.min(Ze.length,Re);for(;Ee<se;Ee++){const Ie=gr(n[Ee],Ze[Ee],t,r,i,o,`${u}/${Ee}`,`${le}/${Ee}`);if(f[Ee]=!0,!Ie.valid&&(Me=i,ce.push({instanceLocation:u,keyword:"items",keywordLocation:le,error:"Items did not match schema."},...Ie.errors),Me))break}}else for(;Ee<Re;Ee++){const se=gr(n[Ee],Ze,t,r,i,o,`${u}/${Ee}`,le);if(f[Ee]=!0,!se.valid&&(Me=i,ce.push({instanceLocation:u,keyword:"items",keywordLocation:le,error:"Items did not match schema."},...se.errors),Me))break}if(!Me&&$e!==void 0){const se=`${c}/additionalItems`;for(;Ee<Re;Ee++){const Ie=gr(n[Ee],$e,t,r,i,o,`${u}/${Ee}`,se);f[Ee]=!0,Ie.valid||(Me=i,ce.push({instanceLocation:u,keyword:"additionalItems",keywordLocation:se,error:"Items did not match additional items schema."},...Ie.errors))}}}if(Rt!==void 0)if(Re===0&&ut===void 0)ce.push({instanceLocation:u,keyword:"contains",keywordLocation:`${c}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(ut!==void 0&&Re<ut)ce.push({instanceLocation:u,keyword:"minContains",keywordLocation:`${c}/minContains`,error:`Array has less items (${Re}) than minContains (${ut}).`});else{const le=`${c}/contains`,se=ce.length;let Ie=0;for(let Fe=0;Fe<Re;Fe++){const or=gr(n[Fe],Rt,t,r,i,o,`${u}/${Fe}`,le);or.valid?(f[Fe]=!0,Ie++):ce.push(...or.errors)}Ie>=(ut||0)&&(ce.length=se),ut===void 0&&ir===void 0&&Ie===0?ce.splice(se,0,{instanceLocation:u,keyword:"contains",keywordLocation:le,error:"Array does not contain item matching schema."}):ut!==void 0&&Ie<ut?ce.push({instanceLocation:u,keyword:"minContains",keywordLocation:`${c}/minContains`,error:`Array must contain at least ${ut} items matching schema. Only ${Ie} items were found.`}):ir!==void 0&&Ie>ir&&ce.push({instanceLocation:u,keyword:"maxContains",keywordLocation:`${c}/maxContains`,error:`Array may contain at most ${ir} items matching schema. ${Ie} items were found.`})}if(!Me&&ht!==void 0){const le=`${c}/unevaluatedItems`;for(Ee;Ee<Re;Ee++){if(f[Ee])continue;const se=gr(n[Ee],ht,t,r,i,o,`${u}/${Ee}`,le);f[Ee]=!0,se.valid||ce.push({instanceLocation:u,keyword:"unevaluatedItems",keywordLocation:le,error:"Items did not match unevaluated items schema."},...se.errors)}}if(cr)for(let le=0;le<Re;le++){const se=n[le],Ie=typeof se=="object"&&se!==null;for(let Fe=0;Fe<Re;Fe++){if(le===Fe)continue;const or=n[Fe];(se===or||Ie&&(typeof or=="object"&&or!==null)&&lc(se,or))&&(ce.push({instanceLocation:u,keyword:"uniqueItems",keywordLocation:`${c}/uniqueItems`,error:`Duplicate items at indexes ${le} and ${Fe}.`}),le=Number.MAX_SAFE_INTEGER,Fe=Number.MAX_SAFE_INTEGER)}}}else if(m==="number"){if(t==="4"?(Ht!==void 0&&(Cr===!0&&n<=Ht||n<Ht)&&ce.push({instanceLocation:u,keyword:"minimum",keywordLocation:`${c}/minimum`,error:`${n} is less than ${Cr?"or equal to ":""} ${Ht}.`}),Jt!==void 0&&(sr===!0&&n>=Jt||n>Jt)&&ce.push({instanceLocation:u,keyword:"maximum",keywordLocation:`${c}/maximum`,error:`${n} is greater than ${sr?"or equal to ":""} ${Jt}.`})):(Ht!==void 0&&n<Ht&&ce.push({instanceLocation:u,keyword:"minimum",keywordLocation:`${c}/minimum`,error:`${n} is less than ${Ht}.`}),Jt!==void 0&&n>Jt&&ce.push({instanceLocation:u,keyword:"maximum",keywordLocation:`${c}/maximum`,error:`${n} is greater than ${Jt}.`}),Cr!==void 0&&n<=Cr&&ce.push({instanceLocation:u,keyword:"exclusiveMinimum",keywordLocation:`${c}/exclusiveMinimum`,error:`${n} is less than ${Cr}.`}),sr!==void 0&&n>=sr&&ce.push({instanceLocation:u,keyword:"exclusiveMaximum",keywordLocation:`${c}/exclusiveMaximum`,error:`${n} is greater than or equal to ${sr}.`})),Rr!==void 0){const Re=n%Rr;Math.abs(0-Re)>=11920929e-14&&Math.abs(Rr-Re)>=11920929e-14&&ce.push({instanceLocation:u,keyword:"multipleOf",keywordLocation:`${c}/multipleOf`,error:`${n} is not a multiple of ${Rr}.`})}}else if(m==="string"){const Re=dr===void 0&&fr===void 0?0:ZJ(n);dr!==void 0&&Re<dr&&ce.push({instanceLocation:u,keyword:"minLength",keywordLocation:`${c}/minLength`,error:`String is too short (${Re} < ${dr}).`}),fr!==void 0&&Re>fr&&ce.push({instanceLocation:u,keyword:"maxLength",keywordLocation:`${c}/maxLength`,error:`String is too long (${Re} > ${fr}).`}),Nn!==void 0&&!new RegExp(Nn,"u").test(n)&&ce.push({instanceLocation:u,keyword:"pattern",keywordLocation:`${c}/pattern`,error:"String does not match pattern."}),de!==void 0&&wN[de]&&!wN[de](n)&&ce.push({instanceLocation:u,keyword:"format",keywordLocation:`${c}/format`,error:`String does not match format "${de}".`})}return{valid:ce.length===0,errors:ce}}function Si(n){if(typeof n!="object"||n===null)return!1;const e=n;if(!("_zod"in e))return!1;const t=e._zod;return typeof t=="object"&&t!==null&&"def"in t}function Qi(n){if(typeof n!="object"||n===null)return!1;const e=n;if(!("_def"in e)||"_zod"in e)return!1;const t=e._def;return typeof t=="object"&&t!=null&&"typeName"in t}function Eo(n){return!n||typeof n!="object"||Array.isArray(n)?!1:!!(Si(n)||Qi(n))}async function YJ(n,e){if(Si(n))try{return{success:!0,data:await R8(n,e)}}catch(t){return{success:!1,error:t}}if(Qi(n))return n.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function HE(n,e){if(Si(n))return V1(n,e);if(Qi(n))return n.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function qE(n){var e;if(Si(n))return(e=So.get(n))==null?void 0:e.description;if(Qi(n)||"description"in n&&typeof n.description=="string")return n.description}function XJ(n){return Eo(n)?Qi(n)?n._def.typeName==="ZodString":Si(n)?n._zod.def.type==="string":!1:!1}function th(n){return Si(n)?typeof n=="object"&&n!==null&&"_zod"in n&&typeof n._zod=="object"&&n._zod!==null&&"def"in n._zod&&typeof n._zod.def=="object"&&n._zod.def!==null&&"type"in n._zod.def&&n._zod.def.type==="object":!1}function Q1(n){return Si(n)?typeof n=="object"&&n!==null&&"_zod"in n&&typeof n._zod=="object"&&n._zod!==null&&"def"in n._zod&&typeof n._zod.def=="object"&&n._zod.def!==null&&"type"in n._zod.def&&n._zod.def.type==="array":!1}function MS(n,e=!1){if(Qi(n))return n.strict();if(th(n)){const t=n._zod.def.shape;if(e)for(const[o,u]of Object.entries(n._zod.def.shape)){if(th(u)){const f=MS(u,e);t[o]=f}else if(Q1(u)){let f=u._zod.def.element;th(f)&&(f=MS(f,e)),t[o]=Qg(u,{...u._zod.def,element:f})}else t[o]=u;const c=So.get(u);c&&So.add(t[o],c)}const r=Qg(n,{...n._zod.def,shape:t,catchall:D8(I8)}),i=So.get(n);return i&&So.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function QJ(n){return Qi(n)&&"typeName"in n._def&&n._def.typeName==="ZodEffects"}function eK(n){return Si(n)&&n._zod.def.type==="pipe"}function zf(n,e=!1){if(Qi(n))return QJ(n)?zf(n._def.schema,e):n;if(Si(n)){let t=n;if(eK(n)&&(t=zf(n._zod.def.in,e)),e){if(th(t)){const i=t._zod.def.shape;for(const[o,u]of Object.entries(t._zod.def.shape))i[o]=zf(u,e);t=Qg(t,{...t._zod.def,shape:i})}else if(Q1(t)){const i=zf(t._zod.def.element,e);t=Qg(t,{...t._zod.def,element:i})}}const r=So.get(n);return r&&So.add(t,r),t}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function xo(n){if(Si(n)){const e=zf(n,!0);if(th(e)){const t=MS(e,!0);return US(t)}else return US(n)}return Qi(n)?wJ(n):n}function tK(n,e){if(n!==void 0&&!Zf(n))return n;if(VE(e))try{let t=e.getName();return t=t.startsWith("Runnable")?t.slice(8):t,t}catch{return e.getName()}else return e.name??"UnknownSchema"}function rK(n){return VE(n.data)?{type:"runnable",data:{id:n.data.lc_id,name:n.data.getName()}}:{type:"schema",data:{...xo(n.data.schema),title:n.data.name}}}class Dy{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=Zf(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...rK(t)})),edges:this.edges.map(t=>{const r={source:e[t.source],target:e[t.target]};return typeof t.data<"u"&&(r.data=t.data),typeof t.conditional<"u"&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(t!==void 0&&this.nodes[t]!==void 0)throw new Error(`Node with id ${t} already exists`);const i=t??qn(),o={id:i,data:e,name:tK(t,e),metadata:r};return this.nodes[i]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[t.id]===void 0)throw new Error(`Target node ${t.id} not in graph`);const o={source:e.id,target:t.id,data:r,conditional:i};return this.edges.push(o),o}firstNode(){return SN(this)}lastNode(){return EN(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(p=>p.id).every(Zf)&&(r="");const o=p=>r?`${r}:${p}`:p;Object.entries(e.nodes).forEach(([p,m])=>{this.nodes[o(p)]={...m,id:o(p)}});const u=e.edges.map(p=>({...p,source:o(p.source),target:o(p.target)}));this.edges=[...this.edges,...u];const c=e.firstNode(),f=e.lastNode();return[c?{id:o(c.id),data:c.data}:void 0,f?{id:o(f.id),data:f.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&SN(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&EN(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),t=new Map;Object.values(e).forEach(i=>{t.set(i,(t.get(i)||0)+1)});const r=i=>{const o=e[i];return Zf(i)&&t.get(o)===1?o:i};return new Dy({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,o])=>[r(i),{...o,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:t,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},u=this.reid(),c=u.firstNode(),f=u.lastNode();return v8(u.nodes,u.edges,{firstNode:c==null?void 0:c.id,lastNode:f==null?void 0:f.id,withStyles:t,curveStyle:r,nodeColors:i,wrapLabelNWords:o})}async drawMermaidPng(e){const t=this.drawMermaid(e);return b8(t,{backgroundColor:e==null?void 0:e.backgroundColor})}}function SN(n,e=[]){const t=new Set(n.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(n.nodes))!e.includes(i.id)&&!t.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function EN(n,e=[]){const t=new Set(n.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(n.nodes))!e.includes(i.id)&&!t.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function nK(n){const e=new TextEncoder,t=new ReadableStream({async start(r){for await(const i of n)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Ta.fromReadableStream(t)}function xN(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.iterator]=="function"&&typeof n.next=="function"}const aK=n=>n!=null&&typeof n=="object"&&"next"in n&&typeof n.next=="function";function FS(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.asyncIterator]=="function"}function*TN(n,e){for(;;){const{value:t,done:r}=Po.runWithConfig(gc(n),e.next.bind(e),!0);if(r)break;yield t}}async function*BS(n,e){const t=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await Po.runWithConfig(gc(n),t.next.bind(e),!0);if(i)break;yield r}}function on(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}class Sr extends Ns{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new Nu({bound:this,kwargs:e,config:{}})}map(){return new ty({bound:this})}withRetry(e){return new eI({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Nu({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new sK({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(jt);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:t},(i,o)=>jt(o===0?e:r))}return Array.from({length:t},()=>jt(e))}async batch(e,t,r){var f;const i=this._getOptionsList(t??{},e.length),o=((f=i[0])==null?void 0:f.maxConcurrency)??(r==null?void 0:r.maxConcurrency),u=new zE({maxConcurrency:o,onFailedAttempt:p=>{throw p}}),c=e.map((p,m)=>u.call(async()=>{try{return await this.invoke(p,i[m])}catch(y){if(r!=null&&r.returnExceptions)return y;throw y}}));return Promise.all(c)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=jt(t),i=new kc({generator:this._streamIterator(e,r),config:r});return await i.setup,Ta.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=jt(e):t=jt({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const i=jt(r),o=await vi(i),u=await(o==null?void 0:o.handleChainStart(this.toJSON(),on(t,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let c;try{const f=e.call(this,t,i,u);c=await $o(f,r==null?void 0:r.signal)}catch(f){throw await(u==null?void 0:u.handleChainError(f)),f}return await(u==null?void 0:u.handleChainEnd(on(c,"output"))),c}async _batchWithConfig(e,t,r,i){var p;const o=this._getOptionsList(r??{},t.length),u=await Promise.all(o.map(vi)),c=await Promise.all(u.map(async(m,y)=>{const b=await(m==null?void 0:m.handleChainStart(this.toJSON(),on(t[y],"input"),o[y].runId,o[y].runType,void 0,void 0,o[y].runName??this.getName()));return delete o[y].runId,b}));let f;try{const m=e.call(this,t,o,c,i);f=await $o(m,(p=o==null?void 0:o[0])==null?void 0:p.signal)}catch(m){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(on(f,"output")))),f}_concatOutputChunks(e,t){return Ny(e,t)}async*_transformStreamWithConfig(e,t,r){let i,o=!0,u,c=!0;const f=jt(r),p=await vi(f),m=this;async function*y(){for await(const _ of e){if(o)if(i===void 0)i=_;else try{i=m._concatOutputChunks(i,_)}catch{i=void 0,o=!1}yield _}}let b;try{const _=await u8(t.bind(this),y(),async()=>p==null?void 0:p.handleChainStart(this.toJSON(),{input:""},f.runId,f.runType,void 0,void 0,f.runName??this.getName()),r==null?void 0:r.signal,f);delete f.runId,b=_.setup;const S=b==null?void 0:b.handlers.find(d8);let C=_.output;S!==void 0&&b!==void 0&&(C=S.tapOutputIterable(b.runId,C));const T=b==null?void 0:b.handlers.find(l8);T!==void 0&&b!==void 0&&(C=T.tapOutputIterable(b.runId,C));for await(const R of C)if(yield R,c)if(u===void 0)u=R;else try{u=this._concatOutputChunks(u,R)}catch{u=void 0,c=!1}}catch(_){throw await(b==null?void 0:b.handleChainError(_,void 0,void 0,void 0,{inputs:on(i,"input")})),_}await(b==null?void 0:b.handleChainEnd(u??{},void 0,void 0,void 0,{inputs:on(i,"input")}))}getGraph(e){const t=new Dy,r=t.addNode({name:`${this.getName()}Input`,schema:Uk()}),i=t.addNode(this),o=t.addNode({name:`${this.getName()}Output`,schema:Uk()});return t.addEdge(r,i),t.addEdge(i,o),t}pipe(e){return new yi({first:this,last:ku(e)})}pick(e){return this.pipe(new oK(e))}assign(e){return this.pipe(new tI(new Nc({steps:e})))}async*transform(e,t){let r;for await(const i of e)r===void 0?r=i:r=this._concatOutputChunks(r,i);yield*this._streamIterator(r,jt(t))}async*streamLog(e,t,r){const i=new yN({...r,autoClose:!1,_schemaFormat:"original"}),o=jt(t);yield*this._streamLog(e,i,o)}async*_streamLog(e,t,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[t];else if(Array.isArray(i))r.callbacks=i.concat([t]);else{const f=i.copy();f.addHandler(t,!0),r.callbacks=f}const o=this.stream(e,r);async function u(){try{const f=await o;for await(const p of f){const m=new go({ops:[{op:"add",path:"/streamed_output/-",value:p}]});await t.writer.write(m)}}finally{await t.writer.close()}}const c=u();try{for await(const f of t)yield f}finally{await c}}streamEvents(e,t,r){let i;if(t.version==="v1")i=this._streamEventsV1(e,t,r);else if(t.version==="v2")i=this._streamEventsV2(e,t,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?nK(i):Ta.fromAsyncGenerator(i)}async*_streamEventsV2(e,t,r){var S;const i=new f8({...r,autoClose:!1}),o=jt(t),u=o.runId??qn();o.runId=u;const c=o.callbacks;if(c===void 0)o.callbacks=[i];else if(Array.isArray(c))o.callbacks=c.concat(i);else{const C=c.copy();C.addHandler(i,!0),o.callbacks=C}const f=new AbortController,p=this;async function m(){let C,T=null;try{t!=null&&t.signal?"any"in AbortSignal?C=AbortSignal.any([f.signal,t.signal]):(C=t.signal,T=()=>{f.abort()},t.signal.addEventListener("abort",T,{once:!0})):C=f.signal;const R=await p.stream(e,{...o,signal:C}),A=i.tapOutputIterable(u,R);for await(const O of A)if(f.signal.aborted)break}finally{await i.finish(),C&&T&&C.removeEventListener("abort",T)}}const y=m();let b=!1,_;try{for await(const C of i){if(!b){C.data.input=e,b=!0,_=C.run_id,yield C;continue}C.run_id===_&&C.event.endsWith("_end")&&(S=C.data)!=null&&S.input&&delete C.data.input,yield C}}finally{f.abort(),await y}}async*_streamEventsV1(e,t,r){let i,o=!1;const u=jt(t),c=u.tags??[],f=u.metadata??{},p=u.runName??this.getName(),m=new yN({...r,autoClose:!1,_schemaFormat:"streaming_events"}),y=new m8({...r}),b=this._streamLog(e,m,u);for await(const S of b){if(i?i=i.concat(S):i=yh.fromRunLogPatch(S),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const A={...i.state},O={run_id:A.id,event:`on_${A.type}_start`,name:p,tags:c,metadata:f,data:{input:e}};y.includeEvent(O,A.type)&&(yield O)}const C=S.ops.filter(A=>A.path.startsWith("/logs/")).map(A=>A.path.split("/")[2]),T=[...new Set(C)];for(const A of T){let O,P={};const j=i.state.logs[A];if(j.end_time===void 0?j.streamed_output.length>0?O="stream":O="start":O="end",O==="start")j.inputs!==void 0&&(P.input=j.inputs);else if(O==="end")j.inputs!==void 0&&(P.input=j.inputs),P.output=j.final_output;else if(O==="stream"){const q=j.streamed_output.length;if(q!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${q} instead. Encountered in: "${j.name}"`);P={chunk:j.streamed_output[0]},j.streamed_output=[]}yield{event:`on_${j.type}_${O}`,name:j.name,run_id:j.id,tags:j.tags,metadata:j.metadata,data:P}}const{state:R}=i;if(R.streamed_output.length>0){const A=R.streamed_output.length;if(A!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${A} instead. Encountered in: "${R.name}"`);const O={chunk:R.streamed_output[0]};R.streamed_output=[];const P={event:`on_${R.type}_stream`,run_id:R.id,tags:c,metadata:f,name:p,data:O};y.includeEvent(P,R.type)&&(yield P)}}const _=i==null?void 0:i.state;if(_!==void 0){const S={event:`on_${_.type}_end`,name:p,run_id:_.id,tags:c,metadata:f,data:{output:_.final_output}};y.includeEvent(S,_.type)&&(yield S)}}static isRunnable(e){return VE(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new Nu({bound:this,config:{},configFactories:[i=>({callbacks:[new F1({config:i,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return uK(this,e)}}class Nu extends Sr{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=DS(this.config,...e);return DS(t,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new eI({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(jt(t),this.kwargs))}async batch(e,t,r){const i=Array.isArray(t)?await Promise.all(t.map(async o=>this._mergeConfig(jt(o),this.kwargs))):await this._mergeConfig(jt(t),this.kwargs);return this.bound.batch(e,i,r)}_concatOutputChunks(e,t){return this.bound._concatOutputChunks(e,t)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(jt(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(jt(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(jt(t),this.kwargs))}streamEvents(e,t,r){const i=this,o=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(jt(t),i.kwargs),version:t.version},r)};return Ta.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&Sr.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new Nu({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new F1({config:i,onStart:e,onEnd:t,onError:r})]})]})}}class ty extends Sr{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new ty({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,r){return this.bound.batch(e,Xr(t,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new ty({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}class eI extends Nu{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const i=e>1?`retry:attempt:${e}`:void 0;return Xr(t,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,t,r){return Gg(i=>super.invoke(e,this._patchConfigForRetry(i,t,r)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,i){const o={};try{await Gg(async u=>{const c=e.map((b,_)=>_).filter(b=>o[b.toString()]===void 0||o[b.toString()]instanceof Error),f=c.map(b=>e[b]),p=c.map(b=>this._patchConfigForRetry(u,t==null?void 0:t[b],r==null?void 0:r[b])),m=await super.batch(f,p,{...i,returnExceptions:!0});let y;for(let b=0;b<m.length;b+=1){const _=m[b],S=c[b];_ instanceof Error&&y===void 0&&(y=_,y.input=f[b]),o[S.toString()]=_}if(y)throw y;return m},{onFailedAttempt:u=>this.onFailedAttempt(u,u.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(u){if((i==null?void 0:i.returnExceptions)!==!0)throw u}return Object.keys(o).sort((u,c)=>parseInt(u,10)-parseInt(c,10)).map(u=>o[parseInt(u,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}class yi extends Sr{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){var f;const r=jt(t),i=await vi(r),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),on(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let u=e,c;try{const p=[this.first,...this.middle];for(let m=0;m<p.length;m+=1){const b=p[m].invoke(u,Xr(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`)}));u=await $o(b,t==null?void 0:t.signal)}if((f=t==null?void 0:t.signal)!=null&&f.aborted)throw new Error("Aborted");c=await this.last.invoke(u,Xr(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(p){throw await(o==null?void 0:o.handleChainError(p)),p}return await(o==null?void 0:o.handleChainEnd(on(c,"output"))),c}async batch(e,t,r){var f;const i=this._getOptionsList(t??{},e.length),o=await Promise.all(i.map(vi)),u=await Promise.all(o.map(async(p,m)=>{const y=await(p==null?void 0:p.handleChainStart(this.toJSON(),on(e[m],"input"),i[m].runId,void 0,void 0,void 0,i[m].runName));return delete i[m].runId,y}));let c=e;try{for(let p=0;p<this.steps.length;p+=1){const y=this.steps[p].batch(c,u.map((b,_)=>{const S=b==null?void 0:b.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`);return Xr(i[_],{callbacks:S})}),r);c=await $o(y,(f=i[0])==null?void 0:f.signal)}}catch(p){throw await Promise.all(u.map(m=>m==null?void 0:m.handleChainError(p))),p}return await Promise.all(u.map(p=>p==null?void 0:p.handleChainEnd(on(c,"output")))),c}_concatOutputChunks(e,t){return this.last._concatOutputChunks(e,t)}async*_streamIterator(e,t){var y;const r=await vi(t),{runId:i,...o}=t??{},u=await(r==null?void 0:r.handleChainStart(this.toJSON(),on(e,"input"),i,void 0,void 0,void 0,o==null?void 0:o.runName)),c=[this.first,...this.middle,this.last];let f=!0,p;async function*m(){yield e}try{let b=c[0].transform(m(),Xr(o,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let _=1;_<c.length;_+=1)b=await c[_].transform(b,Xr(o,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${_+1}`)}));for await(const _ of b)if((y=t==null?void 0:t.signal)==null||y.throwIfAborted(),yield _,f)if(p===void 0)p=_;else try{p=this._concatOutputChunks(p,_)}catch{p=void 0,f=!1}}catch(b){throw await(u==null?void 0:u.handleChainError(b)),b}await(u==null?void 0:u.handleChainEnd(on(p,"output")))}getGraph(e){const t=new Dy;let r=null;return this.steps.forEach((i,o)=>{const u=i.getGraph(e);o!==0&&u.trimFirstNode(),o!==this.steps.length-1&&u.trimLastNode(),t.extend(u);const c=u.firstNode();if(!c)throw new Error(`Runnable ${i} has no first node`);r&&t.addEdge(r,c),r=u.lastNode()}),t}pipe(e){return yi.isRunnableSequence(e)?new yi({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new yi({first:this.first,middle:[...this.middle,this.last],last:ku(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Sr.isRunnable(e)}static from([e,...t],r){let i={};return typeof r=="string"?i.name=r:r!==void 0&&(i=r),new yi({...i,first:ku(e),middle:t.slice(0,-1).map(ku),last:ku(t[t.length-1])})}}class Nc extends Sr{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=ku(r)}static from(e){return new Nc({steps:e})}async invoke(e,t){const r=jt(t),i=await vi(r),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const u={};try{const c=Object.entries(this.steps).map(async([f,p])=>{u[f]=await p.invoke(e,Xr(r,{callbacks:o==null?void 0:o.getChild(`map:key:${f}`)}))});await $o(Promise.all(c),t==null?void 0:t.signal)}catch(c){throw await(o==null?void 0:o.handleChainError(c)),c}return await(o==null?void 0:o.handleChainEnd(u)),u}async*_transform(e,t,r){const i={...this.steps},o=M1(e,Object.keys(i).length),u=new Map(Object.entries(i).map(([c,f],p)=>{const m=f.transform(o[p],Xr(r,{callbacks:t==null?void 0:t.getChild(`map:key:${c}`)}));return[c,m.next().then(y=>({key:c,gen:m,result:y}))]}));for(;u.size;){const c=Promise.race(u.values()),{key:f,result:p,gen:m}=await $o(c,r==null?void 0:r.signal);u.delete(f),p.done||(yield{[f]:p.value},u.set(f,m.next().then(y=>({key:f,gen:m,result:y}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=jt(t),o=new kc({generator:this.transform(r(),i),config:i});return await o.setup,Ta.fromAsyncGenerator(o)}}class GE extends Sr{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!$E(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[r]=this._getOptionsList(t??{},1),i=await vi(r),o=this.func(Xr(r,{callbacks:i}),e);return $o(o,r==null?void 0:r.signal)}async*_streamIterator(e,t){var o,u;const[r]=this._getOptionsList(t??{},1),i=await this.invoke(e,t);if(FS(i)){for await(const c of i)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield c;return}if(aK(i)){for(;;){(u=r==null?void 0:r.signal)==null||u.throwIfAborted();const c=i.next();if(c.done)break;yield c.value}return}yield i}static from(e){return new GE({func:e})}}function iK(n){if($E(n))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class Pc extends Sr{static lc_name(){return"RunnableLambda"}constructor(e){if($E(e.func))return GE.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),iK(e.func),this.func=e.func}static from(e){return new Pc({func:e})}async _invoke(e,t,r){return new Promise((i,o)=>{const u=Xr(t,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((t==null?void 0:t.recursionLimit)??I0)-1});Po.runWithConfig(gc(u),async()=>{var c,f;try{let p=await this.func(e,{...u});if(p&&Sr.isRunnable(p)){if((t==null?void 0:t.recursionLimit)===0)throw new Error("Recursion limit reached.");p=await p.invoke(e,{...u,recursionLimit:(u.recursionLimit??I0)-1})}else if(FS(p)){let m;for await(const y of BS(u,p))if((c=t==null?void 0:t.signal)==null||c.throwIfAborted(),m===void 0)m=y;else try{m=this._concatOutputChunks(m,y)}catch{m=y}p=m}else if(xN(p)){let m;for(const y of TN(u,p))if((f=t==null?void 0:t.signal)==null||f.throwIfAborted(),m===void 0)m=y;else try{m=this._concatOutputChunks(m,y)}catch{m=y}p=m}i(p)}catch(p){o(p)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,r){var c,f;let i;for await(const p of e)if(i===void 0)i=p;else try{i=this._concatOutputChunks(i,p)}catch{i=p}const o=Xr(r,{callbacks:t==null?void 0:t.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??I0)-1}),u=await new Promise((p,m)=>{Po.runWithConfig(gc(o),async()=>{try{const y=await this.func(i,{...o,config:o});p(y)}catch(y){m(y)}})});if(u&&Sr.isRunnable(u)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const p=await u.stream(i,o);for await(const m of p)yield m}else if(FS(u))for await(const p of BS(o,u))(c=r==null?void 0:r.signal)==null||c.throwIfAborted(),yield p;else if(xN(u))for(const p of TN(o,u))(f=r==null?void 0:r.signal)==null||f.throwIfAborted(),yield p;else yield u}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=jt(t),o=new kc({generator:this.transform(r(),i),config:i});return await o.setup,Ta.fromAsyncGenerator(o)}}class sK extends Sr{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=jt(t),i=await vi(r),{runId:o,...u}=r,c=await(i==null?void 0:i.handleChainStart(this.toJSON(),on(e,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName)),f=Xr(u,{callbacks:c==null?void 0:c.getChild()});return await Po.runWithConfig(f,async()=>{var y;let m;for(const b of this.runnables()){(y=r==null?void 0:r.signal)==null||y.throwIfAborted();try{const _=await b.invoke(e,f);return await(c==null?void 0:c.handleChainEnd(on(_,"output"))),_}catch(_){m===void 0&&(m=_)}}throw m===void 0?new Error("No error stored at end of fallback."):(await(c==null?void 0:c.handleChainError(m)),m)})}async*_streamIterator(e,t){var y;const r=jt(t),i=await vi(r),{runId:o,...u}=r,c=await(i==null?void 0:i.handleChainStart(this.toJSON(),on(e,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName));let f,p;for(const b of this.runnables()){(y=r==null?void 0:r.signal)==null||y.throwIfAborted();const _=Xr(u,{callbacks:c==null?void 0:c.getChild()});try{const S=await b.stream(e,_);p=BS(_,S);break}catch(S){f===void 0&&(f=S)}}if(p===void 0){const b=f??new Error("No error stored at end of fallback.");throw await(c==null?void 0:c.handleChainError(b)),b}let m;try{for await(const b of p){yield b;try{m=m===void 0?m:this._concatOutputChunks(m,b)}catch{m=void 0}}}catch(b){throw await(c==null?void 0:c.handleChainError(b)),b}await(c==null?void 0:c.handleChainEnd(on(m,"output")))}async batch(e,t,r){var f;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(t??{},e.length),o=await Promise.all(i.map(p=>vi(p))),u=await Promise.all(o.map(async(p,m)=>{const y=await(p==null?void 0:p.handleChainStart(this.toJSON(),on(e[m],"input"),i[m].runId,void 0,void 0,void 0,i[m].runName));return delete i[m].runId,y}));let c;for(const p of this.runnables()){(f=i[0].signal)==null||f.throwIfAborted();try{const m=await p.batch(e,u.map((y,b)=>Xr(i[b],{callbacks:y==null?void 0:y.getChild()})),r);return await Promise.all(u.map((y,b)=>y==null?void 0:y.handleChainEnd(on(m[b],"output")))),m}catch(m){c===void 0&&(c=m)}}throw c?(await Promise.all(u.map(p=>p==null?void 0:p.handleChainError(c))),c):new Error("No error stored at end of fallbacks.")}}function ku(n){if(typeof n=="function")return new Pc({func:n});if(Sr.isRunnable(n))return n;if(!Array.isArray(n)&&typeof n=="object"){const e={};for(const[t,r]of Object.entries(n))e[t]=ku(r);return new Nc({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class tI extends Sr{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Nc&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const i=this.mapper.getStepsKeys(),[o,u]=M1(e),c=this.mapper.transform(u,Xr(r,{callbacks:t==null?void 0:t.getChild()})),f=c.next();for await(const p of o){if(typeof p!="object"||Array.isArray(p))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof p}`);const m=Object.fromEntries(Object.entries(p).filter(([y])=>!i.includes(y)));Object.keys(m).length>0&&(yield m)}yield(await f).value;for await(const p of c)yield p}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=jt(t),o=new kc({generator:this.transform(r(),i),config:i});return await o.setup,Ta.fromAsyncGenerator(o)}}class oK extends Sr{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const r=await this._pick(t);r!==void 0&&(yield r)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=jt(t),o=new kc({generator:this.transform(r(),i),config:i});return await o.setup,Ta.fromAsyncGenerator(o)}}class CN extends Nu{constructor(e){const t=yi.from([Pc.from(async r=>{let i;if(Kf(r))try{i=await HE(this.schema,r.args)}catch{throw new dh("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function uK(n,e){const t=e.name??n.getName(),r=e.description??qE(e.schema);return XJ(e.schema)?new CN({name:t,description:r,schema:PE({input:NE()}).transform(i=>i.input),bound:n}):new CN({name:t,description:r,schema:e.schema,bound:n})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var lK=typeof window=="object"?window:{},gt="0123456789abcdef".split(""),cK=[-2147483648,8388608,32768,128],ci=[24,16,8,0],an=[];function bi(n){n?(an[0]=an[16]=an[1]=an[2]=an[3]=an[4]=an[5]=an[6]=an[7]=an[8]=an[9]=an[10]=an[11]=an[12]=an[13]=an[14]=an[15]=0,this.blocks=an):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}bi.prototype.update=function(n){if(!this.finalized){var e=typeof n!="string";e&&n.constructor===lK.ArrayBuffer&&(n=new Uint8Array(n));for(var t,r=0,i,o=n.length||0,u=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),e)for(i=this.start;r<o&&i<64;++r)u[i>>2]|=n[r]<<ci[i++&3];else for(i=this.start;r<o&&i<64;++r)t=n.charCodeAt(r),t<128?u[i>>2]|=t<<ci[i++&3]:t<2048?(u[i>>2]|=(192|t>>6)<<ci[i++&3],u[i>>2]|=(128|t&63)<<ci[i++&3]):t<55296||t>=57344?(u[i>>2]|=(224|t>>12)<<ci[i++&3],u[i>>2]|=(128|t>>6&63)<<ci[i++&3],u[i>>2]|=(128|t&63)<<ci[i++&3]):(t=65536+((t&1023)<<10|n.charCodeAt(++r)&1023),u[i>>2]|=(240|t>>18)<<ci[i++&3],u[i>>2]|=(128|t>>12&63)<<ci[i++&3],u[i>>2]|=(128|t>>6&63)<<ci[i++&3],u[i>>2]|=(128|t&63)<<ci[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=u[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};bi.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=cK[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};bi.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4,o,u,c,f=this.blocks;for(u=16;u<80;++u)c=f[u-3]^f[u-8]^f[u-14]^f[u-16],f[u]=c<<1|c>>>31;for(u=0;u<20;u+=5)o=e&t|~e&r,c=n<<5|n>>>27,i=c+o+i+1518500249+f[u]<<0,e=e<<30|e>>>2,o=n&e|~n&t,c=i<<5|i>>>27,r=c+o+r+1518500249+f[u+1]<<0,n=n<<30|n>>>2,o=i&n|~i&e,c=r<<5|r>>>27,t=c+o+t+1518500249+f[u+2]<<0,i=i<<30|i>>>2,o=r&i|~r&n,c=t<<5|t>>>27,e=c+o+e+1518500249+f[u+3]<<0,r=r<<30|r>>>2,o=t&r|~t&i,c=e<<5|e>>>27,n=c+o+n+1518500249+f[u+4]<<0,t=t<<30|t>>>2;for(;u<40;u+=5)o=e^t^r,c=n<<5|n>>>27,i=c+o+i+1859775393+f[u]<<0,e=e<<30|e>>>2,o=n^e^t,c=i<<5|i>>>27,r=c+o+r+1859775393+f[u+1]<<0,n=n<<30|n>>>2,o=i^n^e,c=r<<5|r>>>27,t=c+o+t+1859775393+f[u+2]<<0,i=i<<30|i>>>2,o=r^i^n,c=t<<5|t>>>27,e=c+o+e+1859775393+f[u+3]<<0,r=r<<30|r>>>2,o=t^r^i,c=e<<5|e>>>27,n=c+o+n+1859775393+f[u+4]<<0,t=t<<30|t>>>2;for(;u<60;u+=5)o=e&t|e&r|t&r,c=n<<5|n>>>27,i=c+o+i-1894007588+f[u]<<0,e=e<<30|e>>>2,o=n&e|n&t|e&t,c=i<<5|i>>>27,r=c+o+r-1894007588+f[u+1]<<0,n=n<<30|n>>>2,o=i&n|i&e|n&e,c=r<<5|r>>>27,t=c+o+t-1894007588+f[u+2]<<0,i=i<<30|i>>>2,o=r&i|r&n|i&n,c=t<<5|t>>>27,e=c+o+e-1894007588+f[u+3]<<0,r=r<<30|r>>>2,o=t&r|t&i|r&i,c=e<<5|e>>>27,n=c+o+n-1894007588+f[u+4]<<0,t=t<<30|t>>>2;for(;u<80;u+=5)o=e^t^r,c=n<<5|n>>>27,i=c+o+i-899497514+f[u]<<0,e=e<<30|e>>>2,o=n^e^t,c=i<<5|i>>>27,r=c+o+r-899497514+f[u+1]<<0,n=n<<30|n>>>2,o=i^n^e,c=r<<5|r>>>27,t=c+o+t-899497514+f[u+2]<<0,i=i<<30|i>>>2,o=r^i^n,c=t<<5|t>>>27,e=c+o+e-899497514+f[u+3]<<0,r=r<<30|r>>>2,o=t^r^i,c=e<<5|e>>>27,n=c+o+n-899497514+f[u+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};bi.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4;return gt[n>>28&15]+gt[n>>24&15]+gt[n>>20&15]+gt[n>>16&15]+gt[n>>12&15]+gt[n>>8&15]+gt[n>>4&15]+gt[n&15]+gt[e>>28&15]+gt[e>>24&15]+gt[e>>20&15]+gt[e>>16&15]+gt[e>>12&15]+gt[e>>8&15]+gt[e>>4&15]+gt[e&15]+gt[t>>28&15]+gt[t>>24&15]+gt[t>>20&15]+gt[t>>16&15]+gt[t>>12&15]+gt[t>>8&15]+gt[t>>4&15]+gt[t&15]+gt[r>>28&15]+gt[r>>24&15]+gt[r>>20&15]+gt[r>>16&15]+gt[r>>12&15]+gt[r>>8&15]+gt[r>>4&15]+gt[r&15]+gt[i>>28&15]+gt[i>>24&15]+gt[i>>20&15]+gt[i>>16&15]+gt[i>>12&15]+gt[i>>8&15]+gt[i>>4&15]+gt[i&15]};bi.prototype.toString=bi.prototype.hex;bi.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};bi.prototype.array=bi.prototype.digest;bi.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),n};let RN=!1;const dK=n=>(RN||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","└> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),RN=!0),new bi(!0).update(n).hex()),fK=(...n)=>dK(n.join("_"));class hK{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:fK})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}const pK=new Map;class WE extends hK{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}async update(e,t,r){this.cache.set(this.keyEncoder(e,t),r)}static global(){return new WE(pK)}}class JE extends Ns{}class rI extends JE{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Oc(this.value)]}}class nI extends JE{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return i1(this.messages)}toChatMessages(){return this.messages}}class mK extends JE{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new Oc({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}var Ly={};Ly.byteLength=vK;Ly.toByteArray=_K;Ly.fromByteArray=EK;var qi=[],Ua=[],gK=typeof Uint8Array<"u"?Uint8Array:Array,M0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xl=0,yK=M0.length;Xl<yK;++Xl)qi[Xl]=M0[Xl],Ua[M0.charCodeAt(Xl)]=Xl;Ua[45]=62;Ua[95]=63;function aI(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function vK(n){var e=aI(n),t=e[0],r=e[1];return(t+r)*3/4-r}function bK(n,e,t){return(e+t)*3/4-t}function _K(n){var e,t=aI(n),r=t[0],i=t[1],o=new gK(bK(n,r,i)),u=0,c=i>0?r-4:r,f;for(f=0;f<c;f+=4)e=Ua[n.charCodeAt(f)]<<18|Ua[n.charCodeAt(f+1)]<<12|Ua[n.charCodeAt(f+2)]<<6|Ua[n.charCodeAt(f+3)],o[u++]=e>>16&255,o[u++]=e>>8&255,o[u++]=e&255;return i===2&&(e=Ua[n.charCodeAt(f)]<<2|Ua[n.charCodeAt(f+1)]>>4,o[u++]=e&255),i===1&&(e=Ua[n.charCodeAt(f)]<<10|Ua[n.charCodeAt(f+1)]<<4|Ua[n.charCodeAt(f+2)]>>2,o[u++]=e>>8&255,o[u++]=e&255),o}function wK(n){return qi[n>>18&63]+qi[n>>12&63]+qi[n>>6&63]+qi[n&63]}function SK(n,e,t){for(var r,i=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),i.push(wK(r));return i.join("")}function EK(n){for(var e,t=n.length,r=t%3,i=[],o=16383,u=0,c=t-r;u<c;u+=o)i.push(SK(n,u,u+o>c?c:u+o));return r===1?(e=n[t-1],i.push(qi[e>>2]+qi[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(qi[e>>10]+qi[e>>4&63]+qi[e<<2&63]+"=")),i.join("")}var xK=Object.defineProperty,TK=(n,e,t)=>e in n?xK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,CK=(n,e,t)=>(TK(n,e+"",t),t);function RK(n,e){let t=Array.from({length:n.length},(r,i)=>({start:i,end:i+1}));for(;t.length>1;){let r=null;for(let i=0;i<t.length-1;i++){const o=n.slice(t[i].start,t[i+1].end),u=e.get(o.join(","));u!=null&&(r==null||u<r[0])&&(r=[u,i])}if(r!=null){const i=r[1];t[i]={start:t[i].start,end:t[i+1].end},t.splice(i+1,1)}else break}return t}function OK(n,e){return n.length===1?[e.get(n.join(","))]:RK(n,e).map(t=>e.get(n.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function AK(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var zS=class{constructor(n,e){ta(this,"specialTokens");ta(this,"inverseSpecialTokens");ta(this,"patStr");ta(this,"textEncoder",new TextEncoder);ta(this,"textDecoder",new TextDecoder("utf-8"));ta(this,"rankMap",new Map);ta(this,"textMap",new Map);this.patStr=n.pat_str;const t=n.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[o,u,...c]=i.split(" "),f=Number.parseInt(u,10);return c.forEach((p,m)=>r[p]=f+m),r},{});for(const[r,i]of Object.entries(t)){const o=Ly.toByteArray(r);this.rankMap.set(o.join(","),i),this.textMap.set(i,o)}this.specialTokens={...n.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,o])=>(r[o]=this.textEncoder.encode(i),r),{})}encode(n,e=[],t="all"){const r=new RegExp(this.patStr,"ug"),i=zS.specialTokenRegex(Object.keys(this.specialTokens)),o=[],u=new Set(e==="all"?Object.keys(this.specialTokens):e),c=new Set(t==="all"?Object.keys(this.specialTokens).filter(p=>!u.has(p)):t);if(c.size>0){const p=zS.specialTokenRegex([...c]),m=n.match(p);if(m!=null)throw new Error(`The text contains a special token that is not allowed: ${m[0]}`)}let f=0;for(;;){let p=null,m=f;for(;i.lastIndex=m,p=i.exec(n),!(p==null||u.has(p[0]));)m=p.index+1;const y=(p==null?void 0:p.index)??n.length;for(const _ of n.substring(f,y).matchAll(r)){const S=this.textEncoder.encode(_[0]),C=this.rankMap.get(S.join(","));if(C!=null){o.push(C);continue}o.push(...OK(S,this.rankMap))}if(p==null)break;let b=this.specialTokens[p[0]];o.push(b),f=p.index+p[0].length}return o}decode(n){const e=[];let t=0;for(let o=0;o<n.length;++o){const u=n[o],c=this.textMap.get(u)??this.inverseSpecialTokens[u];c!=null&&(e.push(c),t+=c.length)}const r=new Uint8Array(t);let i=0;for(const o of e)r.set(o,i),i+=o.length;return this.textDecoder.decode(r)}},iI=zS;CK(iI,"specialTokenRegex",n=>new RegExp(n.map(e=>AK(e)).join("|"),"g"));function kK(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const pg={},NK=new zE({});async function PK(n){return n in pg||(pg[n]=NK.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(e=>e.json()).then(e=>new iI(e)).catch(e=>{throw delete pg[n],e})),await pg[n]}async function $K(n){return PK(kK(n))}const IK=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n;function sI(n){return typeof n!="object"||!n?!1:!!("type"in n&&n.type==="function"&&"function"in n&&typeof n.function=="object"&&n.function&&"name"in n.function&&"parameters"in n.function)}const jK=()=>!1;class KE extends Sr{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??jK(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class DK extends KE{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){const{cache:i,...o}=r;super({callbacks:e??t,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=WE.global():this.cache=void 0,this.caller=new zE(r??{})}async getNumTokens(e){let t;typeof e=="string"?t=e:t=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let r=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=await $K("modelName"in this?IK(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{r=this._encoding.encode(t).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new rI(e):Array.isArray(e)?new nI(e.map(_o)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([u,c])=>c!==void 0).map(([u,c])=>`${u}:${JSON.stringify(c)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class vh extends Sr{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const r=jt(t);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,t){const r=jt(t);let i,o=!0;for await(const u of this._transformStreamWithConfig(e,c=>c,r))if(yield u,o)if(i===void 0)i=u;else try{i=Ny(i,u)}catch{i=void 0,o=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new tI(new Nc({steps:e}))}}function F0(n){const e=[];for(const t of n){let r=t;if(Array.isArray(t.content))for(let i=0;i<t.content.length;i++){const o=t.content[i];(e5(o)||t5(o))&&r===t&&(r=new t.constructor({...r,content:[...t.content.slice(0,i),r5(o),...t.content.slice(i+1)]}))}e.push(r)}return e}class yo extends DK{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(e,t){const r=yo._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t==null?void 0:t.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){var r;if(this._streamResponseChunks===yo.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{const o=yo._convertInputToPromptValue(e).toChatMessages(),[u,c]=this._separateRunnableConfigFromCallOptionsCompat(t),f={...u.metadata,...this.getLsParams(c)},p=await _n.configure(u.callbacks,this.callbacks,u.tags,this.tags,f,this.metadata,{verbose:this.verbose}),m={options:c,invocation_params:this==null?void 0:this.invocationParams(c),batch_size:1},y=await(p==null?void 0:p.handleChatModelStart(this.toJSON(),[F0(o)],u.runId,void 0,m,void 0,void 0,u.runName));let b,_;try{for await(const S of this._streamResponseChunks(o,c,y==null?void 0:y[0])){if(S.message.id==null){const C=(r=y==null?void 0:y.at(0))==null?void 0:r.runId;C!=null&&S.message._updateId(`run-${C}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata},yield S.message,b?b=b.concat(S):b=S,Sk(S.message)&&S.message.usage_metadata!==void 0&&(_={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}}catch(S){throw await Promise.all((y??[]).map(C=>C==null?void 0:C.handleLLMError(S))),S}await Promise.all((y??[]).map(S=>S==null?void 0:S.handleLLMEnd({generations:[[b]],llmOutput:_})))}}getLsParams(e){const t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,r,i){var y,b;const o=e.map(_=>_.map(_o));let u;if(i!==void 0&&i.length===o.length)u=i;else{const _={...r.metadata,...this.getLsParams(t)},S=await _n.configure(r.callbacks,this.callbacks,r.tags,this.tags,_,this.metadata,{verbose:this.verbose}),C={options:t,invocation_params:this==null?void 0:this.invocationParams(t),batch_size:1};u=await(S==null?void 0:S.handleChatModelStart(this.toJSON(),o.map(F0),r.runId,void 0,C,void 0,void 0,r.runName))}const c=[],f=[];if(!!(u!=null&&u[0].handlers.find(V6))&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==yo.prototype._streamResponseChunks)try{const _=await this._streamResponseChunks(o[0],t,u==null?void 0:u[0]);let S,C;for await(const T of _){if(T.message.id==null){const R=(y=u==null?void 0:u.at(0))==null?void 0:y.runId;R!=null&&T.message._updateId(`run-${R}`)}S===void 0?S=T:S=Ny(S,T),Sk(T.message)&&T.message.usage_metadata!==void 0&&(C={tokenUsage:{promptTokens:T.message.usage_metadata.input_tokens,completionTokens:T.message.usage_metadata.output_tokens,totalTokens:T.message.usage_metadata.total_tokens}})}if(S===void 0)throw new Error("Received empty response from chat model call.");c.push([S]),await(u==null?void 0:u[0].handleLLMEnd({generations:c,llmOutput:C}))}catch(_){throw await(u==null?void 0:u[0].handleLLMError(_)),_}else{const _=await Promise.allSettled(o.map((S,C)=>this._generate(S,{...t,promptIndex:C},u==null?void 0:u[C])));await Promise.all(_.map(async(S,C)=>{var T,R,A;if(S.status==="fulfilled"){const O=S.value;for(const P of O.generations){if(P.message.id==null){const j=(T=u==null?void 0:u.at(0))==null?void 0:T.runId;j!=null&&P.message._updateId(`run-${j}`)}P.message.response_metadata={...P.generationInfo,...P.message.response_metadata}}return O.generations.length===1&&(O.generations[0].message.response_metadata={...O.llmOutput,...O.generations[0].message.response_metadata}),c[C]=O.generations,f[C]=O.llmOutput,(R=u==null?void 0:u[C])==null?void 0:R.handleLLMEnd({generations:[O.generations],llmOutput:O.llmOutput})}else return await((A=u==null?void 0:u[C])==null?void 0:A.handleLLMError(S.reason)),Promise.reject(S.reason)}))}const m={generations:c,llmOutput:f.length?(b=this._combineLLMOutput)==null?void 0:b.call(this,...f):void 0};return Object.defineProperty(m,LS,{value:u?{runIds:u==null?void 0:u.map(_=>_.runId)}:void 0,configurable:!0}),m}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:i,handledOptions:o}){const u=e.map(T=>T.map(_o)),c={...o.metadata,...this.getLsParams(i)},f=await _n.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),p={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},m=await(f==null?void 0:f.handleChatModelStart(this.toJSON(),u.map(F0),o.runId,void 0,p,void 0,void 0,o.runName)),y=[],_=(await Promise.allSettled(u.map(async(T,R)=>{const A=yo._convertInputToPromptValue(T).toString(),O=await t.lookup(A,r);return O==null&&y.push(R),O}))).map((T,R)=>({result:T,runManager:m==null?void 0:m[R]})).filter(({result:T})=>T.status==="fulfilled"&&T.value!=null||T.status==="rejected"),S=[];await Promise.all(_.map(async({result:T,runManager:R},A)=>{if(T.status==="fulfilled"){const O=T.value;return S[A]=O.map(P=>("message"in P&&Rc(P.message)&&kh(P.message)&&(P.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),P.generationInfo={...P.generationInfo,tokenUsage:{}},P)),O.length&&await(R==null?void 0:R.handleLLMNewToken(O[0].text)),R==null?void 0:R.handleLLMEnd({generations:[O]},void 0,void 0,void 0,{cached:!0})}else return await(R==null?void 0:R.handleLLMError(T.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(T.reason)}));const C={generations:S,missingPromptIndices:y,startedRunManagers:m};return Object.defineProperty(C,LS,{value:m?{runIds:m==null?void 0:m.map(T=>T.runId)}:void 0,configurable:!0}),C}async generate(e,t,r){let i;Array.isArray(t)?i={stop:t}:i=t;const o=e.map(S=>S.map(_o)),[u,c]=this._separateRunnableConfigFromCallOptionsCompat(i);if(u.callbacks=u.callbacks??r,!this.cache)return this._generateUncached(o,c,u);const{cache:f}=this,p=this._getSerializedCacheKeyParametersForCall(c),{generations:m,missingPromptIndices:y,startedRunManagers:b}=await this._generateCached({messages:o,cache:f,llmStringKey:p,parsedOptions:c,handledOptions:u});let _={};if(y.length>0){const S=await this._generateUncached(y.map(C=>o[C]),c,u,b!==void 0?y.map(C=>b==null?void 0:b[C]):void 0);await Promise.all(S.generations.map(async(C,T)=>{const R=y[T];m[R]=C;const A=yo._convertInputToPromptValue(o[R]).toString();return f.update(A,p,C)})),_=S.llmOutput??{}}return{generations:m,llmOutput:_}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const i=e.map(o=>o.toChatMessages());return this.generate(i,t,r)}async call(e,t,r){return(await this.generate([e.map(_o)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const i=e.toChatMessages();return this.call(i,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const i=new Oc(e),o=await this.call([i],t,r);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content}withStructuredOutput(e,t){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t!=null&&t.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,i=t==null?void 0:t.name,o=qE(r)??"A function available to call.",u=t==null?void 0:t.method,c=t==null?void 0:t.includeRaw;if(u==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let f=i??"extract",p;Eo(r)?p=[{type:"function",function:{name:f,description:o,parameters:xo(r)}}]:("name"in r&&(f=r.name),p=[{type:"function",function:{name:f,description:o,parameters:r}}]);const m=this.bindTools(p),y=Pc.from(C=>{if(!C.tool_calls||C.tool_calls.length===0)throw new Error("No tool calls found in the response.");const T=C.tool_calls.find(R=>R.name===f);if(!T)throw new Error(`No tool call found with name ${f}.`);return T.args});if(!c)return m.pipe(y).withConfig({runName:"StructuredOutput"});const b=vh.assign({parsed:(C,T)=>y.invoke(C.raw,T)}),_=vh.assign({parsed:()=>null}),S=b.withFallbacks({fallbacks:[_]});return yi.from([{raw:m},S]).withConfig({runName:"StructuredOutputRunnable"})}}class LK extends Sr{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(r,i)=>this.parseResult([{text:r}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(r,i)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"})}}class ZE extends LK{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class vc extends Error{constructor(e,t,r,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=i,i&&(r===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");xy(this,"OUTPUT_PARSING_FAILURE")}}class UK extends ZE{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class oI extends UK{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let t,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let o;if(o5(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Du({message:i,text:i.content})}else if(Rc(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Du({message:p5(i),text:i.content})}else o=new yc({text:i});r===void 0?r=o:r=r.concat(o);const u=await this.parsePartialResult([r]);u!=null&&!lc(u,t)&&(this.diff?yield this._diff(t,u):yield u,t=u)}}getFormatInstructions(){return""}}class ON extends ZE{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=PE(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,NE().describe(i)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(xo(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await HE(this.schema,JSON.parse(r))}catch(t){throw new vc(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class AN extends oI{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,t){return this.diff?super._concatOutputChunks(e,t):t}_diff(e,t){if(t)return e?mG(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return mk(e[0].text)}async parse(e){return mk(e,JSON.parse)}getFormatInstructions(){return""}}function YE(n,e){if(n.function===void 0)return;let t;if(e!=null&&e.partial)try{t=OE(n.function.arguments??"{}")}catch{return}else try{t=JSON.parse(n.function.arguments)}catch(i){throw new vc([`Function "${n.function.name}" arguments:`,"",n.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:n.function.name,args:t,type:"tool_call"};return e!=null&&e.returnId&&(r.id=n.id),r}function MK(n){if(n.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:n.id,type:"function",function:{name:n.name,arguments:JSON.stringify(n.args)}}}function VS(n,e){var t,r;return{name:(t=n.function)==null?void 0:t.name,args:(r=n.function)==null?void 0:r.arguments,id:n.id,error:e,type:"invalid_tool_call"}}class FK extends oI{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){var u;const r=e[0].message;let i;if(kh(r)&&((u=r.tool_calls)!=null&&u.length)?i=r.tool_calls.map(c=>{const{id:f,...p}=c;return this.returnId?{id:f,...p}:p}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(f=>YE(f,{returnId:this.returnId,partial:t}))),!i)return[];const o=[];for(const c of i)if(c!==void 0){const f={type:c.name,args:c.args,id:c.id};o.push(f)}return o}}class kN extends FK{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const t=await YJ(this.zodSchema,e);if(t.success)return t.data;throw new vc(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=t.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(o=>o.type===this.keyName);let i=r;if(r.length)return this.returnId||(i=r.map(o=>o.args)),this.returnSingle?i[0]:i}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(u=>u.type===this.keyName);let i=r;return r.length?(this.returnId||(i=r.map(u=>u.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(u=>this._validateResult(u)))):void 0}}function BK(n){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:o,azureADTokenProvider:u,azureOpenAIEndpoint:c}=n;if((r||u)&&i&&e)return`${i}/${e}`;if((r||u)&&c&&e)return`${c}/openai/deployments/${e}`;if(r||u){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return o}function zK(n){return n!==void 0&&Array.isArray(n.lc_namespace)}function VK(n){return n!==void 0&&Sr.isRunnable(n)&&"lc_name"in n.constructor&&typeof n.constructor.lc_name=="function"&&n.constructor.lc_name()==="RunnableToolLike"}function HK(n){return!!n&&typeof n=="object"&&"name"in n&&"schema"in n&&(Eo(n.schema)||n.schema!=null&&typeof n.schema=="object"&&"type"in n.schema&&typeof n.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(n.schema.type))}function uI(n){return HK(n)||VK(n)||zK(n)}function lI(n,e){return{name:n.name,description:n.description,parameters:xo(n.schema)}}function qK(n,e){let t;return uI(n)?t={type:"function",function:lI(n)}:t=n,t}const GK=Symbol("Let zodToJsonSchema decide on which parser to use"),NN={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},WK=n=>typeof n=="string"?{...NN,basePath:["#"],definitions:{},name:n}:{...NN,basePath:["#"],definitions:{},...n},HS=n=>"_def"in n?n._def:n;function JK(n){if(!n)return!0;for(const e in n)return!1;return!0}const KK=n=>{const e=WK(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[HS(i),{def:HS(i),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function cI(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function Gt(n,e,t,r,i){n[e]=t,cI(n,e,r,i)}function ZK(){return{}}function YK(n,e){var r,i;const t={type:"array"};return((i=(r=n.type)==null?void 0:r._def)==null?void 0:i.typeName)!==Z.ZodAny&&(t.items=Lt(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&Gt(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&Gt(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(Gt(t,"minItems",n.exactLength.value,n.exactLength.message,e),Gt(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function XK(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Gt(t,"minimum",r.value,r.message,e):Gt(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),Gt(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Gt(t,"maximum",r.value,r.message,e):Gt(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),Gt(t,"maximum",r.value,r.message,e));break;case"multipleOf":Gt(t,"multipleOf",r.value,r.message,e);break}return t}function QK(){return{type:"boolean"}}function eZ(n,e){return Lt(n.type._def,e)}const tZ=(n,e)=>Lt(n.innerType._def,e);function dI(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,o)=>dI(n,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rZ(n,e)}}const rZ=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":Gt(t,"minimum",r.value,r.message,e);break;case"max":Gt(t,"maximum",r.value,r.message,e);break}return t};function nZ(n,e){return{...Lt(n.innerType._def,e),default:n.defaultValue()}}function aZ(n,e,t){return e.effectStrategy==="input"?Lt(n.schema._def,e,t):{}}function iZ(n){return{type:"string",enum:[...n.values]}}const sZ=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function oZ(n,e){const t=[Lt(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Lt(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return t.forEach(o=>{if(sZ(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let u=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...f}=o;u=f}else r=void 0;i.push(u)}}),i.length?{allOf:i,...r}:void 0}function uZ(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let B0;const Eu={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(B0===void 0&&(B0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),B0),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function fI(n,e){const t={type:"string"};function r(i){return e.patternStrategy==="escape"?lZ(i):i}if(n.checks)for(const i of n.checks)switch(i.kind){case"min":Gt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e);break;case"max":Gt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":di(t,"email",i.message,e);break;case"format:idn-email":di(t,"idn-email",i.message,e);break;case"pattern:zod":fi(t,Eu.email,i.message,e);break}break;case"url":di(t,"uri",i.message,e);break;case"uuid":di(t,"uuid",i.message,e);break;case"regex":fi(t,i.regex,i.message,e);break;case"cuid":fi(t,Eu.cuid,i.message,e);break;case"cuid2":fi(t,Eu.cuid2,i.message,e);break;case"startsWith":fi(t,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":fi(t,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":di(t,"date-time",i.message,e);break;case"date":di(t,"date",i.message,e);break;case"time":di(t,"time",i.message,e);break;case"duration":di(t,"duration",i.message,e);break;case"length":Gt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e),Gt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"includes":{fi(t,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&di(t,"ipv4",i.message,e),i.version!=="v4"&&di(t,"ipv6",i.message,e);break}case"emoji":fi(t,Eu.emoji,i.message,e);break;case"ulid":{fi(t,Eu.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{di(t,"binary",i.message,e);break}case"contentEncoding:base64":{Gt(t,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{fi(t,Eu.base64,i.message,e);break}}break}case"nanoid":fi(t,Eu.nanoid,i.message,e)}return t}const lZ=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),di=(n,e,t,r)=>{var i;n.format||(i=n.anyOf)!=null&&i.some(o=>o.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):Gt(n,"format",e,t,r)},fi=(n,e,t,r)=>{var i;n.pattern||(i=n.allOf)!=null&&i.some(o=>o.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:PN(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):Gt(n,"pattern",PN(e,r),t,r)},PN=(n,e)=>{var p;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},i=r.i?t.source.toLowerCase():t.source;let o="",u=!1,c=!1,f=!1;for(let m=0;m<i.length;m++){if(u){o+=i[m],u=!1;continue}if(r.i){if(c){if(i[m].match(/[a-z]/)){f?(o+=i[m],o+=`${i[m-2]}-${i[m]}`.toUpperCase(),f=!1):i[m+1]==="-"&&((p=i[m+2])!=null&&p.match(/[a-z]/))?(o+=i[m],f=!0):o+=`${i[m]}${i[m].toUpperCase()}`;continue}}else if(i[m].match(/[a-z]/)){o+=`[${i[m]}${i[m].toUpperCase()}]`;continue}}if(r.m){if(i[m]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(i[m]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&i[m]==="."){o+=c?`${i[m]}\r
`:`[${i[m]}\r
]`;continue}o+=i[m],i[m]==="\\"?u=!0:c&&i[m]==="]"?c=!1:!c&&i[m]==="["&&(c=!0)}try{const m=new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o};function hI(n,e){var r,i,o,u;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===Z.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((c,f)=>({...c,[f]:Lt(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:Lt(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((i=n.keyType)==null?void 0:i._def.typeName)===Z.ZodString&&((o=n.keyType._def.checks)!=null&&o.length)){const c=Object.entries(fI(n.keyType._def,e)).reduce((f,[p,m])=>p==="type"?f:{...f,[p]:m},{});return{...t,propertyNames:c}}else if(((u=n.keyType)==null?void 0:u._def.typeName)===Z.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function cZ(n,e){if(e.mapStrategy==="record")return hI(n,e);const t=Lt(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Lt(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function dZ(n){const e=n.values,r=Object.keys(n.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function fZ(){return{not:{}}}function hZ(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ry={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function pZ(n,e){if(e.target==="openApi3")return $N(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in ry&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((i,o)=>{const u=ry[o._def.typeName];return u&&!i.includes(u)?[...i,u]:i},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((i,o)=>{const u=typeof o._def.value;switch(u){case"string":case"number":case"boolean":return[...i,u];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===t.length){const i=r.filter((o,u,c)=>c.indexOf(o)===u);return{type:i.length>1?i:i[0],enum:t.reduce((o,u)=>o.includes(u._def.value)?o:[...o,u._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return $N(n,e)}const $N=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,i)=>Lt(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function mZ(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:ry[n.innerType._def.typeName],nullable:!0}:{type:[ry[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Lt(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=Lt(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function gZ(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",cI(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Gt(t,"minimum",r.value,r.message,e):Gt(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),Gt(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Gt(t,"maximum",r.value,r.message,e):Gt(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),Gt(t,"maximum",r.value,r.message,e));break;case"multipleOf":Gt(t,"multipleOf",r.value,r.message,e);break}return t}function yZ(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":Lt(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":Lt(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function vZ(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[i,o])=>{var f;if(o===void 0||o._def===void 0)return r;const u=[...e.currentPath,"properties",i],c=Lt(o._def,{...e,currentPath:u,propertyPath:u});if(c===void 0)return r;if(e.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&typeof((f=o._def)==null?void 0:f.defaultValue)>"u")throw new Error(`Zod field at \`${u.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[i]:c},required:o.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,i]}},{properties:{},required:[]}),additionalProperties:yZ(n,e)};return t.required.length||delete t.required,t}const bZ=(n,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return Lt(n.innerType._def,{...e,currentPath:e.currentPath});const t=Lt(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},_Z=(n,e)=>{if(e.pipeStrategy==="input")return Lt(n.in._def,e);if(e.pipeStrategy==="output")return Lt(n.out._def,e);const t=Lt(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Lt(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(i=>i!==void 0)}};function wZ(n,e){return Lt(n.type._def,e)}function SZ(n,e){const r={type:"array",uniqueItems:!0,items:Lt(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&Gt(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&Gt(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function EZ(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Lt(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Lt(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Lt(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function xZ(){return{not:{}}}function TZ(){return{}}const CZ=(n,e)=>Lt(n.innerType._def,e);function Lt(n,e,t=!1){var u;const r=e.seen.get(n);if(e.override){const c=(u=e.override)==null?void 0:u.call(e,n,e,r,t);if(c!==GK)return c}if(r&&!t){const c=RZ(r,e);if(c!==void 0)return"$ref"in c&&e.seenRefs.add(c.$ref),c}const i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);const o=AZ(n,n.typeName,e,t);return o&&kZ(n,e,o),i.jsonSchema=o,o}const RZ=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:OZ(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,i)=>e.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},OZ=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},AZ=(n,e,t,r)=>{switch(e){case Z.ZodString:return fI(n,t);case Z.ZodNumber:return gZ(n,t);case Z.ZodObject:return vZ(n,t);case Z.ZodBigInt:return XK(n,t);case Z.ZodBoolean:return QK();case Z.ZodDate:return dI(n,t);case Z.ZodUndefined:return xZ();case Z.ZodNull:return hZ(t);case Z.ZodArray:return YK(n,t);case Z.ZodUnion:case Z.ZodDiscriminatedUnion:return pZ(n,t);case Z.ZodIntersection:return oZ(n,t);case Z.ZodTuple:return EZ(n,t);case Z.ZodRecord:return hI(n,t);case Z.ZodLiteral:return uZ(n,t);case Z.ZodEnum:return iZ(n);case Z.ZodNativeEnum:return dZ(n);case Z.ZodNullable:return mZ(n,t);case Z.ZodOptional:return bZ(n,t);case Z.ZodMap:return cZ(n,t);case Z.ZodSet:return SZ(n,t);case Z.ZodLazy:return Lt(n.getter()._def,t);case Z.ZodPromise:return wZ(n,t);case Z.ZodNaN:case Z.ZodNever:return fZ();case Z.ZodEffects:return aZ(n,t,r);case Z.ZodAny:return ZK();case Z.ZodUnknown:return TZ();case Z.ZodDefault:return nZ(n,t);case Z.ZodBranded:return eZ(n,t);case Z.ZodReadonly:return CZ(n,t);case Z.ZodCatch:return tZ(n,t);case Z.ZodPipeline:return _Z(n,t);case Z.ZodFunction:case Z.ZodVoid:case Z.ZodSymbol:return;default:return(i=>{})()}},kZ=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),NZ=(n,e)=>{const t=KK(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=Lt(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);const u=(()=>{if(JK(t.definitions))return;const f={},p=new Set;for(let m=0;m<500;m++){const y=Object.entries(t.definitions).filter(([b])=>!p.has(b));if(y.length===0)break;for(const[b,_]of y)f[b]=Lt(HS(_),{...t,currentPath:[...t.basePath,t.definitionPath,b]},!0)??{},p.add(b)}return f})(),c=r===void 0?u?{...i,[t.definitionPath]:u}:i:t.nameStrategy==="duplicate-ref"?{...i,...u||t.seenRefs.size?{[t.definitionPath]:{...u,...t.seenRefs.size?{[r]:i}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...u,[r]:i}};return t.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),c};function PZ(n,e){return NZ(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function $Z(n,e,t){return bq({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:PZ(n,{name:e})}},r=>n.parse(JSON.parse(r)))}function mg(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function pI(n){let e;return n.constructor.name===hy.name?(e=new Error(n.message),e.name="TimeoutError"):n.constructor.name===Ea.name?(e=new Error(n.message),e.name="AbortError"):n.status===400&&n.message.includes("tool_calls")?e=mg(n,"INVALID_TOOL_RESULTS"):n.status===401?e=mg(n,"MODEL_AUTHENTICATION"):n.status===429?e=mg(n,"MODEL_RATE_LIMIT"):n.status===404?e=mg(n,"MODEL_NOT_FOUND"):e=n,e}function mI(n){if(n)return n==="any"||n==="required"?"required":n==="auto"?"auto":n==="none"?"none":typeof n=="string"?{type:"function",function:{name:n}}:n}function IZ(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function jZ(n,e,t){if(Qi(n))return $Z(n,e,t);if(Si(n))return IZ({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:US(n,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})}},r=>V1(n,JSON.parse(r)));throw new Error("Unsupported schema response format")}function DZ(n){return n.anyOf!==void 0&&Array.isArray(n.anyOf)}function LZ(n){const e=["namespace functions {",""];for(const t of n)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(gI(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function gI(n,e){var r;const t=[];for(const[i,o]of Object.entries(n.properties??{}))o.description&&e<2&&t.push(`// ${o.description}`),(r=n.required)!=null&&r.includes(i)?t.push(`${i}: ${ny(o,e)},`):t.push(`${i}?: ${ny(o,e)},`);return t.map(i=>" ".repeat(e)+i).join(`
`)}function ny(n,e){if(DZ(n))return n.anyOf.map(t=>ny(t,e)).join(" | ");switch(n.type){case"string":return n.enum?n.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",gI(n,e+2),"}"].join(`
`);case"array":return n.items?`${ny(n.items,e)}[]`:"any[]";default:return""}}function UZ(n,e){let t;return uI(n)?t=qK(n):t=n,t.type==="function"&&(e==null?void 0:e.strict)!==void 0&&(t.function.strict=e.strict),t}function XE(n){return"type"in n&&n.type!=="function"&&n.type!=="custom"}function MZ(n){return n!=null&&typeof n=="object"&&"type"in n&&n.type!=="function"}function FZ(n){return typeof n=="object"&&n!==null&&"metadata"in n&&typeof n.metadata=="object"&&n.metadata!==null&&"customTool"in n.metadata&&typeof n.metadata.customTool=="object"&&n.metadata.customTool!==null}function yI(n){return"type"in n&&n.type==="custom"&&"custom"in n&&typeof n.custom=="object"&&n.custom!==null}function BZ(n){if(n.type==="custom_tool_call")return{...n,type:"tool_call",call_id:n.id,id:n.call_id,name:n.name,isCustomTool:!0,args:{input:n.input}}}function zZ(n){return n.type==="tool_call"&&"isCustomTool"in n&&n.isCustomTool===!0}function VZ(n){const e=()=>{if(n.custom.format){if(n.custom.format.type==="grammar")return{type:"grammar",definition:n.custom.format.grammar.definition,syntax:n.custom.format.grammar.syntax};if(n.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:n.custom.name,description:n.custom.description,format:e()}}function HZ(n){const e=()=>{if(n.format){if(n.format.type==="grammar")return{type:"grammar",grammar:{definition:n.format.definition,syntax:n.format.syntax}};if(n.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:n.name,description:n.description,format:e()}}}const Ql="__openai_function_call_ids__";function Uy(n){return n?!!(/^o\d/.test(n??"")||n.startsWith("gpt-5")&&!n.startsWith("gpt-5-chat")):!1}function qZ(n){return n!==void 0&&typeof n.schema=="object"}function GZ(n){return n.role!=="system"&&n.role!=="developer"&&n.role!=="assistant"&&n.role!=="user"&&n.role!=="function"&&n.role!=="tool"&&console.warn(`Unknown message role: ${n.role}`),n.role}function QE(n){const e=n._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!Uu.isInstance(n))throw new Error("Invalid generic chat message");return GZ(n)}default:throw new Error(`Unknown message type: ${e}`)}}const vI={providerName:"ChatOpenAI",fromStandardTextBlock(n){return{type:"text",text:n.text}},fromStandardImageBlock(n){var e,t;if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url,...(e=n.metadata)!=null&&e.detail?{detail:n.metadata.detail}:{}}};if(n.source_type==="base64")return{type:"image_url",image_url:{url:`data:${n.mime_type??""};base64,${n.data}`,...(t=n.metadata)!=null&&t.detail?{detail:n.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(n){if(n.source_type==="url"){const e=wk({dataUrl:n.url});if(!e)throw new Error(`URL audio blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);const t=e.mime_type||n.mime_type||"";let r;try{r=_k(t)}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(n.source_type==="base64"){let e;try{e=_k(n.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:n.data}}}throw new Error(`Audio content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(n){var e,t,r,i,o,u,c,f,p,m;if(n.source_type==="url"){if(!wk({dataUrl:n.url}))throw new Error(`URL file blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:n.url,...(e=n.metadata)!=null&&e.filename||(t=n.metadata)!=null&&t.name?{filename:((r=n.metadata)==null?void 0:r.filename)||((i=n.metadata)==null?void 0:i.name)}:{}}}}if(n.source_type==="base64")return{type:"file",file:{file_data:`data:${n.mime_type??""};base64,${n.data}`,...(o=n.metadata)!=null&&o.filename||(u=n.metadata)!=null&&u.name||(c=n.metadata)!=null&&c.title?{filename:((f=n.metadata)==null?void 0:f.filename)||((p=n.metadata)==null?void 0:p.name)||((m=n.metadata)==null?void 0:m.title)}:{}}};if(n.source_type==="id")return{type:"file",file:{file_id:n.id}};throw new Error(`File content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)}};function IN(n,e){return n.flatMap(t=>{var u;let r=QE(t);r==="system"&&Uy(e)&&(r="developer");const i=typeof t.content=="string"?t.content:t.content.map(c=>$u(c)?a1(c,vI):c),o={role:r,content:i};if(t.name!=null&&(o.name=t.name),t.additional_kwargs.function_call!=null&&(o.function_call=t.additional_kwargs.function_call,o.content=""),kh(t)&&((u=t.tool_calls)!=null&&u.length)?(o.tool_calls=t.tool_calls.map(MK),o.content=""):(t.additional_kwargs.tool_calls!=null&&(o.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(o.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){const c={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[o,c]}return o})}class ex extends yo{_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","reasoningEffort","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model",reasoningEffort:"reasoning_effort"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","reasoningEffort","promptCacheKey","verbosity"]}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}constructor(e){var t,r;super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"promptCacheKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbosity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.apiKey=(e==null?void 0:e.apiKey)??((t=e==null?void 0:e.configuration)==null?void 0:t.apiKey)??Ro("OPENAI_API_KEY"),this.organization=((r=e==null?void 0:e.configuration)==null?void 0:r.organization)??Ro("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=(e==null?void 0:e.reasoning)??(e==null?void 0:e.reasoningEffort)?{effort:e.reasoningEffort}:void 0,this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.disableStreaming=(e==null?void 0:e.disableStreaming)??this.disableStreaming,this.promptCacheKey=(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,this.verbosity=(e==null?void 0:e.verbosity)??this.verbosity,this.streaming=(e==null?void 0:e.streaming)??!1,this.streaming===!1&&(this.disableStreaming=!0),this.disableStreaming&&(this.streaming=!1),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}_getReasoningParams(e){if(!Uy(this.model))return;let t;return this.reasoning!==void 0&&(t={...t,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(t={...t,...e.reasoning}),t}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&Eo(e.json_schema.schema)?jZ(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},i=BK(r),o={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};o.baseURL||delete o.baseURL,this.client=new Ct(o)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,t){return FZ(e)?HZ(e.metadata.customTool):sI(e)?(t==null?void 0:t.strict)!==void 0?{...e,function:{...e.function,strict:t.strict}}:e:UZ(e,t)}bindTools(e,t){let r;return(t==null?void 0:t.strict)!==void 0?r=t.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(i=>XE(i)?i:this._convertChatOpenAIToolToCompletionsTool(i,{strict:r})),...t})}async stream(e,t){return super.stream(e,this._combineCallOptions(t))}async invoke(e,t){return super.invoke(e,this._combineCallOptions(t))}_combineLLMOutput(...e){return e.reduce((t,r)=>(r&&r.tokenUsage&&(t.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let t=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);const o=await Promise.all(e.map(async u=>{var b,_,S,C,T,R;const c=await this.getNumTokens(u.content),f=await this.getNumTokens(QE(u)),p=u.name!==void 0?i+await this.getNumTokens(u.name):0;let m=c+r+f+p;const y=u;if(y._getType()==="function"&&(m-=2),(b=y.additional_kwargs)!=null&&b.function_call&&(m+=3),(_=y==null?void 0:y.additional_kwargs.function_call)!=null&&_.name&&(m+=await this.getNumTokens((S=y.additional_kwargs.function_call)==null?void 0:S.name)),(C=y.additional_kwargs.function_call)!=null&&C.arguments)try{m+=await this.getNumTokens(JSON.stringify(JSON.parse((T=y.additional_kwargs.function_call)==null?void 0:T.arguments)))}catch(A){console.error("Error parsing function arguments",A,JSON.stringify(y.additional_kwargs.function_call)),m+=await this.getNumTokens((R=y.additional_kwargs.function_call)==null?void 0:R.arguments)}return t+=m,m}));return t+=3,{totalCount:t,countPerMessage:o}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var i;return(i=r.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,i)=>r+i,0)}async _getEstimatedTokenCountFromPrompt(e,t,r){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&r!=="auto"){const o=LZ(t);i+=await this.getNumTokens(o),i+=9}return t&&e.find(o=>o._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=await this.getNumTokens(r.name)+4),i}_getStructuredOutputMethod(e){const t={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((t==null?void 0:t.method)===void 0)return"jsonSchema"}else t.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return t.method}withStructuredOutput(e,t){let r,i,o,u;qZ(e)?(r=e.schema,i=e.name,o=e.method,u=e.includeRaw):(r=e,i=t==null?void 0:t.name,o=t==null?void 0:t.method,u=t==null?void 0:t.includeRaw);let c,f;if((t==null?void 0:t.strict)!==void 0&&o==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(o=this._getStructuredOutputMethod({...t,method:o}),o==="jsonMode"){Eo(r)?f=ON.fromZodSchema(r):f=new AN;const b=xo(r);c=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:i??"extract",...b}}})}else if(o==="jsonSchema"){const b={name:i??"extract",description:qE(r),schema:r,strict:t==null?void 0:t.strict},_=xo(b.schema);if(c=this.withConfig({response_format:{type:"json_schema",json_schema:b},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:b.name,description:b.description,..._}}}),Eo(r)){const S=ON.fromZodSchema(r);f=Pc.from(C=>"parsed"in C.additional_kwargs?C.additional_kwargs.parsed:S)}else f=new AN}else{let b=i??"extract";if(Eo(r)){const _=xo(r);c=this.withConfig({tools:[{type:"function",function:{name:b,description:_.description,parameters:_}}],tool_choice:{type:"function",function:{name:b}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:b,..._}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),f=new kN({returnSingle:!0,keyName:b,zodSchema:r})}else{let _;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(_=r,b=r.name):(b=r.title??b,_={name:b,description:r.description??"",parameters:r});const S=xo(r);c=this.withConfig({tools:[{type:"function",function:_}],tool_choice:{type:"function",function:{name:b}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:b,...S}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),f=new kN({returnSingle:!0,keyName:b})}}if(!u)return c.pipe(f);const p=vh.assign({parsed:(b,_)=>f.invoke(b.raw,_)}),m=vh.assign({parsed:()=>null}),y=p.withFallbacks({fallbacks:[m]});return yi.from([{raw:c},y])}}class WZ extends ex{invocationParams(e){var o;let t;(e==null?void 0:e.strict)!==void 0?t=e.strict:this.supportsStrictToolCalling!==void 0&&(t=this.supportsStrictToolCalling);const r={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(o=e==null?void 0:e.tools)!=null&&o.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:MZ(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{const u=mI(e==null?void 0:e.tool_choice);if(typeof u=="object"&&"type"in u){if(u.type==="function")return{type:"function",name:u.function.name};if(u.type==="allowed_tools")return{type:"allowed_tools",mode:u.allowed_tools.mode,tools:u.allowed_tools.tools};if(u.type==="custom")return{type:"custom",name:u.custom.name}}})(),text:(()=>{if(e!=null&&e.text)return e.text;const u=this._getResponseFormat(e==null?void 0:e.response_format);return(u==null?void 0:u.type)==="json_schema"?u.json_schema.schema!=null?{format:{type:"json_schema",schema:u.json_schema.schema,description:u.json_schema.description,name:u.json_schema.name,strict:u.json_schema.strict},verbosity:e==null?void 0:e.verbosity}:void 0:{format:u,verbosity:e==null?void 0:e.verbosity}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},i=this._getReasoningParams(e);return i!==void 0&&(r.reasoning=i),r}async _generate(e,t){var i;const r=this.invocationParams(t);if(r.stream){const o=this._streamResponseChunks(e,t);let u;for await(const c of o)c.message.response_metadata={...c.generationInfo,...c.message.response_metadata},u=(u==null?void 0:u.concat(c))??c;return{generations:u?[u]:[],llmOutput:{estimatedTokenUsage:(i=u==null?void 0:u.message)==null?void 0:i.usage_metadata}}}else{const o=this._convertMessagesToResponsesParams(e),u=await this.completionWithRetry({input:o,...r,stream:!1},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});return{generations:[{text:u.output_text,message:this._convertResponsesMessageToBaseMessage(u)}],llmOutput:{id:u.id,estimatedTokenUsage:u.usage?{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens,totalTokens:u.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(e,t,r){const i=await this.completionWithRetry({...this.invocationParams(t),input:this._convertMessagesToResponsesParams(e),stream:!0},t);for await(const o of i){const u=this._convertResponsesDeltaToBaseMessageChunk(o);u!=null&&(yield u,await(r==null?void 0:r.handleLLMNewToken(u.text||"",{prompt:t.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:u})))}}async completionWithRetry(e,t){return this.caller.call(async()=>{var i,o;const r=this._getClientOptions(t);try{return((o=(i=e.text)==null?void 0:i.format)==null?void 0:o.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,r):await this.client.responses.create(e,r)}catch(u){throw pI(u)}})}_convertResponsesMessageToBaseMessage(e){if(e.error){const f=new Error(e.error.message);throw f.name=e.error.code,f}let t;const r=[],i=[],o=[],u={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},c={};for(const f of e.output)if(f.type==="message")t=f.id,r.push(...f.content.flatMap(p=>p.type==="output_text"?("parsed"in p&&p.parsed!=null&&(c.parsed=p.parsed),{type:"text",text:p.text,annotations:p.annotations}):p.type==="refusal"?(c.refusal=p.refusal,[]):p));else if(f.type==="function_call"){const p={function:{name:f.name,arguments:f.arguments},id:f.call_id};try{i.push(YE(p,{returnId:!0}))}catch(m){let y;typeof m=="object"&&m!=null&&"message"in m&&typeof m.message=="string"&&(y=m.message),o.push(VS(p,y))}c[Ql]??(c[Ql]={}),f.id&&(c[Ql][f.call_id]=f.id)}else if(f.type==="reasoning")c.reasoning=f;else if(f.type==="custom_tool_call"){const p=BZ(f);p?i.push(p):o.push(VS(f,"Malformed custom tool call"))}else c.tool_outputs??(c.tool_outputs=[]),c.tool_outputs.push(f);return new Iu({id:t,content:r,tool_calls:i,invalid_tool_calls:o,usage_metadata:e.usage,additional_kwargs:c,response_metadata:u})}_convertResponsesDeltaToBaseMessageChunk(e){var p,m;const t=[];let r={},i;const o=[],u={},c={};let f;if(e.type==="response.output_text.delta")t.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text.annotation.added")t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")f=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")o.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),c[Ql]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))c.tool_outputs=[e.item];else if(e.type==="response.created")u.id=e.response.id,u.model_name=e.response.model,u.model=e.response.model;else if(e.type==="response.completed"){const y=this._convertResponsesMessageToBaseMessage(e.response);i=e.response.usage,((m=(p=e.response.text)==null?void 0:p.format)==null?void 0:m.type)==="json_schema"&&(c.parsed??(c.parsed=JSON.parse(y.text)));for(const[b,_]of Object.entries(e.response))b!=="id"&&(u[b]=_)}else if(e.type==="response.function_call_arguments.delta")o.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")r={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")c.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){const y=e.item.summary?e.item.summary.map((b,_)=>({...b,index:_})):void 0;c.reasoning={id:e.item.id,type:e.item.type,...y?{summary:y}:{}}}else if(e.type==="response.reasoning_summary_part.added")c.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else if(e.type==="response.reasoning_summary_text.delta")c.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new Du({text:t.map(y=>y.text).join(""),message:new Ao({id:f,content:t,tool_call_chunks:o,usage_metadata:i,additional_kwargs:c,response_metadata:u}),generationInfo:r})}_convertMessagesToResponsesParams(e){return e.flatMap(t=>{var o,u,c,f;const r=t.additional_kwargs;let i=QE(t);if(i==="system"&&Uy(this.model)&&(i="developer"),i==="function")throw new Error("Function messages are not supported in Responses API");if(i==="tool"){const p=t;return(r==null?void 0:r.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof p.content=="string")return{type:"computer_screenshot",image_url:p.content};if(Array.isArray(p.content)){const y=p.content.find(_=>_.type==="computer_screenshot");if(y)return y;const b=p.content.find(_=>_.type==="image_url");if(b)return{type:"computer_screenshot",image_url:typeof b.image_url=="string"?b.image_url:b.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:p.tool_call_id}:(o=p.metadata)!=null&&o.customTool?{type:"custom_tool_call_output",call_id:p.tool_call_id,output:p.content}:{type:"function_call_output",call_id:p.tool_call_id,id:(u=p.id)!=null&&u.startsWith("fc_")?p.id:void 0,output:typeof p.content!="string"?JSON.stringify(p.content):p.content}}if(i==="assistant"){if(!this.zdrEnabled&&t.response_metadata.output!=null&&Array.isArray(t.response_metadata.output)&&t.response_metadata.output.length>0&&t.response_metadata.output.every(S=>"type"in S))return t.response_metadata.output;const p=[];if(r!=null&&r.reasoning&&!this.zdrEnabled){const S=this._convertReasoningSummary(r.reasoning);p.push(S)}let{content:m}=t;r!=null&&r.refusal&&(typeof m=="string"&&(m=[{type:"output_text",text:m,annotations:[]}]),m=[...m,{type:"refusal",refusal:r.refusal}]),(typeof m=="string"||m.length>0)&&p.push({type:"message",role:"assistant",...t.id&&!this.zdrEnabled&&t.id.startsWith("msg_")?{id:t.id}:{},content:typeof m=="string"?m:m.flatMap(S=>S.type==="text"?{type:"output_text",text:S.text,annotations:S.annotations??[]}:S.type==="output_text"||S.type==="refusal"?S:[])});const y=r==null?void 0:r[Ql];kh(t)&&((c=t.tool_calls)!=null&&c.length)?p.push(...t.tool_calls.map(S=>zZ(S)?{type:"custom_tool_call",id:S.call_id,call_id:S.id??"",input:S.args.input,name:S.name}:{type:"function_call",name:S.name,arguments:JSON.stringify(S.args),call_id:S.id,...this.zdrEnabled?{id:y==null?void 0:y[S.id]}:{}})):r!=null&&r.tool_calls&&p.push(...r.tool_calls.map(S=>({type:"function_call",name:S.function.name,call_id:S.id,arguments:S.function.arguments,...this.zdrEnabled?{id:y==null?void 0:y[S.id]}:{}})));const b=(f=t.response_metadata.output)!=null&&f.length?t.response_metadata.output:r.tool_outputs,_=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(b!=null){const S=b,C=S==null?void 0:S.filter(T=>_.includes(T.type));C.length>0&&p.push(...C)}return p}if(i==="user"||i==="system"||i==="developer"){if(typeof t.content=="string")return{type:"message",role:i,content:t.content};const p=[],m=t.content.flatMap(y=>(y.type==="mcp_approval_response"&&p.push({type:"mcp_approval_response",approval_request_id:y.approval_request_id,approve:y.approve}),$u(y)?a1(y,vI):y.type==="text"?{type:"input_text",text:y.text}:y.type==="image_url"?{type:"input_image",image_url:typeof y.image_url=="string"?y.image_url:y.image_url.url,detail:typeof y.image_url=="string"?"auto":y.image_url.detail}:y.type==="input_text"||y.type==="input_image"||y.type==="input_file"?y:[]));return m.length>0&&p.push({type:"message",role:i,content:m}),p}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${i}`),[]})}_convertReasoningSummary(e){const t=(e.summary.length>1?e.summary.reduce((r,i)=>{const o=r.at(-1);return o.index===i.index?o.text+=i.text:r.push(i),r},[{...e.summary[0]}]):e.summary).map(r=>Object.fromEntries(Object.entries(r).filter(([i])=>i!=="index")));return{...e,summary:t}}_reduceChatOpenAITools(e,t){const r=[];for(const i of e)XE(i)?(i.type==="image_generation"&&(t!=null&&t.stream)&&(i.partial_images=1),r.push(i)):sI(i)?r.push({type:"function",name:i.function.name,parameters:i.function.parameters,description:i.function.description,strict:(t==null?void 0:t.strict)??null}):yI(i)&&r.push(VZ(i));return r}}class JZ extends ex{invocationParams(e,t){var c;let r;(e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let i={};(e==null?void 0:e.stream_options)!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t!=null&&t.streaming)&&(i={stream_options:{include_usage:!0}});const o={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(c=e==null?void 0:e.tools)!=null&&c.length?e.tools.map(f=>this._convertChatOpenAIToolToCompletionsTool(f,{strict:r})):void 0,tool_choice:mI(e==null?void 0:e.tool_choice),response_format:this._getResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...i,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs,prompt_cache_key:(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,verbosity:(e==null?void 0:e.verbosity)??this.verbosity};(e==null?void 0:e.prediction)!==void 0&&(o.prediction=e.prediction),this.service_tier!==void 0&&(o.service_tier=this.service_tier),(e==null?void 0:e.service_tier)!==void 0&&(o.service_tier=e.service_tier);const u=this._getReasoningParams(e);return u!==void 0&&u.effort!==void 0&&(o.reasoning_effort=u.effort),Uy(o.model)?o.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:o.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,o}async _generate(e,t,r){var c,f;const i={},o=this.invocationParams(t),u=IN(e,this.model);if(o.stream){const p=this._streamResponseChunks(e,t,r),m={};for await(const T of p){T.message.response_metadata={...T.generationInfo,...T.message.response_metadata};const R=((c=T.generationInfo)==null?void 0:c.completion)??0;m[R]===void 0?m[R]=T:m[R]=m[R].concat(T)}const y=Object.entries(m).sort(([T],[R])=>parseInt(T,10)-parseInt(R,10)).map(([T,R])=>R),{functions:b,function_call:_}=this.invocationParams(t),S=await this._getEstimatedTokenCountFromPrompt(e,b,_),C=await this._getNumTokensFromGenerations(y);return i.input_tokens=S,i.output_tokens=C,i.total_tokens=S+C,{generations:y,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{const p=await this.completionWithRetry({...o,stream:!1,messages:u},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options}),{completion_tokens:m,prompt_tokens:y,total_tokens:b,prompt_tokens_details:_,completion_tokens_details:S}=(p==null?void 0:p.usage)??{};m&&(i.output_tokens=(i.output_tokens??0)+m),y&&(i.input_tokens=(i.input_tokens??0)+y),b&&(i.total_tokens=(i.total_tokens??0)+b),((_==null?void 0:_.audio_tokens)!==null||(_==null?void 0:_.cached_tokens)!==null)&&(i.input_token_details={...(_==null?void 0:_.audio_tokens)!==null&&{audio:_==null?void 0:_.audio_tokens},...(_==null?void 0:_.cached_tokens)!==null&&{cache_read:_==null?void 0:_.cached_tokens}}),((S==null?void 0:S.audio_tokens)!==null||(S==null?void 0:S.reasoning_tokens)!==null)&&(i.output_token_details={...(S==null?void 0:S.audio_tokens)!==null&&{audio:S==null?void 0:S.audio_tokens},...(S==null?void 0:S.reasoning_tokens)!==null&&{reasoning:S==null?void 0:S.reasoning_tokens}});const C=[];for(const T of(p==null?void 0:p.choices)??[]){const A={text:((f=T.message)==null?void 0:f.content)??"",message:this._convertCompletionsMessageToBaseMessage(T.message??{role:"assistant"},p)};A.generationInfo={...T.finish_reason?{finish_reason:T.finish_reason}:{},...T.logprobs?{logprobs:T.logprobs}:{}},kh(A.message)&&(A.message.usage_metadata=i),A.message=new Iu(Object.fromEntries(Object.entries(A.message).filter(([O])=>!O.startsWith("lc_")))),C.push(A)}return{generations:C,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async*_streamResponseChunks(e,t,r){var p,m,y,b,_,S,C,T,R,A;const i=IN(e,this.model),o={...this.invocationParams(t,{streaming:!0}),messages:i,stream:!0};let u;const c=await this.completionWithRetry(o,t);let f;for await(const O of c){const P=(p=O==null?void 0:O.choices)==null?void 0:p[0];if(O.usage&&(f=O.usage),!P)continue;const{delta:j}=P;if(!j)continue;const q=this._convertCompletionsDeltaToBaseMessageChunk(j,O,u);u=j.role??u;const G={prompt:t.promptIndex??0,completion:P.index??0};if(typeof q.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const ie={...G};P.finish_reason!=null&&(ie.finish_reason=P.finish_reason,ie.system_fingerprint=O.system_fingerprint,ie.model_name=O.model,ie.service_tier=O.service_tier),this.logprobs&&(ie.logprobs=P.logprobs);const de=new Du({message:q,text:q.content,generationInfo:ie});yield de,await(r==null?void 0:r.handleLLMNewToken(de.text??"",G,void 0,void 0,void 0,{chunk:de}))}if(f){const O={...((m=f.prompt_tokens_details)==null?void 0:m.audio_tokens)!==null&&{audio:(y=f.prompt_tokens_details)==null?void 0:y.audio_tokens},...((b=f.prompt_tokens_details)==null?void 0:b.cached_tokens)!==null&&{cache_read:(_=f.prompt_tokens_details)==null?void 0:_.cached_tokens}},P={...((S=f.completion_tokens_details)==null?void 0:S.audio_tokens)!==null&&{audio:(C=f.completion_tokens_details)==null?void 0:C.audio_tokens},...((T=f.completion_tokens_details)==null?void 0:T.reasoning_tokens)!==null&&{reasoning:(R=f.completion_tokens_details)==null?void 0:R.reasoning_tokens}};yield new Du({message:new Ao({content:"",response_metadata:{usage:{...f}},usage_metadata:{input_tokens:f.prompt_tokens,output_tokens:f.completion_tokens,total_tokens:f.total_tokens,...Object.keys(O).length>0&&{input_token_details:O},...Object.keys(P).length>0&&{output_token_details:P}}}),text:""})}if((A=t.signal)!=null&&A.aborted)throw new Error("AbortError")}async completionWithRetry(e,t){const r=this._getClientOptions(t),i=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(async()=>{try{return i&&!e.stream?await this.client.chat.completions.parse(e,r):await this.client.chat.completions.create(e,r)}catch(o){throw pI(o)}})}_convertCompletionsMessageToBaseMessage(e,t){const r=e.tool_calls;switch(e.role){case"assistant":{const i=[],o=[];for(const f of r??[])try{i.push(YE(f,{returnId:!0}))}catch(p){o.push(VS(f,p.message))}const u={function_call:e.function_call,tool_calls:r};this.__includeRawResponse!==void 0&&(u.__raw_response=t);const c={model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};return e.audio&&(u.audio=e.audio),new Iu({content:e.content||"",tool_calls:i,invalid_tool_calls:o,additional_kwargs:u,response_metadata:c,id:t.id})}default:return new Uu(e.content||"",e.role??"unknown")}}_convertCompletionsDeltaToBaseMessageChunk(e,t,r){var f,p;const i=e.role??r,o=e.content??"";let u;e.function_call?u={function_call:e.function_call}:e.tool_calls?u={tool_calls:e.tool_calls}:u={},this.__includeRawResponse&&(u.__raw_response=t),e.audio&&(u.audio={...e.audio,index:t.choices[0].index});const c={usage:{...t.usage}};if(i==="user")return new Ey({content:o,response_metadata:c});if(i==="assistant"){const m=[];if(Array.isArray(e.tool_calls))for(const y of e.tool_calls)m.push({name:(f=y.function)==null?void 0:f.name,args:(p=y.function)==null?void 0:p.arguments,id:y.id,index:y.index,type:"tool_call_chunk"});return new Ao({content:o,tool_call_chunks:m,additional_kwargs:u,id:t.id,response_metadata:c})}else return i==="system"?new ch({content:o,response_metadata:c}):i==="developer"?new ch({content:o,response_metadata:c,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new Sy({content:o,additional_kwargs:u,name:e.name,response_metadata:c}):i==="tool"?new AE({content:o,additional_kwargs:u,tool_call_id:e.tool_call_id,response_metadata:c}):new wy({content:o,role:i,response_metadata:c})}}class tx extends ex{get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}constructor(e){super(e),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.useResponsesApi=(e==null?void 0:e.useResponsesApi)??!1,this.responses=(e==null?void 0:e.responses)??new WZ(e),this.completions=(e==null?void 0:e.completions)??new JZ(e)}_useResponsesApi(e){var o,u,c,f;const t=(o=e==null?void 0:e.tools)==null?void 0:o.some(XE),r=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((u=e==null?void 0:e.reasoning)==null?void 0:u.summary)!=null||((c=this.reasoning)==null?void 0:c.summary)!=null,i=(f=e==null?void 0:e.tools)==null?void 0:f.some(yI);return this.useResponsesApi||t||r||i}getLsParams(e){const t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(t):this.completions.getLsParams(t)}invocationParams(e){const t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(t):this.completions.invocationParams(t)}async _generate(e,t,r){return this._useResponsesApi(t)?this.responses._generate(e,t):this.completions._generate(e,t,r)}async*_streamResponseChunks(e,t,r){if(this._useResponsesApi(t)){yield*this.responses._streamResponseChunks(e,this._combineCallOptions(t),r);return}yield*this.completions._streamResponseChunks(e,this._combineCallOptions(t),r)}withConfig(e){const t=new tx(this.fields);return t.defaultOptions={...this.defaultOptions,...e},t}}class KZ extends KE{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),Object.defineProperty(this,"defaultConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verboseParsingErrors=(e==null?void 0:e.verboseParsingErrors)??this.verboseParsingErrors,this.responseFormat=(e==null?void 0:e.responseFormat)??this.responseFormat,this.defaultConfig=(e==null?void 0:e.defaultConfig)??this.defaultConfig,this.metadata=(e==null?void 0:e.metadata)??this.metadata}async invoke(e,t){let r,i=jt(DS(this.defaultConfig,t));return Kf(e)?(r=e.args,i={...i,toolCall:e}):r=e,this.call(r,i)}async call(e,t,r){const i=Kf(e)?e.args:e;let o;if(Eo(this.schema))try{o=await HE(this.schema,i)}catch(S){let C="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(C=`${C}
Details: ${S.message}`),new dh(C,JSON.stringify(e))}else{const S=gr(i,this.schema);if(!S.valid){let C="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(C=`${C}
Details: ${S.errors.map(T=>`${T.keywordLocation}: ${T.error}`).join(`
`)}`),new dh(C,JSON.stringify(e))}o=i}const u=U1(t),c=_n.configure(u.callbacks,this.callbacks,u.tags||r,this.tags,u.metadata,this.metadata,{verbose:this.verbose}),f=await(c==null?void 0:c.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),u.runId,void 0,void 0,void 0,u.runName));delete u.runId;let p;try{p=await this._call(o,f,u)}catch(S){throw await(f==null?void 0:f.handleToolError(S)),S}let m,y;if(this.responseFormat==="content_and_artifact")if(Array.isArray(p)&&p.length===2)[m,y]=p;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(p)}`);else m=p;let b;Kf(e)&&(b=e.id),!b&&d5(u)&&(b=u.toolCall.id);const _=ZZ({content:m,artifact:y,toolCallId:b,name:this.name,metadata:this.metadata});return await(f==null?void 0:f.handleToolEnd(_)),_}}class My extends KZ{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:PE({input:NE().optional()}).transform(t=>t.input)})}call(e,t){const r=typeof e=="string"||e==null?{input:e}:e;return super.call(r,t)}}function ZZ(n){const{content:e,artifact:t,toolCallId:r,metadata:i}=n;return r&&!u5(e)?typeof e=="string"||Array.isArray(e)&&e.every(o=>typeof o=="object")?new bS({status:"success",content:e,artifact:t,tool_call_id:r,name:n.name,metadata:i}):new bS({status:"success",content:YZ(e),artifact:t,tool_call_id:r,name:n.name,metadata:i}):e}function YZ(n){try{return JSON.stringify(n,null,2)??""}catch{return`${n}`}}class bI extends Ns{get returnValues(){return["output"]}get allowedTools(){}_agentType(){throw new Error("Not implemented")}returnStoppedResponse(e,t,r,i){if(e==="force")return Promise.resolve({returnValues:{output:"Agent stopped due to max iterations."},log:""});throw new Error(`Invalid stopping method: ${e}`)}async prepareForOutput(e,t){return{}}}class XZ extends bI{_agentActionType(){return"single"}}class QZ extends bI{_agentActionType(){return"multi"}}function eY(n){return!Array.isArray(n)&&(n==null?void 0:n.tool)!==void 0}function tY(n){return n.runnable!==void 0}class _I extends yi{constructor(){super(...arguments),Object.defineProperty(this,"streamRunnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"singleAction",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}static fromRunnables([e,...t],r){const i=yi.from([e,...t],r.name);return i.singleAction=r.singleAction,i.streamRunnable=r.streamRunnable,i}static isAgentRunnableSequence(e){return typeof e.singleAction=="boolean"}}class rY extends XZ{get inputKeys(){return[]}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","runnable"]}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamRunnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"defaultRunName",{enumerable:!0,configurable:!0,writable:!0,value:"RunnableAgent"}),this.runnable=e.runnable,this.defaultRunName=e.defaultRunName??this.runnable.name??this.defaultRunName,this.streamRunnable=e.streamRunnable??this.streamRunnable}async plan(e,t,r,i){const o={...t,steps:e},u=Xr(i,{callbacks:r,runName:this.defaultRunName});if(this.streamRunnable){const c=await this.runnable.stream(o,u);let f;for await(const p of c)if(f===void 0)f=p;else throw new Error(["Multiple agent actions/finishes received in streamed agent output.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join(`
`));if(f===void 0)throw new Error(["No streaming output received from underlying runnable.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join(`
`));return f}else return this.runnable.invoke(o,u)}}class jN extends QZ{get inputKeys(){return[]}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","runnable"]}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultRunName",{enumerable:!0,configurable:!0,writable:!0,value:"RunnableAgent"}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamRunnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.runnable=e.runnable,this.stop=e.stop,this.defaultRunName=e.defaultRunName??this.runnable.name??this.defaultRunName,this.streamRunnable=e.streamRunnable??this.streamRunnable}async plan(e,t,r,i){const o={...t,steps:e},u=Xr(i,{callbacks:r,runName:this.defaultRunName});let c;if(this.streamRunnable){const f=await this.runnable.stream(o,u);let p;for await(const m of f)if(p===void 0)p=m;else throw new Error(["Multiple agent actions/finishes received in streamed agent output.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join(`
`));if(p===void 0)throw new Error(["No streaming output received from underlying runnable.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join(`
`));c=p}else c=await this.runnable.invoke(o,u);return eY(c)?[c]:c}}class rx extends Sr{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},r={};for(const[o,u]of Object.entries(t))typeof u=="string"?r[o]=u:r[o]=await u();return{...r,...e}}async invoke(e,t){const r={...this.metadata,...t==null?void 0:t.metadata},i=[...this.tags??[],...(t==null?void 0:t.tags)??[]];return this._callWithConfig(o=>this.formatPromptValue(o),e,{...t,tags:i,metadata:r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await kn(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>UN);return{PromptTemplate:r}},void 0);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await kn(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>UN);return{PromptTemplate:r}},void 0);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await kn(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-BiYBbTkZ.js");return{FewShotPromptTemplate:r}},[]);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class qS extends rx{async formatPromptValue(e){const t=await this.format(e);return new rI(t)}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var nY=Object.prototype.toString,$c=Array.isArray||function(e){return nY.call(e)==="[object Array]"};function nx(n){return typeof n=="function"}function aY(n){return $c(n)?"array":typeof n}function z0(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function DN(n,e){return n!=null&&typeof n=="object"&&e in n}function iY(n,e){return n!=null&&typeof n!="object"&&n.hasOwnProperty&&n.hasOwnProperty(e)}var sY=RegExp.prototype.test;function oY(n,e){return sY.call(n,e)}var uY=/\S/;function lY(n){return!oY(uY,n)}var cY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function dY(n){return String(n).replace(/[&<>"'`=\/]/g,function(t){return cY[t]})}var fY=/\s*/,hY=/\s+/,LN=/\s*=/,pY=/\s*\}/,mY=/#|\^|\/|>|\{|&|=|!/;function gY(n,e){if(!n)return[];var t=!1,r=[],i=[],o=[],u=!1,c=!1,f="",p=0;function m(){if(u&&!c)for(;o.length;)delete i[o.pop()];else o=[];u=!1,c=!1}var y,b,_;function S(ie){if(typeof ie=="string"&&(ie=ie.split(hY,2)),!$c(ie)||ie.length!==2)throw new Error("Invalid tags: "+ie);y=new RegExp(z0(ie[0])+"\\s*"),b=new RegExp("\\s*"+z0(ie[1])),_=new RegExp("\\s*"+z0("}"+ie[1]))}S(e||oa.tags);for(var C=new Ih(n),T,R,A,O,P,j;!C.eos();){if(T=C.pos,A=C.scanUntil(y),A)for(var q=0,G=A.length;q<G;++q)O=A.charAt(q),lY(O)?(o.push(i.length),f+=O):(c=!0,t=!0,f+=" "),i.push(["text",O,T,T+1]),T+=1,O===`
`&&(m(),f="",p=0,t=!1);if(!C.scan(y))break;if(u=!0,R=C.scan(mY)||"name",C.scan(fY),R==="="?(A=C.scanUntil(LN),C.scan(LN),C.scanUntil(b)):R==="{"?(A=C.scanUntil(_),C.scan(pY),C.scanUntil(b),R="&"):A=C.scanUntil(b),!C.scan(b))throw new Error("Unclosed tag at "+C.pos);if(R==">"?P=[R,A,T,C.pos,f,p,t]:P=[R,A,T,C.pos],p++,i.push(P),R==="#"||R==="^")r.push(P);else if(R==="/"){if(j=r.pop(),!j)throw new Error('Unopened section "'+A+'" at '+T);if(j[1]!==A)throw new Error('Unclosed section "'+j[1]+'" at '+T)}else R==="name"||R==="{"||R==="&"?c=!0:R==="="&&S(A)}if(m(),j=r.pop(),j)throw new Error('Unclosed section "'+j[1]+'" at '+C.pos);return vY(yY(i))}function yY(n){for(var e=[],t,r,i=0,o=n.length;i<o;++i)t=n[i],t&&(t[0]==="text"&&r&&r[0]==="text"?(r[1]+=t[1],r[3]=t[3]):(e.push(t),r=t));return e}function vY(n){for(var e=[],t=e,r=[],i,o,u=0,c=n.length;u<c;++u)switch(i=n[u],i[0]){case"#":case"^":t.push(i),r.push(i),t=i[4]=[];break;case"/":o=r.pop(),o[5]=i[2],t=r.length>0?r[r.length-1][4]:e;break;default:t.push(i)}return e}function Ih(n){this.string=n,this.tail=n,this.pos=0}Ih.prototype.eos=function(){return this.tail===""};Ih.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};Ih.prototype.scanUntil=function(e){var t=this.tail.search(e),r;switch(t){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=r.length,r};function bc(n,e){this.view=n,this.cache={".":this.view},this.parent=e}bc.prototype.push=function(e){return new bc(e,this)};bc.prototype.lookup=function(e){var t=this.cache,r;if(t.hasOwnProperty(e))r=t[e];else{for(var i=this,o,u,c,f=!1;i;){if(e.indexOf(".")>0)for(o=i.view,u=e.split("."),c=0;o!=null&&c<u.length;)c===u.length-1&&(f=DN(o,u[c])||iY(o,u[c])),o=o[u[c++]];else o=i.view[e],f=DN(i.view,e);if(f){r=o;break}i=i.parent}t[e]=r}return nx(r)&&(r=r.call(this.view)),r};function Wn(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Wn.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Wn.prototype.parse=function(e,t){var r=this.templateCache,i=e+":"+(t||oa.tags).join(":"),o=typeof r<"u",u=o?r.get(i):void 0;return u==null&&(u=gY(e,t),o&&r.set(i,u)),u};Wn.prototype.render=function(e,t,r,i){var o=this.getConfigTags(i),u=this.parse(e,o),c=t instanceof bc?t:new bc(t,void 0);return this.renderTokens(u,c,r,e,i)};Wn.prototype.renderTokens=function(e,t,r,i,o){for(var u="",c,f,p,m=0,y=e.length;m<y;++m)p=void 0,c=e[m],f=c[0],f==="#"?p=this.renderSection(c,t,r,i,o):f==="^"?p=this.renderInverted(c,t,r,i,o):f===">"?p=this.renderPartial(c,t,r,o):f==="&"?p=this.unescapedValue(c,t):f==="name"?p=this.escapedValue(c,t,o):f==="text"&&(p=this.rawValue(c)),p!==void 0&&(u+=p);return u};Wn.prototype.renderSection=function(e,t,r,i,o){var u=this,c="",f=t.lookup(e[1]);function p(b){return u.render(b,t,r,o)}if(f){if($c(f))for(var m=0,y=f.length;m<y;++m)c+=this.renderTokens(e[4],t.push(f[m]),r,i,o);else if(typeof f=="object"||typeof f=="string"||typeof f=="number")c+=this.renderTokens(e[4],t.push(f),r,i,o);else if(nx(f)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");f=f.call(t.view,i.slice(e[3],e[5]),p),f!=null&&(c+=f)}else c+=this.renderTokens(e[4],t,r,i,o);return c}};Wn.prototype.renderInverted=function(e,t,r,i,o){var u=t.lookup(e[1]);if(!u||$c(u)&&u.length===0)return this.renderTokens(e[4],t,r,i,o)};Wn.prototype.indentPartial=function(e,t,r){for(var i=t.replace(/[^ \t]/g,""),o=e.split(`
`),u=0;u<o.length;u++)o[u].length&&(u>0||!r)&&(o[u]=i+o[u]);return o.join(`
`)};Wn.prototype.renderPartial=function(e,t,r,i){if(r){var o=this.getConfigTags(i),u=nx(r)?r(e[1]):r[e[1]];if(u!=null){var c=e[6],f=e[5],p=e[4],m=u;f==0&&p&&(m=this.indentPartial(u,p,c));var y=this.parse(m,o);return this.renderTokens(y,t,r,m,i)}}};Wn.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(r!=null)return r};Wn.prototype.escapedValue=function(e,t,r){var i=this.getConfigEscape(r)||oa.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&i===oa.escape?String(o):i(o)};Wn.prototype.rawValue=function(e){return e[1]};Wn.prototype.getConfigTags=function(e){return $c(e)?e:e&&typeof e=="object"?e.tags:void 0};Wn.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!$c(e))return e.escape};var oa={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(n){bh.templateCache=n},get templateCache(){return bh.templateCache}},bh=new Wn;oa.clearCache=function(){return bh.clearCache()};oa.parse=function(e,t){return bh.parse(e,t)};oa.render=function(e,t,r,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+aY(e)+'" was given as the first argument for mustache#render(template, view, partials)');return bh.render(e,t,r,i)};oa.escape=dY;oa.Scanner=Ih;oa.Context=bc;oa.Writer=Wn;function wI(){oa.escape=n=>n}const ay=n=>{const e=n.split(""),t=[],r=(o,u)=>{for(let c=u;c<e.length;c+=1)if(o.includes(e[c]))return c;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")t.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")t.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const o=r("}",i);if(o<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(i+1,o).join("")}),i=o+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const o=r("{}",i),u=(o<0?e.slice(i):e.slice(i,o)).join("");t.push({type:"literal",text:u}),i=o<0?e.length:o}}return t},SI=n=>{const e=[];for(const t of n)if(t[0]==="name"){const r=t[1].includes(".")?t[1].split(".")[0]:t[1];e.push({type:"variable",name:r})}else if(["#","&","^",">"].includes(t[0])){if(e.push({type:"variable",name:t[1]}),t[0]==="#"&&t.length>4&&Array.isArray(t[4])){const r=SI(t[4]);e.push(...r)}}else e.push({type:"literal",text:t[1]});return e},GS=n=>{wI();const e=oa.parse(n);return SI(e)},bY=(n,e)=>ay(n).reduce((t,r)=>{if(r.type==="variable"){if(r.name in e){const i=typeof e[r.name]=="string"?e[r.name]:JSON.stringify(e[r.name]);return t+i}throw new Error(`(f-string) Missing value for input ${r.name}`)}return t+r.text},""),_Y=(n,e)=>(wI(),oa.render(n,e)),WS={"f-string":bY,mustache:_Y},wY={"f-string":ay,mustache:GS},To=(n,e,t)=>{try{return WS[e](n,t)}catch(r){throw xy(r,"INVALID_PROMPT_INPUT")}},JS=(n,e)=>wY[e](n),EI=(n,e,t)=>{if(!(e in WS)){const r=Object.keys(WS);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=t.reduce((i,o)=>(i[o]="foo",i),{});Array.isArray(n)?n.forEach(i=>{if(i.type==="text")To(i.text,e,r);else if(i.type==="image_url")if(typeof i.image_url=="string")To(i.image_url,e,r);else{const o=i.image_url.url;To(o,e,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):To(n,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};class Ma extends qS{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),EI(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return To(this.template,this.templateFormat,t)}static fromExamples(e,t,r,i=`

`,o=""){const u=[o,...e,t].join(i);return new Ma({inputVariables:r,template:u})}static fromTemplate(e,t){const{templateFormat:r="f-string",...i}=t??{},o=new Set;return JS(e,r).forEach(u=>{u.type==="variable"&&o.add(u.name)}),new Ma({inputVariables:[...o],templateFormat:r,template:e,...i})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:t,partialVariables:r};return new Ma(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Ma({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const UN=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Ma},Symbol.toStringTag,{value:"Module"}));class rh extends rx{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),EI([{type:"image_url",image_url:this.template}],this.templateFormat,t)}}_getPromptType(){return"prompt"}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:t,partialVariables:r};return new rh(i)}async format(e){const t={};for(const[u,c]of Object.entries(this.template))typeof c=="string"?t[u]=To(c,this.templateFormat,e):t[u]=c;const r=e.url||t.url,i=e.detail||t.detail;if(!r)throw new Error("Must provide either an image URL.");if(typeof r!="string")throw new Error("url must be a string.");const o={url:r};return i&&(o.detail=i),o}async formatPromptValue(e){const t=await this.format(e);return new mK(t)}}class MN extends Sr{static lc_name(){return"DictPromptTemplate"}constructor(e){const t=e.templateFormat??"f-string",r=KS(e.template,t);super({inputVariables:r,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=t,this.inputVariables=r}async format(e){return ZS(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}}function KS(n,e){const t=[];for(const r of Object.values(n))if(typeof r=="string")JS(r,e).forEach(i=>{i.type==="variable"&&t.push(i.name)});else if(Array.isArray(r))for(const i of r)typeof i=="string"?JS(i,e).forEach(o=>{o.type==="variable"&&t.push(o.name)}):typeof i=="object"&&t.push(...KS(i,e));else typeof r=="object"&&r!==null&&t.push(...KS(r,e));return Array.from(new Set(t))}function ZS(n,e,t){const r={};for(const[i,o]of Object.entries(n))if(typeof o=="string")r[i]=To(o,t,e);else if(Array.isArray(o)){const u=[];for(const c of o)typeof c=="string"?u.push(To(c,t,e)):typeof c=="object"&&u.push(ZS(c,e,t));r[i]=u}else typeof o=="object"&&o!==null?r[i]=ZS(o,e,t):r[i]=o;return r}class ax extends Sr{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,t){return this._callWithConfig(r=>this.formatMessages(r),e,{...t,runType:"prompt"})}}class YS extends ax{static lc_name(){return"MessagesPlaceholder"}constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){const t=e[this.variableName];if(this.optional&&!t)return[];if(!t){const i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let r;try{Array.isArray(t)?r=t.map(_o):r=[_o(t)]}catch(i){const o=typeof t=="string"?t:JSON.stringify(t,null,2),u=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${o}`,`Additional message: ${i.message}`].join(`

`));throw u.name="InputFormatError",u.lc_error_code=i.lc_error_code,u}return r}}class SY extends ax{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class EY extends rx{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new nI(t)}}class xY extends SY{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new Uu(await this.prompt.format(e),this.role)}static fromTemplate(e,t,r){return new this(Ma.fromTemplate(e,{templateFormat:r==null?void 0:r.templateFormat}),t)}}function TY(n){return n===null||typeof n!="object"||Array.isArray(n)?!1:Object.keys(n).length===1&&"text"in n&&typeof n.text=="string"}function CY(n){return n===null||typeof n!="object"||Array.isArray(n)?!1:"image_url"in n&&(typeof n.image_url=="string"||typeof n.image_url=="object"&&n.image_url!==null&&"url"in n.image_url&&typeof n.image_url.url=="string")}class ix extends ax{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let r=[];this.prompt.forEach(i=>{"inputVariables"in i&&(r=r.concat(i.inputVariables))}),this.inputVariables=r}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=t??this.additionalOptions}createMessage(e){const t=this.constructor;if(t._messageClass()){const r=t._messageClass();return new r({content:e})}else if(t.chatMessageClass){const r=t.chatMessageClass();return new r({content:e,role:this.getRoleFromMessageClass(r.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,t){if(typeof e=="string")return new this(Ma.fromTemplate(e,t));const r=[];for(const i of e)if(typeof i=="string")r.push(Ma.fromTemplate(i,t));else if(i!==null)if(TY(i)){let o="";typeof i.text=="string"&&(o=i.text??"");const u={...t,additionalContentFields:i};r.push(Ma.fromTemplate(o,u))}else if(CY(i)){let o=i.image_url??"",u,c=[];if(typeof o=="string"){let f;(t==null?void 0:t.templateFormat)==="mustache"?f=GS(o):f=ay(o);const p=f.flatMap(m=>m.type==="variable"?[m.name]:[]);if(((p==null?void 0:p.length)??0)>0){if(p.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${p}
From: ${o}`);c=[p[0]]}else c=[];o={url:o},u=new rh({template:o,inputVariables:c,templateFormat:t==null?void 0:t.templateFormat,additionalContentFields:i})}else if(typeof o=="object"){if("url"in o){let f;(t==null?void 0:t.templateFormat)==="mustache"?f=GS(o.url):f=ay(o.url),c=f.flatMap(p=>p.type==="variable"?[p.name]:[])}else c=[];u=new rh({template:o,inputVariables:c,templateFormat:t==null?void 0:t.templateFormat,additionalContentFields:i})}else throw new Error("Invalid image template");r.push(u)}else typeof i=="object"&&r.push(new MN({template:i,templateFormat:t==null?void 0:t.templateFormat}));return new this({prompt:r,additionalOptions:t})}async format(e){if(this.prompt instanceof qS){const t=await this.prompt.format(e);return this.createMessage(t)}else{const t=[];for(const r of this.prompt){let i={};if(!("inputVariables"in r))throw new Error(`Prompt ${r} does not have inputVariables defined.`);for(const o of r.inputVariables)i||(i={[o]:e[o]}),i={...i,[o]:e[o]};if(r instanceof qS){const o=await r.format(i);let u;"additionalContentFields"in r&&(u=r.additionalContentFields),o!==""&&t.push({...u,type:"text",text:o})}else if(r instanceof rh){const o=await r.format(i);let u;"additionalContentFields"in r&&(u=r.additionalContentFields),t.push({...u,type:"image_url",image_url:o})}else if(r instanceof MN){const o=await r.format(i);let u;"additionalContentFields"in r&&(u=r.additionalContentFields),t.push({...u,...o})}}return this.createMessage(t)}}async formatMessages(e){return[await this.format(e)]}}class xI extends ix{static _messageClass(){return Oc}static lc_name(){return"HumanMessagePromptTemplate"}}class RY extends ix{static _messageClass(){return Iu}static lc_name(){return"AIMessagePromptTemplate"}}class OY extends ix{static _messageClass(){return _S}static lc_name(){return"SystemMessagePromptTemplate"}}function AY(n){return typeof n.formatMessages=="function"}function kY(n,e){if(AY(n)||Rc(n))return n;if(Array.isArray(n)&&n[0]==="placeholder"){const i=n[1];if((e==null?void 0:e.templateFormat)==="mustache"&&typeof i=="string"&&i.slice(0,2)==="{{"&&i.slice(-2)==="}}"){const o=i.slice(2,-2);return new YS({variableName:o,optional:!0})}else if(typeof i=="string"&&i[0]==="{"&&i[i.length-1]==="}"){const o=i.slice(1,-1);return new YS({variableName:o,optional:!0})}throw new Error(`Invalid placeholder template for format ${(e==null?void 0:e.templateFormat)??'"f-string"'}: "${n[1]}". Expected a variable name surrounded by ${(e==null?void 0:e.templateFormat)==="mustache"?"double":"single"} curly braces.`)}const t=_o(n);let r;if(typeof t.content=="string"?r=t.content:r=t.content.map(i=>"text"in i?{...i,text:i.text}:"image_url"in i?{...i,image_url:i.image_url}:i),t._getType()==="human")return xI.fromTemplate(r,e);if(t._getType()==="ai")return RY.fromTemplate(r,e);if(t._getType()==="system")return OY.fromTemplate(r,e);if(Uu.isInstance(t))return xY.fromTemplate(t.content,t.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${t._getType()}".`)}function NY(n){return n.constructor.lc_name()==="MessagesPlaceholder"}class nh extends EY{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){const t=new Set;for(const c of this.promptMessages)if(!(c instanceof Ji))for(const f of c.inputVariables)t.add(f);const r=this.inputVariables,i=new Set(this.partialVariables?r.concat(Object.keys(this.partialVariables)):r),o=new Set([...i].filter(c=>!t.has(c)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are not used in any of the prompt messages.`);const u=new Set([...t].filter(c=>!i.has(c)));if(u.size>0)throw new Error(`Input variables \`${[...u]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if(typeof e.content=="string")return e;const r=await Promise.all(e.content.map(async i=>{if(i.type!=="image_url")return i;let o="";typeof i.image_url=="string"?o=i.image_url:o=i.image_url.url;const c=await Ma.fromTemplate(o,{templateFormat:this.templateFormat}).format(t);return typeof i.image_url!="string"&&"url"in i.image_url?i.image_url.url=c:i.image_url=c,i}));return e.content=r,e}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let r=[];for(const i of this.promptMessages)if(i instanceof Ji)r.push(await this._parseImagePrompts(i,t));else{const o=i.inputVariables.reduce((c,f)=>{if(!(f in t)&&!(NY(i)&&i.optional))throw xy(new Error(`Missing value for input variable \`${f.toString()}\``),"INVALID_PROMPT_INPUT");return c[f]=t[f],c},{}),u=await i.formatMessages(o);r=r.concat(u)}return r}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:t,partialVariables:r};return new nh(i)}static fromTemplate(e,t){const r=Ma.fromTemplate(e,t),i=new xI({prompt:r});return this.fromMessages([i])}static fromMessages(e,t){const r=e.reduce((u,c)=>u.concat(c instanceof nh?c.promptMessages:[kY(c,t)]),[]),i=e.reduce((u,c)=>c instanceof nh?Object.assign(u,c.partialVariables):u,Object.create(null)),o=new Set;for(const u of r)if(!(u instanceof Ji))for(const c of u.inputVariables)c in i||o.add(c);return new this({...t,inputVariables:[...o],promptMessages:r,partialVariables:i,templateFormat:t==null?void 0:t.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}class PY extends KE{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,r){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:i,callbackManager:o,...u}=e;super({...u,callbacks:o??u.callbacks}),this.memory=i}else super({verbose:t,callbacks:r}),this.memory=e}_selectMemoryInputs(e){const t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}async invoke(e,t){const r=jt(t),i=await this._formatValues(e),o=await _n.configure(r==null?void 0:r.callbacks,this.callbacks,r==null?void 0:r.tags,this.tags,r==null?void 0:r.metadata,this.metadata,{verbose:this.verbose}),u=await(o==null?void 0:o.handleChainStart(this.toJSON(),i,void 0,void 0,void 0,void 0,r==null?void 0:r.runName));let c;try{c=await(i.signal?Promise.race([this._call(i,u,r),new Promise((f,p)=>{var m;(m=i.signal)==null||m.addEventListener("abort",()=>{p(new Error("AbortError"))})})]):this._call(i,u,r))}catch(f){throw await(u==null?void 0:u.handleChainError(f)),f}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),c),await(u==null?void 0:u.handleChainEnd(c)),Object.defineProperty(c,LS,{value:u?{runId:u==null?void 0:u.runId}:void 0,configurable:!0}),c}_validateOutputs(e){const t=this.outputKeys.filter(r=>!(r in e));if(t.length)throw new Error(`Missing output keys: ${t.join(", ")} from chain ${this._chainType()}`)}async prepOutputs(e,t,r=!1){return this._validateOutputs(t),this.memory&&await this.memory.saveContext(e,t),r?t:{...e,...t}}serialize(){throw new Error("Method not implemented.")}async run(e,t){const r=this.inputKeys.filter(f=>{var p;return!((p=this.memory)!=null&&p.memoryKeys.includes(f))});if(!(r.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const o=r.length?{[r[0]]:e}:{},u=await this.call(o,t),c=Object.keys(u);if(c.length===1)return u[c[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){const t={...e};if(t.timeout&&!t.signal&&(t.signal=AbortSignal.timeout(t.timeout),delete t.timeout),this.memory!=null){const r=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[i,o]of Object.entries(r))t[i]=o}return t}async call(e,t,r){const i={tags:r,...U1(t)};return this.invoke(e,i)}async apply(e,t){return Promise.all(e.map(async(r,i)=>this.call(r,t==null?void 0:t[i])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{const{LLMChain:r}=await kn(async()=>{const{LLMChain:i}=await import("./llm_chain-ecYQnJlX.js");return{LLMChain:i}},[]);return r.deserialize(e)}case"sequential_chain":{const{SequentialChain:r}=await kn(async()=>{const{SequentialChain:i}=await import("./sequential_chain-DsGPDvdO.js");return{SequentialChain:i}},[]);return r.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:r}=await kn(async()=>{const{SimpleSequentialChain:i}=await import("./sequential_chain-DsGPDvdO.js");return{SimpleSequentialChain:i}},[]);return r.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:r}=await kn(async()=>{const{StuffDocumentsChain:i}=await import("./combine_docs_chain-BjqMKSDB.js");return{StuffDocumentsChain:i}},__vite__mapDeps([0,1]));return r.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:r}=await kn(async()=>{const{MapReduceDocumentsChain:i}=await import("./combine_docs_chain-BjqMKSDB.js");return{MapReduceDocumentsChain:i}},__vite__mapDeps([0,1]));return r.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:r}=await kn(async()=>{const{RefineDocumentsChain:i}=await import("./combine_docs_chain-BjqMKSDB.js");return{RefineDocumentsChain:i}},__vite__mapDeps([0,1]));return r.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:r}=await kn(async()=>{const{VectorDBQAChain:i}=await import("./vector_db_qa-FtbhRH4j.js");return{VectorDBQAChain:i}},__vite__mapDeps([2,1,0]));return r.deserialize(e,t)}case"api_chain":{const{APIChain:r}=await kn(async()=>{const{APIChain:i}=await import("./api_chain-Cwj0qsBz.js");return{APIChain:i}},__vite__mapDeps([3,1]));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class $Y extends ZE{}class IY extends Ns{get finalOutputs(){return this._finalOutputs}async setFinalOutputs(e){if(this._finalOutputs=void 0,e){const t=await this.agentExecutor.prepOutputs(this.inputs,e,!0);this._finalOutputs=t}}get nameToToolMap(){const e=this.agentExecutor.tools.map(t=>({[t.name]:t}));return Object.assign({},...e)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","executor_iterator"]}),Object.defineProperty(this,"agentExecutor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_finalOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"intermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"iterations",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.agentExecutor=e.agentExecutor,this.inputs=e.inputs,this.callbacks=e.callbacks,this.tags=e.tags,this.metadata=e.metadata,this.runName=e.runName,this.runManager=e.runManager,this.config=e.config}reset(){this.intermediateSteps=[],this.iterations=0,this._finalOutputs=void 0}updateIterations(){this.iterations+=1}async*streamIterator(){for(this.reset();;)try{this.iterations===0&&await this.onFirstStep(),yield await this._callNext()}catch(e){if("message"in e&&e.message.startsWith("Final outputs already reached: ")){if(!this.finalOutputs)throw e;return this.finalOutputs}throw this.runManager&&await this.runManager.handleChainError(e),e}}async onFirstStep(){var e,t,r,i,o,u,c;if(this.iterations===0){const f=await _n.configure(this.callbacks??((e=this.config)==null?void 0:e.callbacks),this.agentExecutor.callbacks,this.tags??((t=this.config)==null?void 0:t.tags),this.agentExecutor.tags,this.metadata??((r=this.config)==null?void 0:r.metadata),this.agentExecutor.metadata,{verbose:this.agentExecutor.verbose});this.runManager=await(f==null?void 0:f.handleChainStart(this.agentExecutor.toJSON(),this.inputs,(i=this.config)==null?void 0:i.runId,void 0,this.tags??((o=this.config)==null?void 0:o.tags),this.metadata??((u=this.config)==null?void 0:u.metadata),this.runName??((c=this.config)==null?void 0:c.runName))),this.config!==void 0&&delete this.config.runId}}async _executeNextStep(e){return this.agentExecutor._takeNextStep(this.nameToToolMap,this.inputs,this.intermediateSteps,e,this.config)}async _processNextStepOutput(e,t){var i;if("returnValues"in e){const o=await this.agentExecutor._return(e,this.intermediateSteps,t);return this.runManager&&await this.runManager.handleChainEnd(o),await this.setFinalOutputs(o),o}this.intermediateSteps=this.intermediateSteps.concat(e);let r={};if(Array.isArray(e)&&e.length===1){const o=e[0],u=await this.agentExecutor._getToolReturn(o);u&&(r=await this.agentExecutor._return(u,this.intermediateSteps,t),await((i=this.runManager)==null?void 0:i.handleChainEnd(r)),await this.setFinalOutputs(r))}return r={intermediateSteps:e},r}async _stop(){var r;const e=await this.agentExecutor.agent.returnStoppedResponse(this.agentExecutor.earlyStoppingMethod,this.intermediateSteps,this.inputs),t=await this.agentExecutor._return(e,this.intermediateSteps,this.runManager);return await this.setFinalOutputs(t),await((r=this.runManager)==null?void 0:r.handleChainEnd(t)),t}async _callNext(){if(this.finalOutputs)throw new Error(`Final outputs already reached: ${JSON.stringify(this.finalOutputs,null,2)}`);if(!this.agentExecutor.shouldContinueGetter(this.iterations))return this._stop();const e=await this._executeNextStep(this.runManager),t=await this._processNextStepOutput(e,this.runManager);return this.updateIterations(),t}}class V0 extends My{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"_Exception"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"Exception tool"})}async _call(e){return e}}class sx extends PY{static lc_name(){return"AgentExecutor"}get lc_namespace(){return["langchain","agents","executor"]}get inputKeys(){return this.agent.inputKeys}get outputKeys(){return this.agent.returnValues}constructor(e){let t,r=!0;if(Sr.isRunnable(e.agent)?(_I.isAgentRunnableSequence(e.agent)?e.agent.singleAction?t=new rY({runnable:e.agent,streamRunnable:e.agent.streamRunnable}):t=new jN({runnable:e.agent,streamRunnable:e.agent.streamRunnable}):t=new jN({runnable:e.agent}),r=!1):(tY(e.agent)&&(r=!1),t=e.agent),super(e),Object.defineProperty(this,"agent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:15}),Object.defineProperty(this,"earlyStoppingMethod",{enumerable:!0,configurable:!0,writable:!0,value:"force"}),Object.defineProperty(this,"returnOnlyOutputs",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"handleParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"handleToolRuntimeErrors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.agent=t,this.tools=e.tools,this.handleParsingErrors=e.handleParsingErrors??this.handleParsingErrors,this.handleToolRuntimeErrors=e.handleToolRuntimeErrors,this.returnOnlyOutputs=r,this.agent._agentActionType()==="multi"){for(const i of this.tools)if(i.returnDirect)throw new Error(`Tool with return direct ${i.name} not supported for multi-action agent.`)}this.returnIntermediateSteps=e.returnIntermediateSteps??this.returnIntermediateSteps,this.maxIterations=e.maxIterations??this.maxIterations,this.earlyStoppingMethod=e.earlyStoppingMethod??this.earlyStoppingMethod}static fromAgentAndTools(e){return new sx(e)}get shouldContinueGetter(){return this.shouldContinue.bind(this)}shouldContinue(e){return this.maxIterations===void 0||e<this.maxIterations}async _call(e,t,r){var p;const i=Object.fromEntries(this.tools.map(m=>[m.name.toLowerCase(),m])),o=[];let u=0;const c=async m=>{const{returnValues:y}=m,b=await this.agent.prepareForOutput(y,o);await(t==null?void 0:t.handleAgentEnd(m));let _;return this.returnIntermediateSteps?_={...y,intermediateSteps:o,...b}:_={...y,...b},this.returnOnlyOutputs||(_={...e,..._}),_};for(;this.shouldContinue(u);){let m;try{m=await this.agent.plan(o,e,t==null?void 0:t.getChild(),r)}catch(C){if(C instanceof vc){let T,R=C.message;if(this.handleParsingErrors===!0)C.sendToLLM?(T=C.observation,R=C.llmOutput??""):T="Invalid or incomplete response";else if(typeof this.handleParsingErrors=="string")T=this.handleParsingErrors;else if(typeof this.handleParsingErrors=="function")T=this.handleParsingErrors(C);else throw C;m={tool:"_Exception",toolInput:T,log:R}}else throw C}if("returnValues"in m)return c(m);let y;Array.isArray(m)?y=m:y=[m];const b=await Promise.all(y.map(async C=>{var A;await(t==null?void 0:t.handleAgentAction(C));const T=C.tool==="_Exception"?new V0:i[(A=C.tool)==null?void 0:A.toLowerCase()];let R;try{if(R=T?await T.invoke(C.toolInput,Xr(r,{callbacks:t==null?void 0:t.getChild()})):`${C.tool} is not a valid tool, try another one.`,typeof R!="string")throw new Error("Received unsupported non-string response from tool call.")}catch(O){if(O instanceof dh){if(this.handleParsingErrors===!0)R="Invalid or incomplete tool input. Please try again.";else if(typeof this.handleParsingErrors=="string")R=this.handleParsingErrors;else if(typeof this.handleParsingErrors=="function")R=this.handleParsingErrors(O);else throw O;return R=await new V0().call(R,t==null?void 0:t.getChild()),{action:C,observation:R??""}}else this.handleToolRuntimeErrors!==void 0&&(R=this.handleToolRuntimeErrors(O))}return{action:C,observation:R??""}}));o.push(...b);const _=o[o.length-1],S=i[(p=_.action.tool)==null?void 0:p.toLowerCase()];if(S!=null&&S.returnDirect)return c({returnValues:{[this.agent.returnValues[0]]:_.observation},log:""});u+=1}const f=await this.agent.returnStoppedResponse(this.earlyStoppingMethod,o,e);return c(f)}async _takeNextStep(e,t,r,i,o){let u;try{u=await this.agent.plan(r,t,i==null?void 0:i.getChild(),o)}catch(p){if(p instanceof vc){let m,y=p.message;if(this.handleParsingErrors===!0)p.sendToLLM?(m=p.observation,y=p.llmOutput??""):m="Invalid or incomplete response";else if(typeof this.handleParsingErrors=="string")m=this.handleParsingErrors;else if(typeof this.handleParsingErrors=="function")m=this.handleParsingErrors(p);else throw p;u={tool:"_Exception",toolInput:m,log:y}}else throw p}if("returnValues"in u)return u;let c;Array.isArray(u)?c=u:c=[u];const f=[];for(const p of c){let m="";if(i&&await(i==null?void 0:i.handleAgentAction(p)),p.tool in e){const y=e[p.tool];try{if(m=await y.call(p.toolInput,i==null?void 0:i.getChild()),typeof m!="string")throw new Error("Received unsupported non-string response from tool call.")}catch(b){if(b instanceof dh){if(this.handleParsingErrors===!0)m="Invalid or incomplete tool input. Please try again.";else if(typeof this.handleParsingErrors=="string")m=this.handleParsingErrors;else if(typeof this.handleParsingErrors=="function")m=this.handleParsingErrors(b);else throw b;m=await new V0().call(m,i==null?void 0:i.getChild())}}}else m=`${p.tool} is not a valid tool, try another available tool: ${Object.keys(e).join(", ")}`;f.push({action:p,observation:m})}return f}async _return(e,t,r){r&&await r.handleAgentEnd(e);const i=e.returnValues;return this.returnIntermediateSteps&&(i.intermediateSteps=t),i}async _getToolReturn(e){const{action:t,observation:r}=e,i=Object.fromEntries(this.tools.map(u=>[u.name.toLowerCase(),u])),[o="output"]=this.agent.returnValues;return t.tool in i&&i[t.tool].returnDirect?{returnValues:{[o]:r},log:""}:null}_returnStoppedResponse(e){if(e==="force")return{returnValues:{output:"Agent stopped due to iteration limit or time limit."},log:""};throw new Error(`Got unsupported early_stopping_method: ${e}`)}async*_streamIterator(e,t){const i=new IY({inputs:e,agentExecutor:this,config:t,metadata:t==null?void 0:t.metadata,tags:t==null?void 0:t.tags,callbacks:t==null?void 0:t.callbacks}).streamIterator();for await(const o of i)o&&(yield o)}_chainType(){return"agent_executor"}serialize(){throw new Error("Cannot serialize an AgentExecutor")}}class jY extends $Y{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","openai"]})}static lc_name(){return"OpenAIFunctionsAgentOutputParser"}async parse(e){throw new Error(`OpenAIFunctionsAgentOutputParser can only parse messages.
Passed input: ${e}`)}async parseResult(e){if("message"in e[0]&&Rc(e[0].message))return this.parseAIMessage(e[0].message);throw new Error("parseResult on OpenAIFunctionsAgentOutputParser only works on ChatGeneration output")}parseAIMessage(e){if(e.content&&typeof e.content!="string")throw new Error("This agent cannot parse non-string model responses.");if(e.additional_kwargs.function_call){const t=e.additional_kwargs.function_call;try{const r=t.arguments?JSON.parse(t.arguments):{};return{tool:t.name,toolInput:r,log:`Invoking "${t.name}" with ${t.arguments??"{}"}
${e.content}`,messageLog:[e]}}catch(r){throw new vc(`Failed to parse function arguments from chat model response. Text: "${t.arguments}". ${r}`)}}else return{returnValues:{output:e.content},log:e.content}}getFormatInstructions(){throw new Error("getFormatInstructions not implemented inside OpenAIFunctionsAgentOutputParser.")}}function DY(n){return n.flatMap(({action:e,observation:t})=>"messageLog"in e&&e.messageLog!==void 0?e.messageLog.concat(new c5(t,e.tool)):[new Iu(e.log)])}async function LY({llm:n,tools:e,prompt:t,streamRunnable:r}){if(!t.inputVariables.includes("agent_scratchpad"))throw new Error(['Prompt must have an input variable named "agent_scratchpad".',`Found ${JSON.stringify(t.inputVariables)} instead.`].join(`
`));const i=n.bindTools?n.bindTools(e):n.withConfig({functions:e.map(u=>lI(u))});return _I.fromRunnables([vh.assign({agent_scratchpad:u=>DY(u.steps)}),t,i,new jY],{name:"OpenAIFunctionsAgent",streamRunnable:r,singleAction:!0})}class UY extends My{constructor(){super();ta(this,"name","google_cse_search");ta(this,"description","Search the web using Google Custom Search Engine for sports data")}async _call(t){try{const r="your-cse-id-here",i="your-google-api-key-here",o=await fetch(`https://www.googleapis.com/customsearch/v1?key=${i}&cx=${r}&q=${encodeURIComponent(t)}&num=5`);if(!o.ok)throw new Error(`Google CSE API error: ${o.status}`);const u=await o.json();if(!u.items||u.items.length===0)return"No search results found.";const c=u.items.map((f,p)=>`${p+1}. ${f.title}
   ${f.snippet}
   ${f.link}
`).join(`
`);return`Search results for "${t}":

${c}`}catch(r){return console.error("Google CSE Search error:",r),`Error searching Google: ${r instanceof Error?r.message:"Unknown error"}`}}}class MY extends My{constructor(){super();ta(this,"name","openweather_api");ta(this,"description","Get weather data for a specific location using OpenWeather API")}async _call(t){try{const r="your-openweather-api-key-here",i=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(t)}&appid=${r}&units=imperial`);if(!i.ok)throw new Error(`OpenWeather API error: ${i.status}`);const o=await i.json(),u={location:o.name,temperature:Math.round(o.main.temp),humidity:o.main.humidity,windSpeed:Math.round(o.wind.speed),conditions:o.weather[0].main,description:o.weather[0].description};return`Weather for ${u.location}:
- Temperature: ${u.temperature}°F
- Conditions: ${u.conditions} (${u.description})
- Humidity: ${u.humidity}%
- Wind Speed: ${u.windSpeed} mph`}catch(r){return console.error("OpenWeather API error:",r),`Error getting weather data: ${r instanceof Error?r.message:"Unknown error"}`}}}class FY extends My{constructor(){super();ta(this,"name","sports_data_aggregator");ta(this,"description","Aggregate and analyze sports data from multiple sources")}async _call(t){return`Aggregated sports data analysis:
${t}

Analysis complete.`}}const BY=async()=>{const n="your-openai-api-key-here",e=new tx({openAIApiKey:n,modelName:"gpt-4-turbo-preview",temperature:.1}),t=[new UY,new MY,new FY],r=nh.fromMessages([["system",`You are an expert sports analyst AI for NFL predictions. Your goal is to analyze sports data and provide accurate predictions that beat Vegas odds (targeting 54-55% accuracy).

You have access to:
1. Google Custom Search Engine for finding injury reports, DVOA, FPI, and other sports analytics
2. OpenWeather API for game-day weather conditions
3. Data aggregation tools for combining multiple data sources

When analyzing a game, follow this process:
1. Research both teams' injury reports and player availability
2. Check advanced metrics like DVOA (Defense-adjusted Value Over Average) and FPI (Football Power Index)
3. Analyze weather conditions if playing outdoors
4. Consider home/away performance, recent form, and matchup specifics
5. Generate a prediction with confidence score and reasoning

Always provide:
- Specific search queries for relevant data
- Confidence percentage (0-100)
- Clear reasoning based on data
- Recommended bet with odds suggestion`],["human","{input}"],new YS("agent_scratchpad")]),i=await LY({llm:e,tools:t,prompt:r});return new sx({agent:i,tools:t,verbose:!0})},zY=async n=>{try{const e=await BY(),t=`Analyze the NFL game between ${n.awayTeam} at ${n.homeTeam} on ${n.gameDate}.
${n.location?`Game location: ${n.location}`:""}
${n.spread?`Current spread: ${n.homeTeam} ${n.spread>0?"+":""}${n.spread}`:""}
${n.overUnder?`Over/Under: ${n.overUnder}`:""}

Please research injury reports, DVOA, FPI, weather conditions, and provide a prediction with confidence score.`,r=await e.call({input:t});return{success:!0,analysis:r.output,intermediateSteps:r.intermediateSteps}}catch(e){return console.error("Sports analysis error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},VY=()=>{const[n,e]=X.useState({homeTeam:"",awayTeam:"",gameDate:"",location:"",spread:"",overUnder:""}),[t,r]=X.useState(""),[i,o]=X.useState(!1),[u,c]=X.useState(""),f=y=>{const{name:b,value:_}=y.target;e(S=>({...S,[b]:_}))},p=async()=>{if(!n.homeTeam||!n.awayTeam||!n.gameDate){c("Please fill in at least home team, away team, and game date.");return}o(!0),c(""),r("");try{const y=await zY({homeTeam:n.homeTeam,awayTeam:n.awayTeam,gameDate:n.gameDate,location:n.location||void 0,spread:n.spread?parseFloat(n.spread):void 0,overUnder:n.overUnder?parseFloat(n.overUnder):void 0});y.success?r(y.analysis):c(y.error||"Analysis failed")}catch(y){c(y instanceof Error?y.message:"An error occurred during analysis")}finally{o(!1)}},m=()=>{e({homeTeam:"",awayTeam:"",gameDate:"",location:"",spread:"",overUnder:""}),r(""),c("")};return U.jsxDEV("div",{className:"max-w-4xl mx-auto p-6",children:[U.jsxDEV("div",{className:"mb-8",children:[U.jsxDEV("h1",{className:"text-3xl font-bold mb-2",children:"AI Sports Analysis Admin"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:83,columnNumber:9},void 0),U.jsxDEV("p",{className:"text-gray-400",children:"Generate AI-powered predictions using injury reports, DVOA, FPI, and weather data"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:84,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:82,columnNumber:7},void 0),U.jsxDEV("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[U.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"Game Analysis"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:90,columnNumber:9},void 0),U.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Home Team"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:94,columnNumber:13},void 0),U.jsxDEV("input",{type:"text",name:"homeTeam",value:n.homeTeam,onChange:f,placeholder:"e.g., Kansas City Chiefs",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:95,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:93,columnNumber:11},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Away Team"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:106,columnNumber:13},void 0),U.jsxDEV("input",{type:"text",name:"awayTeam",value:n.awayTeam,onChange:f,placeholder:"e.g., Buffalo Bills",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:107,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:105,columnNumber:11},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Game Date"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:118,columnNumber:13},void 0),U.jsxDEV("input",{type:"datetime-local",name:"gameDate",value:n.gameDate,onChange:f,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:117,columnNumber:11},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Location"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:129,columnNumber:13},void 0),U.jsxDEV("input",{type:"text",name:"location",value:n.location,onChange:f,placeholder:"e.g., Kansas City, MO",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:130,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:128,columnNumber:11},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Current Spread"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:141,columnNumber:13},void 0),U.jsxDEV("input",{type:"number",name:"spread",value:n.spread,onChange:f,step:"0.5",placeholder:"e.g., -3.5",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:140,columnNumber:11},void 0),U.jsxDEV("div",{children:[U.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Over/Under"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:154,columnNumber:13},void 0),U.jsxDEV("input",{type:"number",name:"overUnder",value:n.overUnder,onChange:f,step:"0.5",placeholder:"e.g., 47.5",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:155,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:92,columnNumber:9},void 0),U.jsxDEV("div",{className:"flex gap-4",children:[U.jsxDEV("button",{onClick:p,disabled:i,className:"bg-primary-600 hover:bg-primary-700 disabled:opacity-50 px-6 py-2 rounded-md font-medium transition-colors",children:i?"Analyzing...":"Generate AI Prediction"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:168,columnNumber:11},void 0),U.jsxDEV("button",{onClick:m,className:"bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-md font-medium transition-colors",children:"Clear"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:89,columnNumber:7},void 0),u&&U.jsxDEV("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded mb-4",children:u},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:186,columnNumber:9},void 0),t&&U.jsxDEV("div",{className:"bg-gray-800 rounded-lg p-6",children:[U.jsxDEV("h3",{className:"text-xl font-semibold mb-4",children:"AI Analysis Result"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:193,columnNumber:11},void 0),U.jsxDEV("div",{className:"bg-gray-900 p-4 rounded border-l-4 border-primary-500",children:U.jsxDEV("pre",{className:"whitespace-pre-wrap text-gray-300 font-mono text-sm",children:t},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:195,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:194,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:192,columnNumber:9},void 0),U.jsxDEV("div",{className:"mt-8 bg-blue-900 border border-blue-700 text-blue-200 px-4 py-3 rounded",children:[U.jsxDEV("h4",{className:"font-semibold mb-2",children:"Setup Required:"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:203,columnNumber:9},void 0),U.jsxDEV("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[U.jsxDEV("li",{children:["Add your OpenAI API key to ",U.jsxDEV("code",{className:"bg-blue-800 px-1 rounded",children:"VITE_OPENAI_API_KEY"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:205,columnNumber:42},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:205,columnNumber:11},void 0),U.jsxDEV("li",{children:["Add your Google CSE ID to ",U.jsxDEV("code",{className:"bg-blue-800 px-1 rounded",children:"VITE_GOOGLE_CSE_ID"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:206,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:206,columnNumber:11},void 0),U.jsxDEV("li",{children:["Add your Google API key to ",U.jsxDEV("code",{className:"bg-blue-800 px-1 rounded",children:"VITE_GOOGLE_API_KEY"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:207,columnNumber:42},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:207,columnNumber:11},void 0),U.jsxDEV("li",{children:["Add your OpenWeather API key to ",U.jsxDEV("code",{className:"bg-blue-800 px-1 rounded",children:"VITE_OPENWEATHER_API_KEY"},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:208,columnNumber:47},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:204,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:202,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/components/AdminPanel.tsx",lineNumber:81,columnNumber:5},void 0)};function HY(){return U.jsxDEV(A3,{children:U.jsxDEV("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[U.jsxDEV(N3,{},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:12,columnNumber:9},this),U.jsxDEV("main",{className:"container mx-auto px-4 py-8",children:U.jsxDEV(UV,{children:[U.jsxDEV(gg,{path:"/",element:U.jsxDEV($3,{},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:15,columnNumber:38},this)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:15,columnNumber:13},this),U.jsxDEV(gg,{path:"/game/:gameId",element:U.jsxDEV(I3,{},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:16,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:16,columnNumber:13},this),U.jsxDEV(gg,{path:"/admin",element:U.jsxDEV(VY,{},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:17,columnNumber:43},this)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:17,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:14,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:13,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:11,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/App.tsx",lineNumber:10,columnNumber:5},this)}q0.createRoot(document.getElementById("root")).render(U.jsxDEV(zN.StrictMode,{children:U.jsxDEV(QV,{children:U.jsxDEV(HY,{},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/main.tsx",lineNumber:10,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/main.tsx",lineNumber:9,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/wilmc/Mobile Apps/SportsBettingForum/src/main.tsx",lineNumber:8,columnNumber:3},void 0));export{qS as B,nh as C,xI as H,Ma as P,Sr as R,OY as S,PY as a,ZE as b,EI as c,rx as d,DK as e,To as r};
