# Relevance AI Agent Integration

This document explains how to use the integrated Relevance AI agent for fetching and displaying NFL data in your sports betting forum.

## 🎯 Overview

The system now includes:
- **Relevance AI Agent Embed**: Interactive chat interface for admins
- **Agent Data Display**: Shows AI-generated content to users
- **Enhanced API**: Combines agent queries with LLM fallbacks
- **Database Integration**: Stores agent responses for user display

## 🚀 Quick Start

### 1. Access the Agent Interface
- Navigate to `/agent` in your application
- Use the embedded chat interface to interact with the AI agent
- Ask questions like:
  - "Get this week's NFL schedule"
  - "Analyze the Chiefs vs Bills game"
  - "Research the latest injuries for the Packers"

### 2. View Agent Data on Main Page
- Visit the homepage `/` to see AI-generated content
- The `AgentDataDisplay` component shows:
  - Latest NFL schedule
  - AI analysis and insights
  - Real-time updates from the agent

### 3. Admin Integration
- Go to `/admin` for the admin panel
- Use the new AI Agent features:
  - Agent Game Analysis
  - Team Research
  - Betting Analysis

## 🛠️ Configuration

### Environment Variables
Your `.env` file should include:
```env
# Relevance AI Configuration
VITE_RELEVANCE_API_KEY=sk-N2U1NTQ4ZjEtNWUyOC00YzdjLTk4ZmYtMjdlN2E0OTFlMWU3
VITE_RELEVANCE_AGENT_ID=34240c168039-4c82-b541-9e1fea2f5e3a
```

### Agent Setup
1. **Agent ID**: `34240c168039-4c82-b541-9e1fea2f5e3a`
2. **Project ID**: `bcbe5a`
3. **Embed URL**: Provided in your Relevance AI dashboard

## 📱 User Interface

### Agent Chat Interface (`/agent`)
- **Embedded iframe** with full chat functionality
- **Data refresh button** to update displays
- **Real-time responses** from the AI agent
- **Automatic data saving** to database

### Main Page Display (`/`)
- **AI Insights section** showing latest agent data
- **NFL Schedule** generated by the agent
- **Analysis display** with agent responses
- **Refresh functionality** for latest data

### Admin Panel (`/admin`)
- **Agent Game Analysis** button
- **Team Research** with dropdown selection
- **Betting Analysis** capabilities
- **Real-time agent integration**

## 🔧 Technical Implementation

### Components Created
1. **`RelevanceAIAgentEmbed.tsx`** - Main agent interface
2. **`AgentDataDisplay.tsx`** - User-facing data display
3. **`enhancedLLMSportsAPI.ts`** - Enhanced API with agent integration

### API Methods
- `queryAgentPublic()` - Public method to query the agent
- `analyzeGameWithAgent()` - Game analysis using agent
- `researchTeamNews()` - Team research capabilities
- `generateBettingAnalysis()` - Betting recommendations

### Data Flow
1. **Admin** interacts with agent via `/agent`
2. **Agent responses** are saved to Supabase database
3. **Users** see agent data on homepage via `AgentDataDisplay`
4. **System** falls back to LLM if agent unavailable

## 🎮 Usage Examples

### For Admins
```javascript
// In the agent interface, ask:
"Get the NFL schedule for Week 1 of 2025"
"Analyze the matchup between Chiefs and Bills"
"Research injuries for the Green Bay Packers"
"Provide betting analysis for tonight's games"
```

### For Users
- View AI-generated schedules on homepage
- See agent analysis and insights
- Access real-time NFL data
- Get betting recommendations

## 🔄 Data Synchronization

### Automatic Updates
- Agent data refreshes every 5 minutes
- Database stores latest agent responses
- Homepage displays cached data for performance
- Manual refresh available for immediate updates

### Fallback System
1. **Primary**: Relevance AI Agent
2. **Secondary**: OpenAI GPT-4
3. **Tertiary**: Mock data for development

## 📊 Features

### Agent Capabilities
- ✅ **Schedule Generation** - Real NFL matchups
- ✅ **Game Analysis** - Deep matchup insights
- ✅ **Team Research** - Injury reports and news
- ✅ **Betting Analysis** - Spread and over/under recommendations
- ✅ **Live Updates** - Real-time game status
- ✅ **Natural Language** - Conversational interface

### Integration Features
- ✅ **Database Storage** - Persistent agent responses
- ✅ **User Display** - Homepage integration
- ✅ **Admin Interface** - Dedicated agent chat
- ✅ **Error Handling** - Graceful fallbacks
- ✅ **Real-time Updates** - Live data refresh

## 🚨 Important Notes

### Cost Considerations
- **Relevance AI**: Pay per API call
- **OpenAI**: Token-based pricing
- **Optimization**: Agent used only when needed

### Data Accuracy
- Agent responses may vary in accuracy
- Always verify critical betting data
- Use as supplementary analysis tool

### Legal Compliance
- Ensure agent outputs comply with gambling regulations
- Monitor for appropriate content
- Implement content moderation if needed

## 🐛 Troubleshooting

### Common Issues

1. **Agent Not Loading**
   - Check API key configuration
   - Verify agent ID is correct
   - Ensure network connectivity

2. **Data Not Displaying**
   - Check database connection
   - Verify Supabase configuration
   - Clear browser cache

3. **Slow Responses**
   - Agent queries may take time
   - Implement caching strategies
   - Use background processing

### Debug Tools
- Check browser console for errors
- Use `/test-enhanced` for testing
- Monitor network requests
- Verify environment variables

## 🔮 Future Enhancements

- **Multi-Agent System** - Different agents for different tasks
- **Voice Integration** - Audio input/output
- **Real-time Streaming** - Live agent responses
- **Custom Workflows** - Automated analysis pipelines
- **Mobile Optimization** - Enhanced mobile interface

## 📞 Support

- **Relevance AI Dashboard**: Manage your agent
- **Embed Configuration**: Customize the chat interface
- **API Documentation**: Full API reference available
- **Community**: Join AI agent development communities

---

**🎉 Your Relevance AI agent is now fully integrated!**

Admins can use `/agent` to interact with the AI, and users will see the results on the main page. The system provides a seamless blend of AI-powered insights with your existing sports betting forum functionality.